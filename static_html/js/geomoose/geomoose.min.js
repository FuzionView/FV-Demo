/*! For license information please see geomoose.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.gm3=e():t.gm3=e()}(self,(function(){return(()=>{var __webpack_modules__={6713:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r}),t=n.hmd(t);const r=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:t)},4231:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?At:t.color}function a(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var w=function(){},x=function(){},S=function(){},E=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},E.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},E.prototype.getOrdinate=function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new v("Invalid ordinate index: "+t)},E.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},E.prototype.equals=function(t){return t instanceof E&&this.equals2D(t)},E.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},E.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},E.prototype.clone=function(){},E.prototype.copy=function(){return new E(this)},E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},E.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},E.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},E.prototype.hashCode=function(){var t=17;return 37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},E.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},E.prototype.interfaces_=function(){return[w,x,e]},E.prototype.getClass=function(){return E},E.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},C.DimensionalComparator.get=function(){return N},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return _.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(E,C);var N=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};N.prototype.compare=function(t,e){var n=t,r=e,i=N.compare(n.x,r.x);if(0!==i)return i;var o=N.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:N.compare(n.z,r.z)},N.prototype.interfaces_=function(){return[S]},N.prototype.getClass=function(){return N},N.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var P=function(){};P.prototype.create=function(){},P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P};var O=function(){},T={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.toLocationSymbol=function(t){switch(t){case O.EXTERIOR:return"e";case O.BOUNDARY:return"b";case O.INTERIOR:return"i";case O.NONE:return"-"}throw new v("Unknown location value: "+t)},T.INTERIOR.get=function(){return 0},T.BOUNDARY.get=function(){return 1},T.EXTERIOR.get=function(){return 2},T.NONE.get=function(){return-1},Object.defineProperties(O,T);var I=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},M=function(){},k={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},M.average=function(t,e){return(t+e)/2},k.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,k);var L=function(t){this.str=t};L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str};var A=function(t){this.value=t};A.prototype.intValue=function(){return this.value},A.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},A.isNaN=function(t){return Number.isNaN(t)};var R=function(){};R.isWhitespace=function(t){return t<=32&&t>=0||127===t},R.toUpperCase=function(t){return t.toUpperCase()};var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},j={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=F.magnitude(n._hi),i=F.TEN.pow(r);(n=n.divide(i)).gt(F.TEN)?(n=n.divide(F.TEN),r+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),r-=1);for(var o=r+1,s=new L,a=F.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,s.append(h),n=n.subtract(F.valueOf(u)).multiply(F.TEN),c&&n.selfAdd(F.TEN);var p=!0,f=F.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-l&&(p=!1),!p)break}return e[0]=r,s.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(i=(u=F.SPLIT*l)-(i=u-l))*(s=(h=F.SPLIT*n)-(s=h-n))-(c=l*n)+i*(a=n-s)+(o=l-i)*s+o*a,h=l+(u=(this._hi-c-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+u,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,l=null;return n=(o=this._hi/t._hi)-(e=(s=F.SPLIT*o)-(e=s-o)),l=e*(r=(l=F.SPLIT*t._hi)-(r=l-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-l+this._lo-o*t._lo)/t._hi,new F(l=o+s,o-l+s)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?F.createNaN():F.copy(this).selfDivide(u,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),n=F.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=F.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,p=null,f=null,d=null,g=null,y=null;f=this._hi+l,h=this._lo+u,d=f-(g=f-this._hi),p=h-(y=h-this._lo);var m=(c=f+(g=(d=l-g+(this._hi-d))+h))+(g=(p=u-y+(this._lo-p))+(g+(f-c))),v=g+(c-m);return this._hi=m,this._lo=v,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,l=null,u=null;i=(l=F.SPLIT*this._hi)-this._hi,u=F.SPLIT*n,i=l-i,o=this._hi-i,s=u-n;var c=(l=this._hi*n)+(u=i*(s=u-s)-l+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=u+(i=l-c);return this._hi=c,this._lo=h,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return _.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+F.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+F.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},F.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=F.SPLIT*n)-(i=s-n)),o=(a=F.SPLIT*this._hi)-this._hi;var l=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new F(l,n-l+s)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=F.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,w,x]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return F.parse(t)}if("number"==typeof arguments[0])return new F(arguments[0])},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;R.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new F,s=0,a=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,R.isDigit(u)){var c=u-"0";o.selfMultiply(F.TEN),o.selfAdd(c),s++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=A.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-l;if(0===f)p=o;else if(f>0){var d=F.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=F.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},F.createNaN=function(){return new F(_.NaN,_.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},F.stringOfChar=function(t,e){for(var n=new L,r=0;r<e;r++)n.append(t);return n.toString()},j.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},j.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},j.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},j.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},j.NaN.get=function(){return new F(_.NaN,_.NaN)},j.EPS.get=function(){return 123259516440783e-46},j.SPLIT.get=function(){return 134217729},j.MAX_PRINT_DIGITS.get=function(){return 32},j.TEN.get=function(){return F.valueOf(10)},j.ONE.get=function(){return F.valueOf(1)},j.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},j.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,j);var D=function(){},z={DP_SAFE_EPSILON:{configurable:!0}};D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D},D.orientationIndex=function(t,e,n){var r=D.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),s=F.valueOf(n.x).selfAdd(-e.x),a=F.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},D.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},D.intersection=function(t,e,n,r){var i=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),l=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(s).doubleValue(),c=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),p=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=F.valueOf(n.y).selfAdd(F.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new E(c,d)},D.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return D.signum(s);r=i+o}else{if(!(i<0))return D.signum(s);if(o>=0)return D.signum(s);r=-i-o}var a=D.DP_SAFE_EPSILON*r;return s>=a||-s>=a?D.signum(s):2},D.signum=function(t){return t>0?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(D,z);var q=function(){},B={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};B.X.get=function(){return 0},B.Y.get=function(){return 1},B.Z.get=function(){return 2},B.M.get=function(){return 3},q.prototype.setOrdinate=function(t,e,n){},q.prototype.size=function(){},q.prototype.getOrdinate=function(t,e){},q.prototype.getCoordinate=function(){},q.prototype.getCoordinateCopy=function(t){},q.prototype.getDimension=function(){},q.prototype.getX=function(t){},q.prototype.clone=function(){},q.prototype.expandEnvelope=function(t){},q.prototype.copy=function(){},q.prototype.getY=function(t){},q.prototype.toCoordinateArray=function(){},q.prototype.interfaces_=function(){return[x]},q.prototype.getClass=function(){return q},Object.defineProperties(q,B);var G=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(G),V=function(){};V.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var W=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,m=h.x*p.y-p.x*h.y,v=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-_*m,this.y=v*m-g*b,this.w=g*_-v*y}};W.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},W.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},W.prototype.getCoordinate=function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},W.prototype.interfaces_=function(){return[]},W.prototype.getClass=function(){return W},W.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-a*o,h=(o*u-l*s)/c,p=(a*s-i*u)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(p)||_.isInfinite(p))throw new U;return new E(h,p)};var H=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.init(o,s,a,l)}},Y={serialVersionUID:{configurable:!0}};H.prototype.getArea=function(){return this.getWidth()*this.getHeight()},H.prototype.equals=function(t){if(!(t instanceof H))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},H.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new H;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new H(e,r,n,i)},H.prototype.isNull=function(){return this._maxx<this._minx},H.prototype.getMaxX=function(){return this._maxx},H.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof H){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},H.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof H){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},H.prototype.getMinY=function(){return this._miny},H.prototype.getMinX=function(){return this._minx},H.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof H){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},H.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},H.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},H.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},H.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},H.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},H.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},H.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},H.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},H.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},H.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof H){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},H.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},H.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof H){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},H.prototype.getMaxY=function(){return this._maxy},H.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},H.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},H.prototype.interfaces_=function(){return[w,e]},H.prototype.getClass=function(){return H},H.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l||c<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),u>l||c<a))}},Y.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(H,Y);var X={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},K=function(t){this.geometryFactory=t||new me};K.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=X.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=X.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],$[n]&&(e=$[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},K.prototype.write=function(t){return this.extractGeometry(t)},K.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},$={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(X.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push($.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(X.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(X.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(X.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push($.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(X.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(X.trimParens,"$1"),n=$.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(X.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push($.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new K(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new H(this._inputLines[0][0],this._inputLines[0][1]),n=new H(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,H.intersects(n,r,e)&&0===at.orientationIndex(n,r,e)&&0===at.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=W.intersection(t,n,r,i)}catch(s){if(!(s instanceof U))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new E(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=D.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new E(t),o=new E(e),s=new E(n),a=new E(r),l=new E;this.normalizeToEnvCentre(i,o,s,a,l);var u=this.safeHCoordinateIntersection(i,o,s,a);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=H.intersects(e,n,r),s=H.intersects(e,n,i),a=H.intersects(r,i,e),l=H.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>u?o:u)+(a<h?a:h))/2,d=((s>c?s:c)+(l<p?l:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!H.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,r),s=at.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(r,i,e),l=at.orientationIndex(r,i,n);return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new E(r):0===s?this._intPt[0]=new E(i):0===a?this._intPt[0]=new E(e):0===l&&(this._intPt[0]=new E(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=at.distancePointLine(t,n,r),s=at.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=at.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(r,i,o,s)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=ot.signOfDet2x2(i,o,s,a);if(0===l)return this._isPointOnSegment=!0,null;a<o&&(l=-l),l>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==O.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?O.BOUNDARY:this._crossingCount%2==1?O.INTERIOR:O.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof E&&I(arguments[1],q)){for(var t=arguments[1],e=new st(arguments[0]),n=new E,r=new E,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var l=o[a],u=o[a-1];if(s.countSegment(l,u),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return D.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(I(arguments[0],q)){var s=arguments[0],a=s.size();if(a<3)return 0;var l=new E,u=new E,c=new E;s.getCoordinate(0,u),s.getCoordinate(1,c);var h=u.x;c.x-=h;for(var p=0,f=1;f<a-1;f++)l.y=u.y,u.x=c.x,u.y=c.y,s.getCoordinate(f+1,c),c.x-=h,p+=u.x*(l.y-c.y);return p/2}},at.distanceLineLine=function(t,e,n,r){if(t.equals(e))return at.distancePointLine(t,n,r);if(n.equals(r))return at.distancePointLine(r,t,e);var i=!1;if(H.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?M.min(at.distancePointLine(t,n,r),at.distancePointLine(e,n,r),at.distancePointLine(n,t,e),at.distancePointLine(r,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==O.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,l=r.y,u=a-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=a,o=l}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var l=t[s],u=t[a];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=at.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=at.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),u=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l;if(u<=0)return o.distance(s);if(u>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l;return Math.abs(c)*Math.sqrt(l)}},at.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return at.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return at.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,lt);var ut=function(){};ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new H(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[x,w,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ct,ht);var pt=function(){};pt.interfaces_=function(){return[ut]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var wt=function(){};wt.prototype.hasNext=function(){},wt.prototype.next=function(){},wt.prototype.remove=function(){};var xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var St=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Et(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(xt),Et=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(wt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<a.length;u++)this.add(a[u],l);else for(var c=a.length-1;c>=0;c--)this.add(a[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],v=1;y>m&&(v=-1);for(var _=y;_!==m;_+=v)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(St),Nt=function(){},Pt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Pt.ForwardComparator.get=function(){return Ot},Pt.BidirectionalComparator.get=function(){return Tt},Pt.coordArrayType.get=function(){return new Array(0).fill(null)},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},Nt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Nt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Nt.indexOf(r,e)<0)return r}return null},Nt.scroll=function(t,e){var n=Nt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);V.arraycopy(t,n,r,0,t.length-n),V.arraycopy(t,0,r,t.length-n,n),V.arraycopy(r,0,t,0,t.length)},Nt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Nt.intersection=function(t,e){for(var n=new Ct,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Nt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Nt.removeRepeatedPoints=function(t){return Nt.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},Nt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Nt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Nt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new E(r[i+l])},Nt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Nt.envelope=function(t){for(var e=new H,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Nt.toCoordinateArray=function(t){return t.toArray(Nt.coordArrayType)},Nt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Nt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Nt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Nt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Nt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Nt.extract=function(t,e,n){e=M.clamp(e,0,t.length);var r=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Nt,Pt);var Ot=function(){};Ot.prototype.compare=function(t,e){return Nt.compare(t,e)},Ot.prototype.interfaces_=function(){return[S]},Ot.prototype.getClass=function(){return Ot};var Tt=function(){};Tt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Nt.compare(n,r);return Nt.isEqualReversed(n,r)?0:i},Tt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Nt.increasingDirection(n),o=Nt.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(r[a]);if(0!==u)return u;s+=i,a+=o}return 0},Tt.prototype.interfaces_=function(){return[S]},Tt.prototype.getClass=function(){return Tt};var It=function(){};It.prototype.get=function(){},It.prototype.put=function(){},It.prototype.size=function(){},It.prototype.values=function(){},It.prototype.entrySet=function(){};var Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(It);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var kt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Lt(this)},e}(o),Lt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(wt),At=0;(h.prototype=new Mt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:At,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:At,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===u(a(a(t)))){var e=c(a(a(t)));1===s(e)?(l(a(t),At),l(e,At),l(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),l(a(t),At),l(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=u(a(a(t)));1===s(n)?(l(a(t),At),l(n,At),l(a(a(t)),1),t=a(a(t))):(t===u(a(t))&&(t=a(t),this.rotateRight(t)),l(a(t),At),l(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=At},h.prototype.values=function(){var t=new St,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new kt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Rt=function(){};Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Ft(this)};var Ft=function(t){this.treeSet_=t,this.position_=0};Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new i};var jt=function(){};jt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},jt.asList=function(t){for(var e=new St,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Dt=function(){},zt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};zt.P.get=function(){return 0},zt.L.get=function(){return 1},zt.A.get=function(){return 2},zt.FALSE.get=function(){return-1},zt.TRUE.get=function(){return-2},zt.DONTCARE.get=function(){return-3},zt.SYM_FALSE.get=function(){return"F"},zt.SYM_TRUE.get=function(){return"T"},zt.SYM_DONTCARE.get=function(){return"*"},zt.SYM_P.get=function(){return"0"},zt.SYM_L.get=function(){return"1"},zt.SYM_A.get=function(){return"2"},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Dt.toDimensionSymbol=function(t){switch(t){case Dt.FALSE:return Dt.SYM_FALSE;case Dt.TRUE:return Dt.SYM_TRUE;case Dt.DONTCARE:return Dt.SYM_DONTCARE;case Dt.P:return Dt.SYM_P;case Dt.L:return Dt.SYM_L;case Dt.A:return Dt.SYM_A}throw new v("Unknown dimension value: "+t)},Dt.toDimensionValue=function(t){switch(R.toUpperCase(t)){case Dt.SYM_FALSE:return Dt.FALSE;case Dt.SYM_TRUE:return Dt.TRUE;case Dt.SYM_DONTCARE:return Dt.DONTCARE;case Dt.SYM_P:return Dt.P;case Dt.SYM_L:return Dt.L;case Dt.SYM_A:return Dt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(Dt,zt);var qt=function(){};qt.prototype.filter=function(t){},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Bt=function(){};Bt.prototype.filter=function(t,e){},Bt.prototype.isDone=function(){},Bt.prototype.isGeometryChanged=function(){},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt};var Gt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new H,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();jt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Dt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Dt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(jt.asList(this._geometries)),n=new f(jt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var l=this.getGeometryN(a),u=i.getGeometryN(a),c=l.compareToSameClass(u,r);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(I(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(I(arguments[0],Bt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],qt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(I(arguments[0],ut)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Dt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Gt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof Kt?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new St;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Nt.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Wt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){return 1===arguments.length?new Vt(arguments[0]).getBoundary():2===arguments.length?new Vt(arguments[0],arguments[1]).getBoundary():void 0};var Wt=function(){this.count=null};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Ht=function(){},Yt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Ht.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Ht.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Ht.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Ht.split=function(t,e){for(var n=e.length,r=new St,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),l=0;l<a.length;l++)a[l]=r.get(l);return a},Ht.toString=function(){if(1===arguments.length){var t=arguments[0];return Ht.SIMPLE_ORDINATE_FORMAT.format(t)}},Ht.spaces=function(t){return Ht.chars(" ",t)},Yt.NEWLINE.get=function(){return V.getProperty("line.separator")},Yt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Ht,Yt);var Xt=function(){};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Xt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,q.X)===t.getOrdinate(e-1,q.X)&&t.getOrdinate(0,q.Y)===t.getOrdinate(e-1,q.Y)},Xt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(s)&&_.isNaN(a)))return!1}return!0},Xt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Xt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Xt.copy(e,i-1,r,o,1);return r},Xt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Xt.swap(t,r,e-r)},Xt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Xt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Xt.copyCoord(t,e+o,n,r+o)},Xt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new L;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Ht.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Xt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Xt.createClosedRing(t,e,4):e.getOrdinate(0,q.X)===e.getOrdinate(n-1,q.X)&&e.getOrdinate(0,q.Y)===e.getOrdinate(n-1,q.Y)?e:Xt.createClosedRing(t,e,n+1)},Xt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Xt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Xt.copy(e,0,r,o,1);return r};var Kt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new H:this._points.expandEnvelope(new H)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Xt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Dt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Xt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(I(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(I(arguments[0],Bt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],qt)||I(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var $t=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new H;var t=new H;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Dt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(I(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(I(arguments[0],Bt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],qt)||I(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o==(u!==s))return!1;o=l,s=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);jt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Nt.minCoordinate(e.getCoordinates());Nt.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],at.isCCW(e.getCoordinates())===n&&Nt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),p=i.getInteriorRingN(c),f=h.compareToSameClass(p,r);if(0!==f)return f;c++}return c<l?1:c<u?-1:0}},e.prototype.apply=function(t){if(I(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(I(t,Bt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(I(t,qt))t.filter(this);else if(I(t,ut)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Dt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Gt),ee=function(t){function e(e,n){e instanceof E&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Dt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Xt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Kt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new St,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Gt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Gt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof $t||t instanceof Kt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new St,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new St,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return se},ie.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Kt?e.createLineString(n):t instanceof $t?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $t?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new E}else if(I(arguments[0],q)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var l=0;l<s;l++)this._coordinates[l]=new E}},ue={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case q.X:this._coordinates[t].x=n;break;case q.Y:this._coordinates[t].y=n;break;case q.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case q.X:return this._coordinates[t].x;case q.Y:return this._coordinates[t].y;case q.Z:return this._coordinates[t].z}return _.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new E(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new L(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[q,e]},le.prototype.getClass=function(){return le},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ue);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(I(arguments[0],q))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ce.prototype.interfaces_=function(){return[P,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new St,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new kt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(It),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new A(n).compareTo(new A(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,w]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ye),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var me=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?I(arguments[0],P)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Kt(this.getCoordinateSequenceFactory().create(t),this):I(t,q)?new Kt(t,this):void 0:new Kt(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Qt)return this.createMultiPolygon(me.toPolygonArray(t));if(a instanceof Kt)return this.createMultiLineString(me.toLineStringArray(t));if(a instanceof $t)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(I(arguments[0],q))return new $t(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(I(arguments[0],q)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new Gt(null,this):1===arguments.length?new Gt(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(I(arguments[0],q))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(I(arguments[0],q)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Xt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new me};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!we[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?we[n].apply(this,[e.coordinates]):"GeometryCollection"===n?we[n].apply(this,[e.geometries]):we[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!xe[e])throw new Error("Geometry is not supported");return xe[e].apply(this,[t])};var we={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!we[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=we.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new E(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=we.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=we.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=we.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(we.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},xe={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:xe.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(xe.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=xe.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=xe.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(xe[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Se=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Se.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Se.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ee=function(){this.parser=new be(this.geometryFactory)};Ee.prototype.write=function(t){return this.parser.write(t)};var Ce=function(){},Ne={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Ne.ON.get=function(){return 0},Ne.LEFT.get=function(){return 1},Ne.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Ne),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new xt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Pe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Pe.prototype.getCoordinate=function(){return this._minCoord},Pe.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Pe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=at.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===at.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Pe.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ce.LEFT;return n[e].y<n[e+1].y&&(r=Ce.RIGHT),r},Pe.prototype.getEdge=function(){return this._orientedDe},Pe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Pe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Pe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe};var Oe=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Te=function(){this.array_=[]};Te.prototype.addLast=function(t){this.array_.push(t)},Te.prototype.removeFirst=function(){return this.array_.shift()},Te.prototype.isEmpty=function(){return 0===this.array_.length};var Ie=function(){this._finder=null,this._dirEdgeList=new St,this._nodes=new St,this._rightMostCoord=null,this._env=null,this._finder=new Pe};Ie.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ie.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ie.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Oe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ie.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ie.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ie.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ie.prototype.computeDepths=function(t){var e=new kt,n=new Te,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ie.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ie.prototype.getEnvelope=function(){if(null===this._env){for(var t=new H,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ie.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ie.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Ie.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ie.prototype.getNodes=function(){return this._nodes},Ie.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ie.prototype.interfaces_=function(){return[w]},Ie.prototype.getClass=function(){return Ie};var Me=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ce.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=s,this.location[Ce.RIGHT]=a}};Me.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Me.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==O.NONE)return!1;return!0},Me.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===O.NONE&&(this.location[e]=t)},Me.prototype.isLine=function(){return 1===this.location.length},Me.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=O.NONE,e[Ce.RIGHT]=O.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===O.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Me.prototype.getLocations=function(){return this.location},Me.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ce.LEFT];this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},Me.prototype.toString=function(){var t=new L;return this.location.length>1&&t.append(O.toLocationSymbol(this.location[Ce.LEFT])),t.append(O.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(O.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},Me.prototype.setLocations=function(t,e,n){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=n},Me.prototype.get=function(t){return t<this.location.length?this.location[t]:O.NONE},Me.prototype.isArea=function(){return this.location.length>1},Me.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===O.NONE)return!0;return!1},Me.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Me.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(O.NONE)},Me.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Me.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var ke=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Me(e),this.elt[1]=new Me(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Me(n.elt[0]),this.elt[1]=new Me(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Me(O.NONE),this.elt[1]=new Me(O.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Me(o,s,a),this.elt[1]=new Me(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Me(O.NONE,O.NONE,O.NONE),this.elt[1]=new Me(O.NONE,O.NONE,O.NONE),this.elt[l].setLocations(u,c,h)}};ke.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},ke.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},ke.prototype.isNull=function(t){return this.elt[t].isNull()},ke.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},ke.prototype.isLine=function(t){return this.elt[t].isLine()},ke.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Me(t.elt[e]):this.elt[e].merge(t.elt[e])},ke.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},ke.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},ke.prototype.toString=function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},ke.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},ke.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},ke.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},ke.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},ke.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},ke.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Me(this.elt[t].location[0]))},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.toLineLabel=function(t){for(var e=new ke(O.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Le=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new St,this._pts=new St,this._label=new ke(O.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new St,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Le.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Le.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Le.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Oe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Oe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Le.prototype.getLinearRing=function(){return this._ring},Le.prototype.getCoordinate=function(t){return this._pts.get(t)},Le.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Le.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Le.prototype.isHole=function(){return this._isHole},Le.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Le.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Le.prototype.addHole=function(t){this._holes.add(t)},Le.prototype.isShell=function(){return null===this._shell},Le.prototype.getLabel=function(){return this._label},Le.prototype.getEdges=function(){return this._edges},Le.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Le.prototype.getShell=function(){return this._shell},Le.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ce.RIGHT);if(n===O.NONE)return null;if(this._label.getLocation(e)===O.NONE)return this._label.setLocation(e,n),null}},Le.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Le.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Ae=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new St,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ae(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var je=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new ke(0,O.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=O.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==O.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new ke(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof ke)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===O.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=O.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;if(e===O.BOUNDARY)n=O.INTERIOR;else n=O.BOUNDARY;this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),De=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};De.prototype.find=function(t){return this.nodeMap.get(t)},De.prototype.addNode=function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof je){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},De.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},De.prototype.iterator=function(){return this.nodeMap.values().iterator()},De.prototype.values=function(){return this.nodeMap.values()},De.prototype.getBoundaryNodes=function(t){for(var e=new St,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===O.BOUNDARY&&e.add(r)}return e},De.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var ze=function(){},qe={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.isNorthern=function(t){return t===ze.NE||t===ze.NW},ze.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ze.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ze.isInHalfPlane=function(t,e){return e===ze.SE?t===ze.SE||t===ze.SW:t===e||t===e+1},ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ze.NE:ze.SE:e>=0?ze.NW:ze.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ze.NE:ze.SE:r.y>=n.y?ze.NW:ze.SW}},qe.NE.get=function(){return 0},qe.NW.get=function(){return 1},qe.SW.get=function(){return 2},qe.SE.get=function(){return 3},Object.defineProperties(ze,qe);var Be=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};Be.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Be.prototype.getDy=function(){return this._dy},Be.prototype.getCoordinate=function(){return this._p0},Be.prototype.setNode=function(t){this._node=t},Be.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Be.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Be.prototype.getDirectedCoordinate=function(){return this._p1},Be.prototype.getDx=function(){return this._dx},Be.prototype.getLabel=function(){return this._label},Be.prototype.getEdge=function(){return this._edge},Be.prototype.getQuadrant=function(){return this._quadrant},Be.prototype.getNode=function(){return this._node},Be.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Be.prototype.computeLabel=function(t){},Be.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ze.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Be.prototype.interfaces_=function(){return[w]},Be.prototype.getClass=function(){return Be};var Ge=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new ke(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===O.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===O.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,O.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,O.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ce.LEFT&&(r=-1);var i=Ce.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===O.EXTERIOR&&e===O.INTERIOR?1:t===O.INTERIOR&&e===O.EXTERIOR?-1:0},e}(Be),Ue=function(){};Ue.prototype.createNode=function(t){return new je(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var Ve=function(){if(this._edges=new St,this._nodes=null,this._edgeEndList=new St,0===arguments.length)this._nodes=new De(new Ue);else if(1===arguments.length){var t=arguments[0];this._nodes=new De(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof je){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===O.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&at.computeOrientation(t,e,r)===at.COLLINEAR&&ze.quadrant(t,e)===ze.quadrant(n,r)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ge(n,!0),i=new Ge(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var We=function(){this._geometryFactory=null,this._shellList=new St;var t=arguments[0];this._geometryFactory=t};We.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},We.prototype.computePolygons=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},We.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Oe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},We.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new St,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},We.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},We.prototype.buildMaximalEdgeRings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Re(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},We.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},We.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},We.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&at.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=l)}return o},We.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},We.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new St,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var He=function(){};He.prototype.getBounds=function(){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ye=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ye.prototype.getItem=function(){return this._item},Ye.prototype.getBounds=function(){return this._bounds},Ye.prototype.interfaces_=function(){return[He,e]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){this._size=null,this._items=null,this._size=0,this._items=new St,this._items.add(null)};Xe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Xe.prototype.size=function(){return this._size},Xe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Xe.prototype.clear=function(){this._size=0,this._items.clear()},Xe.prototype.isEmpty=function(){return 0===this._size},Xe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ke=function(){};Ke.prototype.visitItem=function(t){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var $e=function(){if(this._childBoundables=new St,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};$e.prototype.getLevel=function(){return this._level},$e.prototype.size=function(){return this._childBoundables.size()},$e.prototype.getChildBoundables=function(){return this._childBoundables},$e.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},$e.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},$e.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},$e.prototype.interfaces_=function(){return[He,e]},$e.prototype.getClass=function(){return $e},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties($e,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?jt.sort(n,e):jt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new St;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[w]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof $e};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new St,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof $e?t+=this.size(n):n instanceof Ye&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ye&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new St:t}if(1===arguments.length){for(var e=arguments[0],n=new St,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof $e){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Ye?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ye(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new St;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof $e?this.boundablesAtLevel(n,s,i):(et.isTrue(s instanceof Ye),-1===n&&i.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new St;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(I(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof $e)for(var i=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var l=s.get(a);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof $e?this.query(i,l,o):l instanceof Ye?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(I(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof $e)for(var u=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),u)&&(f instanceof $e?this.query(u,f,c):f instanceof Ye?c.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof $e&&(o=this.remove(n,l,i))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof $e){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new St;n.add(this.createNode(e));var r=new St(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new St,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new St;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(I(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof $e){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(I(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof $e){var a=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,a,l,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new St(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(I(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&I(arguments[1],on)){var i=arguments[0],o=arguments[1],s=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],u=null,c=new Xe;for(c.add(a);!c.isEmpty()&&l>0;){var h=c.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new Ye(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return an},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new H(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($e),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ln.relativeSign(e.x,n.x),i=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(r,i);case 1:return ln.compareValue(i,r);case 2:return ln.compareValue(i,-r);case 3:return ln.compareValue(-r,i);case 4:return ln.compareValue(-r,-i);case 5:return ln.compareValue(-i,-r);case 6:return ln.compareValue(-i,r);case 7:return ln.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[w]},un.prototype.getClass=function(){return un};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Ct;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new St;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new A(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new E(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new A(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new E(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new E(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new v("Cannot compute the octant for two identical points "+i);return hn.octant(s,a)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new E(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new le(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new St;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new E,this.p1=new E;else if(1===arguments.length){var t=arguments[0];this.p0=new E(t.p0),this.p1=new E(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(e,n),this.p1=new E(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return at.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return W.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,l=e*o/s}return new E(n-l,r+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[w,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var mn=function(){this.tempEnv1=new H,this.tempEnv2=new H,this._overlapSeg1=new gn,this._overlapSeg2=new gn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new H(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new St;n.add(new A(e));do{var r=_n.findChainEnd(t,e);n.add(new A(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ze.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ze.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new St,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new vn(e,i[o],i[o+1],n);r.add(s)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var wn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};wn.prototype.setSegmentIntersector=function(t){this._segInt=t},wn.prototype.interfaces_=function(){return[bn]},wn.prototype.getClass=function(){return wn};var xn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new St,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Sn},Object.defineProperties(e,n),e}(wn),Sn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),En=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Cn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};En.prototype.getEndCapStyle=function(){return this._endCapStyle},En.prototype.isSingleSided=function(){return this._isSingleSided},En.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=En.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=En.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==En.JOIN_ROUND&&(this._quadrantSegments=En.DEFAULT_QUADRANT_SEGMENTS)},En.prototype.getJoinStyle=function(){return this._joinStyle},En.prototype.setJoinStyle=function(t){this._joinStyle=t},En.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},En.prototype.getSimplifyFactor=function(){return this._simplifyFactor},En.prototype.getQuadrantSegments=function(){return this._quadrantSegments},En.prototype.setEndCapStyle=function(t){this._endCapStyle=t},En.prototype.getMitreLimit=function(){return this._mitreLimit},En.prototype.setMitreLimit=function(t){this._mitreLimit=t},En.prototype.setSingleSided=function(t){this._isSingleSided=t},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Cn.CAP_ROUND.get=function(){return 1},Cn.CAP_FLAT.get=function(){return 2},Cn.CAP_SQUARE.get=function(){return 3},Cn.JOIN_ROUND.get=function(){return 1},Cn.JOIN_MITRE.get=function(){return 2},Cn.JOIN_BEVEL.get=function(){return 3},Cn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(En,Cn);var Nn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Pn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Nn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Nn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Nn.prototype.isShallowConcavity=function(t,e,n,r){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<r},Nn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Nn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Nn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nn.DELETE;)e++;return e},Nn.prototype.isShallow=function(t,e,n,r){return at.distancePointLine(e,t,n)<r},Nn.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.simplify=function(t,e){return new Nn(t).simplify(e)},Pn.INIT.get=function(){return 0},Pn.DELETE.get=function(){return 1},Pn.KEEP.get=function(){return 1},Pn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nn,Pn);var On=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new St},Tn={COORDINATE_ARRAY_TYPE:{configurable:!0}};On.prototype.getCoordinates=function(){return this._ptList.toArray(On.COORDINATE_ARRAY_TYPE)},On.prototype.setPrecisionModel=function(t){this._precisionModel=t},On.prototype.addPt=function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},On.prototype.revere=function(){},On.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},On.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},On.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},On.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},On.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},Tn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(On,Tn);var In=function(){},Mn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.toDegrees=function(t){return 180*t/Math.PI},In.normalize=function(t){for(;t>Math.PI;)t-=In.PI_TIMES_2;for(;t<=-Math.PI;)t+=In.PI_TIMES_2;return t},In.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},In.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},In.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},In.interiorAngle=function(t,e,n){var r=In.angle(e,t),i=In.angle(e,n);return Math.abs(i-r)},In.normalizePositive=function(t){if(t<0){for(;t<0;)t+=In.PI_TIMES_2;t>=In.PI_TIMES_2&&(t=0)}else{for(;t>=In.PI_TIMES_2;)t-=In.PI_TIMES_2;t<0&&(t=0)}return t},In.angleBetween=function(t,e,n){var r=In.angle(e,t),i=In.angle(e,n);return In.diff(r,i)},In.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},In.toRadians=function(t){return t*Math.PI/180},In.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?In.COUNTERCLOCKWISE:n<0?In.CLOCKWISE:In.NONE},In.angleBetweenOriented=function(t,e,n){var r=In.angle(e,t),i=In.angle(e,n)-r;return i<=-Math.PI?i+In.PI_TIMES_2:i>Math.PI?i-In.PI_TIMES_2:i},Mn.PI_TIMES_2.get=function(){return 2*Math.PI},Mn.PI_OVER_2.get=function(){return Math.PI/2},Mn.PI_OVER_4.get=function(){return Math.PI/4},Mn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Mn.CLOCKWISE.get=function(){return at.CLOCKWISE},Mn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(In,Mn);var kn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===En.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ln={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};kn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),r=n===at.CLOCKWISE&&this._side===Ce.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Ce.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},kn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ce.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ce.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case En.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case En.CAP_SQUARE:var l=new E;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new E(r.p1.x+l.x,r.p1.y+l.y),c=new E(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},kn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},kn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=W.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof U))throw t;o=new E(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},kn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===at.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)},kn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*kn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===En.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===En.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},kn.prototype.createSquare=function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},kn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},kn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},kn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},kn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},kn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=In.angle(i,this._seg0.p0),s=In.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=In.normalize(o+s),l=In.normalize(a+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(s)),h=i.x+u*Math.cos(l),p=i.y+u*Math.sin(l),f=new E(h,p),d=new gn(i,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Ce.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},kn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=i*n*o/a,u=i*n*s/a;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},kn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=0,c=new E;u<s;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},kn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*kn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},kn.prototype.createCircle=function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},kn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},kn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new On,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*kn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},kn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===En.JOIN_BEVEL||this._bufParams.getJoinStyle()===En.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},kn.prototype.closeRing=function(){this._segList.closeRing()},kn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},Ln.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ln.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(kn,Ln);var An=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};An.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Nt.reverse(o),o},An.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Nn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Nn.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],Ce.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},An.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ce.RIGHT&&(r=-r);var i=Nn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},An.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Nn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ce.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Nn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ce.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},An.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:e.createCircle(t);break;case En.CAP_SQUARE:e.createSquare(t)}},An.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},An.prototype.getBufferParameters=function(){return this._bufParams},An.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},An.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return An.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},An.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Nn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Nn.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],Ce.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},An.prototype.getSegGen=function(t){return new kn(this._precisionModel,this._bufParams,t)},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e};var Rn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Fn={DepthSegment:{configurable:!0}};Rn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new St,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(I(arguments[2],xt)&&arguments[0]instanceof E&&arguments[1]instanceof Ge){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(Ce.LEFT);this._seg.p0.equals(l[u])||(c=s.getDepth(Ce.RIGHT));var h=new jn(this._seg,c);a.add(h)}}else if(I(arguments[2],xt)&&arguments[0]instanceof E&&I(arguments[1],xt))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},Rn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Fn.DepthSegment.get=function(){return jn},Object.defineProperties(Rn,Fn);var jn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};jn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},jn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jn.prototype.toString=function(){return this._upwardSeg.toString()},jn.prototype.interfaces_=function(){return[w]},jn.prototype.getClass=function(){return jn};var Dn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Dn.prototype.area=function(){return Dn.area(this.p0,this.p1,this.p2)},Dn.prototype.signedArea=function(){return Dn.signedArea(this.p0,this.p1,this.p2)},Dn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return Dn.interpolateZ(t,this.p0,this.p1,this.p2)},Dn.prototype.longestSideLength=function(){return Dn.longestSideLength(this.p0,this.p1,this.p2)},Dn.prototype.isAcute=function(){return Dn.isAcute(this.p0,this.p1,this.p2)},Dn.prototype.circumcentre=function(){return Dn.circumcentre(this.p0,this.p1,this.p2)},Dn.prototype.area3D=function(){return Dn.area3D(this.p0,this.p1,this.p2)},Dn.prototype.centroid=function(){return Dn.centroid(this.p0,this.p1,this.p2)},Dn.prototype.inCentre=function(){return Dn.inCentre(this.p0,this.p1,this.p2)},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Dn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Dn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Dn.det=function(t,e,n,r){return t*r-e*n},Dn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,l=n.y-o,u=r.y-o,c=s*u-a*l,h=t.x-i,p=t.y-o,f=(u*h-a*p)/c,d=(-l*h+s*p)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},Dn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Dn.isAcute=function(t,e,n){return!!In.isAcute(t,e,n)&&!!In.isAcute(e,n,t)&&!!In.isAcute(n,t,e)},Dn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,l=e.y-i,u=2*Dn.det(o,s,a,l),c=Dn.det(s,o*o+s*s,l,a*a+l*l),h=Dn.det(o,o*o+s*s,a,a*a+l*l);return new E(r-c/u,i+h/u)},Dn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new W(t.x+n/2,t.y+r/2,1),o=new W(t.x-r+n/2,t.y+n+r/2,1);return new W(i,o)},Dn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new E(t.x+i*o,t.y+i*s)},Dn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=i*l-o*a,c=o*s-r*l,h=r*a-i*s,p=u*u+c*c+h*h;return Math.sqrt(p)/2},Dn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new E(r,i)},Dn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,l=(r*t.y+i*e.y+o*n.y)/s;return new E(a,l)};var zn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,O.EXTERIOR,O.INTERIOR)},zn.prototype.addPolygon=function(t){var e=this._distance,n=Ce.LEFT;this._distance<0&&(e=-this._distance,n=Ce.RIGHT);var r=t.getExteriorRing(),i=Nt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,O.EXTERIOR,O.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Nt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ce.opposite(n),O.INTERIOR,O.EXTERIOR)}},zn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Dn(t[0],t[1],t[2]),r=n.inCentre();return at.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},zn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Nt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,O.EXTERIOR,O.INTERIOR)},zn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new ke(0,O.BOUNDARY,e,n));this._curveList.add(r)},zn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=i,s=r,n=Ce.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},zn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Kt?this.addLineString(t):t instanceof $t?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof Gt)&&this.addCollection(t)},zn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},zn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var qn=function(){};qn.prototype.locate=function(t){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Bn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Bn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Bn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Gt?(this._subcollectionIterator=new Bn(t),this._subcollectionIterator.next()):t},Bn.prototype.remove=function(){throw new Error(this.getClass().getName())},Bn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Bn.prototype.interfaces_=function(){return[wt]},Bn.prototype.getClass=function(){return Bn},Bn.isAtomic=function(t){return!(t instanceof Gt)};var Gn=function(){this._geom=null;var t=arguments[0];this._geom=t};Gn.prototype.locate=function(t){return Gn.locate(t,this._geom)},Gn.prototype.interfaces_=function(){return[qn]},Gn.prototype.getClass=function(){return Gn},Gn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Gn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Gn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Gn.isPointInRing(t,i))return!1}return!0},Gn.containsPoint=function(t,e){if(e instanceof Qt)return Gn.containsPointInPolygon(t,e);if(e instanceof Gt)for(var n=new Bn(e);n.hasNext();){var r=n.next();if(r!==e&&Gn.containsPoint(t,r))return!0}return!1},Gn.locate=function(t,e){return e.isEmpty()?O.EXTERIOR:Gn.containsPoint(t,e)?O.INTERIOR:O.EXTERIOR};var Un=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[O.NONE,O.NONE]};Un.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=O.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ce.LEFT)!==O.NONE&&(e=r.getLocation(t,Ce.LEFT))}if(e===O.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ce.ON)===O.NONE&&a.setLocation(t,Ce.ON,i),a.isArea(t)){var l=a.getLocation(t,Ce.LEFT),u=a.getLocation(t,Ce.RIGHT);if(u!==O.NONE){if(u!==i)throw new Oe("side location conflict",s.getCoordinate());l===O.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=l}else et.isTrue(a.getLocation(t,Ce.LEFT)===O.NONE,"found single null side"),a.setLocation(t,Ce.RIGHT,i),a.setLocation(t,Ce.LEFT,i)}}},Un.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ce.LEFT);et.isTrue(r!==O.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ce.LEFT),l=s.getLocation(t,Ce.RIGHT);if(a===l)return!1;if(l!==i)return!1;i=a}return!0},Un.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new St(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===O.NONE&&(this._ptInAreaLocation[t]=Gn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===O.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=O.NONE;if(e[l])u=O.EXTERIOR;else{var c=s.getCoordinate();u=this.getLocation(l,c,t)}a.setAllLocationsIfNull(l,u)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Oe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ze.isNorthern(i)&&ze.isNorthern(o)?n:ze.isNorthern(i)||ze.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new St;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ce.LEFT),r=t.getDepth(Ce.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Oe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var l=this._edgeList.get(a);l.setEdgeDepths(Ce.RIGHT,s),s=l.getDepth(Ce.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=O.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=O.INTERIOR;break}if(r.isInResult()){t=O.EXTERIOR;break}}}if(t===O.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===O.INTERIOR):(s.isInResult()&&(i=O.EXTERIOR),a.isInResult()&&(i=O.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new ke(O.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==O.INTERIOR&&o!==O.BOUNDARY||this._label.setLocation(i,O.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new je(t,new Vn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Hn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Hn.prototype.compareTo=function(t){var e=t;return Hn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Hn.prototype.interfaces_=function(){return[w]},Hn.prototype.getClass=function(){return Hn},Hn.orientation=function(t){return 1===Nt.increasingDirection(t)},Hn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===s,p=(u+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Yn=function(){this._edges=new St,this._ocaMap=new h};Yn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Yn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Yn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Yn.prototype.iterator=function(){return this._edges.iterator()},Yn.prototype.getEdges=function(){return this._edges},Yn.prototype.get=function(t){return this._edges.get(t)},Yn.prototype.findEqualEdge=function(t){var e=new Hn(t.getCoordinates());return this._ocaMap.get(e)},Yn.prototype.add=function(t){this._edges.add(t);var e=new Hn(t.getCoordinates());this._ocaMap.put(e,t)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Xn=function(){};Xn.prototype.processIntersections=function(t,e,n,r){},Xn.prototype.isDone=function(){},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Kn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Kn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Kn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Kn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kn.prototype.getLineIntersector=function(){return this._li},Kn.prototype.hasProperIntersection=function(){return this._hasProper},Kn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Kn.prototype.hasIntersection=function(){return this._hasIntersection},Kn.prototype.isDone=function(){return!1},Kn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Kn.prototype.interfaces_=function(){return[Xn]},Kn.prototype.getClass=function(){return Kn},Kn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[w]},Zn.prototype.getClass=function(){return Zn};var $n=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};$n.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},$n.prototype.iterator=function(){return this._nodeMap.values().iterator()},$n.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},$n.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},$n.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new E(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new nr(o,new ke(this.edge._label))},$n.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},$n.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new St;n.add(new A(e));do{var r=this.findChainEnd(t,e);n.add(new A(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=ze.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ze.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new H,this.env2=new H;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[l];if(o-i==1&&l-a==1)return u.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+l)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,u),g<l&&this.computeIntersectsForChain(i,d,s,g,l,u)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,u),g<l&&this.computeIntersectsForChain(d,o,s,g,l,u))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?O.EXTERIOR:O.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==O.EXTERIOR&&r!==O.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===O.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===O.EXTERIOR?0:t===O.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new $n(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,ke.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new H;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new E(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var l=this.pts[a];i.equals2D(l)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new L;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(Fe),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Yn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new ke(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new St,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Rn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new St,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ie;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new xn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Kn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new An(n,this._bufParams),i=new zn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ve(new Wn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new We(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new nr(i.getCoordinates(),new ke(s));this.insertUniqueEdge(a)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),n=t.getLocation(0,Ce.RIGHT);return e===O.INTERIOR&&n===O.EXTERIOR?1:e===O.EXTERIOR&&n===O.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new me,n=new St;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(I(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},ir.prototype.scale=function(){if(I(arguments[0],bt)){for(var t=arguments[0],e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new E(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Nt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},sr={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],m=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},sr.fact.get=function(){return new me},Object.defineProperties(or,sr);var ar=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},lr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ar.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ar.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},ar.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ar.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ar.prototype.getCoordinate=function(){return this._originalPt},ar.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ar.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ar.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new H(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ar.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ar.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},ar.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},lr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ar,lr);var ur=function(){this.tempEnv1=new H,this.selectedSegment=new gn};ur.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ke]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(cr,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new St};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[Xn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof G))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(I(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new ar(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new xn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new ar(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new En,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof En&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],l=new gr(arguments[0]);return l.setQuadrantSegments(s),l.setEndCapStyle(a),l.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=M.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return En.CAP_ROUND},yr.CAP_BUTT.get=function(){return En.CAP_FLAT},yr.CAP_FLAT.get=function(){return En.CAP_FLAT},yr.CAP_SQUARE.get=function(){return En.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var mr=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof Kt&&arguments[1]instanceof E)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof mr&&arguments[0]instanceof Qt&&arguments[1]instanceof E){var s=arguments[0],a=arguments[1],l=arguments[2];vr.computeDistance(s.getExteriorRing(),a,l);for(var u=0;u<s.getNumInteriorRing();u++)vr.computeDistance(s.getInteriorRingN(u),a,l)}else if(arguments[2]instanceof mr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof Kt)vr.computeDistance(c,h,p);else if(c instanceof Qt)vr.computeDistance(c,h,p);else if(c instanceof Gt)for(var f=c,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);vr.computeDistance(g,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof mr&&arguments[0]instanceof gn&&arguments[1]instanceof E){var y=arguments[1],m=arguments[2],v=arguments[0].closestPoint(y);m.setMinimum(v,y)}};var _r=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return wr},br.MaxMidpointDistanceFilter.get=function(){return xr},Object.defineProperties(_r,br);var wr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};wr.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[ft]},wr.prototype.getClass=function(){return wr};var xr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};xr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.isDone=function(){return!1},xr.prototype.isGeometryChanged=function(){return!1},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[Bt]},xr.prototype.getClass=function(){return xr};var Sr=function(t){this._comps=t||null};Sr.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Sr.prototype.interfaces_=function(){return[qt]},Sr.prototype.getClass=function(){return Sr},Sr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Sr.getPolygons(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Gt&&e.apply(new Sr(n)),n}};var Er=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Er.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Kt&&this._lines.add(t)},Er.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Er.prototype.interfaces_=function(){return[ut]},Er.prototype.getClass=function(){return Er},Er.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Er.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Er.getLines(e,n))}},Er.getLines=function(){if(1===arguments.length){var t=arguments[0];return Er.getLines(t,!1)}if(2===arguments.length){if(I(arguments[0],bt)&&I(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Er.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new St;return i.apply(new Er(s,o)),s}if(arguments[0]instanceof ct&&I(arguments[1],bt)){var a=arguments[0],l=arguments[1];return a instanceof Kt?l.add(a):a.apply(new Er(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&I(arguments[0],bt)&&I(arguments[1],bt)){for(var u=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();Er.getLines(p,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&I(arguments[1],bt)){var f=arguments[1],d=arguments[2];return arguments[0].apply(new Er(f,d)),f}}};var Cr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Cr.prototype.locateInternal=function(){if(arguments[0]instanceof E&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return O.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===O.EXTERIOR)return O.EXTERIOR;if(r===O.BOUNDARY)return O.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===O.INTERIOR)return O.EXTERIOR;if(s===O.BOUNDARY)return O.BOUNDARY}return O.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof Kt){var a=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(a))return O.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!a.equals(u[0])&&!a.equals(u[u.length-1])?at.isOnLine(a,u)?O.INTERIOR:O.EXTERIOR:O.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof $t){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?O.INTERIOR:O.EXTERIOR}},Cr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):O.EXTERIOR},Cr.prototype.intersects=function(t,e){return this.locate(t,e)!==O.EXTERIOR},Cr.prototype.updateLocationInfo=function(t){t===O.INTERIOR&&(this._isIn=!0),t===O.BOUNDARY&&this._numBoundaries++},Cr.prototype.computeLocation=function(t,e){if(e instanceof $t&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Kt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ut)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Gt)for(var l=new Bn(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Cr.prototype.locate=function(t,e){return e.isEmpty()?O.EXTERIOR:e instanceof Kt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?O.BOUNDARY:this._numBoundaries>0||this._isIn?O.INTERIOR:O.EXTERIOR)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Nr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Pr={INSIDE_AREA:{configurable:!0}};Nr.prototype.isInsideArea=function(){return this._segIndex===Nr.INSIDE_AREA},Nr.prototype.getCoordinate=function(){return this._pt},Nr.prototype.getGeometryComponent=function(){return this._component},Nr.prototype.getSegmentIndex=function(){return this._segIndex},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Pr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Nr,Pr);var Or=function(t){this._pts=t||null};Or.prototype.filter=function(t){t instanceof $t&&this._pts.add(t)},Or.prototype.interfaces_=function(){return[qt]},Or.prototype.getClass=function(){return Or},Or.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $t?Qe.singletonList(t):Or.getPoints(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof Gt&&e.apply(new Or(n)),n}};var Tr=function(){this._locations=null;var t=arguments[0];this._locations=t};Tr.prototype.filter=function(t){(t instanceof $t||t instanceof Kt||t instanceof Qt)&&this._locations.add(new Nr(t,0,t.getCoordinate()))},Tr.prototype.interfaces_=function(){return[qt]},Tr.prototype.getClass=function(){return Tr},Tr.getLocations=function(t){var e=new St;return t.apply(new Tr(e)),e};var Ir=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Cr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Ir.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Sr.getPolygons(this._geom[e]);if(i.size()>0){var o=Tr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&I(arguments[0],xt)&&I(arguments[1],xt)){for(var s=arguments[0],a=arguments[1],l=arguments[2],u=0;u<s.size();u++)for(var c=s.get(u),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Nr&&arguments[1]instanceof Qt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(O.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Nr(f,g),null}},Ir.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Ir.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Er.getLines(this._geom[0]),n=Er.getLines(this._geom[1]),r=Or.getPoints(this._geom[0]),i=Or.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Ir.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ir.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ir.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ir.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=at.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Nr(t,o,a),n[1]=new Nr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Kt){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),p=u.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=at.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(h[f],h[f+1]),m=new gn(p[d],p[d+1]),v=y.closestPoints(m);c[0]=new Nr(l,f,v[0]),c[1]=new Nr(u,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ir.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Nr(i,0,i.getCoordinate()),n[1]=new Nr(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ir.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ir.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.distance=function(t,e){return new Ir(t,e).distance()},Ir.isWithinDistance=function(t,e,n){return new Ir(t,e,n).distance()<=n},Ir.nearestPoints=function(t,e){return new Ir(t,e).nearestPoints()};var Mr=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};Mr.prototype.getCoordinates=function(){return this._pt},Mr.prototype.getCoordinate=function(t){return this._pt[t]},Mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Mr.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Mr.prototype.getDistance=function(){return this._distance},Mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr};var kr=function(){};kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.computeDistance=function(){if(arguments[2]instanceof Mr&&arguments[0]instanceof Kt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof Qt&&arguments[1]instanceof E){var a=arguments[0],l=arguments[1],u=arguments[2];kr.computeDistance(a.getExteriorRing(),l,u);for(var c=0;c<a.getNumInteriorRing();c++)kr.computeDistance(a.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Kt)kr.computeDistance(h,p,f);else if(h instanceof Qt)kr.computeDistance(h,p,f);else if(h instanceof Gt)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);kr.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof gn&&arguments[1]instanceof E){var m=arguments[1],v=arguments[2],_=arguments[0].closestPoint(m);v.setMinimum(_,m)}};var Lr=function(){this._g0=null,this._g1=null,this._ptDist=new Mr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ar={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Lr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Lr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Lr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Lr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Lr.prototype.computeOrientedDistance=function(t,e,n){var r=new Rr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Fr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Lr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.distance=function(){if(2===arguments.length)return new Lr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Lr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Ar.MaxPointDistanceFilter.get=function(){return Rr},Ar.MaxDensifiedByFractionDistanceFilter.get=function(){return Fr},Object.defineProperties(Lr,Ar);var Rr=function(){this._maxPtDist=new Mr,this._minPtDist=new Mr,this._euclideanDist=new kr,this._geom=null;var t=arguments[0];this._geom=t};Rr.prototype.filter=function(t){this._minPtDist.initialize(),kr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rr.prototype.interfaces_=function(){return[ft]},Rr.prototype.getClass=function(){return Rr};var Fr=function(){this._maxPtDist=new Mr,this._minPtDist=new Mr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Fr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,l=n.y+s*o,u=new E(a,l);this._minPtDist.initialize(),kr.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fr.prototype.isDone=function(){return!1},Fr.prototype.isGeometryChanged=function(){return!1},Fr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fr.prototype.interfaces_=function(){return[Bt]},Fr.prototype.getClass=function(){return Fr};var jr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Dr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};jr.prototype.checkMaximumDistance=function(t,e,n){var r=new Lr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},jr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=jr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),jr.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},jr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Gt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},jr.prototype.getErrorIndicator=function(){return this._errorIndicator},jr.prototype.checkMinimumDistance=function(t,e,n){var r=new Ir(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},jr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},jr.prototype.getErrorLocation=function(){return this._errorLocation},jr.prototype.getPolygonLines=function(t){for(var e=new St,n=new Er(e),r=Sr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},jr.prototype.getErrorMessage=function(){return this._errMsg},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},Dr.VERBOSE.get=function(){return!1},Dr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jr,Dr);var zr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},qr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new H(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new H(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zr.prototype.checkDistance=function(){var t=new jr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zr.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zr.prototype.getErrorIndicator=function(){return this._errorIndicator},zr.prototype.getErrorLocation=function(){return this._errorLocation},zr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zr.prototype.report=function(t){if(!zr.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zr.prototype.getErrorMessage=function(){return this._errorMsg},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.isValidMsg=function(t,e,n){var r=new zr(t,e,n);return r.isValid()?null:r.getErrorMessage()},zr.isValid=function(t,e,n){return!!new zr(t,e,n).isValid()},qr.VERBOSE.get=function(){return!1},qr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zr,qr);var Br=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Br.prototype.getCoordinates=function(){return this._pts},Br.prototype.size=function(){return this._pts.length},Br.prototype.getCoordinate=function(t){return this._pts[t]},Br.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Br.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Br.prototype.setData=function(t){this._data=t},Br.prototype.getData=function(){return this._data},Br.prototype.toString=function(){return J.toLineString(new le(this._pts))},Br.prototype.interfaces_=function(){return[pn]},Br.prototype.getClass=function(){return Br};var Gr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new St,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Gr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Gr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Gr.prototype.getIntersectionSegments=function(){return this._intSegments},Gr.prototype.count=function(){return this._intersectionCount},Gr.prototype.getIntersections=function(){return this._intersections},Gr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Gr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Gr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Gr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Gr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Gr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Gr.prototype.interfaces_=function(){return[Xn]},Gr.prototype.getClass=function(){return Gr},Gr.createAllIntersectionsFinder=function(t){var e=new Gr(t);return e.setFindAllIntersections(!0),e},Gr.createAnyIntersectionFinder=function(t){return new Gr(t)},Gr.createIntersectionCounter=function(t){var e=new Gr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ur=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ur.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ur.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ur.prototype.isValid=function(){return this.execute(),this._isValid},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Gr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new xn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ur.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ur.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.computeIntersections=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vr=function t(){this._nv=null;var e=arguments[0];this._nv=new Ur(t.toSegmentStrings(e))};Vr.prototype.checkValid=function(){this._nv.checkValid()},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.toSegmentStrings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Br(r.getCoordinates(),r))}return e},Vr.checkValid=function(t){new Vr(t).checkValid()};var Wr=function(t){this._mapOp=t};Wr.prototype.map=function(t){for(var e=new St,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.map=function(t,e){return new Wr(e).map(t)};var Hr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new St,this._resultLineList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Hr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Hr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Hr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Hr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ni.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Hr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Hr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Hr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Hr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ni.isResultOfOp(r,e)&&e===Ni.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Yr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new St;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Yr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Yr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ni.INTERSECTION)){var r=n.getLabel();Ni.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Yr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var Xr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Xr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Xr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new St,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new St;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Xr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Xr.prototype.getInputGeometry=function(){return this._inputGeom},Xr.prototype.transformMultiLineString=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Xr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Xr.prototype.transformMultiPoint=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.transformMultiPolygon=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.copy=function(t){return t.copy()},Xr.prototype.transformGeometryCollection=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Xr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $t)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Kt)return this.transformLineString(t,null);if(t instanceof Ut)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Gt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Xr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Kr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Kr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new E(o)),0===r&&this._isClosed&&t.set(t.size()-1,new E(o)))}},Kr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Kr.prototype.snapTo=function(t){var e=new Ct(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Kr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new E(i),!1)}},Kr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Kr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},$r={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&I(i,Jt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},$r.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,$r);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Kr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Bt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ni.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ni.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ni.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ni.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ni.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ni.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ni.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ni.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ni.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ni.DIFFERENCE)};var si=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};si.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var ai=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},li={INSERT:{configurable:!0},DELETE:{configurable:!0}};ai.prototype.isDelete=function(){return this._eventType===ai.DELETE},ai.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ai.prototype.getObject=function(){return this._obj},ai.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ai.prototype.getInsertEvent=function(){return this._insertEvent},ai.prototype.isInsert=function(){return this._eventType===ai.INSERT},ai.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ai.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ai.prototype.interfaces_=function(){return[w]},ai.prototype.getClass=function(){return ai},li.INSERT.get=function(){return 1},li.DELETE.get=function(){return 2},Object.defineProperties(ai,li);var ui=function(){};ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new St,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&I(arguments[0],xt)&&I(arguments[1],xt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&I(arguments[0],xt)&&arguments[1]instanceof ci){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new si(n,i),s=new ai(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ai(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return J.toLineString(new E(this._min,0),new E(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},fi.NodeComparator.get=function(){return di},Object.defineProperties(pi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[S]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(){this._leaves=new St,this._root=null,this._level=0};mi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new St;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){V.out.println(J.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var vi=function(){this._items=new St};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[Ke]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var t=arguments[0];if(!I(t,Jt))throw new v("Argument must be Polygonal");this._index=new xi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new st(t),n=new wi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[qn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return wi},bi.IntervalIndexedGeometry.get=function(){return xi},Object.defineProperties(_i,bi);var wi=function(){this._counter=null;var t=arguments[0];this._counter=t};wi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},wi.prototype.interfaces_=function(){return[Ke]},wi.prototype.getClass=function(){return wi};var xi=function(){this._index=new mi;var t=arguments[0];this.init(t)};xi.prototype.init=function(t){for(var e=Er.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},xi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},xi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var Si=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Cr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Ce.ON)===O.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,a=n||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $t){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,O.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,O.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),O.EXTERIOR,O.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,O.INTERIOR,O.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],O.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],O.BOUNDARY)},e.prototype.addLineString=function(t){var e=Nt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new ke(this._argIndex,O.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===O.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Nt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;at.isCCW(r)&&(i=n,o=e);var s=new nr(r,new ke(this._argIndex,O.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],O.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new ke(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Kt)this.addLineString(e);else if(e instanceof $t)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ut)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Gt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return I(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?O.BOUNDARY:O.INTERIOR},e}(Ve),Ei=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Si(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,e,r),this._arg[1]=new Si(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,i,s),this._arg[1]=new Si(1,o,s)}};Ei.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ei.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Ci=function(){};Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.map=function(){if(arguments[0]instanceof ct&&I(arguments[1],Ci.MapOp)){for(var t=arguments[0],e=arguments[1],n=new St,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(I(arguments[0],bt)&&I(arguments[1],Ci.MapOp)){for(var o=arguments[0],s=arguments[1],a=new St,l=o.iterator();l.hasNext();){var u=l.next(),c=s.map(u);null!==c&&a.add(c)}return a}},Ci.MapOp=function(){};var Ni=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Cr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Yn,this._resultPolyList=new St,this._resultLineList=new St,this._resultPointList=new St,this._graph=new Ve(new Wn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new ke(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new St;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==O.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new St,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new St;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new We(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Hr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Yr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ce.RIGHT),i.getLocation(1,Ce.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ce.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ce.LEFT,r.getLocation(i,Ce.LEFT)),et.isTrue(!r.isNull(i,Ce.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ce.RIGHT,r.getLocation(i,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ei);Ni.overlayOp=function(t,e,n){return new Ni(t,e).getResultGeometry(n)},Ni.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ni.createEmptyResult(Ni.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Wr.map(t,{interfaces_:function(){return[Ci.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ni.INTERSECTION)},Ni.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ni.createEmptyResult(Ni.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ni.SYMDIFFERENCE)},Ni.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ni.INTERSECTION:o=Math.min(r,i);break;case Ni.UNION:o=Math.max(r,i);break;case Ni.DIFFERENCE:o=r;break;case Ni.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ni.createEmptyResult=function(t,e,n,r){var i=null;switch(Ni.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ni.difference=function(t,e){return t.isEmpty()?Ni.createEmptyResult(Ni.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ni.DIFFERENCE))},Ni.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ni.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===O.BOUNDARY&&(i=O.INTERIOR),o===O.BOUNDARY&&(o=O.INTERIOR),s){case Ni.INTERSECTION:return i===O.INTERIOR&&o===O.INTERIOR;case Ni.UNION:return i===O.INTERIOR||o===O.INTERIOR;case Ni.DIFFERENCE:return i===O.INTERIOR&&o!==O.INTERIOR;case Ni.SYMDIFFERENCE:return i===O.INTERIOR&&o!==O.INTERIOR||i!==O.INTERIOR&&o===O.INTERIOR}return!1}},Ni.INTERSECTION=1,Ni.UNION=2,Ni.DIFFERENCE=3,Ni.SYMDIFFERENCE=4;var Pi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Cr,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Pi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Pi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?O.BOUNDARY:this._ptLocator.locate(t,this._g)},Pi.prototype.extractLinework=function(t){var e=new Oi;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var Oi=function(){this._linework=null,this._linework=new St};Oi.prototype.getLinework=function(){return this._linework},Oi.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Oi.prototype.interfaces_=function(){return[qt]},Oi.prototype.getClass=function(){return Oi};var Ti=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ti.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ti.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ti.prototype.getPoints=function(t){for(var e=new St,n=Er.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ti.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,l=n*o/s,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new E(u-l,c+a);r.add(h)}if(this._doRight){var p=new E(u+l,c-a);r.add(p)}},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Ii=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new St;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Pi(this._geom[0],this._boundaryDistanceTolerance),new Pi(this._geom[1],this._boundaryDistanceTolerance),new Pi(this._geom[2],this._boundaryDistanceTolerance)]},Mi={TOLERANCE:{configurable:!0}};Ii.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+O.toLocationSymbol(e[0])+" B:"+O.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+O.toLocationSymbol(e[2]))},Ii.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ii.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ii.hasLocation(this._location,O.BOUNDARY)||this.isValidResult(r,this._location)}},Ii.prototype.addTestPts=function(t){var e=new Ti(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ii.prototype.isValidResult=function(t,e){var n=Ni.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===O.INTERIOR);return r||this.reportResult(t,e,n),r},Ii.prototype.getInvalidLocation=function(){return this._invalidLocation},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ii.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Ii.isValid=function(t,e,n,r){return new Ii(t,e,r).isValid(n)},Mi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ii,Mi);var ki=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};ki.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},ki.prototype.combine=function(){for(var t=new St,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.combine=function(){if(1===arguments.length)return new ki(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new ki(ki.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new ki(ki.createList(n,r,i)).combine()}},ki.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},ki.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new St;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new St;return s.add(r),s.add(i),s.add(o),s}};var Li=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new St)},Ai={STRTREE_NODE_CAPACITY:{configurable:!0}};Li.prototype.reduceToGeometries=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next(),i=null;I(r,xt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Li.prototype.extractByEnvelope=function(t,e,n){for(var r=new St,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Li.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return ki.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Li.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Li.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Li.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Li.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Li.getGeometry(e,n),Li.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Li.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Li.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Li.prototype.unionActual=function(t,e){return Li.restrictToPolygons(t.union(e))},Li.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Li.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new St,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),ki.combine(r)},Li.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.restrictToPolygons=function(t){if(I(t,Jt))return t;var e=Sr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Li.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Li.union=function(t){return new Li(t).union()},Ai.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Li,Ai);var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ni.createEmptyResult(Ni.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ni.UNION)},t.GeoJSONReader=Se,t.GeoJSONWriter=Ee,t.OverlayOp=Ni,t.UnionOp=Ri,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},4910:t=>{var e=6378137,n=.006694384442042606,r=n/(1-n),i=.9996,o=Math.PI/180;t.exports={proj:function(t,s,a){var l=-(6*(30-t)+3)*o,u=a*o,c=s*o,h=Math.sin(u),p=Math.cos(u),f=h/p,d=f*f,g=d*d,y=e/Math.sqrt(1-n*(h*h)),m=r*(p*p),v=p*(c-l),_=function(t){return 6367449.138844212*t+-16038.519017028084*Math.sin(2*t)+16.832223171520933*Math.sin(4*t)+-.021800809706533364*Math.sin(6*t)}(u),b=1-d+m,w=5-18*d+g+72*m-58*r,x=Math.pow(v,5),S=i*y*(v+b*Math.pow(v,3)/6+w*x/120)+5e5,E=(5-d+9*m+m*m*4)*Math.pow(v,4)/24;return{utm_zone:t,utm_easting:S,utm_northing:i*(_+y*f*(v*v/2+E+x*v/720*(61-58*d+g+600*m-330*r)))}},invProj:function(t,s,a){var l=-(6*(30-t)+3)*o,u=Math.sqrt(1-n),c=(1-u)/(1+u),h=c*c,p=c*h,f=(s-=5e5,a/i/6367449.138844212),d=21/16*h-55/32*(h*h),g=f+(1.5*c-27/32*p)*Math.sin(2*f)+d*Math.sin(4*f)+151*p/96*Math.sin(6*f),y=Math.sin(g),m=Math.cos(g),v=y/m,_=e/Math.sqrt(1-n*y*y),b=v*v,w=r*m*m,x=1-n*y*y,S=e*(1-n)/Math.sqrt(x*x*x),E=s/(_*i),C=E*E,N=E*C,P=C*C,O=E*P,T=b*b,I=w*w,M=(1+2*b+w)*N/6,k=5-2*w+28*b-3*I+8*r+24*T,L=180*(g-_*v/S*(C/2-P/24*(5+3*b+10*w-4*I-9*r)+N*N*(61+90*b+298*w+45*T-252*r-3*I)/720))/Math.PI;return{lon:180*(l+(E-M+k*O/120)/m)/Math.PI,lat:L}}}},6115:(t,e,n)=>{t.exports=function(){for(var t=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V"],e=["F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","A","B","C","D","E"],r=["A","B","C","D","E","F","G","H"],i=["J","K","L","M","N","P","Q","R"],o=["S","T","U","V","W","X","Y","Z"],s=["C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","X"],a=[-80,-72,-64,-56,-48,-40,-32,-24,-16,-8,0,8,16,24,32,40,48,58,64,72,80],l=new Array(20),u=0;u<20;u++)l[u]=110946.259*a[u];var c=["A","B","C","F","G","H","J","K","L","P","Q","R","S","T","U","X","Y","Z"],h=["H","J","K","L","M","N","P","A","B","C","D","E","F","G"],p=["N","P","Q","R","S","T","U","V","W","X","Y","Z","A","B","C","D","E","F","G","H","J","K","L","M"],f=n(4910),d=n(8035),g="+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",y="+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",m="EPSG:4326";function v(t,e){var n=t.lat*Math.PI/180,r=e.lat*Math.PI/180,i=(e.lon-t.lon)*Math.PI/180;return Math.atan2(Math.sqrt(Math.pow(Math.cos(r)*Math.sin(i),2)+Math.pow(Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(i),2)),Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(i))}function _(n,a,u){var _=0,w=0,x=0,S="",E=null,C=null,N=null;if(n=n.replace(/ /g,"").toUpperCase(),T=(O=new RegExp("([0-9]+)$")).exec(n)){x=(S=T[0]).length/2;var P=Math.pow(10,5-x);_=Number(S.substr(0,x))*P,w=Number(S.substr(x,x))*P}n=n.substr(0,n.length-2*x);var O=new RegExp("([A-Z][A-Z]$)"),T=O.exec(n);if(T&&(E=T[0]),n=n.substr(0,n.length-2),(T=(O=new RegExp("([0-9]+)([A-Z])")).exec(n))&&(N=T[1],C=T[2]),N||(T=(O=new RegExp("([A-Z])")).exec(n))&&(C=T[1]),N&&C&&E);else if("A"!==C&&"B"!==C&&"Y"!==C&&"Z"!==C||!E)if(E&&a){var I=1e3,M=null,k=null,L=Math.floor((a.lon- -180)/6)+1,A=Math.floor((a.lat- -80)/8);for(N=L-1;N<=L+1;N++)for(var R=0;R<20;R++){C=s[R];try{(H=v(a,b(N%60+C+E+S,null,!0)))<I&&(I=H,M=N%60,k=C)}catch(t){}}for(var R in F=a.lat>0?["Y","Z"]:["A","B"]){C=F[R];try{(H=v(a,b(C+E+S,null,!0)))<I&&(I=H,M=null,k=C)}catch(t){}}if(!k)throw"USNG: Couldn't find a match";N=M,C=k}else{if(!a)throw"USNG: Not enough information to locate point.";I=1e3,M=null,k=null;var F,j,D,z=null;for(L=Math.floor((a.lon- -180)/6)+1,A=Math.floor((a.lat- -80)/8),N=L-1;N<=L+1;N++)for(R=A-1;R<=A+1;R++){var q,B;switch(C=s[R],N%6){case 1:q=t,B=r;break;case 2:q=e,B=i;break;case 3:q=t,B=o;break;case 4:q=e,B=r;break;case 5:q=t,B=i;break;case 0:q=e,B=o;break;default:throw"Can't get here"}for(var G=0;G<20;G++)for(var U=0;U<8;U++)try{(H=v(a,b(N%60+C+(E=B[U]+q[G])+S,null,!0)))<I&&(I=H,M=N%60,k=C,z=E)}catch(t){}}for(var R in a.lat>0?(F=["Y","Z"],j=h,D=14):(F=["A","B"],j=p,D=24),F){C=F[R];for(var V=0;V<D;V++)for(var W=0;W<18;W++)try{var H;(H=v(a,b(C+(E=c[W]+j[V])+S,null,!0)))<I&&(I=H,M=null,k=C,z=E)}catch(t){}}if(!k)throw"USNG: Couldn't find a match";N=M,C=k,E=z}return"A"===C||"B"===C||"Y"===C||"Z"===C?function(t,e,n,r,i){if(!d)throw"USNG: Zones A,B,Y, and Z require Proj4js.";var o,s=2e6,a=2e6,l=c.indexOf(e[0]);if(l<0)throw"USNG: Invalid grid square.";switch(t){case"A":l-=18;case"B":if(o=p.indexOf(e[1]),l<-12||l>11||o<0)throw"USNG: Invalid grid square.";o>11&&(o-=24);break;case"Y":l-=18;case"Z":if(o=h.indexOf(e[1]),l<-7||l>6||o<0)throw"USNG: Invalid grid square.";o>6&&(o-=14);break;default:throw"UPS only valid in zones A, B, Y, and Z"}s+=1e5*l,a+=1e5*o;var u={x:s+=n,y:a+=r};if("A"===t||"B"===t){if(ll=d(y,m,u),ll.y>-80)throw"USNG: Grid Zone A or B but Latitude > -80."}else if(ll=d(g,m,u),ll.y<84)throw"USNG: Grid Zone Y or Z but Latitude < 84.";return{grid_zone:t,x:s,y:a,precision:i,usng:t+" "+e+" "+n+" "+r}}(C,E,_,w,x):function(n,a,u,c,h,p,d){var g,y,m,v=0;switch((n=+n)%6){case 1:y=t,m=r;break;case 2:y=e,m=i;break;case 3:y=t,m=o;break;case 4:y=e,m=r;break;case 5:y=t,m=i;break;case 0:y=e,m=o;break;default:throw"Can't get here"}var _=m.indexOf(u[0]),b=y.indexOf(u[1]);if(-1===_||-1===b)throw"USNG: Invalid USNG 100km grid designator for UTM zone "+n+".";g=1e5*(_+1)+c,v=1e5*(b+0)+h;var w=l[s.indexOf(a)];v+=2e6*Math.ceil((w-v)/2e6);var x=f.invProj(n,g,v),S=Math.floor((x.lon- -180)/6)+1,E=s[Math.floor((x.lat- -80)/8)];if(E!==a&&(v-=2e6,x=f.invProj(n,g,v),S=Math.floor((x.lon- -180)/6)+1,E=s[Math.floor((x.lat- -80)/8)]),d){if(x.lat>84||x.lat<-80)throw"USNG: Latitude "+x.lat+" outside valid UTM range.";if(S!==n)throw"USNG: calculated coordinate not in correct UTM zone! Supplied: "+n+" Calculated: "+S;if(E!==a)throw"USNG: calculated coordinate not in correct grid zone! Supplied: "+n+a+" Calculated: "+S+E}else{if(x.lat>84.5||x.lat<-79.5)throw"USNG: Latitude "+x.lat+" outside valid UTM range.";if(g<1e5||g>9e5)throw"USNG: calculated coordinate not in correct UTM zone! Supplied: "+n+a+" Calculated: "+S+E;var C=Math.abs(S-n);if(C>2&&C<58)throw"USNG: calculated coordinate not in correct UTM zone! Supplied: "+n+a+" Calculated: "+S+E;var N=t.indexOf(E),P=t.indexOf(a),O=Math.abs(N-P);if(O>1&&O<19)throw"USNG: calculated coordinate not in correct grid zone! Supplied: "+n+a+" Calculated: "+S+E}return{zone:n,easting:g,northing:v,precision:p,usng:String(n)+a+" "+u+" "+c+" "+h}}(N,C,E,_,w,x,u)}function b(t,e,n){var r,i=_(t,e,n),o=i.grid_zone;if("A"===o||"B"===o){var s={x:i.x,y:i.y};r={lon:(s=d(y,m,s)).x,lat:s.y,precision:i.precision,usng:i.usng}}else"Y"===o||"Z"===o?(s={x:i.x,y:i.y},r={lon:(s=d(g,m,s)).x,lat:s.y,precision:i.precision,usng:i.usng}):((r=f.invProj(i.zone,i.easting,i.northing)).precision=i.precision,r.usng=i.usng);return r}this.fromLonLat=function(n,a){for(var l=n.lon,u=n.lat;l<=-180;)l+=360;for(;l>180;)l-=360;var v=Math.floor((l- -180)/6)+1;if(!(u>-80&&u<84)){var _,b={x:l,y:u};return u>0?(_=d(m,g,b),w=l<0?"Y":"Z"):(_=d(m,y,b),w=l<0?"A":"B"),function(t,e,n,r){if("A"!==t&&"B"!==t&&"Y"!==t&&"Z"!==t)throw"UPS only valid in zones A, B, Y, and Z";var i,o=Math.floor((e-2e6)/1e5),s=Math.floor((n-2e6)/1e5);o<0&&(o+=18),"A"===t||"B"===t?(s<0&&(s+=24),i=c[o]+p[s]):(s<0&&(s+=14),i=c[o]+h[s]);for(var a=Math.floor(e%1e5).toString(),l=Math.floor(n%1e5).toString();a.length<5;)a="0"+a;for(;l.length<5;)l="0"+l;if(r>5){var u=r-5;grid_x=a+(e%1).toFixed(u).substr(2,u),grid_y=l+(n%1).toFixed(u).substr(2,u)}else grid_x=a.substr(0,r),grid_y=l.substr(0,r);return t+" "+i+" "+grid_x+" "+grid_y}(w,_.x,_.y,a)}var w=s[Math.floor((u- -80)/8)],x=f.proj(v,l,u);return function(n,s,a,l,u){var c,h,p,f=n%6,d=Math.floor(a/1e5)-1,g=Math.floor(l%2e6/1e5);switch(g<0&&(g+=20),f){case 1:c=r[d]+t[g];break;case 2:c=i[d]+e[g];break;case 3:c=o[d]+t[g];break;case 4:c=r[d]+e[g];break;case 5:c=i[d]+t[g];break;case 0:c=o[d]+e[g];break;default:throw"USNG: can't get here"}var y=Math.floor(a%1e5).toString(),m=Math.floor(l%1e5);for(m<0&&(m+=1e5),m=m.toString();y.length<5;)y="0"+y;for(;m.length<5;)m="0"+m;if(u>5){var v=u-5;h=y+(a%1).toFixed(v).substr(2,v),p=m+(l%1).toFixed(v).substr(2,v)}else h=y.substr(0,u),p=m.substr(0,u);return String(n)+s+" "+c+" "+h+" "+p}(v,w,x.utm_easting,x.utm_northing,a)},this.toLonLat=b,this.toSquare=function(t,e){var n=_(t,e,!1),r=Math.pow(10,5-n.precision);return{precision:0===n.precision?"100 km":1===n.precision?"10 km":2===n.precison?"1 km":r.toFixed(0)+" m",sw:f.invProj(n.zone,n.easting,n.northing),nw:f.invProj(n.zone,n.easting,n.northing+r),ne:f.invProj(n.zone,n.easting+r,n.northing+r),se:f.invProj(n.zone,n.easting+r,n.northing),c:f.invProj(n.zone,n.easting+r/2,n.northing+r/2)}}}},487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},1012:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}},t.exports=n},8598:function(t,e,n){var r,i=i||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},l=function(t){setTimeout((function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},u=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},c=function(e,c,h){h||(e=u(e));var p,f=this,d="application/octet-stream"===e.type,g=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,t)}catch(t){a(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,i)return p=n().createObjectURL(e),void setTimeout((function(){var t,e;r.href=p,r.download=c,t=r,e=new MouseEvent("click"),t.dispatchEvent(e),g(),l(p),f.readyState=f.DONE}));!function(){if((s||d&&o)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,g()},r.readAsDataURL(e),void(f.readyState=f.INIT)}p||(p=n().createObjectURL(e)),d?t.location.href=p:t.open(p,"_blank")||(t.location.href=p),f.readyState=f.DONE,g(),l(p)}()},h=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=u(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e,n){return new c(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=i:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r))},8679:(t,e,n)=>{"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(d){var i=f(n);i&&i!==d&&t(e,i,r)}var s=c(n);h&&(s=s.concat(h(n)));for(var a=l(e),g=l(n),y=0;y<s.length;++y){var m=s[y];if(!(o[m]||r&&r[m]||g&&g[m]||a&&a[m])){var v=p(n,m);try{u(e,m,v)}catch(t){}}}}return e}},1143:t=>{"use strict";t.exports=function(t,e,n,r,i,o,s,a){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],c=0;(l=new Error(e.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},8738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},4138:t=>{var e={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=" ",r=/(italic|oblique)$/i,i={};t.exports=function(t,o,s){var a=i[t];if(!a){Array.isArray(t)||(t=[t]);for(var l=400,u="normal",c=[],h=0,p=t.length;h<p;++h){var f=t[h].split(" "),d=f[f.length-1].toLowerCase();for(var g in"normal"==d||"italic"==d||"oblique"==d?(u=d,f.pop(),d=f[f.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),u=f[f.length-1].replace(d,"")),e)if(d==g||d==g.replace("-","")||d==g.replace("-",n)){l=e[g],f.pop();break}"number"==typeof d&&(l=d);var y=f.join(n).replace("Klokantech Noto Sans","Noto Sans");-1!==y.indexOf(n)&&(y='"'+y+'"'),c.push(y)}a=i[t]=[u,l,c]}return a[0]+n+a[1]+n+o+"px"+(s?"/"+s:"")+n+a[2]}},2454:(t,e,n)=>{var r,i={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){for(var n in e=e||[],t)e[n]=t[n];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var n,r,o,s;if(n=e.shift()){o=(r=n.split(this.delimiter)).shift().trim();try{s=i.pipes[o].apply(null,[t].concat(r)),t=this._pipe(s,e)}catch(t){}}return t},_eval:function(t,e,n){var r,o,s=this._pipe(t,e),a=s,l=-1;if(s instanceof Array)for(s="",r=a.length;++l<r;)o={iter:new this._iter(l,r)},s+=n?i.up(n,a[l],o):a[l];else s instanceof Object&&(s=i.up(n,a));return s},_test:function(t,e,n,r){var o=i.up(e,n,r).split(/\{\{\s*else\s*\}\}/);return(!1===t?o[1]:o[0])||""},_bridge:function(t,e){e="."==e?"\\.":e.replace(/\$/g,"\\$");var n,r,i,o=new RegExp("{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}","g"),s=t.match(o)||[],a=0,l=0,u=-1;for(r=0;r<s.length&&(n=r,u=t.indexOf(s[n],u+1),s[n].indexOf("{{/")>-1?l++:a++,a!==l);r++);return l=(a=t.indexOf(s[0]))+s[0].length,i=u+s[n].length,[t.substring(a,i),t.substring(l,u)]},up:function(t,e,n){e=e||{},n=n||{};var r,o,s,a,l,u,c,h,p,f,d=/\{\{(.+?)\}\}/g,g=t.match(d)||[],y=[],m=0,v=0;for(n.pipes&&this._copy(n.pipes,this.pipes),n.includes&&this._copy(n.includes,this.includes),n.globals&&this._copy(n.globals,this.globals),n.delimiter&&(this.delimiter=n.delimiter),void 0!==n.compact&&(this.compact=n.compact);r=g[m++];)if(c=void 0,u="",a=r.indexOf("/}}")>-1,l=0===(o=(o=r.substr(2,r.length-(a?5:4))).replace(/`(.+?)`/g,(function(t,n){return i.up("{{"+n+"}}",e)}))).trim().indexOf("if "),(y=o.split("|")).shift(),o=o.replace(/^\s*if/,"").split("|").shift().trim(),s=l?"if":o.split("|")[0],f=e[o],l&&!y.length&&(y=["notempty"]),!a&&t.indexOf("{{/"+s)>-1&&(r=(c=this._bridge(t,s))[0],u=c[1],m+=r.match(d).length-1),!/^\{\{\s*else\s*\}\}$/.test(r)){if(void 0!==(h=this.globals[o]))c=this._eval(h,y,u);else if(p=this.includes[o])p instanceof Function&&(p=p()),c=this._pipe(i.up(p,e,n),y);else if(o.indexOf("#")>-1)n.iter.sign=o,c=this._pipe(n.iter,y);else if("."===o)c=this._pipe(e,y);else if(o.indexOf(".")>-1){for(o=o.split("."),(f=i.globals[o[0]])?v=1:(v=0,f=e);f&&v<o.length;)f=f[o[v++]];c=this._eval(f,y,u)}else l?c=this._pipe(f,y):f instanceof Array?c=this._eval(f,y,u):u?c=f?i.up(u,f):void 0:e.hasOwnProperty(o)&&(c=this._pipe(f,y));c instanceof Array&&(c=this._eval(c,y,u)),l&&(c=this._test(c,u,e,n)),t=t.replace(r,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t}};i.pipes={empty:function(t){return(!t||0===(t+"").trim().length)&&t},notempty:function(t){return!(!t||!(t+"").trim().length)&&t},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return i._size(t)>e&&t},less:function(t,e){return i._size(t)<e&&t},ormore:function(t,e){return i._size(t)>=e&&t},orless:function(t,e){return i._size(t)<=e&&t},between:function(t,e,n){return(t=i._size(t))>=e&&t<=n&&t},equals:function(t,e){return t==e&&t},notequals:function(t,e){return t!=e&&t},like:function(t,e){return!!new RegExp(e,"i").test(t)&&t},notlike:function(t,e){return!i.pipes.like(t,e)&&t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()}))},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var n=t.split(/\s+/);return n.slice(0,e).join(" ")+(n.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,n){return t.slice(+n||0,+e+(+n||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,n){return t?e:n||""},toggle:function(t,e,n,r){return n.split(",")[e.match(/\w+/g).indexOf(t+"")]||r},sort:function(t,e){return[].concat(t).sort(e?function(t,n){return t[e]>n[e]?1:-1}:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return!(!t||+t%e!=0)&&t},even:function(t){return!(!t||0!=(1&+t))&&t},odd:function(t){return!(!t||1!=(1&+t))&&t},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return i.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.exports?t.exports=i:void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},2568:(t,e,n)=>{var r,i,o,s,a;r=n(1012),i=n(487).utf8,o=n(8738),s=n(487).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),l=8*t.length,u=1732584193,c=-271733879,h=-1732584194,p=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var d=a._ff,g=a._gg,y=a._hh,m=a._ii;for(f=0;f<n.length;f+=16){var v=u,_=c,b=h,w=p;u=d(u,c,h,p,n[f+0],7,-680876936),p=d(p,u,c,h,n[f+1],12,-389564586),h=d(h,p,u,c,n[f+2],17,606105819),c=d(c,h,p,u,n[f+3],22,-1044525330),u=d(u,c,h,p,n[f+4],7,-176418897),p=d(p,u,c,h,n[f+5],12,1200080426),h=d(h,p,u,c,n[f+6],17,-1473231341),c=d(c,h,p,u,n[f+7],22,-45705983),u=d(u,c,h,p,n[f+8],7,1770035416),p=d(p,u,c,h,n[f+9],12,-1958414417),h=d(h,p,u,c,n[f+10],17,-42063),c=d(c,h,p,u,n[f+11],22,-1990404162),u=d(u,c,h,p,n[f+12],7,1804603682),p=d(p,u,c,h,n[f+13],12,-40341101),h=d(h,p,u,c,n[f+14],17,-1502002290),u=g(u,c=d(c,h,p,u,n[f+15],22,1236535329),h,p,n[f+1],5,-165796510),p=g(p,u,c,h,n[f+6],9,-1069501632),h=g(h,p,u,c,n[f+11],14,643717713),c=g(c,h,p,u,n[f+0],20,-373897302),u=g(u,c,h,p,n[f+5],5,-701558691),p=g(p,u,c,h,n[f+10],9,38016083),h=g(h,p,u,c,n[f+15],14,-660478335),c=g(c,h,p,u,n[f+4],20,-405537848),u=g(u,c,h,p,n[f+9],5,568446438),p=g(p,u,c,h,n[f+14],9,-1019803690),h=g(h,p,u,c,n[f+3],14,-187363961),c=g(c,h,p,u,n[f+8],20,1163531501),u=g(u,c,h,p,n[f+13],5,-1444681467),p=g(p,u,c,h,n[f+2],9,-51403784),h=g(h,p,u,c,n[f+7],14,1735328473),u=y(u,c=g(c,h,p,u,n[f+12],20,-1926607734),h,p,n[f+5],4,-378558),p=y(p,u,c,h,n[f+8],11,-2022574463),h=y(h,p,u,c,n[f+11],16,1839030562),c=y(c,h,p,u,n[f+14],23,-35309556),u=y(u,c,h,p,n[f+1],4,-1530992060),p=y(p,u,c,h,n[f+4],11,1272893353),h=y(h,p,u,c,n[f+7],16,-155497632),c=y(c,h,p,u,n[f+10],23,-1094730640),u=y(u,c,h,p,n[f+13],4,681279174),p=y(p,u,c,h,n[f+0],11,-358537222),h=y(h,p,u,c,n[f+3],16,-722521979),c=y(c,h,p,u,n[f+6],23,76029189),u=y(u,c,h,p,n[f+9],4,-640364487),p=y(p,u,c,h,n[f+12],11,-421815835),h=y(h,p,u,c,n[f+15],16,530742520),u=m(u,c=y(c,h,p,u,n[f+2],23,-995338651),h,p,n[f+0],6,-198630844),p=m(p,u,c,h,n[f+7],10,1126891415),h=m(h,p,u,c,n[f+14],15,-1416354905),c=m(c,h,p,u,n[f+5],21,-57434055),u=m(u,c,h,p,n[f+12],6,1700485571),p=m(p,u,c,h,n[f+3],10,-1894986606),h=m(h,p,u,c,n[f+10],15,-1051523),c=m(c,h,p,u,n[f+1],21,-2054922799),u=m(u,c,h,p,n[f+8],6,1873313359),p=m(p,u,c,h,n[f+15],10,-30611744),h=m(h,p,u,c,n[f+6],15,-1560198380),c=m(c,h,p,u,n[f+13],21,1309151649),u=m(u,c,h,p,n[f+4],6,-145523070),p=m(p,u,c,h,n[f+11],10,-1120210379),h=m(h,p,u,c,n[f+2],15,718787259),c=m(c,h,p,u,n[f+9],21,-343485551),u=u+v>>>0,c=c+_>>>0,h=h+b>>>0,p=p+w>>>0}return r.endian([u,c,h,p])})._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):r.bytesToHex(n)}},7418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var s,a,l=i(t),u=1;u<arguments.length;u++){for(var c in s=Object(arguments[u]))n.call(s,c)&&(l[c]=s[c]);if(e){a=e(s);for(var h=0;h<a.length;h++)r.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}},7460:function(t,e){var n,r;n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,r=n&&/blob:/i.test((e.location||{}).protocol),i={},o=0,s={parse:function(n,r){var a=(r=r||{}).dynamicTyping||!1;if(w(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!w(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var l=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,r,a=(n=e.URL||e.webkitURL||null,r=t.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),l=new e.Worker(a);return l.onmessage=y,l.id=o++,i[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var f=null;return s.NODE_STREAM_INPUT,"string"==typeof n?f=r.download?new u(r):new h(r):!0===n.readable&&w(n.read)&&w(n.on)?f=new p(r):(e.File&&n instanceof File||n instanceof Object)&&(f=new c(r)),f.stream(n)},unparse:function(t,e){var n=!1,r=!0,i=",",o="\r\n",a='"',l=a+a,u=!1,c=null,h=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+a),"boolean"==typeof e.escapeFormulae&&(h=e.escapeFormulae)}}();var p=new RegExp(d(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return g(null,t,u);if("object"==typeof t[0])return g(c||f(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:f(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),g(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function f(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function g(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(a&&r){for(var u=0;u<t.length;u++)0<u&&(s+=i),s+=y(t[u],u);0<e.length&&(s+=o)}for(var c=0;c<e.length;c++){var h=a?t.length:e[c].length,p=!1,f=a?0===Object.keys(e[c]).length:0===e[c].length;if(n&&!a&&(p="greedy"===n?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===n&&a){for(var d=[],g=0;g<h;g++){var m=l?t[g]:g;d.push(e[c][m])}p=""===d.join("").trim()}if(!p){for(var v=0;v<h;v++){0<v&&!f&&(s+=i);var _=a&&l?t[v]:v;s+=y(e[c][_],v)}c<e.length-1&&(!n||0<h&&!f)&&(s+=o)}}return s}function y(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===h&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var r=t.toString().replace(p,l),o="boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(r,s.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1);return o?a+r+a:r}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=g,s.ParserHandle=f,s.NetworkStreamer=u,s.FileStreamer=c,s.StringStreamer=h,s.ReadableStreamStreamer=p,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var n=t.config||{},r=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:a.extend({},n)})})),i(),this;function i(){if(0!==r.length){var e,n,i,l=r[0];if(w(t.before)){var u=t.before(l.file,l.inputElem);if("object"==typeof u){if("abort"===u.action)return"AbortError",e=l.file,n=l.inputElem,i=u.reason,void(w(t.error)&&t.error({name:"AbortError"},e,n,i));if("skip"===u.action)return void o();"object"==typeof u.config&&(l.instanceConfig=a.extend(l.instanceConfig,u.config))}else if("skip"===u)return void o()}var c=l.instanceConfig.complete;l.instanceConfig.complete=function(t){w(c)&&c(t,l.file,l.inputElem),o()},s.parse(l.file,l.instanceConfig)}else w(t.complete)&&t.complete()}function o(){r.splice(0,1),i()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=_(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:a,workerId:s.WORKER_ID,finished:u});else if(w(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!u||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function u(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),l.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)e.setRequestHeader(r,t[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function c(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),l.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,i)}var o=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function h(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function p(t){l.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=b((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=b((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=b((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(t){var e,n,r,i=Math.pow(2,53),o=-i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,u=this,c=0,h=0,p=!1,f=!1,y=[],m={data:[],errors:[],meta:{}};if(w(t.step)){var v=t.step;t.step=function(e){if(m=e,S())x();else{if(x(),0===m.data.length)return;c+=e.data.length,t.preview&&c>t.preview?n.abort():(m.data=m.data[0],v(m,u))}}}function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){if(m&&r&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines)for(var e=0;e<m.data.length;e++)b(m.data[e])&&m.data.splice(e--,1);return S()&&function(){if(m)if(Array.isArray(m.data[0])){for(var e=0;S()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){w(t.transformHeader)&&(e=t.transformHeader(e,n)),y.push(e)}}(),function(){if(!m||!t.header&&!t.dynamicTyping&&!t.transform)return m;function e(e,n){var r,i=t.header?{}:[];for(r=0;r<e.length;r++){var o=r,s=e[r];t.header&&(o=r>=y.length?"__parsed_extra":y[r]),t.transform&&(s=t.transform(s,o)),s=E(o,s),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(s)):i[o]=s}return t.header&&(r>y.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+r,h+n):r<y.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+r,h+n)),i}var n=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(e),n=m.data.length):m.data=e(m.data,0),t.header&&m.meta&&(m.meta.fields=y),h+=n,m}()}function S(){return t.header&&0===y.length}function E(e,n){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(a.test(t)){var e=parseFloat(t);if(o<e&&e<i)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function C(t,e,n,r){var i={type:t,code:e,message:n};void 0!==r&&(i.row=r),m.errors.push(i)}this.parse=function(i,o,a){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(d(e)+"([^]*?)"+d(e),"gm"),r=(t=t.replace(n,"")).split("\r"),i=t.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var s=0,a=0;a<r.length;a++)"\n"===r[a][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(i,l)),r=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(i),m.meta.delimiter=t.delimiter);else{var u=function(e,n,r,i,o){var a,l,u,c;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var h=0;h<o.length;h++){var p=o[h],f=0,d=0,y=0;u=void 0;for(var m=new g({comments:i,delimiter:p,newline:n,preview:10}).parse(e),v=0;v<m.data.length;v++)if(r&&b(m.data[v]))y++;else{var _=m.data[v].length;d+=_,void 0!==u?0<_&&(f+=Math.abs(_-u),u=_):u=_}0<m.data.length&&(d/=m.data.length-y),(void 0===l||f<=l)&&(void 0===c||c<d)&&1.99<d&&(l=f,a=p,c=d)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);u.successful?t.delimiter=u.bestDelimiter:(r=!0,t.delimiter=s.DefaultDelimiter),m.meta.delimiter=t.delimiter}var c=_(t);return t.preview&&t.header&&c.preview++,e=i,n=new g(c),m=n.parse(e,o,a),x(),p?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),e=w(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(p=!1,u.streamer.parseChunk(e,!0)):setTimeout(u.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),m.meta.aborted=!0,w(t.complete)&&t.complete(m),e=""}}function d(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,r=t.newline,i=t.comments,o=t.step,a=t.preview,l=t.fastMode,u=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(u=t.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var c=0,h=!1;this.parse=function(t,s,p){if("string"!=typeof t)throw new Error("Input must be a string");var f=t.length,g=n.length,y=r.length,m=i.length,v=w(o),_=[],b=[],x=[],S=c=0;if(!t)return j();if(l||!1!==l&&-1===t.indexOf(e)){for(var E=t.split(r),C=0;C<E.length;C++){if(x=E[C],c+=x.length,C!==E.length-1)c+=r.length;else if(p)return j();if(!i||x.substring(0,m)!==i){if(v){if(_=[],L(x.split(n)),D(),h)return j()}else L(x.split(n));if(a&&a<=C)return _=_.slice(0,a),j(!0)}}return j()}for(var N=t.indexOf(n,c),P=t.indexOf(r,c),O=new RegExp(d(u)+d(e),"g"),T=t.indexOf(e,c);;)if(t[c]!==e)if(i&&0===x.length&&t.substring(c,c+m)===i){if(-1===P)return j();c=P+y,P=t.indexOf(r,c),N=t.indexOf(n,c)}else{if(-1!==N&&(N<P||-1===P)){if(!(N<T)){x.push(t.substring(c,N)),c=N+g,N=t.indexOf(n,c);continue}var I=z(N,T,P);if(I&&void 0!==I.nextDelim){N=I.nextDelim,T=I.quoteSearch,x.push(t.substring(c,N)),c=N+g,N=t.indexOf(n,c);continue}}if(-1===P)break;if(x.push(t.substring(c,P)),F(P+y),v&&(D(),h))return j();if(a&&_.length>=a)return j(!0)}else for(T=c,c++;;){if(-1===(T=t.indexOf(e,T+1)))return p||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:c}),R();if(T===f-1)return R(t.substring(c,T).replace(O,e));if(e!==u||t[T+1]!==u){if(e===u||0===T||t[T-1]!==u){-1!==N&&N<T+1&&(N=t.indexOf(n,T+1)),-1!==P&&P<T+1&&(P=t.indexOf(r,T+1));var M=A(-1===P?N:Math.min(N,P));if(t[T+1+M]===n){x.push(t.substring(c,T).replace(O,e)),t[c=T+1+M+g]!==e&&(T=t.indexOf(e,c)),N=t.indexOf(n,c),P=t.indexOf(r,c);break}var k=A(P);if(t.substring(T+1+k,T+1+k+y)===r){if(x.push(t.substring(c,T).replace(O,e)),F(T+1+k+y),N=t.indexOf(n,c),T=t.indexOf(e,c),v&&(D(),h))return j();if(a&&_.length>=a)return j(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:c}),T++}}else T++}return R();function L(t){_.push(t),S=c}function A(e){var n=0;if(-1!==e){var r=t.substring(T+1,e);r&&""===r.trim()&&(n=r.length)}return n}function R(e){return p||(void 0===e&&(e=t.substring(c)),x.push(e),c=f,L(x),v&&D()),j()}function F(e){c=e,L(x),x=[],P=t.indexOf(r,c)}function j(t){return{data:_,errors:b,meta:{delimiter:n,linebreak:r,aborted:h,truncated:!!t,cursor:S+(s||0)}}}function D(){o(j()),_=[],b=[]}function z(r,i,o){var s={nextDelim:void 0,quoteSearch:void 0},a=t.indexOf(e,i+1);if(i<r&&r<a&&(a<o||-1===o)){var l=t.indexOf(n,a);if(-1===l)return s;a<l&&(a=t.indexOf(e,a+1)),s=z(l,a,o)}else s={nextDelim:r,quoteSearch:i};return s}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function y(t){var e=t.data,n=i[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,m(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(w(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},o),!r);s++);delete e.results}else w(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&m(e.workerId,e.results)}function m(t,e){var n=i[t];w(n.userComplete)&&n.userComplete(e),n.terminate(),delete i[t]}function v(){throw new Error("Not implemented.")}function _(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=_(t[n]);return e}function b(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var n=t.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=s.parse(n.input,n.config);r&&e.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(c.prototype=Object.create(l.prototype)).constructor=c,(h.prototype=Object.create(h.prototype)).constructor=h,(p.prototype=Object.create(l.prototype)).constructor=p,s},void 0===(r=n.apply(e,[]))||(t.exports=r)},8035:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Se});var r=484813681109536e-20,i=Math.PI/2,o=1e-10,s=.017453292519943295,a=57.29577951308232,l=Math.PI/4,u=2*Math.PI,c=3.14159265359,h={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const p={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var f=/[\s_\-\/\(\)]/g;function d(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(f,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(f,"")===i)return t[n]}function g(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*s},lat_1:function(t){i.lat1=t*s},lat_2:function(t){i.lat2=t*s},lat_ts:function(t){i.lat_ts=t*s},lon_0:function(t){i.long0=t*s},lon_1:function(t){i.long1=t*s},lon_2:function(t){i.long2=t*s},alpha:function(t){i.alpha=parseFloat(t)*s},lonc:function(t){i.longc=t*s},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=d(p,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*s},pm:function(t){var e=d(h,t);i.from_greenwich=(e||parseFloat(t))*s},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)n=o[e],e in a?"function"==typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var y=/\s/,m=/[A-Za-z]/,v=/[A-Za-z84]/,_=/[,\]]/,b=/[\d\.E\-\+]/;function w(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function x(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return S(e,t),t}),r);e&&(t[e]=i)}function S(t,e){if(Array.isArray(t)){var n,r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void S(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r)switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&S(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&S(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void x(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return S(t,e[r]);return x(e,r,t)}else e[r]=t;else e[r]=!0}else e[t]=!0}function E(t){return.017453292519943295*t}function C(t){var e=new w(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return S(e,i),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function n(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",E],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",E],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",E],["lat0","latitude_of_origin",E],["lat0","standard_parallel_1",E],["lat1","standard_parallel_1",E],["lat2","standard_parallel_2",E],["azimuth","Azimuth"],["alpha","azimuth",E],["srsCode","name"]].forEach((function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=E(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function N(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?N[t]=g(arguments[1]):N[t]=C(arguments[1]):N[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?N.apply(e,t):N(t)}));if("string"==typeof t){if(t in N)return N[t]}else"EPSG"in t?N["EPSG:"+t.EPSG]=t:"ESRI"in t?N["ESRI:"+t.ESRI]=t:"IAU2000"in t?N["IAU2000:"+t.IAU2000]=t:console.log(t);return}}w.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;y.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},w.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(_.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},w.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},w.prototype.number=function(t){if(!b.test(t)){if(_.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},w.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},w.prototype.keyword=function(t){if(v.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!_.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},w.prototype.neutral=function(t){if(m.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(b.test(t))return this.word=t,void(this.state=3);if(!_.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},w.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(N);const P=N;var O=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],T=["3857","900913","3785","102113"];function I(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function M(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function k(t){return t<0?-1:1}function L(t){return Math.abs(t)<=c?t:t-k(t)*u}function A(t,e,n){var r=t*n,o=.5*t;return r=Math.pow((1-r)/(1+r),o),Math.tan(.5*(i-e))/r}function R(t,e){for(var n,r,o=.5*t,s=i-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(s),s+=r=i-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-s,Math.abs(r)<=1e-10)return s;return-9999}function F(t){return t}var j=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=M(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,s=t.y;if(s*a>90&&s*a<-90&&r*a>180&&r*a<-180)return null;if(Math.abs(Math.abs(s)-i)<=o)return null;if(this.sphere)e=this.x0+this.a*this.k0*L(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(l+.5*s));else{var u=Math.sin(s),c=A(this.e,s,u);e=this.x0+this.a*this.k0*L(r-this.long0),n=this.y0-this.a*this.k0*Math.log(c)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=i-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var s=Math.exp(-o/(this.a*this.k0));if(-9999===(n=R(this.e,s)))return null}return e=L(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:F,inverse:F,names:["longlat","identity"]}],D={},z=[];function q(t,e){var n=z.length;return t.names?(z[n]=t,t.names.forEach((function(t){D[t.toLowerCase()]=n})),this):(console.log(e),!0)}const B={start:function(){j.forEach(q)},add:q,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==D[e]&&z[D[e]]?z[D[e]]:void 0}};var G={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},U=G.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};G.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var V={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};function W(t,e){if(!(this instanceof W))return new W(t);e=e||function(t){if(t)throw t};var n=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in P}(t))return P[t];if(function(t){return O.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=C(t);if(function(t){var e=d(t,"authority");if(e){var n=d(e,"epsg");return n&&T.indexOf(n)>-1}}(e))return P["EPSG:3857"];var n=function(t){var e=d(t,"extension");if(e)return d(e,"proj4")}(e);return n?g(n):e}return function(t){return"+"===t[0]}(t)?g(t):void 0}(t);if("object"==typeof n){var i=W.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var s=d(V,n.datumCode);s&&(n.datum_params=s.towgs84?s.towgs84.split(","):null,n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var a,l,u,c,h,p,f=function(t,e,n,r,i){if(!t){var s=d(G,r);s||(s=U),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<o)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),y=(a=f.a,l=f.b,f.rf,h=((u=a*a)-(c=l*l))/u,p=0,n.R_A?(u=(a*=1-h*(.16666666666666666+h*(.04722222222222222+.022156084656084655*h)))*a,h=0):p=Math.sqrt(h),{es:h,e:p,ep2:(u-c)/c}),m=n.datum||function(t,e,n,i,o,s){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=r,a.datum_params[4]*=r,a.datum_params[5]*=r,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=i,a.es=o,a.ep2=s,a}(n.datumCode,n.datum_params,f.a,f.b,y.es,y.ep2);I(this,n),I(this,i),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=y.es,this.e=y.e,this.ep2=y.ep2,this.datum=m,this.init(),e(null,this)}else e(t)}else e(t)}W.projections=B,W.projections.start();const H=W;function Y(t,e,n){var r,o,s,a,l=t.x,u=t.y,c=t.z?t.z:0;if(u<-i&&u>-1.001*i)u=-i;else if(u>i&&u<1.001*i)u=i;else{if(u<-i)return{x:-1/0,y:-1/0,z:t.z};if(u>i)return{x:1/0,y:1/0,z:t.z}}return l>Math.PI&&(l-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),s=o*o,{x:((r=n/Math.sqrt(1-e*s))+c)*a*Math.cos(l),y:(r+c)*a*Math.sin(l),z:(r*(1-e)+c)*o}}function X(t,e,n,r){var i,o,s,a,l,u,c,h,p,f,d,g,y,m,v,_=t.x,b=t.y,w=t.z?t.z:0;if(i=Math.sqrt(_*_+b*b),o=Math.sqrt(_*_+b*b+w*w),i/n<1e-12){if(m=0,o/n<1e-12)return v=-r,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(b,_);s=w/o,h=(a=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),p=s*l,y=0;do{y++,u=e*(c=n/Math.sqrt(1-e*p*p))/(c+(v=i*h+w*p-c*(1-e*p*p))),g=(d=s*(l=1/Math.sqrt(1-u*(2-u)*a*a)))*h-(f=a*(1-u)*l)*p,h=f,p=d}while(g*g>1e-24&&y<30);return{x:m,y:Math.atan(d/Math.abs(f)),z:v}}function K(t){return 1===t||2===t}function Z(t,e,n){var r,i,o,s=n.x,a=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=s,i="x"):1===o?(r=a,i="y"):(r=l,i="z"),t.axis[o]){case"e":case"n":u[i]=r;break;case"w":case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u}function $(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function J(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Q(t,e,n){var r;return Array.isArray(n)&&(n=$(n)),function(t){J(t.x),J(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=Q(t,r=new H("WGS84"),n),t=r),"enu"!==t.axis&&(n=Z(t,!1,n)),"longlat"===t.projName?n={x:n.x*s,y:n.y*s,z:n.z||0}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)||5===t.datum_type||5===e.datum_type?n:t.es!==e.es||t.a!==e.a||K(t.datum_type)||K(e.datum_type)?(n=Y(n,t.es,t.a),K(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+a*t.z)+r,y:u*(l*t.x+t.y-s*t.z)+i,z:u*(-a*t.x+s*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),K(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6],c=(t.x-r)/u,h=(t.y-i)/u,p=(t.z-o)/u;return{x:c+l*h-a*p,y:-l*c+h+s*p,z:a*c-s*h+p}}}(n,e.datum_type,e.datum_params)),X(n,e.es,e.a,e.b)):n}(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*a,y:n.y*a,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?Z(e,!0,n):n}var tt=H("WGS84");function et(t,e,n){var r,i,o;return Array.isArray(n)?(r=Q(t,e,n)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=Q(t,e,n),2===(o=Object.keys(n)).length||o.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]})),i)}function nt(t){return t instanceof H?t:t.oProj?t.oProj:H(t)}const rt=function(t,e,n){t=nt(t);var r,i=!1;return void 0===e?(e=t,t=tt,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=tt,i=!0),e=nt(e),n?et(t,e,n):(r={forward:function(n){return et(t,e,n)},inverse:function(n){return et(e,t,n)}},i&&(r.oProj=e),r)};var it="AJSAJS",ot="AFAFAF",st=65,at=73,lt=79;const ut={forward:ct,inverse:function(t){var e=dt(yt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:ht};function ct(t,e){return e=e||5,function(t,e){var n,r,i,o,s,a,l,u,c,h,p,f="00000"+t.easting,d="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,h=t.northing,p=gt(t.zoneNumber),n=Math.floor(c/1e5),r=Math.floor(h/1e5)%20,o=it.charCodeAt(i=p-1),s=ot.charCodeAt(i),u=!1,(a=o+n-1)>90&&(a=a-90+st-1,u=!0),(a===at||o<at&&a>at||(a>at||o<at)&&u)&&a++,(a===lt||o<lt&&a>lt||(a>lt||o<lt)&&u)&&++a===at&&a++,a>90&&(a=a-90+st-1),(l=s+r)>86?(l=l-86+st-1,u=!0):u=!1,(l===at||s<at&&l>at||(l>at||s<at)&&u)&&l++,(l===lt||s<lt&&l>lt||(l>lt||s<lt)&&u)&&++l===at&&l++,l>86&&(l=l-86+st-1),String.fromCharCode(a)+String.fromCharCode(l))+f.substr(f.length-5,e)+d.substr(d.length-5,e)}(function(t){var e,n,r,i,o,s,a,l=t.lat,u=t.lon,c=6378137,h=.00669438,p=.9996,f=pt(l),d=pt(u);a=Math.floor((u+180)/6)+1,180===u&&(a=60),l>=56&&l<64&&u>=3&&u<12&&(a=32),l>=72&&l<84&&(u>=0&&u<9?a=31:u>=9&&u<21?a=33:u>=21&&u<33?a=35:u>=33&&u<42&&(a=37)),s=pt(6*(a-1)-180+3),e=.006739496752268451,n=c/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=e*Math.cos(f)*Math.cos(f);var g,y,m=p*n*((o=Math.cos(f)*(d-s))+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,v=p*(c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f))+n*Math.tan(f)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-2.2240339282485886)*o*o*o*o*o*o/720));return l<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(m),zoneNumber:a,zoneLetter:(g=l,y="Z",84>=g&&g>=72?y="X":72>g&&g>=64?y="W":64>g&&g>=56?y="V":56>g&&g>=48?y="U":48>g&&g>=40?y="T":40>g&&g>=32?y="S":32>g&&g>=24?y="R":24>g&&g>=16?y="Q":16>g&&g>=8?y="P":8>g&&g>=0?y="N":0>g&&g>=-8?y="M":-8>g&&g>=-16?y="L":-16>g&&g>=-24?y="K":-24>g&&g>=-32?y="J":-32>g&&g>=-40?y="H":-40>g&&g>=-48?y="G":-48>g&&g>=-56?y="F":-56>g&&g>=-64?y="E":-64>g&&g>=-72?y="D":-72>g&&g>=-80&&(y="C"),y)}}({lat:t[1],lon:t[0]}),e)}function ht(t){var e=dt(yt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function pt(t){return t*(Math.PI/180)}function ft(t){return t/Math.PI*180}function dt(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,s,a,l,u,c,h,p,f,d=.9996,g=6378137,y=.00669438,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,_=e;r<"N"&&(_-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,f=(p=_/d/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*p)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*p)+151*m*m*m/96*Math.sin(6*p),s=g/Math.sqrt(1-y*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=o*Math.cos(f)*Math.cos(f),u=.99330562*g/Math.pow(1-y*Math.sin(f)*Math.sin(f),1.5),c=v/(s*d);var b=f-s*Math.tan(f)/u*(c*c/2-(5+3*a+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);b=ft(b);var w,x=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*o+24*a*a)*c*c*c*c*c/120)/Math.cos(f);if(x=h+ft(x),t.accuracy){var S=dt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:S.lat,right:S.lon,bottom:b,left:x}}else w={lat:b,lon:x};return w}function gt(t){var e=t%6;return 0===e&&(e=6),e}function yt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var s=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;r=t.substring(o,o+=2);for(var l=gt(s),u=function(t,e){for(var n=it.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===at&&n++,n===lt&&n++,n>90){if(i)throw"Bad character: "+t;n=st,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=ot.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===at&&n++,n===lt&&n++,n>86){if(i)throw"Bad character: "+t;n=st,i=!0}r+=1e5}return r}(r.charAt(1),l);c<mt(a);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var p,f,d,g=h/2,y=0,m=0;return g>0&&(p=1e5/Math.pow(10,g),f=t.substring(o,o+g),y=parseFloat(f)*p,d=t.substring(o+g),m=parseFloat(d)*p),{easting:y+u,northing:m+c,zoneLetter:a,zoneNumber:s,accuracy:p}}function mt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function vt(t,e,n){if(!(this instanceof vt))return new vt(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}vt.fromMGRS=function(t){return new vt(ht(t))},vt.prototype.toMGRS=function(t){return ct([this.x,this.y],t)};const _t=vt;var bt=.046875,wt=.01953125,xt=.01068115234375;function St(t){var e=[];e[0]=1-t*(.25+t*(bt+t*(wt+t*xt))),e[1]=t*(.75-t*(bt+t*(wt+t*xt)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function Et(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function Ct(t,e,n){for(var r=1/(1-e),i=t,s=20;s;--s){var a=Math.sin(i),l=1-e*a*a;if(i-=l=(Et(i,a,Math.cos(i),n)-t)*(l*Math.sqrt(l))*r,Math.abs(l)<o)return i}return i}const Nt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=St(this.es),this.ml0=Et(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,s=t.y,a=L(i-this.long0),l=Math.sin(s),u=Math.cos(s);if(this.es){var c=u*a,h=Math.pow(c,2),p=this.ep2*Math.pow(u,2),f=Math.pow(p,2),d=Math.abs(u)>o?Math.tan(s):0,g=Math.pow(d,2),y=Math.pow(g,2);e=1-this.es*Math.pow(l,2),c/=Math.sqrt(e);var m=Et(s,l,u,this.en);n=this.a*(this.k0*c*(1+h/6*(1-g+p+h/20*(5-18*g+y+14*p-58*g*p+h/42*(61+179*y-y*g-479*g)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+l*a*c/2*(1+h/12*(5-g+9*p+4*f+h/30*(61+y-58*g+270*p-330*g*p+h/56*(1385+543*y-y*g-3111*g))))))+this.y0}else{var v=u*Math.sin(a);if(Math.abs(Math.abs(v)-1)<o)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>o)return 93;r=0}else r=Math.acos(r);s<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,s,a=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(n=Ct(e=this.ml0+l/this.k0,this.es,this.en),Math.abs(n)<i){var u=Math.sin(n),c=Math.cos(n),h=Math.abs(c)>o?Math.tan(n):0,p=this.ep2*Math.pow(c,2),f=Math.pow(p,2),d=Math.pow(h,2),g=Math.pow(d,2);e=1-this.es*Math.pow(u,2);var y=a*Math.sqrt(e)/this.k0,m=Math.pow(y,2);r=n-(e*=h)*m/(1-this.es)*.5*(1-m/12*(5+3*d-9*p*d+p-4*f-m/30*(61+90*d-252*p*d+45*g+46*p-m/56*(1385+3633*d+4095*g+1574*g*d)))),s=L(this.long0+y*(1-m/6*(1+2*d+p-m/20*(5+28*d+24*g+8*p*d+6*p-m/42*(61+662*d+1320*g+720*g*d))))/c)}else r=i*k(l),s=0;else{var v=Math.exp(a/this.k0),_=.5*(v-1/v),b=this.lat0+l/this.k0,w=Math.cos(b);e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(_,2))),r=Math.asin(e),l<0&&(r=-r),s=0===_&&0===w?0:L(Math.atan2(_,w)+this.long0)}return t.x=s,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};function Pt(t){var e=Math.exp(t);return(e-1/e)/2}function Ot(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function Tt(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return e+n*Math.sin(2*e)}function It(t,e,n){for(var r,i,o=Math.sin(e),s=Math.cos(e),a=Pt(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),u=2*s*l,c=-2*o*a,h=t.length-1,p=t[h],f=0,d=0,g=0;--h>=0;)r=d,i=f,p=u*(d=p)-r-c*(f=g)+t[h],g=c*d-i+u*f;return[(u=o*l)*p-(c=s*a)*g,u*g+c*p]}const Mt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=Tt(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=L(t.x-this.long0),n=t.y;n=Tt(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(r,s*i),e=Math.atan2(o*i,Ot(r,i*s)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Ot(1,e)+1))),t<0?-e:e}(Math.tan(e));var a,l,u=It(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=It(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Pt(r));var s=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(s*u,Ot(l,u*a)),e=L((r=Math.atan2(l,u*a))+this.long0),n=Tt(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},kt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(L(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*s,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Mt.init.apply(this),this.forward=Mt.forward,this.inverse=Mt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Lt(t,e){return Math.pow((1-t)/(1+t),e)}const At={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+l)/(Math.pow(Math.tan(.5*this.lat0+l),this.C)*Lt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+l),this.C)*Lt(this.e*Math.sin(n),this.ratexp))-i,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+l)/this.K,1/this.C),o=20;o>0&&(n=2*Math.atan(r*Lt(this.e*Math.sin(t.y),-.5*this.e))-i,!(Math.abs(n-t.y)<1e-14));--o)t.y=n;return o?(t.x=e,t.y=n,t):null},names:["gauss"]},Rt={init:function(){At.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=L(t.x-this.long0),At.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,At.inverse.apply(this,[t]),t.x=L(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Ft={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*(1+k(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=o&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*this.cons*M(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/A(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=M(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,s,a,l,u=t.x,c=t.y,h=Math.sin(c),p=Math.cos(c),f=L(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=o&&Math.abs(c+this.lat0)<=o?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*p*Math.cos(f)),t.x=this.a*e*p*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*p*Math.cos(f))+this.y0,t):(n=2*Math.atan(this.ssfn_(c,h,this.e))-i,s=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=o?(a=A(this.e,c*this.con,this.con*h),l=2*this.a*this.k0*a/this.cons,t.x=this.x0+l*Math.sin(u-this.long0),t.y=this.y0-this.con*l*Math.cos(u-this.long0),t):(Math.abs(this.sinlat0)<o?(e=2*this.a*this.k0/(1+s*Math.cos(f)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*s*Math.cos(f))),t.y=e*(this.cosX0*r-this.sinX0*s*Math.cos(f))+this.y0),t.x=e*s*Math.sin(f)+this.x0,t))},inverse:function(t){var e,n,r,s,a;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=o?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/l),e=Math.abs(this.coslat0)<o?this.lat0>0?L(this.long0+Math.atan2(t.x,-1*t.y)):L(this.long0+Math.atan2(t.x,t.y)):L(this.long0+Math.atan2(t.x*Math.sin(u),l*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=o){if(l<=o)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=l*this.cons/(2*this.a*this.k0),n=this.con*R(this.e,r),e=this.con*L(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=o?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/l),e=L(this.long0+Math.atan2(t.x*Math.sin(s),l*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*R(this.e,Math.tan(.5*(i+a)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)}},jt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]},Dt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=A(this.e,this.lat0,t),s=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(s*s<1&&(s=1),isNaN(this.longc)){var a=A(this.e,this.lat1,Math.sin(this.lat1)),l=A(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(o,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(o,this.bl);var u=Math.pow(a,this.bl),c=Math.pow(l,this.bl);i=.5*((r=this.el/u)-1/r);var h=(this.el*this.el-c*u)/(this.el*this.el+c*u),p=(c-u)/(c+u),f=L(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*f)/p)/this.bl,this.long0=L(this.long0);var d=L(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else r=this.lat0>=0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,s=t.x,a=t.y,u=L(s-this.long0);if(Math.abs(Math.abs(a)-i)<=o)r=a>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(l+r*this.gamma0*.5)),e=-1*r*i*this.al/this.bl;else{var c=A(this.e,a,Math.sin(a)),h=this.el/Math.pow(c,this.bl),p=.5*(h-1/h),f=.5*(h+1/h),d=Math.sin(this.bl*u),g=(p*Math.sin(this.gamma0)-d*Math.cos(this.gamma0))/f;n=Math.abs(Math.abs(g)-1)<=o?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*u))<=o?this.al*this.bl*u:this.al*Math.atan2(p*Math.cos(this.gamma0)+d*Math.sin(this.gamma0),Math.cos(this.bl*u))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),s=.5*(r-1/r),a=.5*(r+1/r),l=Math.sin(this.bl*e/this.al),u=(l*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/a,c=Math.pow(this.el/Math.sqrt((1+u)/(1-u)),1/this.bl);return Math.abs(u-1)<o?(t.x=this.long0,t.y=i):Math.abs(u+1)<o?(t.x=this.long0,t.y=-1*i):(t.y=R(this.e,c),t.x=L(this.long0-Math.atan2(s*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},zt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<o)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=M(this.e,e,n),i=A(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),l=M(this.e,s,a),u=A(this.e,this.lat2,s),c=A(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>o?this.ns=Math.log(r/l)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=o&&(n=k(n)*(i-2e-10));var r,s,a=Math.abs(Math.abs(n)-i);if(a>o)r=A(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(r,this.ns);else{if((a=n*this.ns)<=0)return null;s=0}var l=this.ns*L(e-this.long0);return t.x=this.k0*(s*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(l))+this.y0,t},inverse:function(t){var e,n,r,o,s,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),n=1):(e=-Math.sqrt(a*a+l*l),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*l)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(o=R(this.e,r)))return null}else o=-i;return s=L(u/this.ns+this.long0),t.x=s,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},qt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,s,a,l=t.x,u=t.y,c=L(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,s,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,u+=1}while(0===a&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function Bt(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function Gt(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Ut(t){return.375*t*(1+.25*t*(1+.46875*t))}function Vt(t){return.05859375*t*t*(1+.75*t)}function Wt(t){return t*t*t*(35/3072)}function Ht(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Yt(t){return Math.abs(t)<i?t:t-k(t)*Math.PI}function Xt(t,e,n,r,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}const Kt={init:function(){this.sphere||(this.e0=Gt(this.es),this.e1=Ut(this.es),this.e2=Vt(this.es),this.e3=Wt(this.es),this.ml0=this.a*Bt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=L(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=Ht(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*s*s/(1-this.es);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=this.a*Bt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*o/s*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,s=t.y/this.a;if(this.sphere){var a=s+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(a))}else{var l=Xt(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-i)<=o)return t.x=this.long0,t.y=i,s<0&&(t.y*=-1),t;var u=Ht(this.a,this.e,Math.sin(l)),c=u*u*u/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(l),2),p=r*this.a/u,f=p*p;e=l-u*Math.tan(l)/c*p*p*(.5-(1+3*h)*p*p/24),n=p*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(l)}return t.x=L(n+this.long0),t.y=Yt(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Zt(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}const $t={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-i)<o?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<o?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Zt(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Zt(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,s,a,u,c,h,p,f,d=t.x,g=t.y;if(d=L(d-this.long0),this.sphere){if(a=Math.sin(g),f=Math.cos(g),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*r:1+this.sinph0*a+this.cosph0*f*r)<=o)return null;e=(n=Math.sqrt(2/n))*f*Math.sin(d),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.phi0)<o)return null;n=l-.5*g,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(d),n*=r}}else{switch(c=0,h=0,p=0,r=Math.cos(d),s=Math.sin(d),a=Math.sin(g),u=Zt(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=u/this.qp,h=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:p=1+this.sinb1*c+this.cosb1*h*r;break;case this.EQUIT:p=1+h*r;break;case this.N_POLE:p=i+g,u=this.qp-u;break;case this.S_POLE:p=g-i,u=this.qp+u}if(Math.abs(p)<o)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),n=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*c-this.sinb1*h*r):(p=Math.sqrt(2/(1+h*r)))*c*this.ymf,e=this.xmf*p*h*s;break;case this.N_POLE:case this.S_POLE:u>=0?(e=(p=Math.sqrt(u))*s,n=r*(this.mode===this.S_POLE?p:-p)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,s,a,l,u,c,h,p,f=t.x/this.a,d=t.y/this.a;if(this.sphere){var g,y=0,m=0;if((n=.5*(g=Math.sqrt(f*f+d*d)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(n),y=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(g)<=o?0:Math.asin(d*m/g),f*=m,d=y*g;break;case this.OBLIQ:n=Math.abs(g)<=o?this.phi0:Math.asin(y*this.sinph0+d*m*this.cosph0/g),f*=m*this.cosph0,d=(y-Math.sin(n)*this.sinph0)*g;break;case this.N_POLE:d=-d,n=i-n;break;case this.S_POLE:n-=i}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,d):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,d*=this.dd,(l=Math.sqrt(f*f+d*d))<o)return t.x=0,t.y=this.phi0,t;s=2*Math.asin(.5*l/this.rq),r=Math.cos(s),f*=s=Math.sin(s),this.mode===this.OBLIQ?(u=r*this.sinb1+d*s*this.cosb1/l,a=this.qp*u,d=l*this.cosb1*r-d*this.sinb1*s):(u=d*s/l,a=this.qp*u,d=l*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(a=f*f+d*d))return t.x=0,t.y=this.phi0,t;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}e=Math.atan2(f,d),p=(c=Math.asin(u))+c,n=c+(h=this.apa)[0]*Math.sin(p)+h[1]*Math.sin(p+p)+h[2]*Math.sin(p+p+p)}return t.x=L(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Jt(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Qt={init:function(){Math.abs(this.lat1+this.lat2)<o||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=M(this.e3,this.sin_po,this.cos_po),this.qs1=Zt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=M(this.e3,this.sin_po,this.cos_po),this.qs2=Zt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Zt(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>o?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Zt(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*L(e-this.long0),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,n)),o=L(i/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,s,a=Jt(.5*e);if(t<o)return a;for(var l=t*t,u=1;u<=25;u++)if(a+=s=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-l)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(s)<=1e-7)return a;return null}},te={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,s,a,l,u=t.x,c=t.y;return r=L(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),(s=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(s)<=o?(a=this.x0+1*this.a*n*Math.sin(r)/s,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/s):(a=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t},inverse:function(t){var e,n,r,i,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),s=Jt((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=L(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]},ee={init:function(){this.sphere||(this.k0=M(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=L(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=Zt(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=L(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*i:i;for(var r,o,s,a,l=Math.asin(.5*e),u=0;u<30;u++)if(o=Math.sin(l),s=Math.cos(l),a=t*o,l+=r=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return l;return NaN}(this.e,2*t.y*this.k0/this.a),e=L(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},ne={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=L(e-this.long0),i=Yt(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=L(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Yt(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},re={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Gt(this.es),this.e1=Ut(this.es),this.e2=Vt(this.es),this.e3=Wt(this.es),this.ml0=this.a*Bt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,s=t.y,a=L(i-this.long0);if(r=a*Math.sin(s),this.sphere)Math.abs(s)<=o?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(s),n=this.a*(Yt(s-this.lat0)+(1-Math.cos(r))/Math.tan(s)));else if(Math.abs(s)<=o)e=this.a*a,n=-1*this.ml0;else{var l=Ht(this.a,this.e,Math.sin(s))/Math.tan(s);e=l*Math.sin(r),n=this.a*Bt(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+l*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,s,a,l,u,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=o)e=L(r/this.a+this.long0),n=0;else{var h;for(a=this.lat0+i/this.a,l=r*r/this.a/this.a+a*a,u=a,s=20;s;--s)if(u+=c=-1*(a*(u*(h=Math.tan(u))+1)-u-.5*(u*u+l)*h)/((u-a)/h-1),Math.abs(c)<=o){n=u;break}e=L(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=o)n=0,e=L(this.long0+r/this.a);else{var p,f,d,g,y;for(a=(this.ml0+i)/this.a,l=r*r/this.a/this.a+a*a,u=a,s=20;s;--s)if(y=this.e*Math.sin(u),p=Math.sqrt(1-y*y)*Math.tan(u),f=this.a*Bt(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=c=(a*(p*(g=f/this.a)+1)-g-.5*p*(g*g+l))/(this.es*Math.sin(2*u)*(g*g+l-2*a*g)/(4*p)+(a-g)*(p*d-2/Math.sin(2*u))-d),Math.abs(c)<=o){n=u;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=L(this.long0+Math.asin(r*p/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},ie={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,s=i/r*1e-5,a=o,l=1,u=0;for(e=1;e<=10;e++)l*=s,u+=this.A[e]*l;var c,h=u,p=a,f=1,d=0,g=0,y=0;for(e=1;e<=6;e++)c=d*h+f*p,f=f*h-d*p,d=c,g=g+this.B_re[e]*f-this.B_im[e]*d,y=y+this.B_im[e]*f+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,o=t.y,s=i-this.x0,a=(o-this.y0)/this.a,l=s/this.a,u=1,c=0,h=0,p=0;for(e=1;e<=6;e++)n=c*a+u*l,u=u*a-c*l,c=n,h=h+this.C_re[e]*u-this.C_im[e]*c,p=p+this.C_im[e]*u+this.C_re[e]*c;for(var f=0;f<this.iterations;f++){var d,g=h,y=p,m=a,v=l;for(e=2;e<=6;e++)d=y*h+g*p,g=g*h-y*p,y=d,m+=(e-1)*(this.B_re[e]*g-this.B_im[e]*y),v+=(e-1)*(this.B_im[e]*g+this.B_re[e]*y);g=1,y=0;var _=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)d=y*h+g*p,g=g*h-y*p,y=d,_+=e*(this.B_re[e]*g-this.B_im[e]*y),b+=e*(this.B_im[e]*g+this.B_re[e]*y);var w=_*_+b*b;h=(m*_+v*b)/w,p=(v*_-m*b)/w}var x=h,S=p,E=1,C=0;for(e=1;e<=9;e++)E*=x,C+=this.D[e]*E;var N=this.lat0+C*r*1e5,P=this.long0+S;return t.x=P,t.y=N,t},names:["New_Zealand_Map_Grid","nzmg"]},oe={init:function(){},forward:function(t){var e=t.x,n=t.y,r=L(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=L(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},se={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=St(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=L(r-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(i),a=20;a;--a){var l=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=l,Math.abs(l)<o)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),c=Math.cos(i);n=this.a*Et(i,u,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Jt((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Jt(Math.sin(e)/this.n)),n=L(n+this.long0),e=Yt(e)):(e=Ct(t.y/this.a,this.es,this.en),(r=Math.abs(e))<i?(r=Math.sin(e),n=L(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-o<i&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]},ae={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=L(e-this.long0),i=n,s=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<o)break}i/=2,Math.PI/2-Math.abs(n)<o&&(r=0);var l=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=l,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=L(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]},le={init:function(){Math.abs(this.lat1+this.lat2)<o||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Gt(this.es),this.e1=Ut(this.es),this.e2=Vt(this.es),this.e3=Wt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=M(this.e,this.sinphi,this.cosphi),this.ml1=Bt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<o?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=M(this.e,this.sinphi,this.cosphi),this.ml2=Bt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Bt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Bt(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*L(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=L(this.long0+o/this.ns),r=Yt(this.g-n/this.a),t.x=i,t.y=r,t):(r=Xt(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=L(this.long0+o/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]},ue={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,s=t.y,a=L(r-this.long0);Math.abs(s)<=o&&(e=this.x0+this.R*a,n=this.y0);var l=Jt(2*Math.abs(s/Math.PI));(Math.abs(a)<=o||Math.abs(Math.abs(s)-i)<=o)&&(e=this.x0,n=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var u=.5*Math.abs(Math.PI/a-a/Math.PI),c=u*u,h=Math.sin(l),p=Math.cos(l),f=p/(h+p-1),d=f*f,g=f*(2/h-1),y=g*g,m=Math.PI*this.R*(u*(f-y)+Math.sqrt(c*(f-y)*(f-y)-(y+c)*(d-y)))/(y+c);a<0&&(m=-m),e=this.x0+m;var v=c+f;return m=Math.PI*this.R*(g*v-u*Math.sqrt((y+c)*(c+1)-v*v))/(y+c),n=s>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,s,a,l,u,c,h,p,f;return t.x-=this.x0,t.y-=this.y0,p=Math.PI*this.R,s=(r=t.x/p)*r+(i=t.y/p)*i,p=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+s))+1+2*i*i+s*s)+(2*(l=a-2*i*i+r*r)*l*l/u/u/u-9*a*l/u/u)/27)/(c=(a-l*l/3/u)/u)/(h=2*Math.sqrt(-c/3)),Math.abs(p)>1&&(p=p>=0?1:-1),f=Math.acos(p)/3,n=t.y>=0?(-h*Math.cos(f+Math.PI/3)-l/3/u)*Math.PI:-(-h*Math.cos(f+Math.PI/3)-l/3/u)*Math.PI,e=Math.abs(r)<o?this.long0:L(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},ce={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,s,a,l,u,c,h,p,f,d,g,y,m,v,_,b,w,x,S,E,C=t.x,N=t.y,P=Math.sin(t.y),O=Math.cos(t.y),T=L(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=o?(t.x=this.x0+this.a*(i-N)*Math.sin(T),t.y=this.y0-this.a*(i-N)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=o?(t.x=this.x0+this.a*(i+N)*Math.sin(T),t.y=this.y0+this.a*(i+N)*Math.cos(T),t):(b=this.sin_p12*P+this.cos_p12*O*Math.cos(T),_=(v=Math.acos(b))/Math.sin(v),t.x=this.x0+this.a*_*O*Math.sin(T),t.y=this.y0+this.a*_*(this.cos_p12*P-this.sin_p12*O*Math.cos(T)),t):(e=Gt(this.es),n=Ut(this.es),r=Vt(this.es),s=Wt(this.es),Math.abs(this.sin_p12-1)<=o?(a=this.a*Bt(e,n,r,s,i),l=this.a*Bt(e,n,r,s,N),t.x=this.x0+(a-l)*Math.sin(T),t.y=this.y0-(a-l)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=o?(a=this.a*Bt(e,n,r,s,i),l=this.a*Bt(e,n,r,s,N),t.x=this.x0+(a+l)*Math.sin(T),t.y=this.y0+(a+l)*Math.cos(T),t):(u=P/O,c=Ht(this.a,this.e,this.sin_p12),h=Ht(this.a,this.e,P),p=Math.atan((1-this.es)*u+this.es*c*this.sin_p12/(h*O)),w=0===(f=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(p)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.abs(Math.abs(f)-Math.PI)<=o?-Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.asin(Math.sin(T)*Math.cos(p)/Math.sin(f)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),v=c*w*(1-(x=w*w)*(m=(g=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*g)*(1-m)/6+(S=x*w)/8*(y=d*g)*(1-2*m)+(E=S*w)/120*(m*(4-7*m)-3*d*d*(1-7*m))-E*w/48*y),t.x=this.x0+v*Math.sin(f),t.y=this.y0+v*Math.cos(f),t))},inverse:function(t){var e,n,r,s,a,l,u,c,h,p,f,d,g,y,m,v,_,b,w,x,S,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i*this.a)return;return n=e/this.a,r=Math.sin(n),s=Math.cos(n),a=this.long0,Math.abs(e)<=o?l=this.lat0:(l=Jt(s*this.sin_p12+t.y*r*this.cos_p12/e),u=Math.abs(this.lat0)-i,a=Math.abs(u)<=o?this.lat0>=0?L(this.long0+Math.atan2(t.x,-t.y)):L(this.long0-Math.atan2(-t.x,t.y)):L(this.long0+Math.atan2(t.x*r,e*this.cos_p12*s-t.y*this.sin_p12*r))),t.x=a,t.y=l,t}return c=Gt(this.es),h=Ut(this.es),p=Vt(this.es),f=Wt(this.es),Math.abs(this.sin_p12-1)<=o?(l=Xt(((d=this.a*Bt(c,h,p,f,i))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,c,h,p,f),a=L(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=l,t):Math.abs(this.sin_p12+1)<=o?(d=this.a*Bt(c,h,p,f,i),l=Xt(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,c,h,p,f),a=L(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),g=Ht(this.a,this.e,this.sin_p12),v=Math.cos(m),b=-(_=this.e*this.cos_p12*v)*_/(1-this.es),w=3*this.es*(1-b)*this.sin_p12*this.cos_p12*v/(1-this.es),E=1-b*(S=(x=e/g)-b*(1+b)*Math.pow(x,3)/6-w*(1+3*b)*Math.pow(x,4)/24)*S/2-x*S*S*S/6,y=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*v),a=L(this.long0+Math.asin(Math.sin(m)*Math.sin(S)/Math.cos(y))),l=Math.atan((1-this.es*E*this.sin_p12/Math.sin(y))*Math.tan(y)/(1-this.es)),t.x=a,t.y=l,t)},names:["Azimuthal_Equidistant","aeqd"]},he={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,s,a,l,u=t.x,c=t.y;return r=L(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),((s=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(s)<=o)&&(a=1*this.a*n*Math.sin(r),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t},inverse:function(t){var e,n,r,s,a,l,u;return t.x-=this.x0,t.y-=this.y0,n=Jt((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),s=Math.cos(n),l=this.long0,Math.abs(e)<=o?(u=this.lat0,t.x=l,t.y=u,t):(u=Jt(s*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-i,Math.abs(a)<=o?(l=this.lat0>=0?L(this.long0+Math.atan2(t.x,-t.y)):L(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=u,t):(l=L(this.long0+Math.atan2(t.x*r,e*this.cos_p14*s-t.y*this.sin_p14*r)),t.x=l,t.y=u,t))},names:["ortho"]};function pe(t,e,n,r){var s;return t<o?(r.value=1,s=0):(s=Math.atan2(e,n),Math.abs(s)<=l?r.value=1:s>l&&s<=i+l?(r.value=2,s-=i):s>i+l||s<=-(i+l)?(r.value=3,s=s>=0?s-c:s+c):(r.value=4,s+=i)),s}function fe(t,e){var n=t+e;return n<-c?n+=u:n>+c&&(n-=u),n}const de={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=i-l/2?this.face=5:this.lat0<=-(i-l/2)?this.face=6:Math.abs(this.long0)<=l?this.face=1:Math.abs(this.long0)<=i+l?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,o,s,a,u={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,5===this.face)o=i-e,n>=l&&n<=i+l?(h.value=1,r=n-i):n>i+l||n<=-(i+l)?(h.value=2,r=n>0?n-c:n+c):n>-(i+l)&&n<=-l?(h.value=3,r=n+i):(h.value=4,r=n);else if(6===this.face)o=i+e,n>=l&&n<=i+l?(h.value=1,r=-n+i):n<l&&n>=-l?(h.value=2,r=-n):n<-l&&n>=-(i+l)?(h.value=3,r=-n-i):(h.value=4,r=n>0?-n+c:-n-c);else{var p,f,d,g,y,m;2===this.face?n=fe(n,+i):3===this.face?n=fe(n,+c):4===this.face&&(n=fe(n,-i)),g=Math.sin(e),y=Math.cos(e),m=Math.sin(n),p=y*Math.cos(n),f=y*m,d=g,1===this.face?r=pe(o=Math.acos(p),d,f,h):2===this.face?r=pe(o=Math.acos(f),d,-p,h):3===this.face?r=pe(o=Math.acos(-p),d,-f,h):4===this.face?r=pe(o=Math.acos(-f),d,p,h):(o=r=0,h.value=1)}return a=Math.atan(12/c*(r+Math.acos(Math.sin(r)*Math.cos(l))-i)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),2===h.value?a+=i:3===h.value?a+=c:4===h.value&&(a+=1.5*c),u.x=s*Math.cos(a),u.y=s*Math.sin(a),u.x=u.x*this.a+this.x0,u.y=u.y*this.a+this.y0,t.x=u.x,t.y=u.y,t},inverse:function(t){var e,n,r,o,s,a,l,u,h,p,f,d,g={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=2,e-=i):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=3,e=e<0?e+c:e-c):(y.value=4,e+=i),h=c/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(s),(l=1-(r=Math.cos(e))*r*(o=Math.tan(n))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?l=-1:l>1&&(l=1),5===this.face)u=Math.acos(l),g.phi=i-u,1===y.value?g.lam=a+i:2===y.value?g.lam=a<0?a+c:a-c:3===y.value?g.lam=a-i:g.lam=a;else if(6===this.face)u=Math.acos(l),g.phi=u-i,1===y.value?g.lam=-a+i:2===y.value?g.lam=-a:3===y.value?g.lam=-a-i:g.lam=a<0?-a-c:-a+c;else{var m,v,_;h=(m=l)*m,v=(h+=(_=h>=1?0:Math.sqrt(1-h)*Math.sin(a))*_)>=1?0:Math.sqrt(1-h),2===y.value?(h=v,v=-_,_=h):3===y.value?(v=-v,_=-_):4===y.value&&(h=v,v=_,_=-h),2===this.face?(h=m,m=-v,v=h):3===this.face?(m=-m,v=-v):4===this.face&&(h=m,m=v,v=-h),g.phi=Math.acos(-_)-i,g.lam=Math.atan2(v,m),2===this.face?g.lam=fe(g.lam,-i):3===this.face?g.lam=fe(g.lam,-c):4===this.face&&(g.lam=fe(g.lam,+i))}return 0!==this.es&&(p=g.phi<0?1:0,f=Math.tan(g.phi),d=this.b/Math.sqrt(f*f+this.one_minus_f_squared),g.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),p&&(g.phi=-g.phi)),g.lam+=this.long0,t.x=g.lam,t.y=g.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ge=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ye=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],me=.8487,ve=1.3523,_e=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const be={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=L(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(11.459155902616464*n);r<0?r=0:r>=18&&(r=17);var i={x:_e(ge[r],n=a*(n-.08726646259971647*r))*e,y:_e(ye[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*me+this.x0,i.y=i.y*this.a*ve+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*me),y:Math.abs(t.y-this.y0)/(this.a*ve)};if(e.y>=1)e.x/=ge[18][0],e.y=t.y<0?-i:i;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(ye[n][0]>e.y)--n;else{if(!(ye[n+1][0]<=e.y))break;++n}var r=ye[n],o=5*(e.y-r[0])/(ye[n+1][0]-r[0]);o=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<1e-10)break}return i}((function(t){return(_e(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),o,0,100),e.x/=_e(ge[n],o),e.y=(5*n+o)*s,t.y<0&&(e.y=-e.y)}return e.x=L(e.x+this.long0),e},names:["Robinson","robin"]},we={init:function(){this.name="geocent"},forward:function(t){return Y(t,this.es,this.a)},inverse:function(t){return X(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var xe;rt.defaultDatum="WGS84",rt.Proj=H,rt.WGS84=new rt.Proj("WGS84"),rt.Point=_t,rt.toPoint=$,rt.defs=P,rt.transform=Q,rt.mgrs=ut,rt.version="__VERSION__",(xe=rt).Proj.projections.add(Nt),xe.Proj.projections.add(Mt),xe.Proj.projections.add(kt),xe.Proj.projections.add(Rt),xe.Proj.projections.add(Ft),xe.Proj.projections.add(jt),xe.Proj.projections.add(Dt),xe.Proj.projections.add(zt),xe.Proj.projections.add(qt),xe.Proj.projections.add(Kt),xe.Proj.projections.add($t),xe.Proj.projections.add(Qt),xe.Proj.projections.add(te),xe.Proj.projections.add(ee),xe.Proj.projections.add(ne),xe.Proj.projections.add(re),xe.Proj.projections.add(ie),xe.Proj.projections.add(oe),xe.Proj.projections.add(se),xe.Proj.projections.add(ae),xe.Proj.projections.add(le),xe.Proj.projections.add(ue),xe.Proj.projections.add(ce),xe.Proj.projections.add(he),xe.Proj.projections.add(de),xe.Proj.projections.add(be),xe.Proj.projections.add(we);const Se=rt},2703:(t,e,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(t,e,n)=>{t.exports=n(2703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2587:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(n);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var u=0;u<l;++u){var c,h,p,f,d=t[u].replace(s,"%20"),g=d.indexOf(r);g>=0?(c=d.substr(0,g),h=d.substr(g+1)):(c=d,h=""),p=decodeURIComponent(c),f=decodeURIComponent(h),e(o,p)?Array.isArray(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o}},2361:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(e(t))})).join(n):o+encodeURIComponent(e(t[i]))})).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},7673:(t,e,n)=>{"use strict";e.decode=e.parse=n(2587),e.encode=e.stringify=n(2361)},2582:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,l=r-i+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/a+h)),Math.min(o,Math.floor(r+(a-l)*c/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),s.leaf){var c=i(t,s.children,e);if(-1!==c)return s.children.splice(c,1),l.push(s),this._condense(l),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));g(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);g(t,c,h,l,this.compareMinY);for(var p=c;p<=h;p+=l){var f=Math.min(p+l-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u);h<o?(o=h,i=u<i?u:i,s=l):h===o&&u<i&&(i=u,s=l)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,l,u,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),y=s(t,d,n,this.toBBox),m=(i=g,o=y,void 0,void 0,void 0,void 0,a=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,h-l)),v=c(g)+c(y);m<p?(p=m,r=d,f=v<f?v:f):m===p&&v<f&&(f=v,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),l=s(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var p=t.children[c];a(o,t.leaf?i(p):p),u+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},4448:(t,e,n)=>{"use strict";var r=n(7294),i=n(7418),o=n(3840);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=null,l={};function u(){if(a)for(var t in l){var e=l[t],n=a.indexOf(t);if(!(-1<n))throw Error(s(96,t));if(!h[n]){if(!e.extractEvents)throw Error(s(97,t));for(var r in h[n]=e,n=e.eventTypes){var i=void 0,o=n[r],u=e,f=r;if(p.hasOwnProperty(f))throw Error(s(99,f));p[f]=o;var d=o.phasedRegistrationNames;if(d){for(i in d)d.hasOwnProperty(i)&&c(d[i],u,f);i=!0}else o.registrationName?(c(o.registrationName,u,f),i=!0):i=!1;if(!i)throw Error(s(98,r,t))}}}}function c(t,e,n){if(f[t])throw Error(s(100,t));f[t]=e,d[t]=e.eventTypes[n].dependencies}var h=[],p={},f={},d={};function g(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var y=!1,m=null,v=!1,_=null,b={onError:function(t){y=!0,m=t}};function w(t,e,n,r,i,o,s,a,l){y=!1,m=null,g.apply(b,arguments)}var x=null,S=null,E=null;function C(t,e,n){var r=t.type||"unknown-event";t.currentTarget=E(n),function(t,e,n,r,i,o,a,l,u){if(w.apply(this,arguments),y){if(!y)throw Error(s(198));var c=m;y=!1,m=null,v||(v=!0,_=c)}}(r,e,void 0,t),t.currentTarget=null}function N(t,e){if(null==e)throw Error(s(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function P(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var O=null;function T(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)C(t,e[r],n[r]);else e&&C(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function I(t){if(null!==t&&(O=N(O,t)),t=O,O=null,t){if(P(t,T),O)throw Error(s(95));if(v)throw t=_,v=!1,_=null,t}}var M={injectEventPluginOrder:function(t){if(a)throw Error(s(101));a=Array.prototype.slice.call(t),u()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!l.hasOwnProperty(e)||l[e]!==r){if(l[e])throw Error(s(102,e));l[e]=r,n=!0}}n&&u()}};function k(t,e){var n=t.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(s(231,e,typeof n));return n}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;L.hasOwnProperty("ReactCurrentDispatcher")||(L.ReactCurrentDispatcher={current:null}),L.hasOwnProperty("ReactCurrentBatchConfig")||(L.ReactCurrentBatchConfig={suspense:null});var A=/^(.*)[\\\/]/,R="function"==typeof Symbol&&Symbol.for,F=R?Symbol.for("react.element"):60103,j=R?Symbol.for("react.portal"):60106,D=R?Symbol.for("react.fragment"):60107,z=R?Symbol.for("react.strict_mode"):60108,q=R?Symbol.for("react.profiler"):60114,B=R?Symbol.for("react.provider"):60109,G=R?Symbol.for("react.context"):60110,U=R?Symbol.for("react.concurrent_mode"):60111,V=R?Symbol.for("react.forward_ref"):60112,W=R?Symbol.for("react.suspense"):60113,H=R?Symbol.for("react.suspense_list"):60120,Y=R?Symbol.for("react.memo"):60115,X=R?Symbol.for("react.lazy"):60116;R&&Symbol.for("react.fundamental"),R&&Symbol.for("react.responder"),R&&Symbol.for("react.scope");var K="function"==typeof Symbol&&Symbol.iterator;function Z(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=K&&t[K]||t["@@iterator"])?t:null}function $(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case D:return"Fragment";case j:return"Portal";case q:return"Profiler";case z:return"StrictMode";case W:return"Suspense";case H:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case G:return"Context.Consumer";case B:return"Context.Provider";case V:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case Y:return $(t.type);case X:if(t=1===t._status?t._result:null)return $(t)}return null}function J(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=$(t.type);n=null,r&&(n=$(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(A,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}var Q=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),tt=null,et=null,nt=null;function rt(t){if(t=S(t)){if("function"!=typeof tt)throw Error(s(280));var e=x(t.stateNode);tt(t.stateNode,t.type,e)}}function it(t){et?nt?nt.push(t):nt=[t]:et=t}function ot(){if(et){var t=et,e=nt;if(nt=et=null,rt(t),e)for(t=0;t<e.length;t++)rt(e[t])}}function st(t,e){return t(e)}function at(t,e,n,r){return t(e,n,r)}function lt(){}var ut=st,ct=!1,ht=!1;function pt(){null===et&&null===nt||(lt(),ot())}new Map;var ft=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dt=Object.prototype.hasOwnProperty,gt={},yt={};function mt(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){vt[t]=new mt(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];vt[e]=new mt(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){vt[t]=new mt(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){vt[t]=new mt(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){vt[t]=new mt(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){vt[t]=new mt(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){vt[t]=new mt(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){vt[t]=new mt(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){vt[t]=new mt(t,5,!1,t.toLowerCase(),null,!1)}));var _t=/[\-:]([a-z])/g;function bt(t){return t[1].toUpperCase()}function wt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function xt(t,e,n,r){var i=vt.hasOwnProperty(e)?vt[e]:null;(null!==i?0===i.type:!r&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!dt.call(yt,t)||!dt.call(gt,t)&&(ft.test(t)?yt[t]=!0:(gt[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function St(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Et(t){t._valueTracker||(t._valueTracker=function(t){var e=St(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Ct(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=St(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Nt(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Pt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=wt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ot(t,e){null!=(e=e.checked)&&xt(t,"checked",e,!1)}function Tt(t,e){Ot(t,e);var n=wt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Mt(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mt(t,e.type,wt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function It(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Mt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function kt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Lt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function At(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rt(t,e){var n=e.value;if(null==n){if(n=e.defaultValue,null!=(e=e.children)){if(null!=n)throw Error(s(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(s(93));e=e[0]}n=e}null==n&&(n="")}t._wrapperState={initialValue:wt(n)}}function Ft(t,e){var n=wt(e.value),r=wt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function jt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(_t,bt);vt[e]=new mt(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(_t,bt);vt[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(_t,bt);vt[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){vt[t]=new mt(t,1,!1,t.toLowerCase(),null,!1)})),vt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){vt[t]=new mt(t,1,!1,t.toLowerCase(),null,!0)}));var Dt="http://www.w3.org/1999/xhtml";function zt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?zt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Bt,Gt,Ut=(Gt=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Bt=Bt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return Gt(t,e)}))}:Gt);function Vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Wt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ht={animationend:Wt("Animation","AnimationEnd"),animationiteration:Wt("Animation","AnimationIteration"),animationstart:Wt("Animation","AnimationStart"),transitionend:Wt("Transition","TransitionEnd")},Yt={},Xt={};function Kt(t){if(Yt[t])return Yt[t];if(!Ht[t])return t;var e,n=Ht[t];for(e in n)if(n.hasOwnProperty(e)&&e in Xt)return Yt[t]=n[e];return t}Q&&(Xt=document.createElement("div").style,"AnimationEvent"in window||(delete Ht.animationend.animation,delete Ht.animationiteration.animation,delete Ht.animationstart.animation),"TransitionEvent"in window||delete Ht.transitionend.transition);var Zt=Kt("animationend"),$t=Kt("animationiteration"),Jt=Kt("animationstart"),Qt=Kt("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function ee(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function ne(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function re(t){if(ee(t)!==t)throw Error(s(188))}function ie(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=ee(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return re(i),t;if(o===r)return re(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var oe,se,ae,le=!1,ue=[],ce=null,he=null,pe=null,fe=new Map,de=new Map,ge=[],ye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),me="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function ve(t,e,n,r){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:r}}function _e(t,e){switch(t){case"focus":case"blur":ce=null;break;case"dragenter":case"dragleave":he=null;break;case"mouseover":case"mouseout":pe=null;break;case"pointerover":case"pointerout":fe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":de.delete(e.pointerId)}}function be(t,e,n,r,i){return null===t||t.nativeEvent!==i?(t=ve(e,n,r,i),null!==e&&null!==(e=pr(e))&&se(e),t):(t.eventSystemFlags|=r,t)}function we(t){var e=hr(t.target);if(null!==e){var n=ee(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=ne(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ae(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function xe(t){if(null!==t.blockedOn)return!1;var e=Mn(t.topLevelType,t.eventSystemFlags,t.nativeEvent);if(null!==e){var n=pr(e);return null!==n&&se(n),t.blockedOn=e,!1}return!0}function Se(t,e,n){xe(t)&&n.delete(e)}function Ee(){for(le=!1;0<ue.length;){var t=ue[0];if(null!==t.blockedOn){null!==(t=pr(t.blockedOn))&&oe(t);break}var e=Mn(t.topLevelType,t.eventSystemFlags,t.nativeEvent);null!==e?t.blockedOn=e:ue.shift()}null!==ce&&xe(ce)&&(ce=null),null!==he&&xe(he)&&(he=null),null!==pe&&xe(pe)&&(pe=null),fe.forEach(Se),de.forEach(Se)}function Ce(t,e){t.blockedOn===e&&(t.blockedOn=null,le||(le=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ee)))}function Ne(t){function e(e){return Ce(e,t)}if(0<ue.length){Ce(ue[0],t);for(var n=1;n<ue.length;n++){var r=ue[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ce&&Ce(ce,t),null!==he&&Ce(he,t),null!==pe&&Ce(pe,t),fe.forEach(e),de.forEach(e),n=0;n<ge.length;n++)(r=ge[n]).blockedOn===t&&(r.blockedOn=null);for(;0<ge.length&&null===(n=ge[0]).blockedOn;)we(n),null===n.blockedOn&&ge.shift()}function Pe(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Oe(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Te(t,e,n){(e=k(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=N(n._dispatchListeners,e),n._dispatchInstances=N(n._dispatchInstances,t))}function Ie(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Oe(e);for(e=n.length;0<e--;)Te(n[e],"captured",t);for(e=0;e<n.length;e++)Te(n[e],"bubbled",t)}}function Me(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=k(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=N(n._dispatchListeners,e),n._dispatchInstances=N(n._dispatchInstances,t))}function ke(t){t&&t.dispatchConfig.registrationName&&Me(t._targetInst,null,t)}function Le(t){P(t,Ie)}function Ae(){return!0}function Re(){return!1}function Fe(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ae:Re,this.isPropagationStopped=Re,this}function je(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function De(t){if(!(t instanceof this))throw Error(s(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ze(t){t.eventPool=[],t.getPooled=je,t.release=De}i(Fe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Ae)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Ae)},persist:function(){this.isPersistent=Ae},isPersistent:Re,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Re,this._dispatchInstances=this._dispatchListeners=null}}),Fe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Fe.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,ze(n),n},ze(Fe);var qe=Fe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Be=Fe.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ge=Fe.extend({view:null,detail:null}),Ue=Ge.extend({relatedTarget:null});function Ve(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},He={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ye={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ye[t])&&!!e[t]}function Ke(){return Xe}for(var Ze=Ge.extend({key:function(t){if(t.key){var e=We[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Ve(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?He[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ke,charCode:function(t){return"keypress"===t.type?Ve(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ve(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),$e=0,Je=0,Qe=!1,tn=!1,en=Ge.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ke,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=$e;return $e=t.screenX,Qe?"mousemove"===t.type?t.screenX-e:0:(Qe=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Je;return Je=t.screenY,tn?"mousemove"===t.type?t.screenY-e:0:(tn=!0,0)}}),nn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),rn=en.extend({dataTransfer:null}),on=Ge.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ke}),sn=Fe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),an=en.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ln=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Zt,"animationEnd",2],[$t,"animationIteration",2],[Jt,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Qt,"transitionEnd",2],["waiting","waiting",2]],un={},cn={},hn=0;hn<ln.length;hn++){var pn=ln[hn],fn=pn[0],dn=pn[1],gn=pn[2],yn="on"+(dn[0].toUpperCase()+dn.slice(1)),mn={phasedRegistrationNames:{bubbled:yn,captured:yn+"Capture"},dependencies:[fn],eventPriority:gn};un[dn]=mn,cn[fn]=mn}var vn={eventTypes:un,getEventPriority:function(t){return void 0!==(t=cn[t])?t.eventPriority:2},extractEvents:function(t,e,n,r){var i=cn[t];if(!i)return null;switch(t){case"keypress":if(0===Ve(n))return null;case"keydown":case"keyup":t=Ze;break;case"blur":case"focus":t=Ue;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=on;break;case Zt:case $t:case Jt:t=qe;break;case Qt:t=sn;break;case"scroll":t=Ge;break;case"wheel":t=an;break;case"copy":case"cut":case"paste":t=Be;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=nn;break;default:t=Fe}return Le(e=t.getPooled(i,e,n,r)),e}},_n=o.unstable_UserBlockingPriority,bn=o.unstable_runWithPriority,wn=vn.getEventPriority,xn=[];function Sn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=hr(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Pe(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,s=t.eventSystemFlags,a=null,l=0;l<h.length;l++){var u=h[l];u&&(u=u.extractEvents(r,e,o,i,s))&&(a=N(a,u))}I(a)}}var En=!0;function Cn(t,e){Nn(e,t,!1)}function Nn(t,e,n){switch(wn(e)){case 0:var r=Pn.bind(null,e,1);break;case 1:r=On.bind(null,e,1);break;default:r=In.bind(null,e,1)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Pn(t,e,n){ct||lt();var r=In,i=ct;ct=!0;try{at(r,t,e,n)}finally{(ct=i)||pt()}}function On(t,e,n){bn(_n,In.bind(null,t,e,n))}function Tn(t,e,n,r){if(xn.length){var i=xn.pop();i.topLevelType=t,i.eventSystemFlags=e,i.nativeEvent=n,i.targetInst=r,t=i}else t={topLevelType:t,eventSystemFlags:e,nativeEvent:n,targetInst:r,ancestors:[]};try{if(e=Sn,n=t,ht)e(n,void 0);else{ht=!0;try{ut(e,n,void 0)}finally{ht=!1,pt()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,xn.length<10&&xn.push(t)}}function In(t,e,n){if(En)if(0<ue.length&&-1<ye.indexOf(t))t=ve(null,t,e,n),ue.push(t);else{var r=Mn(t,e,n);null===r?_e(t,n):-1<ye.indexOf(t)?(t=ve(r,t,e,n),ue.push(t)):function(t,e,n,r){switch(e){case"focus":return ce=be(ce,t,e,n,r),!0;case"dragenter":return he=be(he,t,e,n,r),!0;case"mouseover":return pe=be(pe,t,e,n,r),!0;case"pointerover":var i=r.pointerId;return fe.set(i,be(fe.get(i)||null,t,e,n,r)),!0;case"gotpointercapture":return i=r.pointerId,de.set(i,be(de.get(i)||null,t,e,n,r)),!0}return!1}(r,t,e,n)||(_e(t,n),Tn(t,e,n,null))}}function Mn(t,e,n){var r=Pe(n);if(null!==(r=hr(r))){var i=ee(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=ne(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Tn(t,e,n,r),null}function kn(t){if(!Q)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var Ln=new("function"==typeof WeakMap?WeakMap:Map);function An(t){var e=Ln.get(t);return void 0===e&&(e=new Set,Ln.set(t,e)),e}function Rn(t,e,n){if(!n.has(t)){switch(t){case"scroll":Nn(e,"scroll",!0);break;case"focus":case"blur":Nn(e,"focus",!0),Nn(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":kn(t)&&Nn(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(t)&&Cn(t,e)}n.add(t)}}var Fn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jn=["Webkit","ms","Moz","O"];function Dn(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Fn.hasOwnProperty(t)&&Fn[t]?(""+e).trim():e+"px"}function zn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Dn(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Fn).forEach((function(t){jn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fn[e]=Fn[t]}))}));var qn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(t,e){if(e){if(qn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(s(62,""))}}function Gn(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Un(t,e){var n=An(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=d[e];for(var r=0;r<e.length;r++)Rn(e[r],t,n)}function Vn(){}function Wn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yn(t,e){var n,r=Hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Hn(r)}}function Xn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Xn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function Kn(){for(var t=window,e=Wn();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Wn((t=e.contentWindow).document)}return e}function Zn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var $n="$?",Jn="$!",Qn=null,tr=null;function er(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function nr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var rr="function"==typeof setTimeout?setTimeout:void 0,ir="function"==typeof clearTimeout?clearTimeout:void 0;function or(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function sr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||n===Jn||n===$n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var ar=Math.random().toString(36).slice(2),lr="__reactInternalInstance$"+ar,ur="__reactEventHandlers$"+ar,cr="__reactContainere$"+ar;function hr(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[lr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=sr(t);null!==t;){if(n=t[lr])return n;t=sr(t)}return e}n=(t=n).parentNode}return null}function pr(t){return!(t=t[lr]||t[cr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function fr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function dr(t){return t[ur]||null}var gr=null,yr=null,mr=null;function vr(){if(mr)return mr;var t,e,n=yr,r=n.length,i="value"in gr?gr.value:gr.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return mr=i.slice(t,1<e?1-e:void 0)}var _r=Fe.extend({data:null}),br=Fe.extend({data:null}),wr=[9,13,27,32],xr=Q&&"CompositionEvent"in window,Sr=null;Q&&"documentMode"in document&&(Sr=document.documentMode);var Er=Q&&"TextEvent"in window&&!Sr,Cr=Q&&(!xr||Sr&&8<Sr&&11>=Sr),Nr=String.fromCharCode(32),Pr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Or=!1;function Tr(t,e){switch(t){case"keyup":return-1!==wr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ir(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Mr=!1,kr={eventTypes:Pr,extractEvents:function(t,e,n,r){var i;if(xr)t:{switch(t){case"compositionstart":var o=Pr.compositionStart;break t;case"compositionend":o=Pr.compositionEnd;break t;case"compositionupdate":o=Pr.compositionUpdate;break t}o=void 0}else Mr?Tr(t,n)&&(o=Pr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=Pr.compositionStart);return o?(Cr&&"ko"!==n.locale&&(Mr||o!==Pr.compositionStart?o===Pr.compositionEnd&&Mr&&(i=vr()):(yr="value"in(gr=r)?gr.value:gr.textContent,Mr=!0)),o=_r.getPooled(o,e,n,r),(i||null!==(i=Ir(n)))&&(o.data=i),Le(o),i=o):i=null,(t=Er?function(t,e){switch(t){case"compositionend":return Ir(e);case"keypress":return 32!==e.which?null:(Or=!0,Nr);case"textInput":return(t=e.data)===Nr&&Or?null:t;default:return null}}(t,n):function(t,e){if(Mr)return"compositionend"===t||!xr&&Tr(t,e)?(t=vr(),mr=yr=gr=null,Mr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cr&&"ko"!==e.locale?null:e.data}}(t,n))?((e=br.getPooled(Pr.beforeInput,e,n,r)).data=t,Le(e)):e=null,null===i?e:null===e?i:[i,e]}},Lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ar(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Lr[t.type]:"textarea"===e}var Rr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Fr(t,e,n){return(t=Fe.getPooled(Rr.change,t,e,n)).type="change",it(n),Le(t),t}var jr=null,Dr=null;function zr(t){I(t)}function qr(t){if(Ct(fr(t)))return t}function Br(t,e){if("change"===t)return e}var Gr=!1;function Ur(){jr&&(jr.detachEvent("onpropertychange",Vr),Dr=jr=null)}function Vr(t){if("value"===t.propertyName&&qr(Dr))if(t=Fr(Dr,t,Pe(t)),ct)I(t);else{ct=!0;try{st(zr,t)}finally{ct=!1,pt()}}}function Wr(t,e,n){"focus"===t?(Ur(),Dr=n,(jr=e).attachEvent("onpropertychange",Vr)):"blur"===t&&Ur()}function Hr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qr(Dr)}function Yr(t,e){if("click"===t)return qr(e)}function Xr(t,e){if("input"===t||"change"===t)return qr(e)}Q&&(Gr=kn("input")&&(!document.documentMode||9<document.documentMode));var Kr,Zr={eventTypes:Rr,_isInputEventSupported:Gr,extractEvents:function(t,e,n,r){var i=e?fr(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=Br;else if(Ar(i))if(Gr)s=Xr;else{s=Hr;var a=Wr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Yr);if(s&&(s=s(t,e)))return Fr(s,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Mt(i,"number",i.value)}},$r={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Jr={eventTypes:$r,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,s?(s=e,null!==(e=(e=n.relatedTarget||n.toElement)?hr(e):null)&&(e!==(o=ee(e))||5!==e.tag&&6!==e.tag)&&(e=null)):s=null,s===e)return null;if("mouseout"===t||"mouseover"===t)var a=en,l=$r.mouseLeave,u=$r.mouseEnter,c="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=nn,l=$r.pointerLeave,u=$r.pointerEnter,c="pointer");if(t=null==s?i:fr(s),i=null==e?i:fr(e),(l=a.getPooled(l,s,n,r)).type=c+"leave",l.target=t,l.relatedTarget=i,(r=a.getPooled(u,e,n,r)).type=c+"enter",r.target=i,r.relatedTarget=t,c=e,(a=s)&&c)t:{for(t=c,s=0,e=u=a;e;e=Oe(e))s++;for(e=0,i=t;i;i=Oe(i))e++;for(;0<s-e;)u=Oe(u),s--;for(;0<e-s;)t=Oe(t),e--;for(;s--;){if(u===t||u===t.alternate)break t;u=Oe(u),t=Oe(t)}u=null}else u=null;for(t=u,u=[];a&&a!==t&&(null===(s=a.alternate)||s!==t);)u.push(a),a=Oe(a);for(a=[];c&&c!==t&&(null===(s=c.alternate)||s!==t);)a.push(c),c=Oe(c);for(c=0;c<u.length;c++)Me(u[c],"bubbled",l);for(c=a.length;0<c--;)Me(a[c],"captured",r);return n===Kr?(Kr=null,[l]):(Kr=n,[l,r])}},Qr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},ti=Object.prototype.hasOwnProperty;function ei(t,e){if(Qr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ti.call(e,n[r])||!Qr(t[n[r]],e[n[r]]))return!1;return!0}var ni=Q&&"documentMode"in document&&11>=document.documentMode,ri={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ii=null,oi=null,si=null,ai=!1;function li(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return ai||null==ii||ii!==Wn(n)?null:(n="selectionStart"in(n=ii)&&Zn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},si&&ei(si,n)?null:(si=n,(t=Fe.getPooled(ri.select,oi,t,e)).type="select",t.target=ii,Le(t),t))}var ui={eventTypes:ri,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=An(o),i=d.onSelect;for(var s=0;s<i.length;s++)if(!o.has(i[s])){o=!1;break t}o=!0}i=!o}if(i)return null;switch(o=e?fr(e):window,t){case"focus":(Ar(o)||"true"===o.contentEditable)&&(ii=o,oi=e,si=null);break;case"blur":si=oi=ii=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":return ai=!1,li(n,r);case"selectionchange":if(ni)break;case"keydown":case"keyup":return li(n,r)}return null}};M.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=dr,S=pr,E=fr,M.injectEventPluginsByName({SimpleEventPlugin:vn,EnterLeaveEventPlugin:Jr,ChangeEventPlugin:Zr,SelectEventPlugin:ui,BeforeInputEventPlugin:kr}),new Set;var ci=[],hi=-1;function pi(t){0>hi||(t.current=ci[hi],ci[hi]=null,hi--)}function fi(t,e){hi++,ci[hi]=t.current,t.current=e}var di={},gi={current:di},yi={current:!1},mi=di;function vi(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function _i(t){return null!=t.childContextTypes}function bi(t){pi(yi),pi(gi)}function wi(t){pi(yi),pi(gi)}function xi(t,e,n){if(gi.current!==di)throw Error(s(168));fi(gi,e),fi(yi,n)}function Si(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,$(e)||"Unknown",o));return i({},n,{},r)}function Ei(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||di,mi=gi.current,fi(gi,e),fi(yi,yi.current),!0}function Ci(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(e=Si(t,e,mi),r.__reactInternalMemoizedMergedChildContext=e,pi(yi),pi(gi),fi(gi,e)):pi(yi),fi(yi,n)}var Ni=o.unstable_runWithPriority,Pi=o.unstable_scheduleCallback,Oi=o.unstable_cancelCallback,Ti=o.unstable_shouldYield,Ii=o.unstable_requestPaint,Mi=o.unstable_now,ki=o.unstable_getCurrentPriorityLevel,Li=o.unstable_ImmediatePriority,Ai=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,Fi=o.unstable_LowPriority,ji=o.unstable_IdlePriority,Di={},zi=void 0!==Ii?Ii:function(){},qi=null,Bi=null,Gi=!1,Ui=Mi(),Vi=1e4>Ui?Mi:function(){return Mi()-Ui};function Wi(){switch(ki()){case Li:return 99;case Ai:return 98;case Ri:return 97;case Fi:return 96;case ji:return 95;default:throw Error(s(332))}}function Hi(t){switch(t){case 99:return Li;case 98:return Ai;case 97:return Ri;case 96:return Fi;case 95:return ji;default:throw Error(s(332))}}function Yi(t,e){return t=Hi(t),Ni(t,e)}function Xi(t,e,n){return t=Hi(t),Pi(t,e,n)}function Ki(t){return null===qi?(qi=[t],Bi=Pi(Li,$i)):qi.push(t),Di}function Zi(){if(null!==Bi){var t=Bi;Bi=null,Oi(t)}$i()}function $i(){if(!Gi&&null!==qi){Gi=!0;var t=0;try{var e=qi;Yi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),qi=null}catch(e){throw null!==qi&&(qi=qi.slice(t+1)),Pi(Li,Zi),e}finally{Gi=!1}}}var Ji=3;function Qi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function to(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var eo={current:null},no=null,ro=null,io=null;function oo(){io=ro=no=null}function so(t,e){var n=t.type._context;fi(eo,n._currentValue),n._currentValue=e}function ao(t){var e=eo.current;pi(eo),t.type._context._currentValue=e}function lo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function uo(t,e){no=t,io=ro=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Vs=!0),t.firstContext=null)}function co(t,e){if(io!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(io=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ro){if(null===no)throw Error(s(308));ro=e,no.dependencies={expirationTime:0,firstContext:e,responders:null}}else ro=ro.next=e;return t._currentValue}var ho=!1;function po(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function fo(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function go(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function yo(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function mo(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=po(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=po(t.memoizedState),i=n.updateQueue=po(n.memoizedState)):r=t.updateQueue=fo(i):null===i&&(i=n.updateQueue=fo(r));null===i||r===i?yo(r,e):null===r.lastUpdate||null===i.lastUpdate?(yo(r,e),yo(i,e)):(yo(r,e),i.lastUpdate=e)}function vo(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=po(t.memoizedState):_o(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function _o(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=fo(e)),e}function bo(t,e,n,r,o,s){switch(n.tag){case 1:return"function"==typeof(t=n.payload)?t.call(s,r,o):t;case 3:t.effectTag=-4097&t.effectTag|64;case 0:if(null==(o="function"==typeof(t=n.payload)?t.call(s,r,o):t))break;return i({},r,o);case 2:ho=!0}return r}function wo(t,e,n,r,i){ho=!1;for(var o=(e=_o(t,e)).baseState,s=null,a=0,l=e.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===s&&(s=l,o=u),a<c&&(a=c)):(dl(c,l.suspenseConfig),u=bo(t,0,l,u,n,r),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=l:(e.lastEffect.nextEffect=l,e.lastEffect=l))),l=l.next}for(c=null,l=e.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===c&&(c=l,null===s&&(o=u)),a<h&&(a=h)):(u=bo(t,0,l,u,n,r),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=l:(e.lastCapturedEffect.nextEffect=l,e.lastCapturedEffect=l))),l=l.next}null===s&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===s&&null===c&&(o=u),e.baseState=o,e.firstUpdate=s,e.firstCapturedUpdate=c,gl(a),t.expirationTime=a,t.memoizedState=u}function xo(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),So(e.firstEffect,n),e.firstEffect=e.lastEffect=null,So(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function So(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;if("function"!=typeof n)throw Error(s(191,n));n.call(r)}t=t.nextEffect}}var Eo=L.ReactCurrentBatchConfig,Co=(new r.Component).refs;function No(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var Po={isMounted:function(t){return!!(t=t._reactInternalFiber)&&ee(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=el(),i=Eo.suspense;(i=go(r=nl(r,t,i),i)).payload=e,null!=n&&(i.callback=n),mo(t,i),rl(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=el(),i=Eo.suspense;(i=go(r=nl(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),mo(t,i),rl(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=el(),r=Eo.suspense;(r=go(n=nl(n,t,r),r)).tag=2,null!=e&&(r.callback=e),mo(t,r),rl(t,n)}};function Oo(t,e,n,r,i,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!(e.prototype&&e.prototype.isPureReactComponent&&ei(n,r)&&ei(i,o))}function To(t,e,n){var r=!1,i=di,o=e.contextType;return"object"==typeof o&&null!==o?o=co(o):(i=_i(e)?mi:gi.current,o=(r=null!=(r=e.contextTypes))?vi(t,i):di),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Po,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Io(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Po.enqueueReplaceState(e,e.state,null)}function Mo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Co;var o=e.contextType;"object"==typeof o&&null!==o?i.context=co(o):(o=_i(e)?mi:gi.current,i.context=vi(t,o)),null!==(o=t.updateQueue)&&(wo(t,o,n,i,r),i.state=t.memoizedState),"function"==typeof(o=e.getDerivedStateFromProps)&&(No(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Po.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(wo(t,o,n,i,r),i.state=t.memoizedState)),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var ko=Array.isArray;function Lo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===Co&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Ao(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Ro(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=Rl(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Dl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Lo(t,e,n),r.return=t,r):((r=Fl(n.type,n.key,n.props,null,t.mode,r)).ref=Lo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=zl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=jl(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Dl(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case F:return(n=Fl(e.type,e.key,e.props,null,t.mode,n)).ref=Lo(t,null,e),n.return=t,n;case j:return(e=zl(e,t.mode,n)).return=t,e}if(ko(e)||Z(e))return(e=jl(e,t.mode,n,null)).return=t,e;Ao(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case F:return n.key===i?n.type===D?h(t,e,n.props.children,r,i):u(t,e,n,r):null;case j:return n.key===i?c(t,e,n,r):null}if(ko(n)||Z(n))return null!==i?null:h(t,e,n,r,null);Ao(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case F:return t=t.get(null===r.key?n:r.key)||null,r.type===D?h(e,t,r.props.children,i,r.key):u(e,t,r,i);case j:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||Z(r))return h(e,t=t.get(n)||null,r,i,null);Ao(e,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,y=null;null!==h&&g<a.length;g++){h.index>g?(y=h,h=null):y=h.sibling;var m=f(i,h,a[g],l);if(null===m){null===h&&(h=y);break}t&&h&&null===m.alternate&&e(i,h),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m,h=y}if(g===a.length)return n(i,h),u;if(null===h){for(;g<a.length;g++)null!==(h=p(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);g<a.length;g++)null!==(y=d(h,i,g,a[g],l))&&(t&&null!==y.alternate&&h.delete(null===y.key?g:y.key),s=o(y,s,g),null===c?u=y:c.sibling=y,c=y);return t&&h.forEach((function(t){return e(i,t)})),u}function y(i,a,l,u){var c=Z(l);if("function"!=typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,y=a=0,m=null,v=l.next();null!==g&&!v.done;y++,v=l.next()){g.index>y?(m=g,g=null):m=g.sibling;var _=f(i,g,v.value,u);if(null===_){null===g&&(g=m);break}t&&g&&null===_.alternate&&e(i,g),a=o(_,a,y),null===h?c=_:h.sibling=_,h=_,g=m}if(v.done)return n(i,g),c;if(null===g){for(;!v.done;y++,v=l.next())null!==(v=p(i,v.value,u))&&(a=o(v,a,y),null===h?c=v:h.sibling=v,h=v);return c}for(g=r(i,g);!v.done;y++,v=l.next())null!==(v=d(g,i,y,v.value,u))&&(t&&null!==v.alternate&&g.delete(null===v.key?y:v.key),a=o(v,a,y),null===h?c=v:h.sibling=v,h=v);return t&&g.forEach((function(t){return e(i,t)})),c}return function(t,r,o,l){var u="object"==typeof o&&null!==o&&o.type===D&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case F:t:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag?o.type===D:u.elementType===o.type){n(t,u.sibling),(r=i(u,o.type===D?o.props.children:o.props)).ref=Lo(t,u,o),r.return=t,t=r;break t}n(t,u);break}e(t,u),u=u.sibling}o.type===D?((r=jl(o.props.children,t.mode,l,o.key)).return=t,t=r):((l=Fl(o.type,o.key,o.props,null,t.mode,l)).ref=Lo(t,r,o),l.return=t,t=l)}return a(t);case j:t:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=zl(o,t.mode,l)).return=t,t=r}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Dl(o,t.mode,l)).return=t,t=r),a(t);if(ko(o))return g(t,r,o,l);if(Z(o))return y(t,r,o,l);if(c&&Ao(t,o),void 0===o&&!u)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return n(t,r)}}var Fo=Ro(!0),jo=Ro(!1),Do={},zo={current:Do},qo={current:Do},Bo={current:Do};function Go(t){if(t===Do)throw Error(s(174));return t}function Uo(t,e){fi(Bo,e),fi(qo,t),fi(zo,Do);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qt(null,"");break;default:e=qt(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}pi(zo),fi(zo,e)}function Vo(t){pi(zo),pi(qo),pi(Bo)}function Wo(t){Go(Bo.current);var e=Go(zo.current),n=qt(e,t.type);e!==n&&(fi(qo,t),fi(zo,n))}function Ho(t){qo.current===t&&(pi(zo),pi(qo))}var Yo={current:0};function Xo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===$n||n.data===Jn))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Ko(t,e){return{responder:t,props:e}}var Zo=L.ReactCurrentDispatcher,$o=L.ReactCurrentBatchConfig,Jo=0,Qo=null,ts=null,es=null,ns=null,rs=null,is=null,os=0,ss=null,as=0,ls=!1,us=null,cs=0;function hs(){throw Error(s(321))}function ps(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qr(t[n],e[n]))return!1;return!0}function fs(t,e,n,r,i,o){if(Jo=o,Qo=e,es=null!==t?t.memoizedState:null,Zo.current=null===es?ks:Ls,e=n(r,i),ls){do{ls=!1,cs+=1,es=null!==t?t.memoizedState:null,is=ns,ss=rs=ts=null,Zo.current=Ls,e=n(r,i)}while(ls);us=null,cs=0}if(Zo.current=Ms,(t=Qo).memoizedState=ns,t.expirationTime=os,t.updateQueue=ss,t.effectTag|=as,t=null!==ts&&null!==ts.next,Jo=0,is=rs=ns=es=ts=Qo=null,os=0,ss=null,as=0,t)throw Error(s(300));return e}function ds(){Zo.current=Ms,Jo=0,is=rs=ns=es=ts=Qo=null,os=0,ss=null,as=0,ls=!1,us=null,cs=0}function gs(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===rs?ns=rs=t:rs=rs.next=t,rs}function ys(){if(null!==is)is=(rs=is).next,es=null!==(ts=es)?ts.next:null;else{if(null===es)throw Error(s(310));var t={memoizedState:(ts=es).memoizedState,baseState:ts.baseState,queue:ts.queue,baseUpdate:ts.baseUpdate,next:null};rs=null===rs?ns=t:rs.next=t,es=ts.next}return rs}function ms(t,e){return"function"==typeof e?e(t):e}function vs(t){var e=ys(),n=e.queue;if(null===n)throw Error(s(311));if(n.lastRenderedReducer=t,0<cs){var r=n.dispatch;if(null!==us){var i=us.get(n);if(void 0!==i){us.delete(n);var o=e.memoizedState;do{o=t(o,i.action),i=i.next}while(null!==i);return Qr(o,e.memoizedState)||(Vs=!0),e.memoizedState=o,e.baseUpdate===n.last&&(e.baseState=o),n.lastRenderedState=o,[o,r]}}return[e.memoizedState,r]}r=n.last;var a=e.baseUpdate;if(o=e.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var l=i=null,u=r,c=!1;do{var h=u.expirationTime;h<Jo?(c||(c=!0,l=a,i=o),h>os&&gl(os=h)):(dl(h,u.suspenseConfig),o=u.eagerReducer===t?u.eagerState:t(o,u.action)),a=u,u=u.next}while(null!==u&&u!==r);c||(l=a,i=o),Qr(o,e.memoizedState)||(Vs=!0),e.memoizedState=o,e.baseUpdate=l,e.baseState=i,n.lastRenderedState=o}return[e.memoizedState,n.dispatch]}function _s(t){var e=gs();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t}).dispatch=Is.bind(null,Qo,t),[e.memoizedState,t]}function bs(t){return vs(ms)}function ws(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===ss?(ss={lastEffect:null}).lastEffect=t.next=t:null===(e=ss.lastEffect)?ss.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,ss.lastEffect=t),t}function xs(t,e,n,r){var i=gs();as|=t,i.memoizedState=ws(e,n,void 0,void 0===r?null:r)}function Ss(t,e,n,r){var i=ys();r=void 0===r?null:r;var o=void 0;if(null!==ts){var s=ts.memoizedState;if(o=s.destroy,null!==r&&ps(r,s.deps))return void ws(0,n,o,r)}as|=t,i.memoizedState=ws(e,n,o,r)}function Es(t,e){return xs(516,192,t,e)}function Cs(t,e){return Ss(516,192,t,e)}function Ns(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ps(){}function Os(t,e){return gs().memoizedState=[t,void 0===e?null:e],t}function Ts(t,e){var n=ys();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ps(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Is(t,e,n){if(!(25>cs))throw Error(s(301));var r=t.alternate;if(t===Qo||null!==r&&r===Qo)if(ls=!0,t={expirationTime:Jo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===us&&(us=new Map),void 0===(n=us.get(e)))us.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{var i=el(),o=Eo.suspense;o={expirationTime:i=nl(i,t,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var a=e.last;if(null===a)o.next=o;else{var l=a.next;null!==l&&(o.next=l),a.next=o}if(e.last=o,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var u=e.lastRenderedState,c=r(u,n);if(o.eagerReducer=r,o.eagerState=c,Qr(c,u))return}catch(t){}rl(t,i)}}var Ms={readContext:co,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useResponder:hs,useDeferredValue:hs,useTransition:hs},ks={readContext:co,useCallback:Os,useContext:co,useEffect:Es,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,xs(4,36,Ns.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xs(4,36,t,e)},useMemo:function(t,e){var n=gs();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gs();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Is.bind(null,Qo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},gs().memoizedState=t},useState:_s,useDebugValue:Ps,useResponder:Ko,useDeferredValue:function(t,e){var n=_s(t),r=n[0],i=n[1];return Es((function(){o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===e?null:e;try{i(t)}finally{$o.suspense=n}}))}),[t,e]),r},useTransition:function(t){var e=_s(!1),n=e[0],r=e[1];return[Os((function(e){r(!0),o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===t?null:t;try{r(!1),e()}finally{$o.suspense=n}}))}),[t,n]),n]}},Ls={readContext:co,useCallback:Ts,useContext:co,useEffect:Cs,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Ss(4,36,Ns.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ss(4,36,t,e)},useMemo:function(t,e){var n=ys();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ps(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:vs,useRef:function(){return ys().memoizedState},useState:bs,useDebugValue:Ps,useResponder:Ko,useDeferredValue:function(t,e){var n=bs(),r=n[0],i=n[1];return Cs((function(){o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===e?null:e;try{i(t)}finally{$o.suspense=n}}))}),[t,e]),r},useTransition:function(t){var e=bs(),n=e[0],r=e[1];return[Ts((function(e){r(!0),o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===t?null:t;try{r(!1),e()}finally{$o.suspense=n}}))}),[t,n]),n]}},As=null,Rs=null,Fs=!1;function js(t,e){var n=Ll(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ds(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function zs(t){if(Fs){var e=Rs;if(e){var n=e;if(!Ds(t,e)){if(!(e=or(n.nextSibling))||!Ds(t,e))return t.effectTag=-1025&t.effectTag|2,Fs=!1,void(As=t);js(As,n)}As=t,Rs=or(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Fs=!1,As=t}}function qs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;As=t}function Bs(t){if(t!==As)return!1;if(!Fs)return qs(t),Fs=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!nr(e,t.memoizedProps))for(e=Rs;e;)js(t,e),e=or(e.nextSibling);if(qs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Rs=or(t.nextSibling);break t}e--}else"$"!==n&&n!==Jn&&n!==$n||e++}t=t.nextSibling}Rs=null}}else Rs=As?or(t.stateNode.nextSibling):null;return!0}function Gs(){Rs=As=null,Fs=!1}var Us=L.ReactCurrentOwner,Vs=!1;function Ws(t,e,n,r){e.child=null===t?jo(e,null,n,r):Fo(e,t.child,n,r)}function Hs(t,e,n,r,i){n=n.render;var o=e.ref;return uo(e,i),r=fs(t,e,n,r,o,i),null===t||Vs?(e.effectTag|=1,Ws(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),la(t,e,i))}function Ys(t,e,n,r,i,o){if(null===t){var s=n.type;return"function"!=typeof s||Al(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Fl(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Xs(t,e,s,r,i,o))}return s=t.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:ei)(i,r)&&t.ref===e.ref)?la(t,e,o):(e.effectTag|=1,(t=Rl(s,r)).ref=e.ref,t.return=e,e.child=t)}function Xs(t,e,n,r,i,o){return null!==t&&ei(t.memoizedProps,r)&&t.ref===e.ref&&(Vs=!1,i<o)?la(t,e,o):Zs(t,e,n,r,o)}function Ks(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Zs(t,e,n,r,i){var o=_i(n)?mi:gi.current;return o=vi(e,o),uo(e,i),n=fs(t,e,n,r,o,i),null===t||Vs?(e.effectTag|=1,Ws(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),la(t,e,i))}function $s(t,e,n,r,i){if(_i(n)){var o=!0;Ei(e)}else o=!1;if(uo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),To(e,n,r),Mo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;u="object"==typeof u&&null!==u?co(u):vi(e,u=_i(n)?mi:gi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Io(e,s,r,u),ho=!1;var p=e.memoizedState;l=s.state=p;var f=e.updateQueue;null!==f&&(wo(e,f,r,s,i),l=e.memoizedState),a!==r||p!==l||yi.current||ho?("function"==typeof c&&(No(e,n,c,r),l=e.memoizedState),(a=ho||Oo(e,n,a,r,p,l,u))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.effectTag|=4)):("function"==typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"==typeof s.componentDidMount&&(e.effectTag|=4),r=!1)}else s=e.stateNode,a=e.memoizedProps,s.props=e.type===e.elementType?a:to(e.type,a),l=s.context,u="object"==typeof(u=n.contextType)&&null!==u?co(u):vi(e,u=_i(n)?mi:gi.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Io(e,s,r,u),ho=!1,l=e.memoizedState,p=s.state=l,null!==(f=e.updateQueue)&&(wo(e,f,r,s,i),p=e.memoizedState),a!==r||l!==p||yi.current||ho?("function"==typeof c&&(No(e,n,c,r),p=e.memoizedState),(c=ho||Oo(e,n,a,r,l,p,u))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,u),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof s.componentDidUpdate&&(e.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=u,r=c):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),r=!1);return Js(t,e,n,r,o,i)}function Js(t,e,n,r,i,o){Ks(t,e);var s=0!=(64&e.effectTag);if(!r&&!s)return i&&Ci(e,n,!1),la(t,e,o);r=e.stateNode,Us.current=e;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&s?(e.child=Fo(e,t.child,null,o),e.child=Fo(e,null,a,o)):Ws(t,e,a,o),e.memoizedState=r.state,i&&Ci(e,n,!0),e.child}function Qs(t){var e=t.stateNode;e.pendingContext?xi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&xi(0,e.context,!1),Uo(t,e.containerInfo)}var ta,ea,na,ra={dehydrated:null,retryTime:0};function ia(t,e,n){var r,i=e.mode,o=e.pendingProps,s=Yo.current,a=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&s)&&(null===t||null!==t.memoizedState)),r?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),fi(Yo,1&s),null===t){if(void 0!==o.fallback&&zs(e),a){if(a=o.fallback,(o=jl(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=jl(a,i,n,null)).return=e,o.sibling=n,e.memoizedState=ra,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=jo(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,a){if(o=o.fallback,(n=Rl(t,t.pendingProps)).return=e,0==(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=Rl(i,o,i.expirationTime)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=ra,e.child=n,i}return n=Fo(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,a){if(a=o.fallback,(o=jl(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=jl(a,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=ra,e.child=o,n}return e.memoizedState=null,e.child=Fo(e,t,o.children,n)}function oa(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),lo(t.return,e)}function sa(t,e,n,r,i,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function aa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ws(t,e,r.children,n),0!=(2&(r=Yo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&oa(t,n);else if(19===t.tag)oa(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fi(Yo,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Xo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sa(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Xo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sa(e,!0,n,null,o,e.lastEffect);break;case"together":sa(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function la(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&gl(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Rl(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Rl(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function ua(t){t.effectTag|=4}function ca(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ha(t){switch(t.tag){case 1:_i(t.type)&&bi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Vo(),wi(),0!=(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return Ho(t),null;case 13:return pi(Yo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return pi(Yo),null;case 4:return Vo(),null;case 10:return ao(t),null;default:return null}}function pa(t,e){return{value:t,source:e,stack:J(e)}}ta=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ea=function(t,e,n,r,o){var s=t.memoizedProps;if(s!==r){var a,l,u=e.stateNode;switch(Go(zo.current),t=null,n){case"input":s=Nt(u,s),r=Nt(u,r),t=[];break;case"option":s=kt(u,s),r=kt(u,r),t=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":s=At(u,s),r=At(u,r),t=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(u.onclick=Vn)}for(a in Bn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in u=s[a])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(f.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(t||(t=[]),t.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(t=t||[]).push(a,""+c)):"children"===a?u===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(f.hasOwnProperty(a)?(null!=c&&Un(o,a),t||u===c||(t=[])):(t=t||[]).push(a,c))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&ua(e)}},na=function(t,e,n,r){n!==r&&ua(e)};var fa="function"==typeof WeakSet?WeakSet:Set;function da(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=J(n)),null!==n&&$(n.type),e=e.value,null!==t&&1===t.tag&&$(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function ga(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Pl(t,e)}else e.current=null}function ya(t,e){switch(e.tag){case 0:case 11:case 15:ma(2,0,e);break;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:to(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}function ma(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&t)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!=(r.tag&e)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function va(t,e,n){switch("function"==typeof Ml&&Ml(e),e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Yi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){Pl(i,t)}}t=t.next}while(t!==r)}))}break;case 1:ga(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Pl(t,e)}}(e,n);break;case 5:ga(e);break;case 4:xa(t,e,n)}}function _a(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,null!==e&&_a(e)}function ba(t){return 5===t.tag||3===t.tag||4===t.tag}function wa(t){t:{for(var e=t.return;null!==e;){if(ba(e)){var n=e;break t}e=e.return}throw Error(s(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Vt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ba(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){var o=5===i.tag||6===i.tag;if(o){var a=o?i.stateNode:i.stateNode.instance;if(n)if(r){var l=a;a=n,8===(o=e).nodeType?o.parentNode.insertBefore(l,a):o.insertBefore(l,a)}else e.insertBefore(a,n);else r?(8===(l=e).nodeType?(o=l.parentNode).insertBefore(a,l):(o=l).appendChild(a),null!=(l=l._reactRootContainer)||null!==o.onclick||(o.onclick=Vn)):e.appendChild(a)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function xa(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var l=t,u=o,c=n,h=u;;)if(va(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break;for(;null===h.sibling;){if(null===h.return||h.return===u)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(va(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Sa(t,e){switch(e.tag){case 0:case 11:case 14:case 15:ma(4,8,e);break;case 1:case 12:case 17:case 20:case 21:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[ur]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Ot(n,r),Gn(t,i),e=Gn(t,r),i=0;i<o.length;i+=2){var a=o[i],l=o[i+1];"style"===a?zn(n,l):"dangerouslySetInnerHTML"===a?Ut(n,l):"children"===a?Vt(n,l):xt(n,a,l,e)}switch(t){case"input":Tt(n,r);break;case"textarea":Ft(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Lt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Lt(n,!!r.multiple,r.defaultValue,!0):Lt(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===e.stateNode)throw Error(s(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:(e=e.stateNode).hydrate&&(e.hydrate=!1,Ne(e.containerInfo));break;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ua=Vi()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=Dn("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break t;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}Ea(e);break;case 19:Ea(e);break;default:throw Error(s(163))}}function Ea(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new fa),e.forEach((function(e){var r=Tl.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Ca="function"==typeof WeakMap?WeakMap:Map;function Na(t,e,n){(n=go(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wa||(Wa=!0,Ha=r),da(t,e)},n}function Pa(t,e,n){(n=go(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return da(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ya?Ya=new Set([this]):Ya.add(this),da(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Oa,Ta=Math.ceil,Ia=L.ReactCurrentDispatcher,Ma=L.ReactCurrentOwner,ka=0,La=null,Aa=null,Ra=0,Fa=0,ja=null,Da=1073741823,za=1073741823,qa=null,Ba=0,Ga=!1,Ua=0,Va=null,Wa=!1,Ha=null,Ya=null,Xa=!1,Ka=null,Za=90,$a=null,Ja=0,Qa=null,tl=0;function el(){return 0!=(48&ka)?1073741821-(Vi()/10|0):0!==tl?tl:tl=1073741821-(Vi()/10|0)}function nl(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=Wi();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&ka))return Ra;if(null!==n)t=Qi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Qi(t,150,100);break;case 97:case 96:t=Qi(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==La&&t===Ra&&--t,t}function rl(t,e){if(50<Ja)throw Ja=0,Qa=null,Error(s(185));if(null!==(t=il(t,e))){var n=Wi();1073741823===e?0!=(8&ka)&&0==(48&ka)?ll(t):(sl(t),0===ka&&Zi()):sl(t),0==(4&ka)||98!==n&&99!==n||(null===$a?$a=new Map([[t,e]]):(void 0===(n=$a.get(t))||n>e)&&$a.set(t,e))}}function il(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(La===i&&(gl(e),4===Fa&&Gl(i,Ra)),Ul(i,e)),i}function ol(t){var e=t.lastExpiredTime;return 0!==e?e:Bl(t,e=t.firstPendingTime)?(e=t.lastPingedTime)>(t=t.nextKnownPendingLevel)?e:t:e}function sl(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Ki(ll.bind(null,t));else{var e=ol(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=el();if(r=1073741823===e?99:1===e||2===e?95:0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Di&&Oi(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Ki(ll.bind(null,t)):Xi(r,al.bind(null,t),{timeout:10*(1073741821-e)-Vi()}),t.callbackNode=e}}}function al(t,e){if(tl=0,e)return Vl(t,e=el()),sl(t),null;var n=ol(t);if(0!==n){if(e=t.callbackNode,0!=(48&ka))throw Error(s(327));if(El(),t===La&&n===Ra||hl(t,n),null!==Aa){var r=ka;ka|=16;for(var i=fl();;)try{ml();break}catch(e){pl(t,e)}if(oo(),ka=r,Ia.current=i,1===Fa)throw e=ja,hl(t,n),Gl(t,n),sl(t),e;if(null===Aa)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Fa,La=null,r){case 0:case 1:throw Error(s(345));case 2:Vl(t,2<n?2:n);break;case 3:if(Gl(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=bl(i)),1073741823===Da&&10<(i=Ua+500-Vi())){if(Ga){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,hl(t,n);break}}if(0!==(o=ol(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=rr(wl.bind(null,t),i);break}wl(t);break;case 4:if(Gl(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=bl(i)),Ga&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,hl(t,n);break}if(0!==(i=ol(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==za?r=10*(1073741821-za)-Vi():1073741823===Da?r=0:(r=10*(1073741821-Da)-5e3,0>(r=(i=Vi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ta(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=rr(wl.bind(null,t),r);break}wl(t);break;case 5:if(1073741823!==Da&&null!==qa){o=Da;var a=qa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Vi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Gl(t,n),t.timeoutHandle=rr(wl.bind(null,t),r);break}}wl(t);break;default:throw Error(s(329))}if(sl(t),t.callbackNode===e)return al.bind(null,t)}}return null}function ll(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,t.finishedExpirationTime===e)wl(t);else{if(0!=(48&ka))throw Error(s(327));if(El(),t===La&&e===Ra||hl(t,e),null!==Aa){var n=ka;ka|=16;for(var r=fl();;)try{yl();break}catch(e){pl(t,e)}if(oo(),ka=n,Ia.current=r,1===Fa)throw n=ja,hl(t,e),Gl(t,e),sl(t),n;if(null!==Aa)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,La=null,wl(t),sl(t)}}return null}function ul(t,e){var n=ka;ka|=1;try{return t(e)}finally{0===(ka=n)&&Zi()}}function cl(t,e){var n=ka;ka&=-2,ka|=8;try{return t(e)}finally{0===(ka=n)&&Zi()}}function hl(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ir(n)),null!==Aa)for(n=Aa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=r.type.childContextTypes&&bi();break;case 3:Vo(),wi();break;case 5:Ho(r);break;case 4:Vo();break;case 13:case 19:pi(Yo);break;case 10:ao(r)}n=n.return}La=t,Aa=Rl(t.current,null),Ra=e,Fa=0,ja=null,za=Da=1073741823,qa=null,Ba=0,Ga=!1}function pl(t,e){for(;;){try{if(oo(),ds(),null===Aa||null===Aa.return)return Fa=1,ja=e,null;t:{var n=t,r=Aa.return,i=Aa,o=e;if(e=Ra,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var s=o,a=0!=(1&Yo.current),l=r;do{var u;if(u=13===l.tag){var c=l.memoizedState;if(null!==c)u=null!==c.dehydrated;else{var h=l.memoizedProps;u=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!a)}}if(u){var p=l.updateQueue;if(null===p){var f=new Set;f.add(s),l.updateQueue=f}else p.add(s);if(0==(2&l.mode)){if(l.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var d=go(1073741823,null);d.tag=2,mo(i,d)}i.expirationTime=1073741823;break t}o=void 0,i=e;var g=n.pingCache;if(null===g?(g=n.pingCache=new Ca,o=new Set,g.set(s,o)):void 0===(o=g.get(s))&&(o=new Set,g.set(s,o)),!o.has(i)){o.add(i);var y=Ol.bind(null,n,s,i);s.then(y,y)}l.effectTag|=4096,l.expirationTime=e;break t}l=l.return}while(null!==l);o=Error(($(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+J(i))}5!==Fa&&(Fa=2),o=pa(o,i),l=r;do{switch(l.tag){case 3:s=o,l.effectTag|=4096,l.expirationTime=e,vo(l,Na(l,s,e));break t;case 1:s=o;var m=l.type,v=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof m.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Ya||!Ya.has(v)))){l.effectTag|=4096,l.expirationTime=e,vo(l,Pa(l,s,e));break t}}l=l.return}while(null!==l)}Aa=_l(Aa)}catch(t){e=t;continue}break}}function fl(){var t=Ia.current;return Ia.current=Ms,null===t?Ms:t}function dl(t,e){t<Da&&2<t&&(Da=t),null!==e&&t<za&&2<t&&(za=t,qa=e)}function gl(t){t>Ba&&(Ba=t)}function yl(){for(;null!==Aa;)Aa=vl(Aa)}function ml(){for(;null!==Aa&&!Ti();)Aa=vl(Aa)}function vl(t){var e=Oa(t.alternate,t,Ra);return t.memoizedProps=t.pendingProps,null===e&&(e=_l(t)),Ma.current=null,e}function _l(t){Aa=t;do{var e=Aa.alternate;if(t=Aa.return,0==(2048&Aa.effectTag)){t:{var n=e,r=Ra,o=(e=Aa).pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 20:case 21:break;case 1:case 17:_i(e.type)&&bi();break;case 3:Vo(),wi(),(o=e.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===n||null===n.child)&&Bs(e)&&ua(e);break;case 5:Ho(e),r=Go(Bo.current);var a=e.type;if(null!==n&&null!=e.stateNode)ea(n,e,a,o,r),n.ref!==e.ref&&(e.effectTag|=128);else if(o){var l=Go(zo.current);if(Bs(e)){var u=(o=e).stateNode;n=o.type;var c=o.memoizedProps,h=r;switch(u[lr]=o,u[ur]=c,a=void 0,r=u,n){case"iframe":case"object":case"embed":Cn("load",r);break;case"video":case"audio":for(u=0;u<te.length;u++)Cn(te[u],r);break;case"source":Cn("error",r);break;case"img":case"image":case"link":Cn("error",r),Cn("load",r);break;case"form":Cn("reset",r),Cn("submit",r);break;case"details":Cn("toggle",r);break;case"input":Pt(r,c),Cn("invalid",r),Un(h,"onChange");break;case"select":r._wrapperState={wasMultiple:!!c.multiple},Cn("invalid",r),Un(h,"onChange");break;case"textarea":Rt(r,c),Cn("invalid",r),Un(h,"onChange")}for(a in Bn(n,c),u=null,c)c.hasOwnProperty(a)&&(l=c[a],"children"===a?"string"==typeof l?r.textContent!==l&&(u=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(u=["children",""+l]):f.hasOwnProperty(a)&&null!=l&&Un(h,a));switch(n){case"input":Et(r),It(r,c,!0);break;case"textarea":Et(r),jt(r);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(r.onclick=Vn)}a=u,o.updateQueue=a,(o=null!==a)&&ua(e)}else{n=e,h=a,c=o,u=9===r.nodeType?r:r.ownerDocument,l===Dt&&(l=zt(h)),l===Dt?"script"===h?((c=u.createElement("div")).innerHTML="<script><\/script>",u=c.removeChild(c.firstChild)):"string"==typeof c.is?u=u.createElement(h,{is:c.is}):(u=u.createElement(h),"select"===h&&(h=u,c.multiple?h.multiple=!0:c.size&&(h.size=c.size))):u=u.createElementNS(l,h),(c=u)[lr]=n,c[ur]=o,ta(c,e),e.stateNode=c;var p=r,d=Gn(h=a,n=o);switch(h){case"iframe":case"object":case"embed":Cn("load",c),r=n;break;case"video":case"audio":for(r=0;r<te.length;r++)Cn(te[r],c);r=n;break;case"source":Cn("error",c),r=n;break;case"img":case"image":case"link":Cn("error",c),Cn("load",c),r=n;break;case"form":Cn("reset",c),Cn("submit",c),r=n;break;case"details":Cn("toggle",c),r=n;break;case"input":Pt(c,n),r=Nt(c,n),Cn("invalid",c),Un(p,"onChange");break;case"option":r=kt(c,n);break;case"select":c._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),Cn("invalid",c),Un(p,"onChange");break;case"textarea":Rt(c,n),r=At(c,n),Cn("invalid",c),Un(p,"onChange");break;default:r=n}Bn(h,r),u=void 0,l=h;var g=c,y=r;for(u in y)if(y.hasOwnProperty(u)){var m=y[u];"style"===u?zn(g,m):"dangerouslySetInnerHTML"===u?null!=(m=m?m.__html:void 0)&&Ut(g,m):"children"===u?"string"==typeof m?("textarea"!==l||""!==m)&&Vt(g,m):"number"==typeof m&&Vt(g,""+m):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(f.hasOwnProperty(u)?null!=m&&Un(p,u):null!=m&&xt(g,u,m,d))}switch(h){case"input":Et(c),It(c,n,!1);break;case"textarea":Et(c),jt(c);break;case"option":null!=n.value&&c.setAttribute("value",""+wt(n.value));break;case"select":(r=c).multiple=!!n.multiple,null!=(c=n.value)?Lt(r,!!n.multiple,c,!1):null!=n.defaultValue&&Lt(r,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(c.onclick=Vn)}(o=er(a,o))&&ua(e)}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw Error(s(166));break;case 6:if(n&&null!=e.stateNode)na(0,e,n.memoizedProps,o);else{if("string"!=typeof o&&null===e.stateNode)throw Error(s(166));r=Go(Bo.current),Go(zo.current),Bs(e)?(a=(o=e).stateNode,r=o.memoizedProps,a[lr]=o,(o=a.nodeValue!==r)&&ua(e)):(a=e,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[lr]=a,e.stateNode=o)}break;case 13:if(pi(Yo),o=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=r;break t}o=null!==o,a=!1,null===n?void 0!==e.memoizedProps.fallback&&Bs(e):(a=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(c=e.firstEffect)?(e.firstEffect=r,r.nextEffect=c):(e.firstEffect=e.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!a&&0!=(2&e.mode)&&(null===n&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Yo.current)?0===Fa&&(Fa=3):(0!==Fa&&3!==Fa||(Fa=4),0!==Ba&&null!==La&&(Gl(La,Ra),Ul(La,Ba)))),(o||a)&&(e.effectTag|=4);break;case 4:Vo();break;case 10:ao(e);break;case 19:if(pi(Yo),null===(o=e.memoizedState))break;if(a=0!=(64&e.effectTag),null===(c=o.rendering)){if(a)ca(o,!1);else if(0!==Fa||null!==n&&0!=(64&n.effectTag))for(n=e.child;null!==n;){if(null!==(c=Xo(n))){for(e.effectTag|=64,ca(o,!1),null!==(a=c.updateQueue)&&(e.updateQueue=a,e.effectTag|=4),null===o.lastEffect&&(e.firstEffect=null),e.lastEffect=o.lastEffect,o=r,a=e.child;null!==a;)n=o,(r=a).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(c=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=c.childExpirationTime,r.expirationTime=c.expirationTime,r.child=c.child,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,n=c.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),a=a.sibling;fi(Yo,1&Yo.current|2),e=e.child;break t}n=n.sibling}}else{if(!a)if(null!==(n=Xo(c))){if(e.effectTag|=64,a=!0,null!==(r=n.updateQueue)&&(e.updateQueue=r,e.effectTag|=4),ca(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate){null!==(e=e.lastEffect=o.lastEffect)&&(e.nextEffect=null);break}}else Vi()>o.tailExpiration&&1<r&&(e.effectTag|=64,a=!0,ca(o,!1),e.expirationTime=e.childExpirationTime=r-1);o.isBackwards?(c.sibling=e.child,e.child=c):(null!==(r=o.last)?r.sibling=c:e.child=c,o.last=c)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Vi()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=e.lastEffect,r.sibling=null,o=Yo.current,fi(Yo,o=a?1&o|2:1&o),e=r;break t}break;default:throw Error(s(156,e.tag))}e=null}if(o=Aa,1===Ra||1!==o.childExpirationTime){for(a=0,r=o.child;null!==r;)(n=r.expirationTime)>a&&(a=n),(c=r.childExpirationTime)>a&&(a=c),r=r.sibling;o.childExpirationTime=a}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Aa.firstEffect),null!==Aa.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Aa.firstEffect),t.lastEffect=Aa.lastEffect),1<Aa.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Aa:t.firstEffect=Aa,t.lastEffect=Aa))}else{if(null!==(e=ha(Aa)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Aa.sibling))return e;Aa=t}while(null!==Aa);return 0===Fa&&(Fa=5),null}function bl(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function wl(t){var e=Wi();return Yi(99,xl.bind(null,t,e)),null}function xl(t,e){do{El()}while(null!==Ka);if(0!=(48&ka))throw Error(s(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=bl(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===La&&(Aa=La=null,Ra=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=ka;ka|=32,Ma.current=null,Qn=En;var a=Kn();if(Zn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else t:{var u=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(t){l=null;break t}var p=0,f=-1,d=-1,g=0,y=0,m=a,v=null;e:for(;;){for(var _;m!==l||0!==c&&3!==m.nodeType||(f=p+c),m!==h||0!==u&&3!==m.nodeType||(d=p+u),3===m.nodeType&&(p+=m.nodeValue.length),null!==(_=m.firstChild);)v=m,m=_;for(;;){if(m===a)break e;if(v===l&&++g===c&&(f=p),v===h&&++y===u&&(d=p),null!==(_=m.nextSibling))break;v=(m=v).parentNode}m=_}l=-1===f||-1===d?null:{start:f,end:d}}else l=null}l=l||{start:0,end:0}}else l=null;tr={focusedElem:a,selectionRange:l},En=!1,Va=i;do{try{Sl()}catch(t){if(null===Va)throw Error(s(330));Pl(Va,t),Va=Va.nextEffect}}while(null!==Va);Va=i;do{try{for(a=t,l=e;null!==Va;){var b=Va.effectTag;if(16&b&&Vt(Va.stateNode,""),128&b){var w=Va.alternate;if(null!==w){var x=w.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&b){case 2:wa(Va),Va.effectTag&=-3;break;case 6:wa(Va),Va.effectTag&=-3,Sa(Va.alternate,Va);break;case 1024:Va.effectTag&=-1025;break;case 1028:Va.effectTag&=-1025,Sa(Va.alternate,Va);break;case 4:Sa(Va.alternate,Va);break;case 8:xa(a,c=Va,l),_a(c)}Va=Va.nextEffect}}catch(t){if(null===Va)throw Error(s(330));Pl(Va,t),Va=Va.nextEffect}}while(null!==Va);if(x=tr,w=Kn(),b=x.focusedElem,l=x.selectionRange,w!==b&&b&&b.ownerDocument&&Xn(b.ownerDocument.documentElement,b)){null!==l&&Zn(b)&&(w=l.start,void 0===(x=l.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),c=b.textContent.length,a=Math.min(l.start,c),l=void 0===l.end?a:Math.min(l.end,c),!x.extend&&a>l&&(c=l,l=a,a=c),c=Yn(b,a),h=Yn(b,l),c&&h&&(1!==x.rangeCount||x.anchorNode!==c.node||x.anchorOffset!==c.offset||x.focusNode!==h.node||x.focusOffset!==h.offset)&&((w=w.createRange()).setStart(c.node,c.offset),x.removeAllRanges(),a>l?(x.addRange(w),x.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}tr=null,En=!!Qn,Qn=null,t.current=n,Va=i;do{try{for(b=r;null!==Va;){var S=Va.effectTag;if(36&S){var E=Va.alternate;switch(x=b,(w=Va).tag){case 0:case 11:case 15:ma(16,32,w);break;case 1:var C=w.stateNode;if(4&w.effectTag)if(null===E)C.componentDidMount();else{var N=w.elementType===w.type?E.memoizedProps:to(w.type,E.memoizedProps);C.componentDidUpdate(N,E.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var P=w.updateQueue;null!==P&&xo(0,P,C);break;case 3:var O=w.updateQueue;if(null!==O){if(a=null,null!==w.child)switch(w.child.tag){case 5:case 1:a=w.child.stateNode}xo(0,O,a)}break;case 5:var T=w.stateNode;null===E&&4&w.effectTag&&er(w.type,w.memoizedProps)&&T.focus();break;case 6:case 4:case 12:case 19:case 17:case 20:case 21:break;case 13:if(null===w.memoizedState){var I=w.alternate;if(null!==I){var M=I.memoizedState;if(null!==M){var k=M.dehydrated;null!==k&&Ne(k)}}}break;default:throw Error(s(163))}}if(128&S){w=void 0;var L=Va.ref;if(null!==L){var A=Va.stateNode;Va.tag,w=A,"function"==typeof L?L(w):L.current=w}}Va=Va.nextEffect}}catch(t){if(null===Va)throw Error(s(330));Pl(Va,t),Va=Va.nextEffect}}while(null!==Va);Va=null,zi(),ka=o}else t.current=n;if(Xa)Xa=!1,Ka=t,Za=e;else for(Va=i;null!==Va;)e=Va.nextEffect,Va.nextEffect=null,Va=e;if(0===(e=t.firstPendingTime)&&(Ya=null),1073741823===e?t===Qa?Ja++:(Ja=0,Qa=t):Ja=0,"function"==typeof Il&&Il(n.stateNode,r),sl(t),Wa)throw Wa=!1,t=Ha,Ha=null,t;return 0!=(8&ka)||Zi(),null}function Sl(){for(;null!==Va;){var t=Va.effectTag;0!=(256&t)&&ya(Va.alternate,Va),0==(512&t)||Xa||(Xa=!0,Xi(97,(function(){return El(),null}))),Va=Va.nextEffect}}function El(){if(90!==Za){var t=97<Za?97:Za;return Za=90,Yi(t,Cl)}}function Cl(){if(null===Ka)return!1;var t=Ka;if(Ka=null,0!=(48&ka))throw Error(s(331));var e=ka;for(ka|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:ma(128,0,n),ma(0,64,n)}}catch(e){if(null===t)throw Error(s(330));Pl(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return ka=e,Zi(),!0}function Nl(t,e,n){mo(t,e=Na(t,e=pa(n,e),1073741823)),null!==(t=il(t,1073741823))&&sl(t)}function Pl(t,e){if(3===t.tag)Nl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Nl(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r))){mo(n,t=Pa(n,t=pa(e,t),1073741823)),null!==(n=il(n,1073741823))&&sl(n);break}}n=n.return}}function Ol(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),La===t&&Ra===n?4===Fa||3===Fa&&1073741823===Da&&Vi()-Ua<500?hl(t,Ra):Ga=!0:Bl(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,t.finishedExpirationTime===n&&(t.finishedExpirationTime=0,t.finishedWork=null),sl(t)))}function Tl(t,e){var n=t.stateNode;null!==n&&n.delete(e),0==(e=0)&&(e=nl(e=el(),t,null)),null!==(t=il(t,e))&&sl(t)}Oa=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||yi.current)Vs=!0;else{if(r<n){switch(Vs=!1,e.tag){case 3:Qs(e),Gs();break;case 5:if(Wo(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:_i(e.type)&&Ei(e);break;case 4:Uo(e,e.stateNode.containerInfo);break;case 10:so(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?ia(t,e,n):(fi(Yo,1&Yo.current),null!==(e=la(t,e,n))?e.sibling:null);fi(Yo,1&Yo.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return aa(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),fi(Yo,Yo.current),!r)return null}return la(t,e,n)}Vs=!1}}else Vs=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=vi(e,gi.current),uo(e,n),i=fs(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,ds(),_i(r)){var o=!0;Ei(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&No(e,r,a,t),i.updater=Po,e.stateNode=i,i._reactInternalFiber=e,Mo(e,r,t,n),e=Js(null,e,r,!0,o,n)}else e.tag=0,Ws(null,e,i,n),e=e.child;return e;case 16:if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return Al(t)?1:0;if(null!=t){if((t=t.$$typeof)===V)return 11;if(t===Y)return 14}return 2}(i),t=to(i,t),o){case 0:e=Zs(null,e,i,t,n);break;case 1:e=$s(null,e,i,t,n);break;case 11:e=Hs(null,e,i,t,n);break;case 14:e=Ys(null,e,i,to(i.type,t),r,n);break;default:throw Error(s(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Zs(t,e,r,i=e.elementType===r?i:to(r,i),n);case 1:return r=e.type,i=e.pendingProps,$s(t,e,r,i=e.elementType===r?i:to(r,i),n);case 3:if(Qs(e),null===(r=e.updateQueue))throw Error(s(282));if(i=null!==(i=e.memoizedState)?i.element:null,wo(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i)Gs(),e=la(t,e,n);else{if((i=e.stateNode.hydrate)&&(Rs=or(e.stateNode.containerInfo.firstChild),As=e,i=Fs=!0),i)for(n=jo(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ws(t,e,r,n),Gs();e=e.child}return e;case 5:return Wo(e),null===t&&zs(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,nr(r,i)?a=null:null!==o&&nr(r,o)&&(e.effectTag|=16),Ks(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ws(t,e,a,n),e=e.child),e;case 6:return null===t&&zs(e),null;case 13:return ia(t,e,n);case 4:return Uo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Fo(e,null,r,n):Ws(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Hs(t,e,r,i=e.elementType===r?i:to(r,i),n);case 7:return Ws(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ws(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,so(e,o=i.value),null!==a){var l=a.value;if(0==(o=Qr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===i.children&&!yi.current){e=la(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=go(n,null)).tag=2,mo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),lo(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}}Ws(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,uo(e,n),r=r(i=co(i,o.unstable_observedBits)),e.effectTag|=1,Ws(t,e,r,n),e.child;case 14:return o=to(i=e.type,e.pendingProps),Ys(t,e,i,o=to(i.type,o),r,n);case 15:return Xs(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:to(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,_i(r)?(t=!0,Ei(e)):t=!1,uo(e,n),To(e,r,i),Mo(e,r,i,n),Js(null,e,r,!0,t,n);case 19:return aa(t,e,n)}throw Error(s(156,e.tag))};var Il=null,Ml=null;function kl(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ll(t,e,n,r){return new kl(t,e,n,r)}function Al(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Rl(t,e){var n=t.alternate;return null===n?((n=Ll(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)Al(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case D:return jl(n.children,i,o,e);case U:a=8,i|=7;break;case z:a=8,i|=1;break;case q:return(t=Ll(12,n,e,8|i)).elementType=q,t.type=q,t.expirationTime=o,t;case W:return(t=Ll(13,n,e,i)).type=W,t.elementType=W,t.expirationTime=o,t;case H:return(t=Ll(19,n,e,i)).elementType=H,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case B:a=10;break t;case G:a=9;break t;case V:a=11;break t;case Y:a=14;break t;case X:a=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Ll(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function jl(t,e,n,r){return(t=Ll(7,t,r,e)).expirationTime=n,t}function Dl(t,e,n){return(t=Ll(6,t,null,e)).expirationTime=n,t}function zl(t,e,n){return(e=Ll(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ql(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Bl(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Gl(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Ul(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Vl(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Wl(t,e,n,r){var i=e.current,o=el(),a=Eo.suspense;o=nl(o,i,a);t:if(n){e:{if(ee(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=Si(n,u,l);break t}}n=l}else n=di;return null===e.context?e.context=n:e.pendingContext=n,(e=go(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),mo(i,e),rl(i,o),o}function Hl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Yl(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Xl(t,e){Yl(t,e),(t=t.alternate)&&Yl(t,e)}function Kl(t,e,n){var r=new ql(t,e,n=null!=n&&!0===n.hydrate),i=Ll(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,t[cr]=r.current,n&&0!==e&&function(t){var e=An(t);ye.forEach((function(n){Rn(n,t,e)})),me.forEach((function(n){Rn(n,t,e)}))}(9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Zl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $l(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof i){var a=i;i=function(){var t=Hl(s);a.call(t)}}Wl(e,s,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Kl(t,0,e?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"==typeof i){var l=i;i=function(){var t=Hl(s);l.call(t)}}cl((function(){Wl(e,s,t,i)}))}return Hl(s)}function Jl(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Ql(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(e))throw Error(s(200));return Jl(t,e,null,n)}Kl.prototype.render=function(t,e){Wl(t,this._internalRoot,null,void 0===e?null:e)},Kl.prototype.unmount=function(t){var e=this._internalRoot,n=void 0===t?null:t,r=e.containerInfo;Wl(null,e,null,(function(){r[cr]=null,null!==n&&n()}))},oe=function(t){if(13===t.tag){var e=Qi(el(),150,100);rl(t,e),Xl(t,e)}},se=function(t){if(13===t.tag){el();var e=Ji++;rl(t,e),Xl(t,e)}},ae=function(t){if(13===t.tag){var e=el();rl(t,e=nl(e,t,null)),Xl(t,e)}},tt=function(t,e,n){switch(e){case"input":if(Tt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dr(r);if(!i)throw Error(s(90));Ct(r),Tt(r,i)}}}break;case"textarea":Ft(t,n);break;case"select":null!=(e=n.value)&&Lt(t,!!n.multiple,e,!1)}},st=ul,at=function(t,e,n,r){var i=ka;ka|=4;try{return Yi(98,t.bind(null,e,n,r))}finally{0===(ka=i)&&Zi()}},lt=function(){0==(49&ka)&&(function(){if(null!==$a){var t=$a;$a=null,t.forEach((function(t,e){Vl(e,t),sl(e)})),Zi()}}(),El())},ut=function(t,e){var n=ka;ka|=2;try{return t(e)}finally{0===(ka=n)&&Zi()}};var tu={createPortal:Ql,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return null===(t=ie(e))?null:t.stateNode},hydrate:function(t,e,n){if(!Zl(e))throw Error(s(200));return $l(null,t,e,!0,n)},render:function(t,e,n){if(!Zl(e))throw Error(s(200));return $l(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){if(!Zl(n))throw Error(s(200));if(null==t||void 0===t._reactInternalFiber)throw Error(s(38));return $l(t,e,n,!1,r)},unmountComponentAtNode:function(t){if(!Zl(t))throw Error(s(40));return!!t._reactRootContainer&&(cl((function(){$l(null,null,t,!1,(function(){t._reactRootContainer=null,t[cr]=null}))})),!0)},unstable_createPortal:function(){return Ql.apply(void 0,arguments)},unstable_batchedUpdates:ul,flushSync:function(t,e){if(0!=(48&ka))throw Error(s(187));var n=ka;ka|=1;try{return Yi(99,t.bind(null,e))}finally{ka=n,Zi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[pr,fr,dr,M.injectEventPluginsByName,p,Le,function(t){P(t,ke)},it,ot,In,I,El,{current:!1}]}};!function(t){var e=t.findFiberByHostInstance;!function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Il=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},Ml=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ie(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:hr,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"});var eu={default:tu},nu=eu&&tu||eu;t.exports=nu.default||nu},3935:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(4448)},9921:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case u:case p:case y:case g:case l:return t;default:return e}}case i:return e}}}function w(t){return b(t)===h}e.typeOf=b,e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Lazy=y,e.Memo=g,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===h||t===a||t===s||t===f||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===g||t.$$typeof===l||t.$$typeof===u||t.$$typeof===p||t.$$typeof===m||t.$$typeof===v||t.$$typeof===_)},e.isAsyncMode=function(t){return w(t)||b(t)===c},e.isConcurrentMode=w,e.isContextConsumer=function(t){return b(t)===u},e.isContextProvider=function(t){return b(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return b(t)===p},e.isFragment=function(t){return b(t)===o},e.isLazy=function(t){return b(t)===y},e.isMemo=function(t){return b(t)===g},e.isPortal=function(t){return b(t)===i},e.isProfiler=function(t){return b(t)===a},e.isStrictMode=function(t){return b(t)===s},e.isSuspense=function(t){return b(t)===f}},9864:(t,e,n)=>{"use strict";t.exports=n(9921)},2408:(t,e,n)=>{"use strict";var r=n(7418),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"==typeof Symbol&&Symbol.iterator;function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||v}function w(){}function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(m(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=b.prototype;var S=x.prototype=new w;S.constructor=x,r(S,b.prototype),S.isPureReactComponent=!0;var E={current:null},C={current:null},N=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function O(t,e,n){var r,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)N.call(e,r)&&!P.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:C.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var I=/\/+/g,M=[];function k(t,e,n,r){if(M.length){var i=M.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function L(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function A(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case o:case s:a=!0}}if(a)return n(r,t,""===e?"."+F(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var l=0;l<t.length;l++){var u=e+F(i=t[l],l);a+=A(i,u,n,r)}else if("function"==typeof(u=null===t||"object"!=typeof t?null:"function"==typeof(u=y&&t[y]||t["@@iterator"])?u:null))for(t=u.call(t),l=0;!(i=t.next()).done;)a+=A(i=i.value,u=e+F(i,l++),n,r);else if("object"===i)throw n=""+t,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function R(t,e,n){return null==t?0:A(t,"",e,n)}function F(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function j(t,e){t.func.call(t.context,e,t.count++)}function D(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?z(t,r,n,(function(t){return t})):null!=t&&(T(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+n)),r.push(t))}function z(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(I,"$&/")+"/"),R(t,D,e=k(e,o,r,i)),L(e)}function q(){var t=E.current;if(null===t)throw Error(m(321));return t}var B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return z(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,j,e=k(null,null,e,n)),L(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return z(t,e,null,(function(t){return t})),e},only:function(t){if(!T(t))throw Error(m(143));return t}},createRef:function(){return{current:null}},Component:b,PureComponent:x,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:p,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return q().useCallback(t,e)},useContext:function(t,e){return q().useContext(t,e)},useEffect:function(t,e){return q().useEffect(t,e)},useImperativeHandle:function(t,e,n){return q().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return q().useLayoutEffect(t,e)},useMemo:function(t,e){return q().useMemo(t,e)},useReducer:function(t,e,n){return q().useReducer(t,e,n)},useRef:function(t){return q().useRef(t)},useState:function(t){return q().useState(t)},Fragment:a,Profiler:u,StrictMode:l,Suspense:f,createElement:O,cloneElement:function(t,e,n){if(null==t)throw Error(m(267,t));var i=r({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=C.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)N.call(e,c)&&!P.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:l}},createFactory:function(t){var e=O.bind(null,t);return e.type=t,e},isValidElement:T,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:E,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r}},G={default:B},U=G&&B||G;t.exports=U.default||U},7294:(t,e,n)=>{"use strict";t.exports=n(2408)},7643:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,definition;definition=function(){var context=this,XHR2;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else try{XHR2=__webpack_require__(2676)}catch(t){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(t){if(!0===t.crossOrigin){var e=context[xmlHttpRequest]?new XMLHttpRequest:null;if(e&&"withCredentials"in e)return e;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(t){return t}};function succeed(t){var e=protocolRe.exec(t.url);return e=e&&e[1]||context.location.protocol,httpsRe.test(e)?twoHundo.test(t.request.status):!!t.request.response}function handleReadyState(t,e,n){return function(){return t._aborted?n(t.request):t._timedOut?n(t.request,"Request is aborted: timeout"):void(t.request&&4==t.request[readyState]&&(t.request.onreadystatechange=noop,succeed(t)?e(t.request):n(t.request)))}}function setHeaders(t,e){var n,r=e.headers||{};r.Accept=r.Accept||defaultHeaders.accept[e.type]||defaultHeaders.accept["*"];var i="undefined"!=typeof FormData&&e.data instanceof FormData;for(n in e.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||i||(r[contentType]=e.contentType||defaultHeaders.contentType),r)r.hasOwnProperty(n)&&"setRequestHeader"in t&&t.setRequestHeader(n,r[n])}function setCredentials(t,e){void 0!==e.withCredentials&&void 0!==t.withCredentials&&(t.withCredentials=!!e.withCredentials)}function generalCallback(t){lastValue=t}function urlappend(t,e){return t+(/\?/.test(t)?"&":"?")+e}function handleJsonp(t,e,n,r){var i=uniqid++,o=t.jsonpCallback||"callback",s=t.jsonpCallbackName||reqwest.getcallbackPrefix(i),a=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),l=r.match(a),u=doc.createElement("script"),c=0,h=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?r=r.replace(a,"$1="+s):s=l[3]:r=urlappend(r,o+"="+s),context[s]=generalCallback,u.type="text/javascript",u.src=r,u.async=!0,void 0===u.onreadystatechange||h||(u.htmlFor=u.id="_reqwest_"+i),u.onload=u.onreadystatechange=function(){if(u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c)return!1;u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),e(lastValue),lastValue=void 0,head.removeChild(u),c=1},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(t,e){var n,r=this.o,i=(r.method||"GET").toUpperCase(),o="string"==typeof r?r:r.url,s=!1!==r.processData&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,a=!1;return"jsonp"!=r.type&&"GET"!=i||!s||(o=urlappend(o,s),s=null),"jsonp"==r.type?handleJsonp(r,t,e,o):((n=r.xhr&&r.xhr(r)||xhr(r)).open(i,o,!1!==r.async),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=t,n.onerror=e,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,t,e),r.before&&r.before(n),a?setTimeout((function(){n.send(s)}),200):n.send(s),n)}function Reqwest(t,e){this.o=t,this.fn=e,init.apply(this,arguments)}function setType(t){if(null!==t)return t.match("json")?"json":t.match("javascript")?"js":t.match("text")?"html":t.match("xml")?"xml":void 0}function init(o,fn){this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;function complete(t){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(t){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(t){return error(resp,"Could not parse JSON in response",t)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(t,e,n){for(t=self.request,self._responseArgs.resp=t,self._responseArgs.msg=e,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(t,e,n);complete(t)}fn=fn||function(){},o.timeout&&(this.timeout=setTimeout((function(){timedOut()}),o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push((function(){o.error.apply(o,arguments)})),o.complete&&this._completeHandlers.push((function(){o.complete.apply(o,arguments)})),this.request=getRequest.call(this,success,error)}function reqwest(t,e){return new Reqwest(t,e)}function normalize(t){return t?t.replace(/\r?\n/g,"\r\n"):""}function serial(t,e){var n,r,i,o,s=t.name,a=t.tagName.toLowerCase(),l=function(t){t&&!t.disabled&&e(s,normalize(t.attributes.value&&t.attributes.value.specified?t.value:t.text))};if(!t.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(t.type)||(n=/checkbox/i.test(t.type),r=/radio/i.test(t.type),i=t.value,(!n&&!r||t.checked)&&e(s,normalize(n&&""===i?"on":i)));break;case"textarea":e(s,normalize(t.value));break;case"select":if("select-one"===t.type.toLowerCase())l(t.selectedIndex>=0?t.options[t.selectedIndex]:null);else for(o=0;t.length&&o<t.length;o++)t.options[o].selected&&l(t.options[o])}}function eachFormElement(){var t,e,n=this,r=function(t,e){var r,i,o;for(r=0;r<e.length;r++)for(o=t[byTag](e[r]),i=0;i<o.length;i++)serial(o[i],n)};for(e=0;e<arguments.length;e++)/input|select|textarea/i.test((t=arguments[e]).tagName)&&serial(t,n),r(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var t={};return eachFormElement.apply((function(e,n){e in t?(t[e]&&!isArray(t[e])&&(t[e]=[t[e]]),t[e].push(n)):t[e]=n}),arguments),t}function buildParams(t,e,n,r){var i,o,s,a=/\[\]$/;if(isArray(e))for(o=0;e&&o<e.length;o++)s=e[o],n||a.test(t)?r(t,s):buildParams(t+"["+("object"==typeof s?o:"")+"]",s,n,r);else if(e&&"[object Object]"===e.toString())for(i in e)buildParams(t+"["+i+"]",e[i],n,r);else r(t,e)}return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(t,e){return t=t||function(){},e=e||function(){},this._fulfilled?this._responseArgs.resp=t(this._responseArgs.resp):this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(t),this._errorHandlers.push(e)),this},always:function(t){return this._fulfilled||this._erred?t(this._responseArgs.resp):this._completeHandlers.push(t),this},fail:function(t){return this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(t),this},catch:function(t){return this.fail(t)}},reqwest.serializeArray=function(){var t=[];return eachFormElement.apply((function(e,n){t.push({name:e,value:n})}),arguments),t},reqwest.serialize=function(){if(0===arguments.length)return"";var t,e=Array.prototype.slice.call(arguments,0);return(t=e.pop())&&t.nodeType&&e.push(t)&&(t=null),t&&(t=t.type),("map"==t?serializeHash:"array"==t?reqwest.serializeArray:serializeQueryString).apply(null,e)},reqwest.toQueryString=function(t,e){var n,r,i=e||!1,o=[],s=encodeURIComponent,a=function(t,e){e="function"==typeof e?e():null==e?"":e,o[o.length]=s(t)+"="+s(e)};if(isArray(t))for(r=0;t&&r<t.length;r++)a(t[r].name,t[r].value);else for(n in t)t.hasOwnProperty(n)&&buildParams(n,t[n],i,a);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(t,e){return t&&(t.type&&(t.method=t.type)&&delete t.type,t.dataType&&(t.type=t.dataType),t.jsonpCallback&&(t.jsonpCallbackName=t.jsonpCallback)&&delete t.jsonpCallback,t.jsonp&&(t.jsonpCallback=t.jsonp)),new Reqwest(t,e)},reqwest.ajaxSetup=function(t){for(var e in t=t||{})globalSetupOptions[e]=t[e]},reqwest},module.exports?module.exports=definition():void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=definition)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},53:(t,e)=>{"use strict";var n,r,i,o,s;if(Object.defineProperty(e,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var a=null,l=null,u=function(){if(null!==a)try{var t=e.unstable_now();a(!0,t),a=null}catch(t){throw setTimeout(u,0),t}},c=Date.now();e.unstable_now=function(){return Date.now()-c},n=function(t){null!==a?setTimeout(n,0,t):(a=t,setTimeout(u,0))},r=function(t,e){l=setTimeout(t,e)},i=function(){clearTimeout(l)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,p=window.Date,f=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)e.unstable_now=function(){return h.now()};else{var y=p.now();e.unstable_now=function(){return p.now()-y}}var m=!1,v=null,_=-1,b=5,w=0;o=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,S=x.port2;x.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();w=t+b;try{v(!0,t)?S.postMessage(null):(m=!1,v=null)}catch(t){throw S.postMessage(null),t}}else m=!1},n=function(t){v=t,m||(m=!0,S.postMessage(null))},r=function(t,n){_=f((function(){t(e.unstable_now())}),n)},i=function(){d(_),_=-1}}function E(t,e){var n=t.length;t.push(e);t:for(;;){var r=Math.floor((n-1)/2),i=t[r];if(!(void 0!==i&&0<P(i,e)))break t;t[r]=e,t[n]=i,n=r}}function C(t){return void 0===(t=t[0])?null:t}function N(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,s=t[o],a=o+1,l=t[a];if(void 0!==s&&0>P(s,n))void 0!==l&&0>P(l,s)?(t[r]=l,t[a]=n,r=a):(t[r]=s,t[o]=n,r=o);else{if(!(void 0!==l&&0>P(l,n)))break t;t[r]=l,t[a]=n,r=a}}}return e}return null}function P(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var O=[],T=[],I=1,M=null,k=3,L=!1,A=!1,R=!1;function F(t){for(var e=C(T);null!==e;){if(null===e.callback)N(T);else{if(!(e.startTime<=t))break;N(T),e.sortIndex=e.expirationTime,E(O,e)}e=C(T)}}function j(t){if(R=!1,F(t),!A)if(null!==C(O))A=!0,n(D);else{var e=C(T);null!==e&&r(j,e.startTime-t)}}function D(t,n){A=!1,R&&(R=!1,i()),L=!0;var s=k;try{for(F(n),M=C(O);null!==M&&(!(M.expirationTime>n)||t&&!o());){var a=M.callback;if(null!==a){M.callback=null,k=M.priorityLevel;var l=a(M.expirationTime<=n);n=e.unstable_now(),"function"==typeof l?M.callback=l:M===C(O)&&N(O),F(n)}else N(O);M=C(O)}if(null!==M)var u=!0;else{var c=C(T);null!==c&&r(j,c.startTime-n),u=!1}return u}finally{M=null,k=s,L=!1}}function z(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=k;k=t;try{return e()}finally{k=n}},e.unstable_next=function(t){switch(k){case 1:case 2:case 3:var e=3;break;default:e=k}var n=k;k=e;try{return t()}finally{k=n}},e.unstable_scheduleCallback=function(t,o,s){var a=e.unstable_now();if("object"==typeof s&&null!==s){var l=s.delay;l="number"==typeof l&&0<l?a+l:a,s="number"==typeof s.timeout?s.timeout:z(t)}else s=z(t),l=a;return t={id:I++,callback:o,priorityLevel:t,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(t.sortIndex=l,E(T,t),null===C(O)&&t===C(T)&&(R?i():R=!0,r(j,l-a))):(t.sortIndex=s,E(O,t),A||L||(A=!0,n(D))),t},e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_wrapCallback=function(t){var e=k;return function(){var n=k;k=e;try{return t.apply(this,arguments)}finally{k=n}}},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=C(O);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<M.expirationTime||o()},e.unstable_requestPaint=q,e.unstable_continueExecution=function(){A||L||(A=!0,n(D))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return C(O)},e.unstable_Profiling=null},3840:(t,e,n)=>{"use strict";t.exports=n(53)},2511:function(t,e,n){var r;t=n.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,l=36,u=/^xn--/,c=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,d=String.fromCharCode;function g(t){throw RangeError(p[t])}function y(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+y((t=t.replace(h,".")).split("."),e).join(".")}function v(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function _(t){return y(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+d(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;r+=l)t=f(t/35);return f(r+36*t/(t+38))}function x(t){var e,n,r,i,o,s,u,c,h,p,d,y=[],m=t.length,v=0,b=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&g("not-basic"),y.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,s=1,u=l;i>=m&&g("invalid-input"),((c=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l)>=l||c>f((a-v)/s))&&g("overflow"),v+=c*s,!(c<(h=u<=x?1:u>=x+26?26:u-x));u+=l)s>f(a/(p=l-h))&&g("overflow"),s*=p;x=w(v-o,e=y.length+1,0==o),f(v/e)>a-b&&g("overflow"),b+=f(v/e),v%=e,y.splice(v++,0,b)}return _(y)}function S(t){var e,n,r,i,o,s,u,c,h,p,y,m,_,x,S,E=[];for(m=(t=v(t)).length,e=128,n=0,o=72,s=0;s<m;++s)(y=t[s])<128&&E.push(d(y));for(r=i=E.length,i&&E.push("-");r<m;){for(u=a,s=0;s<m;++s)(y=t[s])>=e&&y<u&&(u=y);for(u-e>f((a-n)/(_=r+1))&&g("overflow"),n+=(u-e)*_,e=u,s=0;s<m;++s)if((y=t[s])<e&&++n>a&&g("overflow"),y==e){for(c=n,h=l;!(c<(p=h<=o?1:h>=o+26?26:h-o));h+=l)S=c-p,x=l-p,E.push(d(b(p+S%x,0))),c=f(S/x);E.push(d(b(c,0))),o=w(n,_,r==i),n=0,++r}++n,++e}return E.join("")}s={version:"1.3.2",ucs2:{decode:v,encode:_},decode:x,encode:S,toASCII:function(t){return m(t,(function(t){return c.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return m(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},8575:(t,e,n)=>{"use strict";var r=n(2511),i=n(2502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=_;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(7673);function _(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(a);if(_=_.trim(),!n&&1===t.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(_);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,_=_.substr(w.length)}if(n||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===_.substr(0,2);!S||w&&y[w]||(_=_.substr(2),this.slashes=!0)}if(!y[w]&&(S||w&&!m[w])){for(var E,C,N=-1,P=0;P<p.length;P++)-1!==(O=_.indexOf(p[P]))&&(-1===N||O<N)&&(N=O);for(-1!==(C=-1===N?_.lastIndexOf("@"):_.lastIndexOf("@",N))&&(E=_.slice(0,C),_=_.slice(C+1),this.auth=decodeURIComponent(E)),N=-1,P=0;P<h.length;P++){var O;-1!==(O=_.indexOf(h[P]))&&(-1===N||O<N)&&(N=O)}-1===N&&(N=_.length),this.host=_.slice(0,N),_=_.slice(N),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var I=this.hostname.split(/\./),M=(P=0,I.length);P<M;P++){var k=I[P];if(k&&!k.match(f)){for(var L="",A=0,R=k.length;A<R;A++)k.charCodeAt(A)>127?L+="x":L+=k[A];if(!L.match(f)){var F=I.slice(0,P),j=I.slice(P+1),D=k.match(d);D&&(F.push(D[1]),j.unshift(D[2])),j.length&&(_="/"+j.join(".")+_),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var z=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+z,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[x])for(P=0,M=c.length;P<M;P++){var B=c[P];if(-1!==_.indexOf(B)){var G=encodeURIComponent(B);G===B&&(G=escape(B)),_=_.split(B).join(G)}}var U=_.indexOf("#");-1!==U&&(this.hash=_.substr(U),_=_.slice(0,U));var V=_.indexOf("?");if(-1!==V?(this.search=_.substr(V),this.query=_.substr(V+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,V)):e&&(this.search="",this.query={}),_&&(this.pathname=_),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var W=this.search||"";this.path=z+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=t[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",v=n.search||"";n.path=g+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||n.host&&t.pathname,x=w,S=n.pathname&&n.pathname.split("/")||[],E=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===S[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return E&&(n.hostname=n.host=S.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=S.slice(-1)[0],N=(n.host||t.host||S.length>1)&&("."===C||".."===C)||""===C,P=0,O=S.length;O>=0;O--)"."===(C=S[O])?S.splice(O,1):".."===C?(S.splice(O,1),P++):P&&(S.splice(O,1),P--);if(!w&&!x)for(;P--;P)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),N&&"/"!==S.join("/").substr(-1)&&S.push("");var T,I=""===S[0]||S[0]&&"/"===S[0].charAt(0);return E&&(n.hostname=n.host=I?"":S.length?S.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(w=w||n.host&&S.length)&&!I&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},2502:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},5877:(t,e,n)=>{var r=n(3570),i=n(1171),o=i;o.v1=r,o.v4=i,t.exports=o},5327:t=>{for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);t.exports=function(t,n){var r=n||0,i=e;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},5217:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},3570:(t,e,n)=>{var r,i,o=n(5217),s=n(5327),a=0,l=0;t.exports=function(t,e,n){var u=e&&n||0,c=e||[],h=(t=t||{}).node||r,p=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==p){var f=o();null==h&&(h=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=i=16383&(f[6]<<8|f[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:l+1,y=d-a+(g-l)/1e4;if(y<0&&void 0===t.clockseq&&(p=p+1&16383),(y<0||d>a)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,l=g,i=p;var m=(1e4*(268435455&(d+=122192928e5))+g)%4294967296;c[u++]=m>>>24&255,c[u++]=m>>>16&255,c[u++]=m>>>8&255,c[u++]=255&m;var v=d/4294967296*1e4&268435455;c[u++]=v>>>8&255,c[u++]=255&v,c[u++]=v>>>24&15|16,c[u++]=v>>>16&255,c[u++]=p>>>8|128,c[u++]=255&p;for(var _=0;_<6;++_)c[u+_]=h[_];return e||s(c)}},1171:(t,e,n)=>{var r=n(5217),i=n(5327);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||i(s)}},9975:function(t){(function(){var e;t.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return e},getLink:function(t){return"https://fonts.google.com/specimen/"+t.replace(/( )/g,"+")},normalizeName:function(t){return t}},e=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},2676:()=>{},4942:(t,e,n)=>{"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>r})}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},getProto=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,__webpack_require__.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&e&&t;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((e=>r[e]=()=>t[e]));return r.default=()=>t,__webpack_require__.d(n,r),n},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,n)=>(__webpack_require__.f[n](t,e),e)),[])),__webpack_require__.u=t=>t+".geomoose.min.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),inProgress={},dataWebpackPrefix="gm3:",__webpack_require__.l=(t,e,n,r)=>{if(inProgress[t])inProgress[t].push(e);else{var i,o;if(void 0!==n)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var l=s[a];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==dataWebpackPrefix+n){i=l;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=t),inProgress[t]=[e];var u=(e,n)=>{i.onerror=i.onload=null,clearTimeout(c);var r=inProgress[t];if(delete inProgress[t],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((t=>t(n))),e)return e(n)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),__webpack_require__.p="/",(()=>{var t={179:0};__webpack_require__.f.j=(e,n)=>{var r=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(e),s=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[o,s,a]=n,l=0;if(o.some((e=>0!==t[e]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);a&&a(__webpack_require__)}for(e&&e(n);l<o.length;l++)i=o[l],__webpack_require__.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkgm3=self.webpackChunkgm3||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Application:()=>Vy,components:()=>MR,jsts:()=>n,trackers:()=>kR,util:()=>t});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{FORMAT_OPTIONS:()=>Ec,addProjDef:()=>Ac,changeFeatures:()=>Ic,configureProjections:()=>Lc,convertArea:()=>Uc,convertLength:()=>Gc,featureMatch:()=>Pc,featureToJson:()=>zc,filterFeatures:()=>Oc,formatUrlParameters:()=>Sc,geomToJson:()=>jc,getExtentForQuery:()=>eh,getFeaturesExtent:()=>kc,getLayerName:()=>xc,getLayersByZOrder:()=>Xc,getMapSourceName:()=>wc,getScale:()=>nh,getSquareBuffer:()=>ih,getTagContents:()=>_c,getUtmZone:()=>Rc,getVersion:()=>Mc,getXmlTextContents:()=>vc,getZValue:()=>Yc,isLayerOn:()=>Hc,joinUrl:()=>rh,jsonEquals:()=>th,jsonToFeature:()=>qc,jsonToGeom:()=>Dc,matchFeatures:()=>Tc,metersAreaToUnits:()=>Wc,metersLengthToUnits:()=>Vc,objectsDiffer:()=>bc,parseBoolean:()=>mc,parseHash:()=>gc,parseQuery:()=>yc,projectFeatures:()=>Qc,requEstimator:()=>Jc,transformFeatures:()=>$c,transformProperties:()=>Zc,xhr:()=>Kc});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{addConnectedPlugin:()=>vg,setLayerVisibility:()=>_g});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{buffer:()=>Jw,bufferAndUnion:()=>ex,bufferFeature:()=>tx,union:()=>nx});const r="object"==typeof global&&global&&global.Object===Object&&global;var i="object"==typeof self&&self&&self.Object===Object&&self;const o=r||i||Function("return this")(),s=o.Symbol;var a=Object.prototype,l=a.hasOwnProperty,u=a.toString,c=s?s.toStringTag:void 0;var h=Object.prototype.toString;var p=s?s.toStringTag:void 0;const f=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":p&&p in Object(t)?function(t){var e=l.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var i=u.call(t);return r&&(e?t[c]=n:delete t[c]),i}(t):function(t){return h.call(t)}(t)},d=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),g=function(t){return null!=t&&"object"==typeof t};var y=Function.prototype,m=Object.prototype,v=y.toString,_=m.hasOwnProperty,b=v.call(Object);var w=__webpack_require__(6713),x="@@redux/INIT";function S(t,e,n){var r;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(S)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,s=[],a=s,l=!1;function u(){a===s&&(a=s.slice())}function c(){return o}function h(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return u(),a.push(t),function(){if(e){e=!1,u();var n=a.indexOf(t);a.splice(n,1)}}}function p(t){if(!function(t){if(!g(t)||"[object Object]"!=f(t))return!1;var e=d(t);if(null===e)return!0;var n=_.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&v.call(n)==b}(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,o=i(o,t)}finally{l=!1}for(var e=s=a,n=0;n<e.length;n++)(0,e[n])();return t}return p({type:x}),(r={dispatch:p,subscribe:h,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,p({type:x})}})[w.Z]=function(){var t,e=h;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[w.Z]=function(){return this},t},r}function E(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function C(t,e){return function(){return e(t.apply(void 0,arguments))}}function N(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}var P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function O(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}var T=O();T.withExtraArgument=O;const I=T;function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}var k=__webpack_require__(4942);function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach((function(e){(0,k.Z)(t,e,n[e])}))}return t}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return e&&R(t.prototype,e),n&&R(t,n),t}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function q(t,e){return q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},q(t,e)}function B(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function V(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}function W(t){if(Array.isArray(t))return t}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(t){return W(t)||U(t)||V(t)||H()}function X(t,e){return W(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(t,e)||V(t,e)||H()}var K={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var n;console&&console[t]&&(n=console)[t].apply(n,function(t){return function(t){if(Array.isArray(t))return G(t)}(t)||U(t)||V(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}},Z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,t),this.init(e,n)}return F(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||K,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,L({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}(),$=new Z,J=function(){function t(){A(this,t),this.observers={}}return F(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var i=[].concat(this.observers[t]);i.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function Q(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function tt(t){return null==t?"":""+t}function et(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function nt(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!t[s]&&n&&(t[s]=new n),t=t[s]}return i()?{}:{obj:t,k:r(o.shift())}}function rt(t,e,n){var r=nt(t,e,Object);r.obj[r.k]=n}function it(t,e){var n=nt(t,e),r=n.obj,i=n.k;if(r)return r[i]}function ot(t,e,n){var r=it(t,n);return void 0!==r?r:it(e,n)}function st(t,e,n){for(var r in e)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):st(t[r],e[r],n):t[r]=e[r];return t}function at(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var lt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ut(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return lt[t]})):t}var ct="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,ht=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return A(this,e),n=D(this,z(e).call(this)),ct&&J.call(j(n)),n.data=t||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return B(e,t),F(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[t,e];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=t.split(".")),it(this.data,o)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[t,e];n&&(s=s.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(r=e,e=(s=t.split("."))[1]),this.addNamespaces(e),rt(this.data,s,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(s=t.split("."))[1]),this.addNamespaces(e);var a=it(this.data,s)||{};r?st(a,n,i):a=L({},a,n),rt(this.data,s,a),o.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?L({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(J),pt={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,r,i))})),e}},ft={},dt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(this,e),n=D(this,z(e).call(this)),ct&&J.call(j(n)),et(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,j(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=$.create("translator"),n}return B(e,t),F(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),t=o.join(r)}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,e){var n=this;if("object"!==M(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=this.extractFromKey(t[t.length-1],e),o=i.key,s=i.namespaces,a=s[s.length-1],l=e.lng||this.language,u=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(u){var c=e.nsSeparator||this.options.nsSeparator;return a+c+o}return o}var h=this.resolve(t,e),p=h&&h.res,f=h&&h.usedKey||o,d=h&&h.exactUsedKey||o,g=Object.prototype.toString.apply(p),y=["[object Number]","[object Function]","[object RegExp]"],m=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,_="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(v&&p&&_&&y.indexOf(g)<0&&("string"!=typeof m||"[object Array]"!==g)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,e):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");if(r){var b="[object Array]"===g,w=b?[]:{},x=b?d:f;for(var S in p)if(Object.prototype.hasOwnProperty.call(p,S)){var E="".concat(x).concat(r).concat(S);w[S]=this.translate(E,L({},e,{joinArrays:!1,ns:s})),w[S]===E&&(w[S]=p[S])}p=w}}else if(v&&"string"==typeof m&&"[object Array]"===g)(p=p.join(m))&&(p=this.extendTranslation(p,t,e));else{var C=!1,N=!1;if(!this.isValidLookup(p)&&void 0!==e.defaultValue){if(C=!0,void 0!==e.count){var P=this.pluralResolver.getSuffix(l,e.count);p=e["defaultValue".concat(P)]}p||(p=e.defaultValue)}this.isValidLookup(p)||(N=!0,p=o);var O=e.defaultValue&&e.defaultValue!==p&&this.options.updateMissing;if(N||C||O){this.logger.log(O?"updateKey":"missingKey",l,a,o,O?e.defaultValue:p);var T=[],I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&I&&I[0])for(var k=0;k<I.length;k++)T.push(I[k]);else"all"===this.options.saveMissingTo?T=this.languageUtils.toResolveHierarchy(e.lng||this.language):T.push(e.lng||this.language);var A=function(t,r){n.options.missingKeyHandler?n.options.missingKeyHandler(t,a,r,O?e.defaultValue:p,O,e):n.backendConnector&&n.backendConnector.saveMissing&&n.backendConnector.saveMissing(t,a,r,O?e.defaultValue:p,O,e),n.emit("missingKey",t,a,r,p)};if(this.options.saveMissing){var R=void 0!==e.count&&"string"!=typeof e.count;this.options.saveMissingPlurals&&R?T.forEach((function(t){n.pluralResolver.getPluralFormsOfKey(t,o).forEach((function(e){return A([t],e)}))})):A(T,o)}}p=this.extendTranslation(p,t,e,h),N&&p===o&&this.options.appendNamespaceToMissingKey&&(p="".concat(a,":").concat(o)),N&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(t,e,n,r){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(L({},n,{interpolation:L({},this.options.interpolation,n.interpolation)}));var o=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(o=L({},this.options.interpolation.defaultVariables,o)),t=this.interpolator.interpolate(t,o,n.lng||this.language,n),!1!==n.nest&&(t=this.interpolator.nest(t,(function(){return i.translate.apply(i,arguments)}),n)),n.interpolation&&this.interpolator.reset()}var s=n.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return null!=t&&a&&a.length&&!1!==n.applyPostProcessor&&(t=pt.handle(a,t,e,this.options&&this.options.postProcessPassResolved?L({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!s.isValidLookup(e)){var l=s.extractFromKey(t,a),u=l.key;n=u;var c=l.namespaces;s.options.fallbackNS&&(c=c.concat(s.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,p=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,f=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);c.forEach((function(t){s.isValidLookup(e)||(o=t,!ft["".concat(f[0],"-").concat(t)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(ft["".concat(f[0],"-").concat(t)]=!0,s.logger.warn('key "'.concat(n,'" for namespace "').concat(o,'" for languages "').concat(f.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!s.isValidLookup(e)){i=n;var o,l,c=u,f=[c];for(s.i18nFormat&&s.i18nFormat.addLookupKeys?s.i18nFormat.addLookupKeys(f,u,n,t,a):(h&&(o=s.pluralResolver.getSuffix(n,a.count)),h&&p&&f.push(c+o),p&&f.push(c+="".concat(s.options.contextSeparator).concat(a.context)),h&&f.push(c+=o));l=f.pop();)s.isValidLookup(e)||(r=l,e=s.getResource(n,t,l,a))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}]),e}(J);function gt(t){return t.charAt(0).toUpperCase()+t.slice(1)}var yt=function(){function t(e){A(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=$.create("languageUtils")}return F(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=gt(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=gt(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=gt(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],o=function(t){t&&(n.isWhitelisted(t)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),r.forEach((function(t){i.indexOf(t)<0&&o(n.formatLanguageCode(t))})),i}}]),t}(),mt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],vt={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1===t?0:2===t?1:(t<0||t>10)&&t%10==0?2:3)}};function _t(){var t={};return mt.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:vt[e.fc]}}))})),t}var bt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,t),this.languageUtils=e,this.options=n,this.logger=$.create("pluralResolver"),this.rules=_t()}return F(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=this,r=[],i=this.getRule(t);return i?(i.numbers.forEach((function(i){var o=n.getSuffix(t,i);r.push("".concat(e).concat(o))})),r):r}},{key:"getSuffix",value:function(t,e){var n=this,r=this.getRule(t);if(r){var i=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,t),this.logger=$.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return F(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:ut,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?at(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?at(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?at(e.nestingPrefix):e.nestingPrefixEscaped||at("$t("),this.nestingSuffix=e.nestingSuffix?at(e.nestingSuffix):e.nestingSuffixEscaped||at(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var i,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(t){return t.replace(/\$/g,"$$$$")}var c=function(t){if(t.indexOf(a.formatSeparator)<0){var i=ot(e,l,t);return a.alwaysFormat?a.format(i,void 0,n):i}var o=t.split(a.formatSeparator),s=o.shift().trim(),u=o.join(a.formatSeparator).trim();return a.format(ot(e,l,s),u,n,r)};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler;for(s=0;i=this.regexpUnescape.exec(t);){if(void 0===(o=c(i[1].trim())))if("function"==typeof h){var p=h(t,i,r);o="string"==typeof p?p:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=tt(o));if(t=t.replace(i[0],u(o)),this.regexpUnescape.lastIndex=0,++s>=this.maxReplaces)break}for(s=0;i=this.regexp.exec(t);){if(void 0===(o=c(i[1].trim())))if("function"==typeof h){var f=h(t,i,r);o="string"==typeof f?f:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=tt(o));if(o=this.escapeValue?u(this.escape(o)):u(o),t=t.replace(i[0],o),this.regexp.lastIndex=0,++s>=this.maxReplaces)break}return t}},{key:"nest",value:function(t,e){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=L({},o);function a(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);t=r[0],i=(i=this.interpolate(i,s)).replace(/'/g,'"');try{s=JSON.parse(i),e&&(s=L({},e,s))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(i)}return delete s.defaultValue,t}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(t);){var l=[],u=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(t){return t.trim()})),h=Y(c);n[1]=h[0],l=h.slice(1),u=!0}if((r=e(a.call(this,n[1].trim(),s),s))&&n[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=tt(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),u&&(r=l.reduce((function(t,e){return i.format(t,e,o.lng,o)}),r.trim())),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}(),xt=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return A(this,e),i=D(this,z(e).call(this)),ct&&J.call(j(i)),i.backend=t,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=$.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return B(e,t),F(e,[{key:"queueLoad",value:function(t,e,n,r){var i=this,o=[],s=[],a=[],l=[];return t.forEach((function(t){var r=!0;e.forEach((function(e){var a="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?s.indexOf(a)<0&&s.push(a):(i.state[a]=1,r=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),l.indexOf(e)<0&&l.push(e)))})),r||a.push(t)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:r}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(t,e,n){var r=X(t.split("|"),2),i=r[0],o=r[1];e&&this.emit("failedLoading",i,o,e),n&&this.store.addResourceBundle(i,o,n),this.state[t]=e?-1:2;var s={};this.queue.forEach((function(n){!function(t,e,n,r){var i=nt(t,e,Object),o=i.obj,s=i.k;o[s]=o[s]||[],o[s].push(n)}(n.loaded,[i],o),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){s[t]||(s[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){s[t].indexOf(e)<0&&s[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(a,l){a&&l&&i<5?setTimeout((function(){r.read.call(r,t,e,n,i+1,2*o,s)}),o):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),i=X(r,2),o=i[0],s=i[1];this.read(o,s,"read",void 0,void 0,(function(r,i){r&&e.logger.warn("".concat(n,"loading namespace ").concat(s," for language ").concat(o," failed"),r),!r&&i&&e.logger.log("".concat(n,"loaded namespace ").concat(s," for language ").concat(o),i),e.loaded(t,r,i)}))}},{key:"saveMissing",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" for namespace "').concat(e,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,L({},o,{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),e}(J);function St(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===M(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===M(t[2])||"object"===M(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3}}}function Et(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t}function Ct(){}var Nt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(A(this,e),t=D(this,z(e).call(this)),ct&&J.call(j(t)),t.options=Et(n),t.services={},t.logger=$,t.modules={external:[]},r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),D(t,j(t));setTimeout((function(){t.init(n,r)}),0)}return t}return B(e,t),F(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(t){return t?"function"==typeof t?new t:t:null}if("function"==typeof e&&(n=e,e={}),this.options=L({},St(),this.options,Et(e)),this.format=this.options.interpolation.format,n||(n=Ct),!this.options.isClone){this.modules.logger?$.init(r(this.modules.logger),this.options):$.init(null,this.options);var i=new yt(this.options);this.store=new ht(this.options.resources,this.options);var o=this.services;o.logger=$,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new bt(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new wt(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new xt(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new dt(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var a=Q(),l=function(){t.changeLanguage(t.options.lng,(function(e,r){t.isInitialized=!0,t.logger.log("initialized",t.options),t.emit("initialized",t.options),a.resolve(r),n(e,r)}))};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),a}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct,r=n,i="string"==typeof t?t:this.language;if("function"==typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],s=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){o.indexOf(t)<0&&o.push(t)}))};if(i)s(i);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(t){return s(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return s(t)})),this.services.backendConnector.load(o,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=Q();return t||(t=this.languages),e||(e=this.options.ns),n||(n=Ct),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&pt.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var r=Q();this.emit("languageChanging",t);var i=function(t){t&&(n.language||(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t)),n.translator.language||n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources(t,(function(i){!function(t,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(i,t)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(t):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e){var n=this,r=function t(e,r){var i;if("object"!==M(r)){for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];i=n.options.overloadTranslationOptionHandler([e,r].concat(s))}else i=L({},r);return i.lng=i.lng||t.lng,i.lngs=i.lngs||t.lngs,i.ns=i.ns||t.ns,n.t(e,i)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};return!!this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||!(!o(n,t)||r&&!o(i,t))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=Q();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=Q();"string"==typeof t&&(t=[t]);var r=this.options.preload||[],i=t.filter((function(t){return r.indexOf(t)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new e(t,n)}},{key:"cloneInstance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct,i=L({},this.options,n,{isClone:!0}),o=new e(i),s=["store","services","language"];return s.forEach((function(e){o[e]=t[e]})),o.services=L({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new dt(o.services,o.options),o.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))})),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}}]),e}(J);const Pt=new Nt;var Ot={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Tt={};Tt[Ot.RADIANS]=6370997/(2*Math.PI),Tt[Ot.DEGREES]=2*Math.PI*6370997/360,Tt[Ot.FEET]=.3048,Tt[Ot.METERS]=1,Tt[Ot.USFEET]=1200/3937;const It=Ot,Mt=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Tt[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();function kt(t,e,n){return Math.min(Math.max(t,e),n)}var Lt=function(){var t;return t="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},t}(),At=function(){var t;return t="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E},t}();function Rt(t,e,n,r,i,o){var s=i-n,a=o-r;if(0!==s||0!==a){var l=((t-n)*s+(e-r)*a)/(s*s+a*a);l>1?(n=i,r=o):l>0&&(n+=s*l,r+=a*l)}return Ft(t,e,n,r)}function Ft(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function jt(t){return t*Math.PI/180}function Dt(t,e){var n=t%e;return n*e<0?n+e:n}function zt(t,e,n){return t+n*(e-t)}var qt,Bt=(qt=function(t,e){return qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},qt(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}qt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Gt=6378137,Ut=Math.PI*Gt,Vt=[-Ut,-Ut,Ut,Ut],Wt=[-180,-85,180,85],Ht=Gt*Math.log(Math.tan(Math.PI/2)),Yt=function(t){function e(e){return t.call(this,{code:e,units:It.METERS,extent:Vt,global:!0,worldExtent:Wt,getPointResolution:function(t,e){return t/Lt(e[1]/Gt)}})||this}return Bt(e,t),e}(Mt),Xt=[new Yt("EPSG:3857"),new Yt("EPSG:102100"),new Yt("EPSG:102113"),new Yt("EPSG:900913"),new Yt("http://www.opengis.net/def/crs/EPSG/0/3857"),new Yt("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Kt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=[-180,-90,180,90],$t=6378137*Math.PI/180,Jt=function(t){function e(e,n){return t.call(this,{code:e,units:It.DEGREES,extent:Zt,axisOrientation:n,global:!0,metersPerUnit:$t,worldExtent:Zt})||this}return Kt(e,t),e}(Mt),Qt=[new Jt("CRS:84"),new Jt("EPSG:4326","neu"),new Jt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Jt("urn:ogc:def:crs:OGC:2:84"),new Jt("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Jt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Jt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],te={},ee={};function ne(t,e,n){var r=t.getCode(),i=e.getCode();r in ee||(ee[r]={}),ee[r][i]=n}function re(t,e){var n;return t in ee&&e in ee[t]&&(n=ee[t][e]),n}const ie="top-left";function oe(){return function(){throw new Error("Unimplemented abstract method.")}()}var se=0;function ae(t){return t.ol_uid||(t.ol_uid=String(++se))}var le=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ue=function(t){function e(e){var n=this,r="Assertion failed. See https://openlayers.org/en/v"+"6.9.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return le(e,t),e}(Error);function ce(t,e){if(!t)throw new ue(e)}function he(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,r=t.length;n<r;++n)Ce(e,t[n]);return e}function pe(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function fe(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function de(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function ge(t,e){return me(t,e[0],e[1])}function ye(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function me(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function ve(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],l=0;return s<n?l|=16:s>i&&(l|=4),a<r?l|=8:a>o&&(l|=2),0===l&&(l=1),l}function _e(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function be(t){return _e(1/0,1/0,-1/0,-1/0,t)}function we(t,e){var n=t[0],r=t[1];return _e(n,r,n,r,e)}function xe(t,e,n,r,i){return Ne(be(i),t,e,n,r)}function Se(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Ee(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ce(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Ne(t,e,n,r,i){for(;n<r;n+=i)Pe(t,e[n],e[n+1]);return t}function Pe(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Oe(t,e){var n;return(n=e(Ie(t)))||(n=e(Me(t)))||(n=e(De(t)))?n:(n=e(je(t)))||!1}function Te(t){var e=0;return Be(t)||(e=ze(t)*Re(t)),e}function Ie(t){return[t[0],t[1]]}function Me(t){return[t[2],t[1]]}function ke(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Le(t,e){var n;return"bottom-left"===e?n=Ie(t):"bottom-right"===e?n=Me(t):e===ie?n=je(t):"top-right"===e?n=De(t):ce(!1,13),n}function Ae(t,e,n,r,i){var o=e*r[0]/2,s=e*r[1]/2,a=Math.cos(n),l=Math.sin(n),u=o*a,c=o*l,h=s*a,p=s*l,f=t[0],d=t[1],g=f-u+p,y=f-u-p,m=f+u-p,v=f+u+p,_=d-c-h,b=d-c+h,w=d+c+h,x=d+c-h;return _e(Math.min(g,y,m,v),Math.min(_,b,w,x),Math.max(g,y,m,v),Math.max(_,b,w,x),i)}function Re(t){return t[3]-t[1]}function Fe(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return qe(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):be(r),r}function je(t){return[t[0],t[3]]}function De(t){return[t[2],t[3]]}function ze(t){return t[2]-t[0]}function qe(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Be(t){return t[2]<t[0]||t[3]<t[1]}function Ge(t,e,n,r){var i=[];if(r>1)for(var o=t[2]-t[0],s=t[3]-t[1],a=0;a<r;++a)i.push(t[0]+o*a/r,t[1],t[2],t[1]+s*a/r,t[2]-o*a/r,t[3],t[0],t[3]-s*a/r);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var l=[],u=[],c=(a=0,i.length);a<c;a+=2)l.push(i[a]),u.push(i[a+1]);return function(t,e,n){return _e(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(l,u,n)}function Ue(t,e,n){var r=n||6371008.8,i=jt(t[1]),o=jt(e[1]),s=(o-i)/2,a=jt(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Ve(t,e){var n,r,i=t[0],o=t[1],s=e[0],a=e[1],l=s[0],u=s[1],c=a[0],h=a[1],p=c-l,f=h-u,d=0===p&&0===f?0:(p*(i-l)+f*(o-u))/(p*p+f*f||0);return d<=0?(n=l,r=u):d>=1?(n=c,r=h):(n=l+d*p,r=u+d*f),[n,r]}function We(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function He(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function Ye(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Xe(t,e){return Math.sqrt(Ye(t,e))}function Ke(t,e){if(e.canWrapX()){var n=ze(e.getExtent()),r=Ze(t,e,n);r&&(t[0]-=r*n)}return t}function Ze(t,e,n){var r=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=n||ze(r);i=Math.floor((t[0]-r[0])/o)}return i}function $e(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function Je(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function Qe(t){!function(t,e){te[t]=e}(t.getCode(),t),ne(t,t,$e)}function tn(t){return"string"==typeof t?te[e=t]||te[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function en(t,e,n,r){var i,o=(t=tn(t)).getPointResolutionFunc();if(o)i=o(e,n),r&&r!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/Tt[r]);else{var s=t.getUnits();if(s==It.DEGREES&&!r||r==It.DEGREES)i=e;else{var a,l=un(t,tn("EPSG:4326"));if(l===Je&&s!==It.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(Ue((u=l(u,u,2)).slice(0,2),u.slice(2,4))+Ue(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=r?Tt[r]:t.getMetersPerUnit())&&(i/=a)}}return i}function nn(t){!function(t){t.forEach(Qe)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&ne(e,t,$e)}))}))}function rn(t,e){return t?"string"==typeof t?tn(t):t:tn(e)}function on(t){return function(e,n,r){for(var i=e.length,o=void 0!==r?r:2,s=void 0!==n?n:new Array(i),a=0;a<i;a+=o){var l=t([e[a],e[a+1]]);s[a]=l[0],s[a+1]=l[1];for(var u=o-1;u>=2;--u)s[a+u]=e[a+u]}return s}}function sn(t,e){return hn(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function an(t,e){var n=hn(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=Dt(r+180,360)-180),n}function ln(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||un(t,e)===$e)&&n}function un(t,e){var n=re(t.getCode(),e.getCode());return n||(n=Je),n}function cn(t,e){return un(tn(t),tn(e))}function hn(t,e,n){return cn(e,n)(t,void 0,t.length)}function pn(t,e,n,r){return Ge(t,cn(e,n),void 0,r)}var fn,dn,gn,yn=null;function mn(){return yn}function vn(t,e){return t}function _n(t,e){return t}function bn(t,e){return t}function wn(t,e){return t}function xn(t,e){return t}function Sn(t,e,n){return function(r){var i,o,s=r[0],a=r[1];if(t.canWrapX()){var l=t.getExtent(),u=ze(l);(o=Ze(r,t,u))&&(s-=o*u),s=kt(s,l[0],l[2]),a=kt(a,l[1],l[3]),i=n([s,a])}else i=n(r);return o&&e.canWrapX()&&(i[0]+=o*ze(e.getExtent())),i}}nn(Xt),nn(Qt),fn=Xt,dn=function(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var s=0;s<r;s+=i){o[s]=Ut*t[s]/180;var a=Gt*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>Ht?a=Ht:a<-Ht&&(a=-Ht),o[s+1]=a}return o},gn=function(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var s=0;s<r;s+=i)o[s]=180*t[s]/Ut,o[s+1]=360*Math.atan(Math.exp(t[s+1]/Gt))/Math.PI-90;return o},Qt.forEach((function(t){fn.forEach((function(e){ne(t,e,dn),ne(e,t,gn)}))}));var En=__webpack_require__(7294),Cn=__webpack_require__.n(En),Nn=__webpack_require__(3935),Pn=__webpack_require__.n(Nn);function On(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,q(t,e)}var Tn=__webpack_require__(5697),In=__webpack_require__.n(Tn),Mn=In().shape({trySubscribe:In().func.isRequired,tryUnsubscribe:In().func.isRequired,notifyNestedSubs:In().func.isRequired,isSubscribed:In().func.isRequired}),kn=In().shape({subscribe:In().func.isRequired,dispatch:In().func.isRequired,getState:In().func.isRequired});Cn().forwardRef;const Ln=function(t){var e;void 0===t&&(t="store");var n=t+"Subscription",r=function(e){On(i,e);var r=i.prototype;function i(n,r){var i;return(i=e.call(this,n,r)||this)[t]=n.store,i}return r.getChildContext=function(){var e;return(e={})[t]=this[t],e[n]=null,e},r.render=function(){return En.Children.only(this.props.children)},i}(En.Component);return r.propTypes={store:kn.isRequired,children:In().element.isRequired},r.childContextTypes=((e={})[t]=kn.isRequired,e[n]=Mn,e),r}();function An(){return An=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},An.apply(this,arguments)}function Rn(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var Fn=__webpack_require__(8679),jn=__webpack_require__.n(Fn),Dn=__webpack_require__(1143),zn=__webpack_require__.n(Dn),qn=__webpack_require__(9864),Bn=null,Gn={notify:function(){}},Un=function(){function t(t,e,n){this.store=t,this.parentSub=e,this.onStateChange=n,this.unsubscribe=null,this.listeners=Gn}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){var t,e;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(t=[],e=[],{clear:function(){e=Bn,t=Bn},notify:function(){for(var n=t=e,r=0;r<n.length;r++)n[r]()},get:function(){return e},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==Bn&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}))},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Gn)},t}(),Vn=void 0!==Cn().forwardRef,Wn=0,Hn={};function Yn(){}var Xn=Object.prototype.hasOwnProperty;function Kn(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function Zn(t,e){if(Kn(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Xn.call(e,n[i])||!Kn(t[n[i]],e[n[i]]))return!1;return!0}function $n(t){return function(e,n){var r=t(e,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Jn(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function Qn(t,e){return function(e,n){n.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=Jn(t);var i=r(e,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Jn(i),i=r(e,n)),i},r}}const tr=[function(t){return"function"==typeof t?Qn(t):void 0},function(t){return t?void 0:$n((function(t){return{dispatch:t}}))},function(t){return t&&"object"==typeof t?$n((function(e){return function(t,e){if("function"==typeof t)return C(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],s=t[o];"function"==typeof s&&(r[o]=C(s,e))}return r}(t,e)})):void 0}];function er(t,e,n){return An({},n,t,e)}const nr=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,s=!1;return function(e,n,a){var l=t(e,n,a);return s?i&&o(l,r)||(r=l):(s=!0,r=l),r}}}(t):void 0},function(t){return t?void 0:function(){return er}}];function rr(t,e,n,r){return function(i,o){return n(t(i,o),e(r,o),o)}}function ir(t,e,n,r,i){var o,s,a,l,u,c=i.areStatesEqual,h=i.areOwnPropsEqual,p=i.areStatePropsEqual,f=!1;return function(i,d){return f?function(i,f){var d,g,y=!h(f,s),m=!c(i,o);return o=i,s=f,y&&m?(a=t(o,s),e.dependsOnOwnProps&&(l=e(r,s)),u=n(a,l,s)):y?(t.dependsOnOwnProps&&(a=t(o,s)),e.dependsOnOwnProps&&(l=e(r,s)),u=n(a,l,s)):m?(d=t(o,s),g=!p(d,a),a=d,g&&(u=n(a,l,s)),u):u}(i,d):(a=t(o=i,s=d),l=e(r,s),u=n(a,l,s),f=!0,u)}}function or(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function sr(t,e){return t===e}const ar=(ur=(lr={}).connectHOC,cr=void 0===ur?function(t,e){var n,r;void 0===e&&(e={});var i=e,o=i.getDisplayName,s=void 0===o?function(t){return"ConnectAdvanced("+t+")"}:o,a=i.methodName,l=void 0===a?"connectAdvanced":a,u=i.renderCountProp,c=void 0===u?void 0:u,h=i.shouldHandleStateChanges,p=void 0===h||h,f=i.storeKey,d=void 0===f?"store":f,g=i.withRef,y=void 0!==g&&g,m=Rn(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),v=d+"Subscription",_=Wn++,b=((n={})[d]=kn,n[v]=Mn,n),w=((r={})[v]=Mn,r);return function(e){zn()((0,qn.isValidElementType)(e),"You must pass a component to the function returned by "+l+". Instead received "+JSON.stringify(e));var n=e.displayName||e.name||"Component",r=s(n),i=An({},m,{getDisplayName:s,methodName:l,renderCountProp:c,shouldHandleStateChanges:p,storeKey:d,withRef:y,displayName:r,wrappedComponentName:n,WrappedComponent:e}),o=function(n){function o(t,e){var i;return(i=n.call(this,t,e)||this).version=_,i.state={},i.renderCount=0,i.store=t[d]||e[d],i.propsMode=Boolean(t[d]),i.setWrappedInstance=i.setWrappedInstance.bind(j(j(i))),zn()(i.store,'Could not find "'+d+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+d+'" as a prop to "'+r+'".'),i.initSelector(),i.initSubscription(),i}On(o,n);var s=o.prototype;return s.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return(t={})[v]=e||this.context[v],t},s.componentDidMount=function(){p&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},s.componentWillReceiveProps=function(t){this.selector.run(t)},s.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},s.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=Yn,this.store=null,this.selector.run=Yn,this.selector.shouldComponentUpdate=!1},s.getWrappedInstance=function(){return zn()(y,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+l+"() call."),this.wrappedInstance},s.setWrappedInstance=function(t){this.wrappedInstance=t},s.initSelector=function(){var e=t(this.store.dispatch,i);this.selector=function(t,e){var n={run:function(r){try{var i=t(e.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}(e,this.store),this.selector.run(this.props)},s.initSubscription=function(){if(p){var t=(this.propsMode?this.props:this.context)[v];this.subscription=new Un(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},s.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(Hn)):this.notifyNestedSubs()},s.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},s.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},s.addExtraProps=function(t){if(!(y||c||this.propsMode&&this.subscription))return t;var e=An({},t);return y&&(e.ref=this.setWrappedInstance),c&&(e[c]=this.renderCount++),this.propsMode&&this.subscription&&(e[v]=this.subscription),e},s.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return(0,En.createElement)(e,this.addExtraProps(t.props))},o}(En.Component);return Vn&&(o.prototype.UNSAFE_componentWillReceiveProps=o.prototype.componentWillReceiveProps,delete o.prototype.componentWillReceiveProps),o.WrappedComponent=e,o.displayName=r,o.childContextTypes=w,o.contextTypes=b,o.propTypes=b,jn()(o,e)}}:ur,pr=void 0===(hr=lr.mapStateToPropsFactories)?[function(t){return"function"==typeof t?Qn(t):void 0},function(t){return t?void 0:$n((function(){return{}}))}]:hr,dr=void 0===(fr=lr.mapDispatchToPropsFactories)?tr:fr,yr=void 0===(gr=lr.mergePropsFactories)?nr:gr,vr=void 0===(mr=lr.selectorFactory)?function(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,i=e.initMergeProps,o=Rn(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(t,o),a=r(t,o),l=i(t,o);return(o.pure?ir:rr)(s,a,l,t,o)}:mr,function(t,e,n,r){void 0===r&&(r={});var i=r,o=i.pure,s=void 0===o||o,a=i.areStatesEqual,l=void 0===a?sr:a,u=i.areOwnPropsEqual,c=void 0===u?Zn:u,h=i.areStatePropsEqual,p=void 0===h?Zn:h,f=i.areMergedPropsEqual,d=void 0===f?Zn:f,g=Rn(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=or(t,pr,"mapStateToProps"),m=or(e,dr,"mapDispatchToProps"),v=or(n,yr,"mergeProps");return cr(vr,An({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:y,initMapDispatchToProps:m,initMergeProps:v,pure:s,areStatesEqual:l,areOwnPropsEqual:c,areStatePropsEqual:p,areMergedPropsEqual:d},g))});var lr,ur,cr,hr,pr,fr,dr,gr,yr,mr,vr,_r=__webpack_require__(8575),br=__webpack_require__(7643),wr=__webpack_require__.n(br);const xr=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),Sr="propertychange",Er=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function Cr(t,e){return t>e?1:t<e?-1:0}function Nr(t,e){return t.indexOf(e)>=0}function Pr(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return r-1}function Or(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function Tr(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function Ir(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Mr(){return!0}function kr(){return!1}function Lr(){}var Ar="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n};function Rr(t){for(var e in t)delete t[e]}var Fr="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function jr(t){var e;for(e in t)return!1;return!e}var Dr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zr=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return Dr(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new xr(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var r,i=this.listeners_&&this.listeners_[n];if(i){var o=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,s[n]=0),++o[n];for(var a=0,l=i.length;a<l;++a)if(!1===(r="handleEvent"in i[a]?i[a].handleEvent(e):i[a].call(this,e))||e.propagationStopped){r=!1;break}if(--o[n],0===o[n]){var u=s[n];for(delete s[n];u--;)this.removeEventListener(n,Lr);delete o[n]}return r}},e.prototype.disposeInternal=function(){this.listeners_&&Rr(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var r=n.indexOf(e);-1!==r&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=Lr,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}},e}(Er);const qr=zr,Br="change",Gr="contextmenu",Ur="click",Vr="keydown",Wr="keypress",Hr="resize",Yr="touchmove",Xr="wheel";function Kr(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function Zr(t,e,n,r){return Kr(t,e,n,r,!0)}function $r(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Rr(t))}var Jr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qr=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return Jr(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Br)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Kr(this,t[i],e);return r}return Kr(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=Zr(this,t[i],e)}else n=Zr(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)$r(t[e]);else $r(t)}(n);else if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(qr);Qr.prototype.on,Qr.prototype.once,Qr.prototype.un;const ti=Qr;var ei=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ni=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return ei(e,t),e}(xr),ri=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,ae(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return ei(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Ar({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var n;n="change:"+t,this.dispatchEvent(new ni(n,t,e)),n=Sr,this.dispatchEvent(new ni(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var r=this.values_||(this.values_={});if(n)r[t]=e;else{var i=r[t];r[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&Ar(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],jr(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(ti);const ii=ri;var oi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),si=function(t){function e(e){var n=t.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;n.setGeometry(r)}else{var i=e;n.setProperties(i)}return n}return oi(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&($r(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Kr(t,Br,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,n;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?n=e:(ce("function"==typeof e.getZIndex,41),n=[e]),function(){return n}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(ii);const ai=si;var li,ui="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",ci=-1!==ui.indexOf("firefox"),hi=(-1!==ui.indexOf("safari")&&ui.indexOf("chrom"),-1!==ui.indexOf("webkit")&&-1==ui.indexOf("edge")),pi=-1!==ui.indexOf("macintosh"),fi="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,di="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,gi="undefined"!=typeof Image&&Image.prototype.decode,yi=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),mi=new Array(6);function vi(t){return bi(t,1,0,0,1,0,0)}function _i(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],f=e[5];return t[0]=n*l+i*u,t[1]=r*l+o*u,t[2]=n*c+i*h,t[3]=r*c+o*h,t[4]=n*p+i*f+s,t[5]=r*p+o*f+a,t}function bi(t,e,n,r,i,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t}function wi(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function xi(t,e,n){return _i(t,bi(mi,e,0,0,n,0,0))}function Si(t,e,n,r,i,o,s,a){var l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=i*l,t[2]=-r*l,t[3]=i*u,t[4]=s*r*u-a*r*l+e,t[5]=s*i*l+a*i*u+n,t}function Ei(t,e){var n,r=(n=e)[0]*n[3]-n[1]*n[2];ce(0!==r,32);var i=e[0],o=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/r,t[1]=-o/r,t[2]=-s/r,t[3]=i/r,t[4]=(s*u-a*l)/r,t[5]=-(i*u-o*l)/r,t}function Ci(t){var e="matrix("+t.join(", ")+")";if(di)return e;var n=li||(li=document.createElement("div"));return n.style.transform=e,n.style.transform}function Ni(t,e,n,r,i,o){for(var s=o||[],a=0,l=e;l<n;l+=r){var u=t[l],c=t[l+1];s[a++]=i[0]*u+i[2]*c+i[4],s[a++]=i[1]*u+i[3]*c+i[5]}return o&&s.length!=a&&(s.length=a),s}function Pi(t,e,n,r,i,o,s){for(var a=s||[],l=Math.cos(i),u=Math.sin(i),c=o[0],h=o[1],p=0,f=e;f<n;f+=r){var d=t[f]-c,g=t[f+1]-h;a[p++]=c+d*l-g*u,a[p++]=h+d*u+g*l;for(var y=f+2;y<f+r;++y)a[p++]=t[y]}return s&&a.length!=p&&(a.length=p),a}function Oi(t,e,n,r,i,o,s){for(var a=s||[],l=0,u=e;u<n;u+=r){a[l++]=t[u]+i,a[l++]=t[u+1]+o;for(var c=u+2;c<u+r;++c)a[l++]=t[c]}return s&&a.length!=l&&(a.length=l),a}var Ti=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ii=[1,0,0,1,0,0],Mi=function(t){function e(){var e,n,r,i,o,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===i&&Ir(t,r)||(o=!0,i=this,r=t,n=e.apply(this,arguments)),n}),s}return Ti(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return oe()},e.prototype.closestPointXY=function(t,e,n,r){return oe()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return oe()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&be(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){oe()},e.prototype.scale=function(t,e,n){oe()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return oe()},e.prototype.getType=function(){return oe()},e.prototype.applyTransform=function(t){oe()},e.prototype.intersectsExtent=function(t){return oe()},e.prototype.translate=function(t,e){oe()},e.prototype.transform=function(t,e){var n=tn(t),r=n.getUnits()==It.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),s=n.getWorldExtent(),a=Re(s)/Re(o);return Si(Ii,s[0],s[3],a,-a,0,0,0),Ni(t,0,t.length,i,Ii,r),cn(n,e)(t,r,i)}:cn(n,e);return this.applyTransform(r),this},e}(ii);const ki=Mi,Li="Point",Ai="LineString",Ri="Polygon",Fi="MultiPoint",ji="MultiLineString",Di="MultiPolygon",zi="GeometryCollection",qi="Circle";var Bi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gi=function(t){function e(e){var n=t.call(this)||this;return n.geometries_=e||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return Bi(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach($r),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Kr(this.geometries_[t],Br,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<de(this.getExtent(),t,e))return r;for(var i=this.geometries_,o=0,s=i.length;o<s;++o)r=i[o].closestPointXY(t,e,n,r);return r},e.prototype.containsXY=function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)if(n[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){be(t);for(var e=this.geometries_,n=0,r=e.length;n<r;++n)Ee(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return Ui(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,n=0,r=e.length;n<r;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],r=this.geometries_,i=!1,o=0,s=r.length;o<s;++o){var a=r[o],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(i=!0)}if(i){var u=new e(null);return u.setGeometriesArray(n),u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return zi},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)n[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var r=n;r||(r=ke(this.getExtent()));for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Ui(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)n[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(ki);function Ui(t){for(var e=[],n=0,r=t.length;n<r;++n)e.push(t[n].clone());return e}const Vi=Gi;const Wi=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var n;if(e){var r=e.dataProjection?tn(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()===It.TILE_PIXELS&&(r=tn(r)).setWorldExtent(e.extent),n={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(t){return Ar({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return oe()},t.prototype.readFeature=function(t,e){return oe()},t.prototype.readFeatures=function(t,e){return oe()},t.prototype.readGeometry=function(t,e){return oe()},t.prototype.readProjection=function(t){return oe()},t.prototype.writeFeature=function(t,e){return oe()},t.prototype.writeFeatures=function(t,e){return oe()},t.prototype.writeGeometry=function(t,e){return oe()},t}();function Hi(t,e,n){var r,i=n?tn(n.featureProjection):null,o=n?tn(n.dataProjection):null;if(r=i&&o&&!ln(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&n&&void 0!==n.decimals){var s=Math.pow(10,n.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return r}function Yi(t,e){var n=e?tn(e.featureProjection):null,r=e?tn(e.dataProjection):null;return n&&r&&!ln(n,r)?pn(t,r,n):t}const Xi="arraybuffer",Ki="json";var Zi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$i=function(t){function e(){return t.call(this)||this}return Zi(e,t),e.prototype.getType=function(){return Ki},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Ji(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Ji(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return oe()},e.prototype.readFeaturesFromObject=function(t,e){return oe()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Ji(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return oe()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Ji(t))},e.prototype.readProjectionFromObject=function(t){return oe()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return oe()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return oe()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return oe()},e}(Wi);function Ji(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}const Qi=$i,to="XY",eo="XYZ",no="XYM",ro="XYZM";var io=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oo=function(t){function e(){var e=t.call(this)||this;return e.layout=to,e.stride=2,e.flatCoordinates=null,e}return io(e,t),e.prototype.computeExtent=function(t){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return oe()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=so(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){oe()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=so(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=to,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=to:3==t?e=eo:4==t&&(e=ro),e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Pi(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=ke(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,n,r,i,o,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=0;p<n;p+=r){var f=t[p]-u,d=t[p+1]-c;l[h++]=u+i*f,l[h++]=c+o*d;for(var g=p+2;g<p+r;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(o,0,o.length,s,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Oi(n,0,n.length,r,t,e,n),this.changed()}},e}(ki);function so(t){var e;return t==to?e=2:t==eo||t==no?e=3:t==ro&&(e=4),e}const ao=oo;function lo(t,e,n,r,i,o,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((i-l)*c+(o-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var f=0;f<r;++f)s[f]=zt(t[e+f],t[n+f],p);return void(s.length=r)}a=e}}for(f=0;f<r;++f)s[f]=t[a+f];s.length=r}function uo(t,e,n,r,i){var o=t[e],s=t[e+1];for(e+=r;e<n;e+=r){var a=t[e],l=t[e+1],u=Ft(o,s,a,l);u>i&&(i=u),o=a,s=l}return i}function co(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];i=uo(t,e,a,r,i),e=a}return i}function ho(t,e,n,r,i,o,s,a,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=Ft(s,a,t[e],t[e+1]))<u){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,p}return u}for(var f=c||[NaN,NaN],d=e+r;d<n;)if(lo(t,d-r,d,r,s,a,f),(p=Ft(s,a,f[0],f[1]))<u){for(u=p,h=0;h<r;++h)l[h]=f[h];l.length=r,d+=r}else d+=r*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(o&&(lo(t,n-r,e,r,s,a,f),(p=Ft(s,a,f[0],f[1]))<u)){for(u=p,h=0;h<r;++h)l[h]=f[h];l.length=r}return u}function po(t,e,n,r,i,o,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];u=ho(t,e,d,r,i,o,s,a,l,u,h),e=d}return u}function fo(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function go(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var s=n[i],a=0;a<r;++a)t[e++]=s[a];return e}function yo(t,e,n,r,i){for(var o=i||[],s=0,a=0,l=n.length;a<l;++a){var u=go(t,e,n[a],r);o[s++]=u,e=u}return o.length=s,o}function mo(t,e,n,r,i,o,s){var a=(n-e)/r;if(a<3){for(;e<n;e+=r)o[s++]=t[e],o[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-r],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),f=0,d=t[p],g=t[p+1],y=t[h],m=t[h+1],v=p+r;v<h;v+=r){var _=Rt(t[v],t[v+1],d,g,y,m);_>f&&(c=v,f=_)}f>i&&(l[(c-e)/r]=1,p+r<c&&u.push(p,c),c+r<h&&u.push(c,h))}for(v=0;v<a;++v)l[v]&&(o[s++]=t[e+v*r],o[s++]=t[e+v*r+1]);return s}function vo(t,e){return e*Math.round(t/e)}function _o(t,e,n,r,i,o,s){if(e==n)return s;var a,l,u=vo(t[e],i),c=vo(t[e+1],i);e+=r,o[s++]=u,o[s++]=c;do{if(a=vo(t[e],i),l=vo(t[e+1],i),(e+=r)==n)return o[s++]=a,o[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=vo(t[e],i),p=vo(t[e+1],i);if(e+=r,h!=a||p!=l){var f=a-u,d=l-c,g=h-u,y=p-c;f*y==d*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(d<0&&y<d||d==y||d>0&&y>d)?(a=h,l=p):(o[s++]=a,o[s++]=l,u=a,c=l,a=h,l=p)}}return o[s++]=a,o[s++]=l,s}function bo(t,e,n,r,i,o,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=_o(t,e,c,r,i,o,s),a.push(s),e=c}return s}function wo(t,e,n,r,i){var o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)))return o;return!1}function xo(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=e;a<n;a+=r)o[s++]=t.slice(a,a+r);return o.length=s,o}function So(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];o[s++]=xo(t,e,u,r,o[s]),e=u}return o.length=s,o}function Eo(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];o[s++]=So(t,e,u,r,o[s]),e=u[u.length-1]}return o.length=s,o}function Co(t,e,n,r,i,o,s){var a,l,u=(n-e)/r;if(1===u)a=e;else if(2===u)a=e,l=i;else if(0!==u){for(var c=t[e],h=t[e+1],p=0,f=[0],d=e+r;d<n;d+=r){var g=t[d],y=t[d+1];p+=Math.sqrt((g-c)*(g-c)+(y-h)*(y-h)),f.push(p),c=g,h=y}var m=i*p,v=function(t,e,n){for(var r,i,o=Cr,s=0,a=t.length,l=!1;s<a;)(i=+o(t[r=s+(a-s>>1)],e))<0?s=r+1:(a=r,l=!i);return l?s:~s}(f,m);v<0?(l=(m-f[-v-2])/(f[-v-1]-f[-v-2]),a=e+(-v-2)*r):a=e+v*r}var _=s>1?s:2,b=o||new Array(_);for(d=0;d<_;++d)b[d]=void 0===a?NaN:void 0===l?t[a+d]:zt(t[a+d],t[a+r+d],l);return b}function No(t,e,n,r,i,o){if(n==e)return null;var s;if(i<t[e+r-1])return o?((s=t.slice(e,e+r))[r-1]=i,s):null;if(t[n-1]<i)return o?((s=t.slice(n-r,n))[r-1]=i,s):null;if(i==t[e+r-1])return t.slice(e,e+r);for(var a=e/r,l=n/r;a<l;){var u=a+l>>1;i<t[(u+1)*r-1]?l=u:a=u+1}var c=t[a*r-1];if(i==c)return t.slice((a-1)*r,(a-1)*r+r);var h=(i-c)/(t[(a+1)*r-1]-c);s=[];for(var p=0;p<r-1;++p)s.push(zt(t[(a-1)*r+p],t[a*r+p],h));return s.push(i),s}function Po(t,e,n,r,i){return!Oe(i,(function(i){return!Oo(t,e,n,r,i[0],i[1])}))}function Oo(t,e,n,r,i,o){for(var s=0,a=t[n-r],l=t[n-r+1];e<n;e+=r){var u=t[e],c=t[e+1];l<=o?c>o&&(u-a)*(o-l)-(i-a)*(c-l)>0&&s++:c<=o&&(u-a)*(o-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function To(t,e,n,r,i,o){if(0===n.length)return!1;if(!Oo(t,e,n[0],r,i,o))return!1;for(var s=1,a=n.length;s<a;++s)if(Oo(t,n[s-1],n[s],r,i,o))return!1;return!0}function Io(t,e,n,r,i){var o=Ne([1/0,1/0,-1/0,-1/0],t,e,n,r);return!!qe(i,o)&&(!!ye(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]||wo(t,e,n,r,(function(t,e){return function(t,e,n){var r=!1,i=ve(t,e),o=ve(t,n);if(1===i||1===o)r=!0;else{var s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],f=n[1],d=(f-h)/(p-c),g=void 0,y=void 0;2&o&&!(2&i)&&(r=(g=p-(f-u)/d)>=s&&g<=l),r||!(4&o)||4&i||(r=(y=f-(p-l)*d)>=a&&y<=u),r||!(8&o)||8&i||(r=(g=p-(f-a)/d)>=s&&g<=l),r||!(16&o)||16&i||(r=(y=f-(p-s)*d)>=a&&y<=u)}return r}(i,t,e)})))}function Mo(t,e,n,r,i){if(!function(t,e,n,r,i){return!!(Io(t,e,n,r,i)||Oo(t,e,n,r,i[0],i[1])||Oo(t,e,n,r,i[0],i[3])||Oo(t,e,n,r,i[2],i[1])||Oo(t,e,n,r,i[2],i[3]))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,s=n.length;o<s;++o)if(Po(t,n[o-1],n[o],r,i)&&!Io(t,n[o-1],n[o],r,i))return!1;return!0}function ko(t,e,n,r){for(var i=t[e],o=t[e+1],s=0,a=e+r;a<n;a+=r){var l=t[a],u=t[a+1];s+=Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),i=l,o=u}return s}var Lo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ao=function(t){function e(e,n){var r=t.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return Lo(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Tr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ho(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=no&&this.layout!=ro)return null;var n=void 0!==e&&e;return No(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return ko(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,to)},e.prototype.getType=function(){return Ai},e.prototype.intersectsExtent=function(t){return Io(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=go(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ao);const Ro=Ao;var Fo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jo=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,n);else if(void 0!==n&&r)i.setFlatCoordinates(n,e),i.ends_=r;else{for(var o=i.getLayout(),s=e,a=[],l=[],u=0,c=s.length;u<c;++u){var h=s[u];0===u&&(o=h.getLayout()),Tr(a,h.getFlatCoordinates()),l.push(a.length)}i.setFlatCoordinates(o,a),i.ends_=l}return i}return Fo(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Tr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(co(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),po(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=no&&this.layout!=ro||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,i=void 0!==n&&n;return function(t,e,n,r,i,o,s){if(s)return No(t,e,n[n.length-1],r,i,o);var a;if(i<t[r-1])return o?((a=t.slice(0,r))[r-1]=i,a):null;if(t[t.length-1]<i)return o?((a=t.slice(t.length-r))[r-1]=i,a):null;for(var l=0,u=n.length;l<u;++l){var c=n[l];if(e!=c){if(i<t[e+r-1])return null;if(i<=t[c-1])return No(t,e,c,r,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,r,i)},e.prototype.getCoordinates=function(){return So(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Ro(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[],i=0,o=0,s=e.length;o<s;++o){var a=e[o],l=new Ro(t.slice(i,a),n);r.push(l),i=a}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.ends_,i=this.stride,o=0,s=r.length;o<s;++o){var a=r[o];Tr(t,Co(e,n,a,i,.5)),n=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=function(t,e,n,r,i,o,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=mo(t,e,c,r,i,o,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,to,r)},e.prototype.getType=function(){return ji},e.prototype.intersectsExtent=function(t){return function(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){if(Io(t,e,n[o],r,i))return!0;e=n[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=yo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(ao);const Do=jo;var zo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qo=function(t){function e(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return zo(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=Ft(t,e,i[0],i[1]);if(o<r){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return we(this.flatCoordinates,t)},e.prototype.getType=function(){return Li},e.prototype.intersectsExtent=function(t){return me(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ao);const Bo=qo;var Go=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uo=function(t){function e(e,n){var r=t.call(this)||this;return n&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return Go(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Tr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<de(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,s=0,a=i.length;s<a;s+=o){var l=Ft(t,e,i[s],i[s+1]);if(l<r){r=l;for(var u=0;u<o;++u)n[u]=i[s+u];n.length=o}}return r},e.prototype.getCoordinates=function(){return xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Bo(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var s=new Bo(t.slice(i,i+n),e);r.push(s)}return r},e.prototype.getType=function(){return Fi},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n)if(me(t,e[r],e[r+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=go(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ao);const Vo=Uo;function Wo(t,e,n,r){for(var i=0,o=t[n-r],s=t[n-r+1];e<n;e+=r){var a=t[e],l=t[e+1];i+=s*a-o*l,o=a,s=l}return i/2}function Ho(t,e,n,r){for(var i=0,o=0,s=n.length;o<s;++o){var a=n[o];i+=Wo(t,e,a,r),e=a}return i}var Yo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xo=function(t){function e(e,n){var r=t.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return Yo(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ho(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.getArea=function(){return Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,to)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=go(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ao);const Ko=Xo;function Zo(t,e,n,r,i,o,s){for(var a,l,u,c,h,p,f,d=i[o+1],g=[],y=0,m=n.length;y<m;++y){var v=n[y];for(c=t[v-r],p=t[v-r+1],a=e;a<v;a+=r)h=t[a],f=t[a+1],(d<=p&&f<=d||p<=d&&d<=f)&&(u=(d-p)/(f-p)*(h-c)+c,g.push(u)),c=h,p=f}var _=NaN,b=-1/0;for(g.sort(Cr),c=g[0],a=1,l=g.length;a<l;++a){h=g[a];var w=Math.abs(h-c);w>b&&To(t,e,n,r,u=(c+h)/2,d)&&(_=u,b=w),c=h}return isNaN(_)&&(_=i[o]),s?(s.push(_,d,b),s):[_,d,b]}function $o(t,e,n,r,i){for(var o=[],s=0,a=n.length;s<a;++s){var l=n[s];o=Zo(t,e,l,r,i,2*s,o),e=l[l.length-1]}return o}function Jo(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function Qo(t,e,n,r){for(var i=0,o=t[n-r],s=t[n-r+1];e<n;e+=r){var a=t[e],l=t[e+1];i+=(a-o)*(l+s),o=a,s=l}return 0===i?void 0:i>0}function ts(t,e,n,r,i){for(var o=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=Qo(t,e,l,r);if(0===s){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=l}return!0}function es(t,e,n,r,i){for(var o=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=Qo(t,e,l,r);(0===s?o&&u||!o&&!u:o&&!u||!o&&u)&&Jo(t,e,l,r),e=l}return e}function ns(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o)e=es(t,e,n[o],r,i);return e}var rs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),is=function(t){function e(e,n,r){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.ends_=r):i.setCoordinates(e,n),i}return rs(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Tr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(co(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),po(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return To(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ho(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?es(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,So(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=ke(this.getExtent());this.flatInteriorPoint_=Zo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Bo(this.getFlatInteriorPoint(),no)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Ko(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,s=n.length;o<s;++o){var a=n[o],l=new Ko(e.slice(i,a),t);r.push(l),i=a}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ts(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=es(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=bo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,to,r)},e.prototype.getType=function(){return Ri},e.prototype.intersectsExtent=function(t){return Mo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=yo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(ao);const os=is;function ss(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new is(o,to,[o.length])}function as(t,e,n){for(var r=e||32,i=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=i*(r+1),l=new Array(a),u=0;u<a;u+=i){l[u]=0,l[u+1]=0;for(var c=2;c<i;c++)l[u+c]=s[c]}var h=[l.length],p=new is(l,o,h);return function(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),s=i.length/o-1,a=r||0,l=0;l<=s;++l){var u=l*o,c=a+2*Dt(l,s)*Math.PI/s;i[u]=e[0]+n*Math.cos(c),i[u+1]=e[1]+n*Math.sin(c)}t.changed()}(p,s,t.getRadius(),n),p}function ls(t,e,n,r){for(var i=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=n.length;s<a;++s){var l=n[s];o=xe(t,e,l[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}var us=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cs=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var o=i.getLayout(),s=e,a=[],l=[],u=0,c=s.length;u<c;++u){var h=s[u];0===u&&(o=h.getLayout());for(var p=a.length,f=h.getEnds(),d=0,g=f.length;d<g;++d)f[d]+=p;Tr(a,h.getFlatCoordinates()),l.push(f)}n=o,e=a,r=l}return void 0!==n&&r?(i.setFlatCoordinates(n,e),i.endss_=r):i.setCoordinates(e,n),i}return us(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;Tr(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),r=0;r<t;++r)n[r]=this.endss_[r].slice();var i=new e(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];i=co(t,e,a,r,i),e=a[a.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,r,i,o,s,a,l,u,c){for(var h=[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];u=po(t,e,d,r,i,true,s,a,l,u,h),e=d[d.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,n,r))},e.prototype.containsXY=function(t,e){return function(t,e,n,r,i,o){if(0===n.length)return!1;for(var s=0,a=n.length;s<a;++s){var l=n[s];if(To(t,e,l,r,i,o))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,r){for(var i=0,o=0,s=n.length;o<s;++o){var a=n[o];i+=Ho(t,e,a,r),e=a[a.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ns(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Eo(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=ls(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=$o(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Vo(this.getFlatInteriorPoints().slice(),no)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];if(!ts(t,e,a,r,undefined))return!1;a.length&&(e=a[a.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ns(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=function(t,e,n,r,i,o,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l],h=[];s=bo(t,e,c,r,i,o,s,h),a.push(h),e=c[c.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,to,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var r=this.endss_[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,s=r.length;o<s;++o)r[o]-=e;return new os(this.flatCoordinates.slice(e,i),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[],i=0,o=0,s=n.length;o<s;++o){var a=n[o].slice(),l=a[a.length-1];if(0!==i)for(var u=0,c=a.length;u<c;++u)a[u]-=i;var h=new os(e.slice(i,l),t,a);r.push(h),i=l}return r},e.prototype.getType=function(){return Di},e.prototype.intersectsExtent=function(t){return function(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];if(Mo(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,r,i){for(var o=i||[],s=0,a=0,l=n.length;a<l;++a){var u=yo(t,e,n[a],r,o[s]);o[s++]=u,e=u[u.length-1]}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(ao);const hs=cs;var ps=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fs=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this)||this).dataProjection=tn(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(n.defaultFeatureProjection=tn(r.featureProjection)),n.geometryName_=r.geometryName,n.extractGeometryName_=r.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return ps(e,t),e.prototype.readFeatureFromObject=function(t,e){var n,r=ds((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new ai;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&i.setGeometryName(n.geometry_name),i.setGeometry(r),"id"in n&&i.setId(n.id),n.properties&&i.setProperties(n.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var r=t.features,i=0,o=r.length;i<o;++i)n.push(this.readFeatureFromObject(r[i],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return ds(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=tn(n.properties.name):"EPSG"===n.type?e=tn("EPSG:"+n.properties.code):ce(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(n.id=r),!t.hasProperties())return n;var i=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=gs(o,e),delete i[t.getGeometryName()]),jr(i)||(n.properties=i),n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return gs(t,this.adaptOptions(e))},e}(Qi);function ds(t,e){if(!t)return null;var n;switch(t.type){case Li:n=function(t){return new Bo(t.coordinates)}(t);break;case Ai:n=function(t){return new Ro(t.coordinates)}(t);break;case Ri:n=function(t){return new os(t.coordinates)}(t);break;case Fi:n=function(t){return new Vo(t.coordinates)}(t);break;case ji:n=function(t){return new Do(t.coordinates)}(t);break;case Di:n=function(t){return new hs(t.coordinates)}(t);break;case zi:n=function(t,e){var n=t.geometries.map((function(t){return ds(t,undefined)}));return new Vi(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Hi(n,!1,e)}function gs(t,e){var n,r=(t=Hi(t,!0,e)).getType();switch(r){case Li:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case Ai:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Ri:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case Fi:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case ji:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Di:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case zi:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var n=Ar({},e);return delete n.featureProjection,gs(t,n)}))}}(t,e);break;case qi:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return n}const ys=fs;var ms={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Suported projections are Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Mercator, Natural Earth, and Winkel Tripel. Terrain, fog, sky and CustomLayerInterface are not supported for projections other than mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_symbol:{type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},projection:{name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carre projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0 is directly above, at zenith, and 90 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0 is directly above, at zenith, and 90 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},vs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _s(t){var e={exports:{}};return t(e,e.exports),e.exports}var bs=_s((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==typeof vs&&vs;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var s,a,l=2147483647,u=36,c=/^xn--/,h=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function y(t){throw RangeError(f[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(p,".")).split("."),e).join(".")}function _(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return m(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+g(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=u)t=d(t/35);return d(r+36*t/(t+38))}function S(t){var e,n,r,i,o,s,a,c,h,p,f,g=[],m=t.length,v=0,_=128,w=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,s=1,a=u;i>=m&&y("invalid-input"),((c=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||c>d((l-v)/s))&&y("overflow"),v+=c*s,!(c<(h=a<=w?1:a>=w+26?26:a-w));a+=u)s>d(l/(p=u-h))&&y("overflow"),s*=p;w=x(v-o,e=g.length+1,0==o),d(v/e)>l-_&&y("overflow"),_+=d(v/e),v%=e,g.splice(v++,0,_)}return b(g)}function E(t){var e,n,r,i,o,s,a,c,h,p,f,m,v,b,S,E=[];for(m=(t=_(t)).length,e=128,n=0,o=72,s=0;s<m;++s)(f=t[s])<128&&E.push(g(f));for(r=i=E.length,i&&E.push("-");r<m;){for(a=l,s=0;s<m;++s)(f=t[s])>=e&&f<a&&(a=f);for(a-e>d((l-n)/(v=r+1))&&y("overflow"),n+=(a-e)*v,e=a,s=0;s<m;++s)if((f=t[s])<e&&++n>l&&y("overflow"),f==e){for(c=n,h=u;!(c<(p=h<=o?1:h>=o+26?26:h-o));h+=u)S=c-p,b=u-p,E.push(g(w(p+S%b,0))),c=d(S/b);E.push(g(w(c,0))),o=x(n,v,r==i),n=0,++r}++n,++e}return E.join("")}if(s={version:"1.3.2",ucs2:{decode:_,encode:b},decode:S,encode:E,toASCII:function(t){return v(t,(function(t){return h.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?S(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=s;else for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);else n.punycode=s}(vs)})),ws=function(t){return"string"==typeof t},xs=function(t){return"object"==typeof t&&null!==t},Ss=function(t){return null===t};function Es(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Cs=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var u,c,h,p,f=t[l].replace(o,"%20"),d=f.indexOf(n);d>=0?(u=f.substr(0,d),c=f.substr(d+1)):(u=f,c=""),h=decodeURIComponent(u),p=decodeURIComponent(c),Es(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i},Ns=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Ps=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var i=encodeURIComponent(Ns(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(Ns(t))})).join(e):i+encodeURIComponent(Ns(t[r]))})).join(e):r?encodeURIComponent(Ns(r))+n+encodeURIComponent(Ns(t)):""},Os=_s((function(t,e){e.decode=e.parse=Cs,e.encode=e.stringify=Ps}));function Ts(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Is=/^([a-z0-9.+-]+:)/i,Ms=/:[0-9]*$/,ks=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ls=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),As=["'"].concat(Ls),Rs=["%","/","?",";","#"].concat(As),Fs=["/","?","#"],js=/^[+a-z0-9A-Z_-]{0,63}$/,Ds=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,zs={javascript:!0,"javascript:":!0},qs={javascript:!0,"javascript:":!0},Bs={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Gs(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}Ts.prototype.parse=function(t,e,n){if(!ws(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(i);if(s=s.trim(),!n&&1===t.split("#").length){var a=ks.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Os.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=Is.exec(s);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,s=s.substr(l.length)}if(n||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===s.substr(0,2);!c||l&&qs[l]||(s=s.substr(2),this.slashes=!0)}if(!qs[l]&&(c||l&&!Bs[l])){for(var h,p,f=-1,d=0;d<Fs.length;d++)-1!==(g=s.indexOf(Fs[d]))&&(-1===f||g<f)&&(f=g);for(-1!==(p=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(h=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(h)),f=-1,d=0;d<Rs.length;d++){var g;-1!==(g=s.indexOf(Rs[d]))&&(-1===f||g<f)&&(f=g)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var m=this.hostname.split(/\./),v=(d=0,m.length);d<v;d++){var _=m[d];if(_&&!_.match(js)){for(var b="",w=0,x=_.length;w<x;w++)_.charCodeAt(w)>127?b+="x":b+=_[w];if(!b.match(js)){var S=m.slice(0,d),E=m.slice(d+1),C=_.match(Ds);C&&(S.push(C[1]),E.unshift(C[2])),E.length&&(s="/"+E.join(".")+s),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=bs.toASCII(this.hostname));var N=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+N,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!zs[u])for(d=0,v=As.length;d<v;d++){var O=As[d];if(-1!==s.indexOf(O)){var T=encodeURIComponent(O);T===O&&(T=escape(O)),s=s.split(O).join(T)}}var I=s.indexOf("#");-1!==I&&(this.hash=s.substr(I),s=s.slice(0,I));var M=s.indexOf("?");if(-1!==M?(this.search=s.substr(M),this.query=s.substr(M+1),e&&(this.query=Os.parse(this.query)),s=s.slice(0,M)):e&&(this.search="",this.query={}),s&&(this.pathname=s),Bs[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var k=this.search||"";this.path=N+k}return this.href=this.format(),this},Ts.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&xs(this.query)&&Object.keys(this.query).length&&(o=Os.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||Bs[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})),e+i+n+(s=s.replace("#","%23"))+r},Ts.prototype.resolve=function(t){return this.resolveObject(function(t,e,n){if(t&&xs(t)&&t instanceof Ts)return t;var r=new Ts;return r.parse(t,e,n),r}(t,!1,!0)).format()},Ts.prototype.resolveObject=function(t){if(ws(t)){var e=new Ts;e.parse(t,!1,!0),t=e}for(var n=new Ts,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var l=s[a];"protocol"!==l&&(n[l]=t[l])}return Bs[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Bs[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||qs[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",d=n.search||"";n.path=f+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=y||g||n.host&&t.pathname,v=m,_=n.pathname&&n.pathname.split("/")||[],b=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!Bs[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),m=m&&(""===p[0]||""===_[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=p;else if(p.length)_||(_=[]),_.pop(),_=_.concat(p),n.search=t.search,n.query=t.query;else if(null!=t.search)return b&&(n.hostname=n.host=_.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=t.search,n.query=t.query,Ss(n.pathname)&&Ss(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=_.slice(-1)[0],x=(n.host||t.host||_.length>1)&&("."===w||".."===w)||""===w,S=0,E=_.length;E>=0;E--)"."===(w=_[E])?_.splice(E,1):".."===w?(_.splice(E,1),S++):S&&(_.splice(E,1),S--);if(!m&&!v)for(;S--;S)_.unshift("..");!m||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),x&&"/"!==_.join("/").substr(-1)&&_.push("");var C,N=""===_[0]||_[0]&&"/"===_[0].charAt(0);return b&&(n.hostname=n.host=N?"":_.length?_.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(m=m||n.host&&_.length)&&!N&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),Ss(n.pathname)&&Ss(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},Ts.prototype.parseHost=function(){var t=this.host,e=Ms.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};class Us extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class Vs{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new Vs(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ws={kind:"null"},Hs={kind:"number"},Ys={kind:"string"},Xs={kind:"boolean"},Ks={kind:"color"},Zs={kind:"object"},$s={kind:"value"},Js={kind:"collator"},Qs={kind:"formatted"},ta={kind:"resolvedImage"};function ea(t,e){return{kind:"array",itemType:t,N:e}}function na(t){if("array"===t.kind){const e=na(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const ra=[Ws,Hs,Ys,Xs,Ks,Qs,Zs,ea($s),ta];function ia(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!ia(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of ra)if(!ia(t,e))return null}return`Expected ${na(t)} but found ${na(e)} instead.`}function oa(t,e){return e.some((e=>e.kind===t.kind))}function sa(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var aa=_s((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function s(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=s(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),p];case"hsla":if(4!==h.length)return null;p=s(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=s(h[1]),g=s(h[2]),y=g<=.5?g*(d+1):g+d-g*d,m=2*g-y;return[r(255*a(m,y,f+1/3)),r(255*a(m,y,f)),r(255*a(m,y,f-1/3)),p];default:return null}}return null}}catch(t){}}));class la{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof la)return t;if("string"!=typeof t)return;const e=aa.parseCSSColor(t);return e?new la(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}la.black=new la(0,0,0,1),la.white=new la(1,1,1,1),la.transparent=new la(0,0,0,0),la.red=new la(1,0,0,1),la.blue=new la(0,0,1,1);class ua{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ca{constructor(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class ha{constructor(t){this.sections=t}static fromString(t){return new ha([new ca(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof ha?t:ha.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class pa{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new pa({name:t,available:!1}):null}serialize(){return["image",this.name]}}function fa(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function da(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof la)return!0;if(t instanceof ua)return!0;if(t instanceof ha)return!0;if(t instanceof pa)return!0;if(Array.isArray(t)){for(const e of t)if(!da(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!da(t[e]))return!1;return!0}return!1}function ga(t){if(null===t)return Ws;if("string"==typeof t)return Ys;if("boolean"==typeof t)return Xs;if("number"==typeof t)return Hs;if(t instanceof la)return Ks;if(t instanceof ua)return Js;if(t instanceof ha)return Qs;if(t instanceof pa)return ta;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=ga(e);if(n){if(n===t)continue;n=$s;break}n=t}return ea(n||$s,e)}return Zs}function ya(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof la||t instanceof ha||t instanceof pa?t.toString():JSON.stringify(t)}class ma{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!da(t[1]))return e.error("invalid value");const n=t[1];let r=ga(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ma(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof la?["rgba"].concat(this.value.toArray()):this.value instanceof ha?this.value.serialize():this.value}}class va{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const _a={string:Ys,number:Hs,boolean:Xs,object:Zs};class ba{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in _a)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=_a[n],r++}else i=$s;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=ea(i,o)}else n=_a[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,$s);if(!n)return null;o.push(n)}return new ba(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!ia(this.type,ga(n)))return n;if(e===this.args.length-1)throw new va(`Expected value to be of type ${na(this.type)}, but found ${na(ga(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}class wa{constructor(t){this.type=Qs,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,Hs),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,ea(Ys)),!n))return null;let s=null;if(o["text-color"]&&(s=e.parse(o["text-color"],1,Ks),!s))return null;const a=r[r.length-1];a.scale=t,a.font=n,a.textColor=s}else{const o=e.parse(t[n],1,$s);if(!o)return null;const s=o.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new wa(r)}evaluate(t){return new ha(this.sections.map((e=>{const n=e.content.evaluate(t);return ga(n)===ta?new ca("",n,null,null,null):new ca(ya(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class xa{constructor(t){this.type=ta,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Ys);return n?new xa(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=pa.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Sa={"to-boolean":Xs,"to-color":Ks,"to-number":Hs,"to-string":Ys};class Ea{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Sa[n],i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],n,$s);if(!r)return null;i.push(r)}return new Ea(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof la)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:fa(e[0],e[1],e[2],e[3]),!n))return new la(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new va(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new va(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?ha.fromString(ya(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?pa.fromString(ya(this.args[0].evaluate(t))):ya(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new wa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new xa(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Ca=["Unknown","Point","LineString","Polygon"];class Na{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ca[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord,i=n*e-t[0],o=r*e-t[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=la.parse(t)),e}}class Pa{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],r=Pa.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[r,o]of s){a=new Ja(e.registry,e.path,null,e.scope);const s=[];let l=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(r)?r[e-1]:r.type,o=a.parse(n,1+s.length,i);if(!o){l=!0;break}s.push(o)}if(!l)if(Array.isArray(r)&&r.length!==s.length)a.error(`Expected ${r.length} arguments, but found ${s.length} instead.`);else{for(let t=0;t<s.length;t++){const e=Array.isArray(r)?r[t]:r.type,n=s[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new Pa(n,i,o,s)}}if(1===s.length)e.errors.push(...a.errors);else{const n=(s.length?s:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(na).join(", ")})`:`(${na(e.type)}...)`;var e})).join(" | "),r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],1+r.length);if(!i)return null;r.push(na(i.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Pa.definitions=e;for(const n in e)t[n]=Pa}}class Oa{constructor(t,e,n){this.type=Js,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Xs);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Xs);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,Ys),!o)?null:new Oa(r,i,o)}evaluate(t){return new ua(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Ta=8192;function Ia(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ma(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ka(t,e){const n=(180+t[0])/360,r=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360);var i;const o=Math.pow(2,e.z);return[Math.round(n*o*Ta),Math.round(r*o*Ta)]}function La(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],s=t[1]-n[1];return r*s-o*i==0&&r*o<=0&&i*s<=0}function Aa(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function Ra(t,e){let n=!1;for(let r=0,i=e.length;r<i;r++){const i=e[r];for(let e=0,r=i.length;e<r-1;e++){if(La(t,i[e],i[e+1]))return!1;Aa(t,i[e],i[e+1])&&(n=!n)}}return n}function Fa(t,e){for(let n=0;n<e.length;n++)if(Ra(t,e[n]))return!0;return!1}function ja(t,e,n,r){const i=t[0]-n[0],o=t[1]-n[1],s=e[0]-n[0],a=e[1]-n[1],l=r[0]-n[0],u=r[1]-n[1],c=i*u-l*o,h=s*u-l*a;return c>0&&h<0||c<0&&h>0}function Da(t,e,n,r){const i=[e[0]-t[0],e[1]-t[1]];return 0!=(o=[r[0]-n[0],r[1]-n[1]])[0]*(s=i)[1]-o[1]*s[0]&&!(!ja(t,e,n,r)||!ja(n,r,t,e));var o,s}function za(t,e,n){for(const r of n)for(let n=0;n<r.length-1;++n)if(Da(t,e,r[n],r[n+1]))return!0;return!1}function qa(t,e){for(let n=0;n<t.length;++n)if(!Ra(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(za(t[n],t[n+1],e))return!1;return!0}function Ba(t,e){for(let n=0;n<e.length;n++)if(qa(t,e[n]))return!0;return!1}function Ga(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const s=ka(t[i][r],n);Ia(e,s),o.push(s)}r.push(o)}return r}function Ua(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=Ga(t[i],e,n);r.push(o)}return r}function Va(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}Ia(e,t)}function Wa(t,e,n,r){const i=Math.pow(2,r.z)*Ta,o=[r.x*Ta,r.y*Ta],s=[];for(const r of t)for(const t of r){const r=[t.x+o[0],t.y+o[1]];Va(r,e,n,i),s.push(r)}return s}function Ha(t,e,n,r){const i=Math.pow(2,r.z)*Ta,o=[r.x*Ta,r.y*Ta],s=[];for(const n of t){const t=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];Ia(e,n),t.push(n)}s.push(t)}if(e[2]-e[0]<=i/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of s)for(const r of t)Va(r,e,n,i)}var a;return s}class Ya{constructor(t,e){this.type=Xs,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(da(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Ya(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new Ya(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new Ya(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=Ga(e.coordinates,r,i),s=Wa(t.geometry(),n,r,i);if(!Ma(n,r))return!1;for(const t of s)if(!Ra(t,o))return!1}if("MultiPolygon"===e.type){const o=Ua(e.coordinates,r,i),s=Wa(t.geometry(),n,r,i);if(!Ma(n,r))return!1;for(const t of s)if(!Fa(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=Ga(e.coordinates,r,i),s=Ha(t.geometry(),n,r,i);if(!Ma(n,r))return!1;for(const t of s)if(!qa(t,o))return!1}if("MultiPolygon"===e.type){const o=Ua(e.coordinates,r,i),s=Ha(t.geometry(),n,r,i);if(!Ma(n,r))return!1;for(const t of s)if(!Ba(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Xa(t){if(t instanceof Pa){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ya)return!1;let e=!0;return t.eachChild((t=>{e&&!Xa(t)&&(e=!1)})),e}function Ka(t){if(t instanceof Pa&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!Ka(t)&&(e=!1)})),e}function Za(t,e){if(t instanceof Pa&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!Za(t,e)&&(n=!1)})),n}class $a{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new $a(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ja{constructor(t,e=[],n,r=new Vs,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r,i={}){return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new ba(e,[t]):"coerce"===n?new Ea(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof ma)&&"resolvedImage"!==r.type.kind&&Qa(r)){const t=new Na;try{r=new ma(r.type,r.evaluate(t))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Ja(this.registry,r,e||null,i,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Us(n,t))}checkSubtype(t,e){const n=ia(t,e);return n&&this.error(n),n}}function Qa(t){if(t instanceof $a)return Qa(t.boundExpression);if(t instanceof Pa&&"error"===t.name)return!1;if(t instanceof Oa)return!1;if(t instanceof Ya)return!1;const e=t instanceof Ea||t instanceof ba;let n=!0;return t.eachChild((t=>{n=e?n&&Qa(t):n&&t instanceof ma})),!!n&&Xa(t)&&Za(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function tl(t,e){const n=t.length-1;let r,i,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),r=t[a],i=t[a+1],r<=e){if(a===n||e<i)return a;o=a+1}else{if(!(r>e))throw new va("Input is not a number.");s=a-1}return 0}class el{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,Hs);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],s=t[n+1],a=n,l=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const u=e.parse(s,l,i);if(!u)return null;i=i||u.type,r.push([o,u])}return new el(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[tl(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var nl=rl;function rl(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function il(t,e,n){return t*(1-n)+e*n}rl.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},rl.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},rl.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},rl.prototype.solveCurveX=function(t,e){var n,r,i,o,s;for(void 0===e&&(e=1e-6),i=t,s=0;s<8;s++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=o/a}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},rl.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ol=Object.freeze({__proto__:null,number:il,color:function(t,e,n){return new la(il(t.r,e.r,n),il(t.g,e.g,n),il(t.b,e.b,n),il(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,r)=>il(t,e[r],n)))}});const sl=.95047,al=1.08883,ll=4/29,ul=6/29,cl=3*ul*ul,hl=Math.PI/180,pl=180/Math.PI;function fl(t){return t>.008856451679035631?Math.pow(t,1/3):t/cl+ll}function dl(t){return t>ul?t*t*t:cl*(t-ll)}function gl(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function yl(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ml(t){const e=yl(t.r),n=yl(t.g),r=yl(t.b),i=fl((.4124564*e+.3575761*n+.1804375*r)/sl),o=fl((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-fl((.0193339*e+.119192*n+.9503041*r)/al)),alpha:t.a}}function vl(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*dl(e),n=sl*dl(n),r=al*dl(r),new la(gl(3.2404542*n-1.5371385*e-.4985314*r),gl(-.969266*n+1.8760108*e+.041556*r),gl(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function _l(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const bl={forward:ml,reverse:vl,interpolate:function(t,e,n){return{l:il(t.l,e.l,n),a:il(t.a,e.a,n),b:il(t.b,e.b,n),alpha:il(t.alpha,e.alpha,n)}}},wl=function(t){const{l:e,a:n,b:r}=ml(t),i=Math.atan2(r,n)*pl;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},xl=function(t){const e=t.h*hl,n=t.c;return vl({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},Sl=function(t,e,n){return{h:_l(t.h,e.h,n),c:il(t.c,e.c,n),l:il(t.l,e.l,n),alpha:il(t.alpha,e.alpha,n)}};class El{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,r){let i=0;if("exponential"===t.name)i=Cl(e,t.base,n,r);else if("linear"===t.name)i=Cl(e,1,n,r);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new nl(o[0],o[1],o[2],o[3]).solve(Cl(e,1,n,r))}return i}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,Hs),!i)return null;const s=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=Ks:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],r=o[t+1],i=t+3,l=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(s.length&&s[s.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const u=e.parse(r,l,a);if(!u)return null;a=a||u.type,s.push([n,u])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new El(a,n,r,i,s):e.error(`Type ${na(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=tl(e,r),s=e[o],a=e[o+1],l=El.interpolationFactor(this.interpolation,r,s,a),u=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?ol[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?xl(Sl(wl(u),wl(c),l)):bl.reverse(bl.interpolate(bl.forward(u),bl.forward(c),l))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Cl(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class Nl{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of t.slice(1)){const t=e.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some((t=>ia(r,t.type)));return new Nl(o?$s:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(t),n&&n instanceof pa&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Pl{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let r=1;r<t.length-1;r+=2){const i=t[r];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new Pl(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class Ol{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Hs),r=e.parse(t[2],2,ea(e.expectedType||$s));if(!n||!r)return null;const i=r.type;return new Ol(i.itemType,n,r)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new va(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new va(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new va(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Tl{constructor(t,e){this.type=Xs,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,$s),r=e.parse(t[2],2,$s);return n&&r?oa(n.type,[Xs,Ys,Hs,Ws,$s])?new Tl(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${na(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!sa(e,["boolean","string","number","null"]))throw new va(`Expected first argument to be of type boolean, string, number or null, but found ${na(ga(e))} instead.`);if(!sa(n,["string","array"]))throw new va(`Expected second argument to be of type array or string, but found ${na(ga(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Il{constructor(t,e,n){this.type=Hs,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,$s),r=e.parse(t[2],2,$s);if(!n||!r)return null;if(!oa(n.type,[Xs,Ys,Hs,Ws,$s]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${na(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,Hs);return i?new Il(n,r,i):null}return new Il(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!sa(e,["boolean","string","number","null"]))throw new va(`Expected first argument to be of type boolean, string, number or null, but found ${na(ga(e))} instead.`);if(!sa(n,["string","array"]))throw new va(`Expected second argument to be of type array or string, but found ${na(ga(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ml{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let s=2;s<t.length-1;s+=2){let a=t[s];const l=t[s+1];Array.isArray(a)||(a=[a]);const u=e.concat(s);if(0===a.length)return u.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,ga(t)))return null}else n=ga(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(l,s,r);if(!c)return null;r=r||c.type,o.push(c)}const s=e.parse(t[1],1,$s);if(!s)return null;const a=e.parse(t[t.length-1],t.length-1,r);return a?"value"!==s.type.kind&&e.concat(1).checkSubtype(n,s.type)?null:new Ml(n,r,s,i,o,a):null}evaluate(t){const e=this.input.evaluate(t);return(ga(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const t of e){const e=r[this.cases[t]];void 0===e?(r[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,r]of n)1===r.length?t.push(i(r[0])):t.push(r.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class kl{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,Xs);if(!o)return null;const s=e.parse(t[i+1],i+1,n);if(!s)return null;r.push([o,s]),n=n||s.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new kl(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Ll{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,$s),r=e.parse(t[2],2,Hs);if(!n||!r)return null;if(!oa(n.type,[ea($s),Ys,$s]))return e.error(`Expected first argument to be of type array or string, but found ${na(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,Hs);return i?new Ll(n.type,n,r,i):null}return new Ll(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!sa(e,["string","array"]))throw new va(`Expected first argument to be of type array or string, but found ${na(ga(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Al(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Rl(t,e,n,r){return 0===r.compare(e,n)}function Fl(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=Xs,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,$s);if(!o)return null;if(!Al(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${na(o.type)}'.`);let s=e.parse(t[2],2,$s);if(!s)return null;if(!Al(n,s.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${na(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${na(o.type)}' and '${na(s.type)}'.`);r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new ba(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new ba(o.type,[s])));let a=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,Js),!a)return null}return new i(o,s,a)}evaluate(i){const o=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=ga(o),n=ga(s);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new va(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=ga(o),n=ga(s);if("string"!==t.kind||"string"!==n.kind)return e(i,o,s)}return this.collator?n(i,o,s,this.collator.evaluate(i)):e(i,o,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const jl=Fl("==",(function(t,e,n){return e===n}),Rl),Dl=Fl("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!Rl(0,e,n,r)})),zl=Fl("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),ql=Fl(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Bl=Fl("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Gl=Fl(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class Ul{constructor(t,e,n,r,i){this.type=Ys,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Hs);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,Ys),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,Ys),!o))return null;let s=null;if(r["min-fraction-digits"]&&(s=e.parse(r["min-fraction-digits"],1,Hs),!s))return null;let a=null;return r["max-fraction-digits"]&&(a=e.parse(r["max-fraction-digits"],1,Hs),!a)?null:new Ul(n,i,o,s,a)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Vl{constructor(t){this.type=Hs,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${na(n.type)} instead.`):new Vl(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new va(`Expected value to be of type string or array, but found ${na(ga(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Wl={"==":jl,"!=":Dl,">":ql,"<":zl,">=":Gl,"<=":Bl,array:ba,at:Ol,boolean:ba,case:kl,coalesce:Nl,collator:Oa,format:wa,image:xa,in:Tl,"index-of":Il,interpolate:El,"interpolate-hcl":El,"interpolate-lab":El,length:Vl,let:Pl,literal:ma,match:Ml,number:ba,"number-format":Ul,object:ba,slice:Ll,step:el,string:ba,"to-boolean":Ea,"to-color":Ea,"to-number":Ea,"to-string":Ea,var:$a,within:Ya};function Hl(t,[e,n,r,i]){e=e.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);const o=i?i.evaluate(t):1,s=fa(e,n,r,o);if(s)throw new va(s);return new la(e/255*o,n/255*o,r/255*o,o)}function Yl(t,e){return t in e}function Xl(t,e){const n=e[t];return void 0===n?null:n}function Kl(t){return{type:t}}function Zl(t){return{result:"success",value:t}}function $l(t){return{result:"error",value:t}}function Jl(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ql(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function tu(t){return!!t.expression&&t.expression.interpolated}function eu(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function nu(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}Pa.register(Wl,{error:[{kind:"error"},[Ys],(t,[e])=>{throw new va(e.evaluate(t))}],typeof:[Ys,[$s],(t,[e])=>na(ga(e.evaluate(t)))],"to-rgba":[ea(Hs,4),[Ks],(t,[e])=>e.evaluate(t).toArray()],rgb:[Ks,[Hs,Hs,Hs],Hl],rgba:[Ks,[Hs,Hs,Hs,Hs],Hl],has:{type:Xs,overloads:[[[Ys],(t,[e])=>Yl(e.evaluate(t),t.properties())],[[Ys,Zs],(t,[e,n])=>Yl(e.evaluate(t),n.evaluate(t))]]},get:{type:$s,overloads:[[[Ys],(t,[e])=>Xl(e.evaluate(t),t.properties())],[[Ys,Zs],(t,[e,n])=>Xl(e.evaluate(t),n.evaluate(t))]]},"feature-state":[$s,[Ys],(t,[e])=>Xl(e.evaluate(t),t.featureState||{})],properties:[Zs,[],t=>t.properties()],"geometry-type":[Ys,[],t=>t.geometryType()],id:[$s,[],t=>t.id()],zoom:[Hs,[],t=>t.globals.zoom],pitch:[Hs,[],t=>t.globals.pitch||0],"distance-from-center":[Hs,[],t=>t.distanceFromCenter()],"heatmap-density":[Hs,[],t=>t.globals.heatmapDensity||0],"line-progress":[Hs,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Hs,[],t=>t.globals.skyRadialProgress||0],accumulated:[$s,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Hs,Kl(Hs),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[Hs,Kl(Hs),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:Hs,overloads:[[[Hs,Hs],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[Hs],(t,[e])=>-e.evaluate(t)]]},"/":[Hs,[Hs,Hs],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[Hs,[Hs,Hs],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[Hs,[],()=>Math.LN2],pi:[Hs,[],()=>Math.PI],e:[Hs,[],()=>Math.E],"^":[Hs,[Hs,Hs],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[Hs,[Hs],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Hs,[Hs],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Hs,[Hs],(t,[e])=>Math.log(e.evaluate(t))],log2:[Hs,[Hs],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Hs,[Hs],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Hs,[Hs],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Hs,[Hs],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Hs,[Hs],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Hs,[Hs],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Hs,[Hs],(t,[e])=>Math.atan(e.evaluate(t))],min:[Hs,Kl(Hs),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[Hs,Kl(Hs),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[Hs,[Hs],(t,[e])=>Math.abs(e.evaluate(t))],round:[Hs,[Hs],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Hs,[Hs],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Hs,[Hs],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Xs,[Ys,$s],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Xs,[$s],(t,[e])=>t.id()===e.value],"filter-type-==":[Xs,[Ys],(t,[e])=>t.geometryType()===e.value],"filter-<":[Xs,[Ys,$s],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Xs,[$s],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<r}],"filter->":[Xs,[Ys,$s],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Xs,[$s],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>r}],"filter-<=":[Xs,[Ys,$s],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Xs,[$s],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<=r}],"filter->=":[Xs,[Ys,$s],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Xs,[$s],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>=r}],"filter-has":[Xs,[$s],(t,[e])=>e.value in t.properties()],"filter-has-id":[Xs,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Xs,[ea(Ys)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Xs,[ea($s)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Xs,[Ys,ea($s)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Xs,[Ys,ea($s)],(t,[e,n])=>function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Xs,overloads:[[[Xs,Xs],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[Kl(Xs),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Xs,overloads:[[[Xs,Xs],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[Kl(Xs),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Xs,[Xs],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Xs,[Ys],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Ys,[Ys],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Ys,[Ys],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Ys,Kl($s),(t,e)=>e.map((e=>ya(e.evaluate(t)))).join("")],"resolved-locale":[Ys,[Js],(t,[e])=>e.evaluate(t).resolvedLocale()]});class ru{constructor(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new Na,this._defaultValue=e?"color"===(n=e).type&&nu(n.default)?new la(0,0,0,0):"color"===n.type?la.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o,s,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o,s,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new va(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function iu(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Wl}function ou(t,e){const n=new Ja(Wl,[],e?function(t){const e={color:Ks,string:Ys,number:Hs,enum:Ys,boolean:Xs,formatted:Qs,resolvedImage:ta};return"array"===t.type?ea(e[t.value]||$s,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Zl(new ru(r,e)):$l(n.errors)}class su{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Ka(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class au{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Ka(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?El.interpolationFactor(this.interpolationType,t,e,n):0}}function lu(t,e){if("error"===(t=ou(t,e)).result)return t;const n=t.value.expression,r=Xa(n);if(!r&&!Jl(e))return $l([new Us("","data expressions not supported")]);const i=Za(n,["zoom","pitch","distance-from-center"]);if(!i&&!Ql(e))return $l([new Us("","zoom expressions not supported")]);const o=uu(n);if(!o&&!i)return $l([new Us("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Us)return $l([o]);if(o instanceof El&&!tu(e))return $l([new Us("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Zl(new su(r?"constant":"source",t.value));const s=o instanceof El?o.interpolation:void 0;return Zl(new au(r?"camera":"composite",t.value,o.labels,s))}function uu(t){let e=null;if(t instanceof Pl)e=uu(t.result);else if(t instanceof Nl){for(const n of t.args)if(e=uu(n),e)break}else(t instanceof el||t instanceof El)&&t.input instanceof Pa&&"zoom"===t.input.name&&(e=t);return e instanceof Us||t.eachChild((t=>{const n=uu(t);n instanceof Us?e=n:!e&&n?e=new Us("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new Us("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function cu(t){return"object"==typeof t?["literal",t]:t}function hu(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function pu(t,e){const n=cu(function(t,e){return void 0!==t?t:void 0!==e?e:void 0}(t.default,e.default));return void 0===n&&"resolvedImage"===e.type?"":n}function fu(t,e,n){const r=yu(t,e),i=["get",t.property];if("categorical"===r&&"boolean"==typeof n[0][0]){const r=["case"];for(const t of n)r.push(["==",i,t[0]],t[1]);return r.push(pu(t,e)),r}if("categorical"===r){const r=["match",i];for(const t of n)gu(r,t[0],t[1],!1);return r.push(pu(t,e)),r}if("interval"===r){const e=["step",["number",i]];for(const t of n)gu(e,t[0],t[1],!0);return du(e),void 0===t.default?e:["case",["==",["typeof",i],"number"],e,cu(t.default)]}if("exponential"===r){const e=void 0!==t.base?t.base:1,r=[hu(t),1===e?["linear"]:["exponential",e],["number",i]];for(const t of n)gu(r,t[0],t[1],!1);return void 0===t.default?r:["case",["==",["typeof",i],"number"],r,cu(t.default)]}throw new Error(`Unknown property function type ${r}`)}function du(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function gu(t,e,n,r){t.length>3&&e===t[t.length-2]||(r&&2===t.length||t.push(e),t.push(n))}function yu(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function mu(t){const e=["concat"],n=/{([^{}]+)}/g;let r=0;for(let i=n.exec(t);null!==i;i=n.exec(t)){const o=t.slice(r,n.lastIndex-i[0].length);r=n.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(r<t.length)e.push(t.slice(r));else if(2===e.length)return["to-string",e[1]];return e}function vu(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function _u(t){if(Array.isArray(t))return t.map(_u);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=_u(t[n]);return e}return vu(t)}function bu(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!bu(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function wu(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};bu(t)||(t=Ou(t));const n=t;let r=!0;try{r=function(t){if(!Eu(t))return t;let e=_u(t);return Su(e),e=xu(e),e}(n)}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=ms[`filter_${e}`],o=ou(r,i);let s=null;if("error"===o.result)throw new Error(o.value.map((t=>`${t.key}: ${t.message}`)).join(", "));s=(t,e,n)=>o.value.evaluate(t,e,{},n);let a=null,l=null;if(r!==n){const t=ou(n,i);if("error"===t.result)throw new Error(t.value.map((t=>`${t.key}: ${t.message}`)).join(", "));a=(e,n,r,i,o)=>t.value.evaluate(e,n,{},r,void 0,void 0,i,o),l=!Xa(t.value.expression)}return s=s,{filter:s,dynamicFilter:a||void 0,needGeometry:Pu(r),needFeature:!!l}}function xu(t){if(!Array.isArray(t))return t;const e=function(t){if(Cu.has(t[0]))for(let e=1;e<t.length;e++)if(Eu(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>xu(t)))}function Su(t){let e=!1;const n=[];if("case"===t[0]){for(let r=1;r<t.length-1;r+=2)e=e||Eu(t[r]),n.push(t[r+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||Eu(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||Eu(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let e=1;e<t.length;e++)Su(t[e])}function Eu(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let e=1;e<t.length;e++)if(Eu(t[e]))return!0;return!1}const Cu=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Nu(t,e){return t<e?-1:t>e?1:0}function Pu(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Pu(t[e]))return!0;return!1}function Ou(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Tu(t[1],t[2],"=="):"!="===e?ku(Tu(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Tu(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Ou))):"all"===e?["all"].concat(t.slice(1).map(Ou)):"none"===e?["all"].concat(t.slice(1).map(Ou).map(ku)):"in"===e?Iu(t[1],t.slice(2)):"!in"===e?ku(Iu(t[1],t.slice(2))):"has"===e?Mu(t[1]):"!has"===e?ku(Mu(t[1])):"within"!==e||t;var n}function Tu(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Iu(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Nu)]]:["filter-in-small",t,["literal",e]]}}function Mu(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ku(t){return["!",t]}var Lu=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Au(t,e){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return Lu.forEach((t=>{t in e&&(n[t]=e[t])})),n}class Ru{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}class Fu{constructor(t){this.error=t,this.message=t.message;const e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0}}function ju(t){const e=t.key,n=t.value;return n?[new Ru(e,n,"constants have been deprecated as of v8")]:[]}function Du(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,s=t.styleSpec;let a=[];const l=eu(n);if("object"!==l)return[new Ru(e,n,`object expected, ${l} found`)];for(const t in n){const l=t.split(".")[0],u=r[l]||r["*"];let c;if(i[l])c=i[l];else if(r[l])c=ic;else if(i["*"])c=i["*"];else{if(!r["*"]){a.push(new Ru(e,n[t],`unknown property "${t}"`));continue}c=ic}a=a.concat(c({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:u,style:o,styleSpec:s,object:n,objectKey:t},n))}for(const t in r)i[t]||r[t].required&&void 0===r[t].default&&void 0===n[t]&&a.push(new Ru(e,n,`missing required property "${t}"`));return a}function zu(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,s=t.arrayElementValidator||ic;if("array"!==eu(e))return[new Ru(o,e,`array expected, ${eu(e)} found`)];if(n.length&&e.length!==n.length)return[new Ru(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new Ru(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let a={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(a.function=n.function),"object"===eu(n.value)&&(a=n.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(s({array:e,arrayIndex:t,value:e[t],valueSpec:a,style:r,styleSpec:i,key:`${o}[${t}]`}));return l}function qu(t){const e=t.key,n=t.value,r=t.valueSpec;let i=eu(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new Ru(e,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===eu(r.minimum)){const e=t.arrayIndex;i=r.minimum[e]}if(n<i)return[new Ru(e,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===eu(r.maximum)){const e=t.arrayIndex;i=r.maximum[e]}if(n>i)return[new Ru(e,n,`${n} is greater than the maximum value ${i}`)]}return[]}function Bu(t){const e=t.valueSpec,n=vu(t.value.type);let r,i,o,s={};const a="categorical"!==n&&void 0===t.value.property,l=!a,u="array"===eu(t.value.stops)&&"array"===eu(t.value.stops[0])&&"object"===eu(t.value.stops[0][0]),c=Du({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new Ru(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(zu({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===eu(r)&&0===r.length&&e.push(new Ru(t.key,r,"array must have at least one stop")),e},default:function(t){return ic({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&a&&c.push(new Ru(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new Ru(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!tu(t.valueSpec)&&c.push(new Ru(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Jl(t.valueSpec)?c.push(new Ru(t.key,t.value,"property functions not supported")):a&&!Ql(t.valueSpec)&&c.push(new Ru(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==t.value.property||c.push(new Ru(t.key,t.value,'"property" property is required')),c;function h(t){let n=[];const r=t.value,a=t.key;if("array"!==eu(r))return[new Ru(a,r,`array expected, ${eu(r)} found`)];if(2!==r.length)return[new Ru(a,r,`array length 2 expected, length ${r.length} found`)];if(u){if("object"!==eu(r[0]))return[new Ru(a,r,`object expected, ${eu(r[0])} found`)];if(void 0===r[0].zoom)return[new Ru(a,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Ru(a,r,"object stop key must have value")];if(o&&o>vu(r[0].zoom))return[new Ru(a,r[0].zoom,"stop zoom values must appear in ascending order")];vu(r[0].zoom)!==o&&(o=vu(r[0].zoom),i=void 0,s={}),n=n.concat(Du({key:`${a}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:qu,value:p}}))}else n=n.concat(p({key:`${a}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return iu(_u(r[1]))?n.concat([new Ru(`${a}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(ic({key:`${a}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,o){const a=eu(t.value),l=vu(t.value),u=null!==t.value?t.value:o;if(r){if(a!==r)return[new Ru(t.key,u,`${a} stop domain type must match previous stop domain type ${r}`)]}else r=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new Ru(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let r=`number expected, ${a} found`;return Jl(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ru(t.key,u,r)]}return"categorical"!==n||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===a&&void 0!==i&&l<i?[new Ru(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in s?[new Ru(t.key,u,"stop domain values must be unique")]:(s[l]=!0,[])):[new Ru(t.key,u,`integer expected, found ${l}`)]}}function Gu(t){const e=("property"===t.expressionContext?lu:ou)(_u(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new Ru(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Ru(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Ka(n))return[new Ru(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return Uu(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Za(n,["zoom","feature-state"]))return[new Ru(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Xa(n))return[new Ru(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Uu(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);for(const t of e.valueSpec.expression.parameters)n.delete(t);if(0===n.size)return[];const r=[];return t instanceof Pa&&n.has(t.name)?[new Ru(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{r.push(...Uu(t,e))})),r)}function Vu(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(vu(n))&&i.push(new Ru(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(vu(n))&&i.push(new Ru(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Wu(t){if(bu(_u(t.value))){const e=_u(t.layerType);return Gu(Gs({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${e||"fill"}`]}))}return Hu(t)}function Hu(t){const e=t.value,n=t.key;if("array"!==eu(e))return[new Ru(n,e,`array expected, ${eu(e)} found`)];const r=t.styleSpec;let i,o=[];if(e.length<1)return[new Ru(n,e,"filter array must have at least 1 element")];switch(o=o.concat(Vu({key:`${n}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),vu(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===vu(e[1])&&o.push(new Ru(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new Ru(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=eu(e[1]),"string"!==i&&o.push(new Ru(`${n}[1]`,e[1],`string expected, ${i} found`)));for(let s=2;s<e.length;s++)i=eu(e[s]),"$type"===vu(e[1])?o=o.concat(Vu({key:`${n}[${s}]`,value:e[s],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Ru(`${n}[${s}]`,e[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(Hu({key:`${n}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=eu(e[1]),2!==e.length?o.push(new Ru(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new Ru(`${n}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=eu(e[1]),2!==e.length?o.push(new Ru(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new Ru(`${n}[1]`,e[1],`object expected, ${i} found`))}return o}function Yu(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,s=t.objectKey,a=i[`${e}_${t.layerType}`];if(!a)return[];const l=s.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return ic({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const u=t.valueSpec||a[s];if(!u)return[new Ru(n,o,`unknown property "${s}"`)];let c;if("string"===eu(o)&&Jl(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Ru(n,o,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===s&&r&&!r.glyphs&&h.push(new Ru(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&nu(_u(o))&&"identity"===vu(o.type)&&h.push(new Ru(n,o,'"text-font" does not support identity functions'))),h.concat(ic({key:t.key,value:o,valueSpec:u,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:s}))}function Xu(t){return Yu(t,"paint")}function Ku(t){return Yu(t,"layout")}function Zu(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Ru(r,n,'either "type" or "ref" is required'));let s=vu(n.type);const a=vu(n.ref);if(n.id){const o=vu(n.id);for(let s=0;s<t.arrayIndex;s++){const t=i.layers[s];vu(t.id)===o&&e.push(new Ru(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new Ru(r,n[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{vu(e.id)===a&&(t=e)})),t?t.ref?e.push(new Ru(r,n.ref,"ref cannot reference another ref layer")):s=vu(t.type):e.push(new Ru(r,n.ref,`ref layer "${a}" not found`))}else if("background"!==s&&"sky"!==s)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&vu(t.type);t?"vector"===o&&"raster"===s?e.push(new Ru(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==s?e.push(new Ru(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==s?e.push(new Ru(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new Ru(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Ru(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new Ru(r,n.source,`source "${n.source}" not found`))}else e.push(new Ru(r,n,'missing required property "source"'));return e=e.concat(Du({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ic({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>Wu(Gs({layerType:s},t)),layout:t=>Du({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ku(Gs({layerType:s},t))}}),paint:t=>Du({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Xu(Gs({layerType:s},t))}})}})),e}function $u(t){const e=t.value,n=t.key,r=eu(e);return"string"!==r?[new Ru(n,e,`string expected, ${r} found`)]:[]}const Ju={promoteId:function({key:t,value:e}){if("string"===eu(e))return $u({key:t,value:e});{const n=[];for(const r in e)n.push(...$u({key:`${t}.${r}`,value:e[r]}));return n}}};function Qu(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new Ru(n,e,'"type" is required')];const o=vu(e.type);let s;switch(o){case"vector":case"raster":case"raster-dem":return s=Du({key:n,value:e,valueSpec:r[`source_${o.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:Ju}),s;case"geojson":if(s=Du({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Ju}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;s.push(...Gu({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),s.push(...Gu({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Du({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Du({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Ru(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vu({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function tc(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const s=eu(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new Ru("light",e,`object expected, ${s} found`)]),o;for(const t in e){const s=t.match(/^(.*)-transition$/);o=s&&r[s[1]]&&r[s[1]].transition?o.concat(ic({key:t,value:e[t],valueSpec:n.transition,style:i,styleSpec:n})):r[t]?o.concat(ic({key:t,value:e[t],valueSpec:r[t],style:i,styleSpec:n})):o.concat([new Ru(t,e[t],`unknown property "${t}"`)])}return o}function ec(t){const e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain;let s=[];const a=eu(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new Ru("terrain",e,`object expected, ${a} found`)]),s;for(const t in e){const n=t.match(/^(.*)-transition$/);s=n&&o[n[1]]&&o[n[1]].transition?s.concat(ic({key:t,value:e[t],valueSpec:i.transition,style:r,styleSpec:i})):o[t]?s.concat(ic({key:t,value:e[t],valueSpec:o[t],style:r,styleSpec:i})):s.concat([new Ru(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=r.sources&&r.sources[e.source],i=t&&vu(t.type);t?"raster-dem"!==i&&s.push(new Ru(n,e.source,`terrain cannot be used with a source of type ${i}, it only be used with a "raster-dem" source type`)):s.push(new Ru(n,e.source,`source "${e.source}" not found`))}else s.push(new Ru(n,e,'terrain is missing required property "source"'));return s}function nc(t){const e=t.value,n=t.style,r=t.styleSpec,i=r.fog;let o=[];const s=eu(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new Ru("fog",e,`object expected, ${s} found`)]),o;for(const t in e){const s=t.match(/^(.*)-transition$/);o=s&&i[s[1]]&&i[s[1]].transition?o.concat(ic({key:t,value:e[t],valueSpec:r.transition,style:n,styleSpec:r})):i[t]?o.concat(ic({key:t,value:e[t],valueSpec:i[t],style:n,styleSpec:r})):o.concat([new Ru(t,e[t],`unknown property "${t}"`)])}return o}const rc={"*":()=>[],array:zu,boolean:function(t){const e=t.value,n=t.key,r=eu(e);return"boolean"!==r?[new Ru(n,e,`boolean expected, ${r} found`)]:[]},number:qu,color:function(t){const e=t.key,n=t.value,r=eu(n);return"string"!==r?[new Ru(e,n,`color expected, ${r} found`)]:null===aa.parseCSSColor(n)?[new Ru(e,n,`color expected, "${n}" found`)]:[]},constants:ju,enum:Vu,filter:Wu,function:Bu,layer:Zu,object:Du,source:Qu,light:tc,terrain:ec,fog:nc,string:$u,formatted:function(t){return 0===$u(t).length?[]:Gu(t)},resolvedImage:function(t){return 0===$u(t).length?[]:Gu(t)},projection:function(t){const e=t.value,n=t.styleSpec,r=n.projection,i=t.style;let o=[];const s=eu(e);if("object"===s)for(const t in e)o=o.concat(ic({key:t,value:e[t],valueSpec:r[t],style:i,styleSpec:n}));else"string"!==s&&(o=o.concat([new Ru("projection",e,`object or string expected, ${s} found`)]));return o}};function ic(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&nu(vu(e))?Bu(t):n.expression&&iu(_u(e))?Gu(t):n.type&&rc[n.type]?rc[n.type](t):Du(Gs({},t,{valueSpec:n.type?r[n.type]:n}))}function oc(t){const e=t.value,n=t.key,r=$u(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Ru(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Ru(n,e,'"glyphs" url must include a "{range}" token'))),r}function sc(t,e=ms){let n=[];return n=n.concat(ic({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:oc,"*":()=>[]}})),t.constants&&(n=n.concat(ju({key:"constants",value:t.constants,style:t,styleSpec:e}))),ac(n)}function ac(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function lc(t){return function(...e){return ac(t.apply(this,e))}}sc.source=lc(Qu),sc.light=lc(tc),sc.terrain=lc(ec),sc.fog=lc(nc),sc.layer=lc(Zu),sc.filter=lc(Wu),sc.paintProperty=lc(Xu),sc.layoutProperty=lc(Ku);var uc=_s((function(t,e){var n=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,12],n=[1,13],r=[1,9],i=[1,10],o=[1,11],s=[1,14],a=[1,15],l=[14,18,22,24],u=[18,22],c=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[a-2],o[a]];break;case 16:this.$={},this.$[o[a][0]]=o[a][1];break;case 17:this.$=o[a-2],o[a-2][o[a][0]]=o[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[a]];break;case 21:this.$=o[a-2],o[a-2].push(o[a])}},table:[{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:s,23:a},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:30,15:7,16:8,17:s,23:a},t(l,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:31,15:7,16:8,17:s,23:a},t(u,[2,17]),t(u,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,l=0,u=2,c=1,h=i.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(f.yy[d]=this.yy[d]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var g=p.yylloc;i.push(g);var y=p.options&&p.options.ranges;function m(){var t;return"number"!=typeof(t=p.lex()||c)&&(t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,_,b,w,x,S,E,C,N={};;){if(_=n[n.length-1],this.defaultActions[_]?b=this.defaultActions[_]:(null==v&&(v=m()),b=o[_]&&o[_][v]),void 0===b||!b.length||!b[0]){var P="";for(x in C=[],o[_])this.terminals_[x]&&x>u&&C.push("'"+this.terminals_[x]+"'");P=p.showPosition?"Parse error on line "+(a+1)+":\n"+p.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==c?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(P,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:g,expected:C})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+v);switch(b[0]){case 1:n.push(v),r.push(p.yytext),i.push(p.yylloc),n.push(b[1]),v=null,l=p.yyleng,s=p.yytext,a=p.yylineno,g=p.yylloc;break;case 2:if(S=this.productions_[b[1]][1],N.$=r[r.length-S],N._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},y&&(N._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),void 0!==(w=this.performAction.apply(N,[s,l,a,f.yy,b[1],r,i].concat(h))))return w;S&&(n=n.slice(0,-1*S*2),r=r.slice(0,-1*S),i=i.slice(0,-1*S)),n.push(this.productions_[b[1]][0]),r.push(N.$),i.push(N._$),E=o[n[n.length-2]][n[n.length-1]],n.push(E);break;case 3:return!0}}return!0}},p=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t}();function f(){this.yy={}}return h.lexer=p,f.prototype=h,h.Parser=f,new f}();e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)}}));function cc(t,e=ms){let n=t;try{n=function(t){if(t instanceof String||"string"==typeof t||t instanceof Buffer)try{return uc.parse(t.toString())}catch(t){throw new Fu(t)}return t}(n)}catch(t){return[t]}return sc(n,e)}new Set(["vector","raster","raster-dem"]);const hc=iu,pc=lu,fc=function(t,e){let n=t.stops;if(!n)return function(t,e){const n=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",n]:n;if("enum"===e.type)return["match",n,Object.keys(e.values),n,t.default];{const r=["color"===e.type?"to-color":e.type,n,cu(t.default)];return"array"===e.type&&r.splice(1,0,e.value,e.length||null),r}}(t,e);const r=n&&"object"==typeof n[0][0],i=r||void 0!==t.property,o=r||!i;return n=n.map((t=>!i&&e.tokens&&"string"==typeof t[1]?[t[0],mu(t[1])]:[t[0],cu(t[1])])),r?function(t,e,n){const r={},i={},o=[];for(let e=0;e<n.length;e++){const s=n[e],a=s[0].zoom;void 0===r[a]&&(r[a]={zoom:a,type:t.type,property:t.property,default:t.default},i[a]=[],o.push(a)),i[a].push([s[0].value,s[1]])}if("exponential"===yu({},e)){const n=[hu(t),["linear"],["zoom"]];for(const t of o)gu(n,t,fu(r[t],e,i[t]),!1);return n}{const t=["step",["zoom"]];for(const n of o)gu(t,n,fu(r[n],e,i[n]),!0);return du(t),t}}(t,e,n):o?function(t,e,n,r=["zoom"]){const i=yu(t,e);let o,s=!1;if("interval"===i)o=["step",r],s=!0;else{if("exponential"!==i)throw new Error(`Unknown zoom function type "${i}"`);{const e=void 0!==t.base?t.base:1;o=[hu(t),1===e?["linear"]:["exponential",e],r]}}for(const t of n)gu(o,t[0],t[1],s);return du(o),o}(t,e,n):fu(t,e,n)},dc=nu;function gc(){return(0,_r.Qc)("?"+window.location.hash.substring(1),!0)}function yc(){return(0,_r.Qc)(window.location.search,!0)}function mc(t,e=!1){if(null==t)return e;const n=""+t;return!!n.match(/true/i)||"1"===n||!!n.match(/on/i)}function vc(t){return t.firstChild?t.firstChild.nodeValue:t.text?t.text:t.textContent?t.textContent:""}function _c(t,e,n){const r=[],i=t.getElementsByTagName(e);for(let t=0,e=i.length;t<e;t++){const e=vc(i[t]);if(!0!==n)return e;r.push(e)}return r}function bc(t,e,n){const r=Object.keys(t),i=Object.keys(e);for(const i of r)switch(typeof e[i]){case"undefined":default:return!0;case"string":case"number":if(t[i]!==e[i])return!0;break;case"object":if(null==e[i]&&null!=t[i])return!0;if(!0===n&&bc(t[i],e[i],!0))return!0}for(const t of i)if(r.indexOf(t)<0)return!0;return!1}function wc(t){return null===t?"":t.split("/")[0]}function xc(t){if(null===t)return"";const e=t.split("/");return e.shift(),e.join("/")}function Sc(t,e=[]){const n=[];for(const r in t)if(e.indexOf(r)<=0){const e=encodeURIComponent(t[r]);n.push(r+"="+e)}return n.join("&")}cc.parsed=cc,cc.latest=cc;const Ec={pipes:{localize:function(t){return t.toLocaleString()},json:t=>JSON.stringify(t)}};function Cc(t,e){return e.indexOf(t)>=0}function Nc(t,e=null,n=null){return null!==e&&null!==n?e<t&&t<n:null===e?t<n:null!==n||e<t}function Pc(t,e){const n="any"!==e.match;for(const r in e){const i=e[r],o=t.properties[r];let s=!1;switch(i.type){case"range":s=Nc(o,i.min,i.max);break;case"list":s=Cc(o,i.value);break;case"equals":s=i.value===o;break;default:s=Array.isArray(i)?Cc(o,i):i===o}if(s&&!n)return!0;if(!s&&n)return!1}return!!n}function Oc(t,e,n=!0){const r=[];let i=function(){return!0};if(null!=e&&(i=wu(["all"].concat(e)).filter),t)for(let e=0,o=t.length;e<o;e++){const o=t[e];n!==i({zoom:15},o)&&r.push(o)}return r}function Tc(t,e){return null==e||!1===e?t:Oc(t,e,!1)}function Ic(t,e,n,r){const i=[];for(const o of t)if(Pc(o,e)){const t=Object.assign({},o);n&&(t.properties=Object.assign({},o.properties,n)),r&&(t.geometry=Object.assign({},r)),i.push(t)}else i.push(o);return i}function Mc(){return"3.9.0"}function kc(t){const e=[null,null,null,null],n=function(t,e){return null===t||e<t?e:t},r=function(t,e){return null===t||e>t?e:t},i=function(t,i){e[0]=n(e[0],t),e[1]=n(e[1],i),e[2]=r(e[2],t),e[3]=r(e[3],i)};if(t.features)for(const e of t.features){const t=e.geometry;if("Point"===t.type)i(t.coordinates[0],t.coordinates[1]);else if("LineString"===t.type)for(const e of t.coordinates)i(e[0],e[1]);else if("Polygon"===t.type||"MultiLineString"===t.type)for(const e of t.coordinates)for(const t of e)i(t[0],t[1])}return e}function Lc(t){for(let e=1;e<=60;e++)for(const n of["north","south"]){const r="EPSG:"+(32600+e+("north"===n?0:100)),i="UTM"+e+("north"===n?"N":"S"),o="+proj=utm +zone="+e+" +"+n+"+datum=WGS84 +units=m +no_defs";t.defs(r,o),t.defs(i,t.defs(r))}}function Ac(t,e,n){t.defs(e,n)}function Rc(t){return"UTM"+(Math.floor(t[0]/6+30)+1)+(t[1]>0?"N":"S")}const Fc=new ys;function jc(t){return Fc.writeGeometryObject(t)}function Dc(t){return Fc.readGeometry(t)}function zc(t){return Fc.writeFeatureObject(t)}function qc(t,e={}){return Fc.readFeature(t,e)}const Bc={ft:.3048,yd:.9144,mi:1609.347,in:.0254,m:1,km:1e3,ch:20.11684,a:63.63,h:100};function Gc(t,e,n){return t*Bc[e]/Bc[n]}function Uc(t,e,n){return t*Math.pow(Bc[e],2)/Math.pow(Bc[n],2)}function Vc(t,e){return Gc(t,"m",e)}function Wc(t,e){return Uc(t,"m",e)}function Hc(t,e){if(!t)return!1;let n=!0;for(let r=0,i=e.src.length;r<i;r++){const i=e.src[r];if(!t[i.mapSourceName])return!1;{const e=t[i.mapSourceName];for(let t=0,r=e.layers.length;t<r;t++){const r=e.layers[t];r.name===i.layerName&&(n=n&&r.on)}}}return n}function Yc(t,e){return t[e.src[0].mapSourceName].zIndex}function Xc(t,e){const n=[];for(const r of Object.keys(t)){const i=t[r];i&&void 0===i.children&&Hc(e,i)&&n.push({zIndex:Yc(e,i),layer:i})}return n.sort((function(t,e){return t.zIndex>e.zIndex?-1:1})),n}function Kc(t){return wr()(t)}function Zc(t,e){const n=Object.assign({},e);for(const r in t){let i=e[r];switch(t[r]){case"string":i=""+i;break;case"number":i=parseFloat(i)}n[r]=i}return n}function $c(t,e){if("object"!=typeof t)return e;for(const n of e)n.properties=Zc(t,n.properties);return e}function Jc(t){return Sc(t).length}function Qc(t,e,n){const r=Fc.readFeatures({type:"FeatureCollection",features:t},{dataProjection:e,featureProjection:n});return Fc.writeFeaturesObject(r).features}function th(t,e){return JSON.stringify(t)===JSON.stringify(e)}function eh(t,e=150){let n=null;for(const e in t){const r=t[e];if(r.length>0){null===n&&(n=r[0].properties.boundedBy.slice());for(let t=1,e=r.length;t<e;t++){const e=r[t].properties.boundedBy;n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[2]),n[3]=Math.max(n[3],e[3])}}}if(null!==n){if(n[2]-n[0]<e){const t=(n[0]+n[2])/2;n[0]=t-e,n[2]=t+e}if(n[3]-n[1]<e){const t=(n[1]+n[3])/2;n[1]=t-e,n[3]=t+e}}return n}function nh(t,e){return t*(e?e.getMetersPerUnit():1)*39.37*(25.4/.28)}function rh(t,e){let n=t;return"?"!==t.substring(t.length-1)&&(n+="?"),n+Sc(e)}const ih=(t,e)=>({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[t[0]-e,t[1]-e],[t[0]-e,t[1]+e],[t[0]+e,t[1]+e],[t[0]+e,t[1]-e],[t[0]-e,t[1]-e]]]}}),oh={ADD:"MAPSOURCE_ADD",REMOVE:"MAPSOURCE_RM",MOVE:"MAPSOURCE_MV",ADD_LAYER:"MAPSOURCE_ADD_LAYER",LAYER_VIS:"MAPSOURCE_LAYER_VIS",LAYER_FAVORITE:"MAPSOURCE_LAYER_FAVORITE",REFRESH:"MAPSOURCE_REFRESH",SET_Z:"MAPSOURCE_SET_Z",SET_OPACITY:"MAPSOURCE_OPACITY",SET_TEMPLATE:"MAPSOURCE_SET_TEMPLATE",ADD_FEATURES:"MAPSOURCE_ADD_FEATURES",REMOVE_FEATURE:"MAPSOURCE_REMOVE_FEATURE",REMOVE_FEATURES:"MAPSOURCE_REMOVE_FEATURES",CLEAR_FEATURES:"MAPSOURCE_CLEAR_FEATURES",MODIFY_GEOMETRY:"MAPSOURCE_MODIFY_GEOMETRY",CHANGE_FEATURES:"MAPSOURCE_CHANGE_FEATURES",RELOAD:"MAPSOURCE_RELOAD_FEATURES"},sh="CATALOG_ADD_LAYER",ah="CATALOG_ADD_GROUP",lh="CATALOG_ADD_CHILD",uh="CATALOG_GROUP_VIS",ch="CATALOG_LEGEND_VIS",hh="MAP_MOVE",ph="MAP_CURSOR",fh="MAP_CHANGE_TOOL",dh="MAP_ADD_SELECTION_FEATURE",gh="MAP_CLEAR_SELECTION_FEATURES",yh="MAP_BUFFER_SELECTION_FEATURES",mh="MAP_QUERY_NEW",vh="MAP_QUERY_PROGRESS",_h="MAP_QUERY_START",bh="MAP_QUERY_FINISHED",wh="MAP_QUERY_RESULTS",xh="MAP_QUERY_REMOVE",Sh="MAP_QUERY_FEATURES_REMOVE",Eh="MAP_SKETCH_GEOMETRY",Ch="MAP_ZOOM_TO_EXTENT",Nh="MAP_ADD_FILTER",Ph="MAP_REMOVE_FILTER",Oh="MAP_SET_EDIT_PATH",Th="MAP_SET_EDIT_TOOLS",Ih="MAP_RESIZE",Mh="TOOLBAR_ADD",kh="SERVICE_START",Lh="SERVICE_FINISH",Ah="SERVICE_SHOW_FORM",Rh="UI_HINT",Fh="UI_CLEAR_HINT",jh="UI_RUN_ACTION",Dh="UI_CLEAR_ACTION",zh="UI_SHOW_MODAL",qh="PRINT_DONE",Bh="PRINT_IMAGE",Gh="GM3_CONFIG_SET",Uh="GM3_EDITOR_START_EDIT",Vh="GM3_EDITOR_FINISH_EDIT",Wh="GM3_EDITOR_REMOVE";function Hh(t,e=null){return{type:fh,tool:t,src:e}}function Yh(t){return{type:_h,id:t}}function Xh(t){return{type:bh,id:t}}function Kh(t,e,n,r,i=""){return{type:wh,id:t,layer:e,failed:n,features:r,messageText:i}}function Zh(t){return{type:dh,feature:t}}function $h(t,e){return{type:Ch,extent:t,projection:e}}function Jh(){return{type:gh}}function Qh(t){return{type:Eh,geometry:t}}function tp(t,e){return{type:Ph,id:t,field:e}}function ep(t){return Object.assign({type:hh},t)}function np(t,e){return{type:yh,distance:t,units:e}}function rp(t){return{type:Oh,editPath:t}}function ip(t){return{type:Th,tools:t}}var op="http://www.w3.org/2001/XMLSchema-instance";function sp(t,e){return Cp().createElementNS(t,e)}function ap(t,e){return lp(t,e,[]).join("")}function lp(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)lp(r,e,n)}return n}function up(t){return"documentElement"in t}function cp(t){return(new DOMParser).parseFromString(t,"application/xml")}function hp(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&Tr(r[r.length-1],i)}}function pp(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&r[r.length-1].push(i)}}function fp(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&(r[r.length-1]=i)}}function dp(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);void 0!==o&&(i[i.length-1][void 0!==e?e:r.localName]=o)}}function gp(t,e){return function(n,r,i){t.call(void 0!==e?e:this,n,r,i),i[i.length-1].node.appendChild(n)}}function yp(t,e){var n=t;return function(t,r,i){var o=r[r.length-1].node,s=n;return void 0===s&&(s=i),sp(void 0!==e?e:o.namespaceURI,s)}}var mp=yp();function vp(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t[e[i]];return r}function _p(t,e,n){var r,i,o=void 0!==n?n:{};for(r=0,i=t.length;r<i;++r)o[t[r]]=e;return o}function bp(t,e,n,r){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var s=o[i.localName];void 0!==s&&s.call(r,i,n)}}}function wp(t,e,n,r,i){return r.push(t),bp(e,n,r,i),r.pop()}function xp(t,e,n,r,i,o,s){return i.push(t),function(t,e,n,r,i,o){for(var s,a,l=(void 0!==i?i:n).length,u=0;u<l;++u)void 0!==(s=n[u])&&void 0!==(a=e.call(void 0!==o?o:this,s,r,void 0!==i?i[u]:void 0))&&t[a.namespaceURI][a.localName].call(o,a,s,r)}(e,n,r,i,o,s),i.pop()}var Sp=void 0,Ep=void 0;function Cp(){return void 0===Ep&&"undefined"!=typeof document&&(Ep=document.implementation.createDocument("","",null)),Ep}var Np=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pp=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===Sp&&"undefined"!=typeof XMLSerializer&&(Sp=new XMLSerializer),Sp),e}return Np(e,t),e.prototype.getType=function(){return"xml"},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var n=cp(t);return this.readFeatureFromDocument(n,e)}return up(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var n=cp(t);return this.readFeaturesFromDocument(n,e)}return up(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var n=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Tr(n,this.readFeaturesFromNode(r,e));return n},e.prototype.readFeaturesFromNode=function(t,e){return oe()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var n=cp(t);return this.readGeometryFromDocument(n,e)}return up(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=cp(t);return this.readProjectionFromDocument(e)}return up(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var n=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(n)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var n=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(n)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var n=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(n)},e.prototype.writeGeometryNode=function(t,e){return null},e}(Wi);const Op=Pp;var Tp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ip="http://www.opengis.net/gml",Mp=/^[\s\xa0]*$/,kp=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.featureType=r.featureType,n.featureNS=r.featureNS,n.srsName=r.srsName,n.schemaLocation="",n.FEATURE_COLLECTION_PARSERS={},n.FEATURE_COLLECTION_PARSERS[n.namespace]={featureMember:pp(n.readFeaturesInternal),featureMembers:fp(n.readFeaturesInternal)},n.supportedMediaTypes=["application/gml+xml"],n}return Tp(e,t),e.prototype.readFeaturesInternal=function(t,e){var n=t.localName,r=null;if("FeatureCollection"==n)r=wp([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==n||"featureMember"==n||"member"==n){var i=e[0],o=i.featureType,s=i.featureNS;if(!o&&t.childNodes){o=[],s={};for(var a=0,l=t.childNodes.length;a<l;++a){var u=t.childNodes[a];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",p=0,f=u.namespaceURI;for(var d in s){if(s[d]===f){h=d;break}++p}h||(s[h="p"+p]=f),o.push(h+":"+c)}}}"featureMember"!=n&&(i.featureType=o,i.featureNS=s)}if("string"==typeof s){var g=s;(s={}).p0=g}var y={},m=Array.isArray(o)?o:[o];for(var v in s){var _={};for(a=0,l=m.length;a<l;++a)(-1===m[a].indexOf(":")?"p0":m[a].split(":")[0])===v&&(_[m[a].split(":").pop()]="featureMembers"==n?pp(this.readFeatureElement,this):fp(this.readFeatureElement,this));y[s[v]]=_}r=wp("featureMember"==n||"member"==n?void 0:[],y,t,e)}return null===r&&(r=[]),r},e.prototype.readGeometryElement=function(t,e){var n=e[0];n.srsName=t.firstElementChild.getAttribute("srsName"),n.srsDimension=t.firstElementChild.getAttribute("srsDimension");var r=wp(null,this.GEOMETRY_PARSERS,t,e,this);return r?Array.isArray(r)?Yi(r,n):Hi(r,!1,n):void 0},e.prototype.readFeatureElementInternal=function(t,e,n){for(var r,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0,a=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(s=ap(o,!1),Mp.test(s)&&(s=void 0)):(n&&(s=this.readGeometryElement(o,e)),s?"boundedBy"!==a&&(r=a):s=this.readFeatureElementInternal(o,e,!1)),i[a]?(i[a]instanceof Array||(i[a]=[i[a]]),i[a].push(s)):i[a]=s;var l=o.attributes.length;if(l>0){i[a]={_content_:i[a]};for(var u=0;u<l;u++){var c=o.attributes[u].name;i[a][c]=o.attributes[u].value}}}if(n){var h=new ai(i);r&&h.setGeometryName(r);var p=t.getAttribute("fid")||function(t,e,n){return t.getAttributeNS(e,"id")||""}(t,this.namespace);return p&&h.setId(p),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Bo(n,eo)},e.prototype.readMultiPoint=function(t,e){var n=wp([],this.MULTIPOINT_PARSERS,t,e,this);return n?new Vo(n):void 0},e.prototype.readMultiLineString=function(t,e){var n=wp([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new Do(n)},e.prototype.readMultiPolygon=function(t,e){var n=wp([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new hs(n)},e.prototype.pointMemberParser=function(t,e){bp(this.POINTMEMBER_PARSERS,t,e,this)},e.prototype.lineStringMemberParser=function(t,e){bp(this.LINESTRINGMEMBER_PARSERS,t,e,this)},e.prototype.polygonMemberParser=function(t,e){bp(this.POLYGONMEMBER_PARSERS,t,e,this)},e.prototype.readLineString=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);return n?new Ro(n,eo):void 0},e.prototype.readFlatLinearRing=function(t,e){return wp(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Ko(n,eo)},e.prototype.readPolygon=function(t,e){var n=wp([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){var r,i=n[0],o=[i.length],s=void 0;for(s=1,r=n.length;s<r;++s)Tr(i,n[s]),o.push(i.length);return new os(i,eo,o)}},e.prototype.readFlatCoordinatesFromNode=function(t,e){return wp(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var n={featureType:this.featureType,featureNS:this.featureNS};return e&&Ar(n,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[n])||[]},e.prototype.readProjectionFromNode=function(t){return tn(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Op);kp.prototype.namespace=Ip,kp.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},kp.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},kp.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},kp.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:pp(kp.prototype.pointMemberParser),pointMembers:pp(kp.prototype.pointMemberParser)}},kp.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:pp(kp.prototype.lineStringMemberParser),lineStringMembers:pp(kp.prototype.lineStringMemberParser)}},kp.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:pp(kp.prototype.polygonMemberParser),polygonMembers:pp(kp.prototype.polygonMemberParser)}},kp.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:pp(kp.prototype.readFlatCoordinatesFromNode)}},kp.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:pp(kp.prototype.readLineString)}},kp.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:pp(kp.prototype.readPolygon)}},kp.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:fp(kp.prototype.readFlatLinearRing)}};const Lp=kp;function Ap(t){return function(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}(ap(t,!1))}function Rp(t){return function(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}(ap(t,!1))}function Fp(t){return jp(ap(t,!1))}function jp(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Dp(t){return ap(t,!1).trim()}function zp(t,e){Bp(t,e?"1":"0")}function qp(t,e){var n=e.toPrecision();t.appendChild(Cp().createTextNode(n))}function Bp(t,e){t.appendChild(Cp().createTextNode(e))}var Gp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Up={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Vp=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[Ip].featureMember=pp(n.readFeaturesInternal),n.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",n}return Gp(e,t),e.prototype.readFlatCoordinates=function(t,e){var n=ap(t,!1).replace(/^\s*|\s*$/g,""),r=e[0].srsName,i="enu";if(r){var o=tn(r);o&&(i=o.getAxisOrientation())}for(var s=n.trim().split(/\s+/),a=[],l=0,u=s.length;l<u;l++){var c=s[l].split(/,+/),h=parseFloat(c[0]),p=parseFloat(c[1]),f=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?a.push(h,p,f):a.push(p,h,f)}return a},e.prototype.readBox=function(t,e){var n=wp([null],this.BOX_PARSERS_,t,e,this);return _e(n[1][0],n[1][1],n[1][3],n[1][4])},e.prototype.innerBoundaryIsParser=function(t,e){var n=wp(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)},e.prototype.outerBoundaryIsParser=function(t,e){var n=wp(void 0,this.RING_PARSERS,t,e,this);n&&(e[e.length-1][0]=n)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,n){var r,i=e[e.length-1],o=i.multiSurface,s=i.surface,a=i.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),sp("http://www.opengis.net/gml",r)},e.prototype.writeFeatureElement=function(t,e,n){var r=e.getId();r&&t.setAttribute("fid",r);var i=n[n.length-1],o=i.featureNS,s=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var a=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(a.push(c),l.push(h),c==s||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=gp(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=gp(Bp)))}}var p=Ar({},i);p.node=t,xp(p,i.serializers,yp(void 0,o),l,n,a)},e.prototype.writeCurveOrLineString=function(t,e,n){var r=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,n)}else if("Curve"===t.nodeName){var o=sp(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,n)}},e.prototype.writeLineStringOrCurveMember=function(t,e,n){var r=this.GEOMETRY_NODE_FACTORY_(e,n);r&&(t.appendChild(r),this.writeCurveOrLineString(r,e,n))},e.prototype.writeMultiCurveOrLineString=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();xp({node:t,hasZ:i,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)},e.prototype.writeGeometryElement=function(t,e,n){var r,i=n[n.length-1],o=Ar({},i);o.node=t,r=Array.isArray(e)?Yi(e,i):Hi(e,!0,i),xp(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[r],n,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=sp(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,n){for(var r=n[n.length-1],i=r.hasZ,o=r.srsName,s=e.getCoordinates(),a=s.length,l=new Array(a),u=0;u<a;++u){var c=s[u];l[u]=this.getCoords_(c,o,i)}Bp(t,l.join(" "))},e.prototype.writeCurveSegments_=function(t,e,n){var r=sp(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,e,n)},e.prototype.writeSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();xp({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,s,n,void 0,this)}else if("Surface"===t.nodeName){var a=sp(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,n)}},e.prototype.RING_NODE_FACTORY_=function(t,e,n){var r=e[e.length-1],i=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),sp(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,n){var r=sp(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n)},e.prototype.writeRing=function(t,e,n){var r=sp(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,e,n)},e.prototype.getCoords_=function(t,e,n){var r="enu";e&&(r=tn(e).getAxisOrientation());var i="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return n&&(i+=","+(t[2]||0)),i},e.prototype.writePoint=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);var a=e.getCoordinates();Bp(s,this.getCoords_(a,o,i))},e.prototype.writeMultiPoint=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=e.getPoints();xp({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS,yp("pointMember"),s,n,void 0,this)},e.prototype.writePointMember=function(t,e,n){var r=sp(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,e,n)},e.prototype.writeLinearRing=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,n)},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();xp({node:t,hasZ:i,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,n){var r=this.GEOMETRY_NODE_FACTORY_(e,n);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n))},e.prototype.writeEnvelope=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];xp({node:t},this.ENVELOPE_SERIALIZERS,mp,i,n,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,n){var r=e[e.length-1].node;return sp("http://www.opengis.net/gml",Up[r.nodeName])},e}(Lp);Vp.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:fp(Vp.prototype.readFlatCoordinates)}},Vp.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Vp.prototype.innerBoundaryIsParser,outerBoundaryIs:Vp.prototype.outerBoundaryIsParser}},Vp.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:pp(Vp.prototype.readFlatCoordinates)}},Vp.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:fp(Lp.prototype.readPoint),MultiPoint:fp(Lp.prototype.readMultiPoint),LineString:fp(Lp.prototype.readLineString),MultiLineString:fp(Lp.prototype.readMultiLineString),LinearRing:fp(Lp.prototype.readLinearRing),Polygon:fp(Lp.prototype.readPolygon),MultiPolygon:fp(Lp.prototype.readMultiPolygon),Box:fp(Vp.prototype.readBox)}},Vp.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:gp(Vp.prototype.writeCurveOrLineString),MultiCurve:gp(Vp.prototype.writeMultiCurveOrLineString),Point:gp(Vp.prototype.writePoint),MultiPoint:gp(Vp.prototype.writeMultiPoint),LineString:gp(Vp.prototype.writeCurveOrLineString),MultiLineString:gp(Vp.prototype.writeMultiCurveOrLineString),LinearRing:gp(Vp.prototype.writeLinearRing),Polygon:gp(Vp.prototype.writeSurfaceOrPolygon),MultiPolygon:gp(Vp.prototype.writeMultiSurfaceOrPolygon),Surface:gp(Vp.prototype.writeSurfaceOrPolygon),MultiSurface:gp(Vp.prototype.writeMultiSurfaceOrPolygon),Envelope:gp(Vp.prototype.writeEnvelope)}},Vp.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:gp(Vp.prototype.writeLineStringOrCurveMember),curveMember:gp(Vp.prototype.writeLineStringOrCurveMember)}},Vp.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:gp(Vp.prototype.writeRing),innerBoundaryIs:gp(Vp.prototype.writeRing)}},Vp.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:gp(Vp.prototype.writePointMember)}},Vp.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:gp(Vp.prototype.writeSurfaceOrPolygonMember),polygonMember:gp(Vp.prototype.writeSurfaceOrPolygonMember)}},Vp.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:gp(Bp),upperCorner:gp(Bp)}};const Wp=Vp;var Hp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yp={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Xp=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).surface_=void 0!==r.surface&&r.surface,n.curve_=void 0!==r.curve&&r.curve,n.multiCurve_=void 0===r.multiCurve||r.multiCurve,n.multiSurface_=void 0===r.multiSurface||r.multiSurface,n.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",n.hasZ=void 0!==r.hasZ&&r.hasZ,n}return Hp(e,t),e.prototype.readMultiCurve=function(t,e){var n=wp([],this.MULTICURVE_PARSERS,t,e,this);return n?new Do(n):void 0},e.prototype.readMultiSurface=function(t,e){var n=wp([],this.MULTISURFACE_PARSERS,t,e,this);if(n)return new hs(n)},e.prototype.curveMemberParser=function(t,e){bp(this.CURVEMEMBER_PARSERS,t,e,this)},e.prototype.surfaceMemberParser=function(t,e){bp(this.SURFACEMEMBER_PARSERS,t,e,this)},e.prototype.readPatch=function(t,e){return wp([null],this.PATCHES_PARSERS,t,e,this)},e.prototype.readSegment=function(t,e){return wp([null],this.SEGMENTS_PARSERS,t,e,this)},e.prototype.readPolygonPatch=function(t,e){return wp([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment=function(t,e){return wp([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser=function(t,e){var n=wp(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)},e.prototype.exteriorParser=function(t,e){var n=wp(void 0,this.RING_PARSERS,t,e,this);n&&(e[e.length-1][0]=n)},e.prototype.readSurface=function(t,e){var n=wp([null],this.SURFACE_PARSERS,t,e,this);if(n&&n[0]){var r,i=n[0],o=[i.length],s=void 0;for(s=1,r=n.length;s<r;++s)Tr(i,n[s]),o.push(i.length);return new os(i,eo,o)}},e.prototype.readCurve=function(t,e){var n=wp([null],this.CURVE_PARSERS,t,e,this);return n?new Ro(n,eo):void 0},e.prototype.readEnvelope=function(t,e){var n=wp([null],this.ENVELOPE_PARSERS,t,e,this);return _e(n[1][0],n[1][1],n[2][0],n[2][1])},e.prototype.readFlatPos=function(t,e){for(var n,r=ap(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];n=i.exec(r);)o.push(parseFloat(n[1])),r=r.substr(n[0].length);if(""===r){var s=e[0].srsName,a="enu";if(s&&(a=tn(s).getAxisOrientation()),"neu"===a){var l,u=void 0;for(u=0,l=o.length;u<l;u+=3){var c=o[u],h=o[u+1];o[u]=h,o[u+1]=c}}var p=o.length;if(2==p&&o.push(0),0!==p)return o}},e.prototype.readFlatPosList=function(t,e){var n=ap(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],i=r.srsName,o=r.srsDimension,s="enu";i&&(s=tn(i).getAxisOrientation());var a,l,u,c=n.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=jp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=jp(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=jp(t.parentNode.getAttribute("srsDimension")):o&&(h=jp(o));for(var p=[],f=0,d=c.length;f<d;f+=h)a=parseFloat(c[f]),l=parseFloat(c[f+1]),u=3===h?parseFloat(c[f+2]):0,"en"===s.substr(0,2)?p.push(a,l,u):p.push(l,a,u);return p},e.prototype.writePos_=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var s=r.srsName,a="enu";s&&(a=tn(s).getAxisOrientation());var l,u=e.getCoordinates();l="en"===a.substr(0,2)?u[0]+" "+u[1]:u[1]+" "+u[0],i&&(l+=" "+(u[2]||0)),Bp(t,l)},e.prototype.getCoords_=function(t,e,n){var r="enu";e&&(r=tn(e).getAxisOrientation());var i="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return n&&(i+=" "+(t[2]||0)),i},e.prototype.writePosList_=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var s,a=r.srsName,l=e.getCoordinates(),u=l.length,c=new Array(u),h=0;h<u;++h)s=l[h],c[h]=this.getCoords_(s,a,i);Bp(t,c.join(" "))},e.prototype.writePoint=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=sp(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,n)},e.prototype.writeEnvelope=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];xp({node:t},this.ENVELOPE_SERIALIZERS,mp,i,n,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=sp(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,n)},e.prototype.RING_NODE_FACTORY_=function(t,e,n){var r=e[e.length-1],i=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),sp(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();xp({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,s,n,void 0,this)}else if("Surface"===t.nodeName){var a=sp(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,n)}},e.prototype.writeCurveOrLineString=function(t,e,n){var r=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=sp(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,n)}else if("Curve"===t.nodeName){var o=sp(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,n)}},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();xp({node:t,hasZ:i,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)},e.prototype.writeMultiPoint=function(t,e,n){var r=n[n.length-1],i=r.srsName,o=r.hasZ;i&&t.setAttribute("srsName",i);var s=e.getPoints();xp({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,yp("pointMember"),s,n,void 0,this)},e.prototype.writeMultiCurveOrLineString=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();xp({node:t,hasZ:i,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)},e.prototype.writeRing=function(t,e,n){var r=sp(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,e,n)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,n){var r=this.GEOMETRY_NODE_FACTORY_(e,n);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n))},e.prototype.writePointMember=function(t,e,n){var r=sp(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,e,n)},e.prototype.writeLineStringOrCurveMember=function(t,e,n){var r=this.GEOMETRY_NODE_FACTORY_(e,n);r&&(t.appendChild(r),this.writeCurveOrLineString(r,e,n))},e.prototype.writeSurfacePatches_=function(t,e,n){var r=sp(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n)},e.prototype.writeCurveSegments_=function(t,e,n){var r=sp(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,e,n)},e.prototype.writeGeometryElement=function(t,e,n){var r,i=n[n.length-1],o=Ar({},i);o.node=t,r=Array.isArray(e)?Yi(e,i):Hi(e,!0,i),xp(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[r],n,void 0,this)},e.prototype.writeFeatureElement=function(t,e,n){var r=e.getId();r&&t.setAttribute("fid",r);var i=n[n.length-1],o=i.featureNS,s=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var a=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(a.push(c),l.push(h),c==s||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=gp(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=gp(Bp)))}}var p=Ar({},i);p.node=t,xp(p,i.serializers,yp(void 0,o),l,n,a)},e.prototype.writeFeatureMembers_=function(t,e,n){var r=n[n.length-1],i=r.featureType,o=r.featureNS,s={};s[o]={},s[o][i]=gp(this.writeFeatureElement,this);var a=Ar({},r);a.node=t,xp(a,s,yp(i,o),e,n)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,n){var r=e[e.length-1].node;return sp(this.namespace,Yp[r.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,n){var r,i=e[e.length-1],o=i.multiSurface,s=i.surface,a=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===a?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve"),sp(this.namespace,r)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var n=sp(this.namespace,"geom"),r={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Ar(r,e),this.writeGeometryElement(n,t,[r]),n},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=sp(this.namespace,"featureMembers");n.setAttributeNS(op,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Ar(r,e),this.writeFeatureMembers_(n,t,[r]),n},e}(Lp);Xp.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:fp(Xp.prototype.readFlatPos),posList:fp(Xp.prototype.readFlatPosList),coordinates:fp(Wp.prototype.readFlatCoordinates)}},Xp.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Xp.prototype.interiorParser,exterior:Xp.prototype.exteriorParser}},Xp.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:fp(Lp.prototype.readPoint),MultiPoint:fp(Lp.prototype.readMultiPoint),LineString:fp(Lp.prototype.readLineString),MultiLineString:fp(Lp.prototype.readMultiLineString),LinearRing:fp(Lp.prototype.readLinearRing),Polygon:fp(Lp.prototype.readPolygon),MultiPolygon:fp(Lp.prototype.readMultiPolygon),Surface:fp(Xp.prototype.readSurface),MultiSurface:fp(Xp.prototype.readMultiSurface),Curve:fp(Xp.prototype.readCurve),MultiCurve:fp(Xp.prototype.readMultiCurve),Envelope:fp(Xp.prototype.readEnvelope)}},Xp.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:pp(Xp.prototype.curveMemberParser),curveMembers:pp(Xp.prototype.curveMemberParser)}},Xp.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:pp(Xp.prototype.surfaceMemberParser),surfaceMembers:pp(Xp.prototype.surfaceMemberParser)}},Xp.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:pp(Lp.prototype.readLineString),Curve:pp(Xp.prototype.readCurve)}},Xp.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:pp(Lp.prototype.readPolygon),Surface:pp(Xp.prototype.readSurface)}},Xp.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:fp(Xp.prototype.readPatch)}},Xp.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:fp(Xp.prototype.readSegment)}},Xp.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:pp(Xp.prototype.readFlatPosList),upperCorner:pp(Xp.prototype.readFlatPosList)}},Xp.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:fp(Xp.prototype.readPolygonPatch)}},Xp.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:fp(Xp.prototype.readLineStringSegment)}},Xp.prototype.writeFeatures,Xp.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:gp(Xp.prototype.writeRing),interior:gp(Xp.prototype.writeRing)}},Xp.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:gp(Bp),upperCorner:gp(Bp)}},Xp.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:gp(Xp.prototype.writeSurfaceOrPolygonMember),polygonMember:gp(Xp.prototype.writeSurfaceOrPolygonMember)}},Xp.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:gp(Xp.prototype.writePointMember)}},Xp.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:gp(Xp.prototype.writeLineStringOrCurveMember),curveMember:gp(Xp.prototype.writeLineStringOrCurveMember)}},Xp.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:gp(Xp.prototype.writeCurveOrLineString),MultiCurve:gp(Xp.prototype.writeMultiCurveOrLineString),Point:gp(Xp.prototype.writePoint),MultiPoint:gp(Xp.prototype.writeMultiPoint),LineString:gp(Xp.prototype.writeCurveOrLineString),MultiLineString:gp(Xp.prototype.writeMultiCurveOrLineString),LinearRing:gp(Xp.prototype.writeLinearRing),Polygon:gp(Xp.prototype.writeSurfaceOrPolygon),MultiPolygon:gp(Xp.prototype.writeMultiSurfaceOrPolygon),Surface:gp(Xp.prototype.writeSurfaceOrPolygon),MultiSurface:gp(Xp.prototype.writeMultiSurfaceOrPolygon),Envelope:gp(Xp.prototype.writeEnvelope)}};const Kp=Xp;var Zp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$p=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:n.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",n}return Zp(e,t),e}(Kp);$p.prototype.namespace="http://www.opengis.net/gml/3.2",$p.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:fp(Kp.prototype.readFlatPos),posList:fp(Kp.prototype.readFlatPosList),coordinates:fp(Wp.prototype.readFlatCoordinates)}},$p.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Kp.prototype.interiorParser,exterior:Kp.prototype.exteriorParser}},$p.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:fp(Lp.prototype.readPoint),MultiPoint:fp(Lp.prototype.readMultiPoint),LineString:fp(Lp.prototype.readLineString),MultiLineString:fp(Lp.prototype.readMultiLineString),LinearRing:fp(Lp.prototype.readLinearRing),Polygon:fp(Lp.prototype.readPolygon),MultiPolygon:fp(Lp.prototype.readMultiPolygon),Surface:fp($p.prototype.readSurface),MultiSurface:fp(Kp.prototype.readMultiSurface),Curve:fp($p.prototype.readCurve),MultiCurve:fp(Kp.prototype.readMultiCurve),Envelope:fp($p.prototype.readEnvelope)}},$p.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:pp(Kp.prototype.curveMemberParser),curveMembers:pp(Kp.prototype.curveMemberParser)}},$p.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:pp(Kp.prototype.surfaceMemberParser),surfaceMembers:pp(Kp.prototype.surfaceMemberParser)}},$p.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:pp(Lp.prototype.readLineString),Curve:pp(Kp.prototype.readCurve)}},$p.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:pp(Lp.prototype.readPolygon),Surface:pp(Kp.prototype.readSurface)}},$p.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:fp(Kp.prototype.readPatch)}},$p.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:fp(Kp.prototype.readSegment)}},$p.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:pp(Kp.prototype.readFlatPosList),upperCorner:pp(Kp.prototype.readFlatPosList)}},$p.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:fp(Kp.prototype.readPolygonPatch)}},$p.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:fp(Kp.prototype.readLineStringSegment)}},$p.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:pp(Lp.prototype.pointMemberParser),pointMembers:pp(Lp.prototype.pointMemberParser)}},$p.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:pp(Lp.prototype.lineStringMemberParser),lineStringMembers:pp(Lp.prototype.lineStringMemberParser)}},$p.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:pp(Lp.prototype.polygonMemberParser),polygonMembers:pp(Lp.prototype.polygonMemberParser)}},$p.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:pp(Lp.prototype.readFlatCoordinatesFromNode)}},$p.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:pp(Lp.prototype.readLineString)}},$p.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:pp(Lp.prototype.readPolygon)}},$p.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:fp(Lp.prototype.readFlatLinearRing)}},$p.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:gp(Kp.prototype.writeRing),interior:gp(Kp.prototype.writeRing)}},$p.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:gp(Bp),upperCorner:gp(Bp)}},$p.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:gp(Kp.prototype.writeSurfaceOrPolygonMember),polygonMember:gp(Kp.prototype.writeSurfaceOrPolygonMember)}},$p.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:gp(Kp.prototype.writePointMember)}},$p.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:gp(Kp.prototype.writeLineStringOrCurveMember),curveMember:gp(Kp.prototype.writeLineStringOrCurveMember)}},$p.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:gp(Kp.prototype.writeCurveOrLineString),MultiCurve:gp(Kp.prototype.writeMultiCurveOrLineString),Point:gp($p.prototype.writePoint),MultiPoint:gp(Kp.prototype.writeMultiPoint),LineString:gp(Kp.prototype.writeCurveOrLineString),MultiLineString:gp(Kp.prototype.writeMultiCurveOrLineString),LinearRing:gp(Kp.prototype.writeLinearRing),Polygon:gp(Kp.prototype.writeSurfaceOrPolygon),MultiPolygon:gp(Kp.prototype.writeMultiSurfaceOrPolygon),Surface:gp(Kp.prototype.writeSurfaceOrPolygon),MultiSurface:gp(Kp.prototype.writeMultiSurfaceOrPolygon),Envelope:gp(Kp.prototype.writeEnvelope)}};const Jp=$p,Qp=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}();var tf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ef=function(t){function e(e,n){var r=t.call(this,e)||this;return r.conditions=n,ce(r.conditions.length>=2,57),r}return tf(e,t),e}(Qp);var nf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rf=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return nf(e,t),e}(ef);const of=rf;var sf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const af=function(t){function e(e,n,r){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=n,4!==n.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=r,i}return sf(e,t),e}(Qp);var lf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const uf=function(t){function e(e,n){var r=t.call(this,e)||this;return r.propertyName=n,r}return lf(e,t),e}(Qp);var cf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hf=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.expression=r,o.matchCase=i,o}return cf(e,t),e}(uf);const pf=hf;var ff=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),df=function(t){function e(e,n,r){return t.call(this,"PropertyIsEqualTo",e,n,r)||this}return ff(e,t),e}(pf);const gf=df;var yf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mf=function(t){function e(e,n){return t.call(this,"PropertyIsGreaterThan",e,n)||this}return yf(e,t),e}(pf);const vf=mf;var _f=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bf=function(t){function e(e,n){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,n)||this}return _f(e,t),e}(pf);const wf=bf;var xf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Sf=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.geometryName=n||"the_geom",o.geometry=r,o.srsName=i,o}return xf(e,t),e}(Qp);var Ef=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Cf=function(t){function e(e,n,r){return t.call(this,"Intersects",e,n,r)||this}return Ef(e,t),e}(Sf);var Nf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Pf=function(t){function e(e,n,r,i,o,s){var a=t.call(this,"PropertyIsLike",e)||this;return a.pattern=n,a.wildCard=void 0!==r?r:"*",a.singleChar=void 0!==i?i:".",a.escapeChar=void 0!==o?o:"!",a.matchCase=s,a}return Nf(e,t),e}(uf);var Of=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tf=function(t){function e(e,n){return t.call(this,"PropertyIsLessThan",e,n)||this}return Of(e,t),e}(pf);const If=Tf;var Mf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kf=function(t){function e(e,n){return t.call(this,"PropertyIsLessThanOrEqualTo",e,n)||this}return Mf(e,t),e}(pf);const Lf=kf;var Af=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rf=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return Af(e,t),e}(ef);const Ff=Rf;function jf(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(of,e))}function Df(t,e,n,r,i,o){return new Pf(t,e,n,r,i,o)}var zf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qf={"http://www.opengis.net/gml":{boundedBy:dp(Lp.prototype.readGeometryElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:pp(Lp.prototype.readFeaturesInternal)}},Bf={"http://www.opengis.net/wfs":{totalInserted:dp(Fp),totalUpdated:dp(Fp),totalDeleted:dp(Fp)},"http://www.opengis.net/wfs/2.0":{totalInserted:dp(Fp),totalUpdated:dp(Fp),totalDeleted:dp(Fp)}},Gf={"http://www.opengis.net/wfs":{TransactionSummary:dp(td,"transactionSummary"),InsertResults:dp(id,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:dp(td,"transactionSummary"),InsertResults:dp(id,"insertIds")}},Uf={"http://www.opengis.net/wfs":{PropertyName:gp(Bp)},"http://www.opengis.net/wfs/2.0":{PropertyName:gp(Bp)}},Vf={"http://www.opengis.net/wfs":{Insert:gp(od),Update:gp(ud),Delete:gp(ld),Property:gp(cd),Native:gp(hd)},"http://www.opengis.net/wfs/2.0":{Insert:gp(od),Update:gp(ud),Delete:gp(ld),Property:gp(cd),Native:gp(hd)}},Wf="feature",Hf="http://www.w3.org/2000/xmlns/",Yf={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},Xf={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Kf={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},Zf={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},$f={"2.0.0":Jp,"1.1.0":Kp,"1.0.0":Wp},Jf=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.version_=r.version?r.version:"1.1.0",n.featureType_=r.featureType,n.featureNS_=r.featureNS,n.gmlFormat_=r.gmlFormat?r.gmlFormat:new $f[n.version_],n.schemaLocation_=r.schemaLocation?r.schemaLocation:Zf[n.version_],n}return zf(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var n={node:t};Ar(n,{featureType:this.featureType_,featureNS:this.featureNS_}),Ar(n,this.getReadOptions(t,e||{}));var r=[n],i=wp([],"2.0.0"===this.version_?qf:this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,r,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=cp(t);return this.readTransactionResponseFromDocument(e)}return up(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=cp(t);return this.readFeatureCollectionMetadataFromDocument(e)}return up(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},n=jp(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=n,wp(e,qf,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return wp({},Gf,t,[])},e.prototype.writeGetFeature=function(t){var e=this,n=sp(Xf[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&n.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&n.setAttribute("count",String(t.count)),void 0!==t.viewParams&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(op,"xsi:schemaLocation",this.schemaLocation_);var r={node:n};if(Ar(r,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),ce(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var i=t.filter;t.bbox&&(ce(t.geometryName,12),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Ar(r,{geometryName:t.geometryName,filter:i}),Od(n,t.featureTypes,[r])}else t.featureTypes.forEach((function(i){var o=e.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Ar(r,{geometryName:i.geometryName,filter:o}),Od(n,[i.name],[r])}));return n},e.prototype.combineBboxAndFilter=function(t,e,n,r){var i=function(t,e,n){return new af(t,e,n)}(t,e,n);return r?jf(r,i):i},e.prototype.writeTransaction=function(t,e,n,r){var i,o=[],s=r.version?r.version:this.version_,a=sp(Xf[s],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",s),r&&(i=r.gmlOptions?r.gmlOptions:{},r.handle&&a.setAttribute("handle",r.handle)),a.setAttributeNS(op,"xsi:schemaLocation",Zf[s]);var l=function(t,e,n,r){var i,o=r.featurePrefix?r.featurePrefix:Wf;return"1.0.0"===n?i=2:"1.1.0"===n?i=3:"2.0.0"===n&&(i=3.2),Ar({node:t},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:i,hasZ:r.hasZ,srsName:r.srsName},e)}(a,i,s,r);return t&&Qf("Insert",t,o,l),e&&Qf("Update",e,o,l),n&&Qf("Delete",n,o,l),r.nativeElements&&Qf("Native",r.nativeElements,o,l),a},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var n=[{}];return this.gmlFormat_.readGeometryElement(e,n),tn(n.pop().srsName)}return null},e}(Op);function Qf(t,e,n,r){xp(r,Vf,yp(t),e,n)}function td(t,e){return wp({},Bf,t,e)}var ed={"http://www.opengis.net/ogc":{FeatureId:pp((function(t,e){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:pp((function(t,e){return t.getAttribute("fid")}))}};function nd(t,e){bp(ed,t,e)}var rd={"http://www.opengis.net/wfs":{Feature:nd},"http://www.opengis.net/wfs/2.0":{Feature:nd}};function id(t,e){return wp([],rd,t,e)}function od(t,e,n){var r=n[n.length-1],i=r.featureType,o=r.featureNS,s=r.gmlVersion,a=sp(o,i);t.appendChild(a),2===s?Wp.prototype.writeFeatureElement(a,e,n):3===s?Kp.prototype.writeFeatureElement(a,e,n):Jp.prototype.writeFeatureElement(a,e,n)}function sd(t,e,n){var r=n[n.length-1].version,i=Yf[r],o=sp(i,"Filter"),s=sp(i,"FeatureId");o.appendChild(s),s.setAttribute("fid",e),t.appendChild(o)}function ad(t,e){var n=(t=t||Wf)+":";return 0===e.indexOf(n)?e:n+e}function ld(t,e,n){var r=n[n.length-1];ce(void 0!==e.getId(),26);var i=r.featureType,o=r.featurePrefix,s=r.featureNS,a=ad(o,i);t.setAttribute("typeName",a),t.setAttributeNS(Hf,"xmlns:"+o,s);var l=e.getId();void 0!==l&&sd(t,l,n)}function ud(t,e,n){var r=n[n.length-1];ce(void 0!==e.getId(),27);var i=r.version,o=r.featureType,s=r.featurePrefix,a=r.featureNS,l=ad(s,o),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(Hf,"xmlns:"+s,a);var c=e.getId();if(void 0!==c){for(var h=e.getKeys(),p=[],f=0,d=h.length;f<d;f++){var g=e.get(h[f]);if(void 0!==g){var y=h[f];g&&"function"==typeof g.getSimplifiedGeometry&&(y=u),p.push({name:y,value:g})}}xp({version:i,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},Vf,yp("Property"),p,n),sd(t,c,n)}}function cd(t,e,n){var r=n[n.length-1],i=r.version,o=Xf[i],s=sp(o,"Name"),a=r.gmlVersion;if(t.appendChild(s),Bp(s,e.name),void 0!==e.value&&null!==e.value){var l=sp(o,"Value");t.appendChild(l),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===a?Wp.prototype.writeGeometryElement(l,e.value,n):3===a?Kp.prototype.writeGeometryElement(l,e.value,n):Jp.prototype.writeGeometryElement(l,e.value,n):Bp(l,e.value)}}function hd(t,e,n){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&Bp(t,e.value)}var pd={"http://www.opengis.net/wfs":{Query:gp(fd)},"http://www.opengis.net/wfs/2.0":{Query:gp(fd)},"http://www.opengis.net/ogc":{During:gp(md),And:gp(vd),Or:gp(vd),Not:gp(_d),BBOX:gp(dd),Contains:gp(gd),Intersects:gp(gd),Within:gp(gd),DWithin:gp(yd),PropertyIsEqualTo:gp(bd),PropertyIsNotEqualTo:gp(bd),PropertyIsLessThan:gp(bd),PropertyIsLessThanOrEqualTo:gp(bd),PropertyIsGreaterThan:gp(bd),PropertyIsGreaterThanOrEqualTo:gp(bd),PropertyIsNull:gp(wd),PropertyIsBetween:gp(xd),PropertyIsLike:gp(Sd)},"http://www.opengis.net/fes/2.0":{During:gp(md),And:gp(vd),Or:gp(vd),Not:gp(_d),BBOX:gp(dd),Contains:gp(gd),Disjoint:gp(gd),Intersects:gp(gd),ResourceId:gp((function(t,e,n){t.setAttribute("rid",e.rid)})),Within:gp(gd),DWithin:gp(yd),PropertyIsEqualTo:gp(bd),PropertyIsNotEqualTo:gp(bd),PropertyIsLessThan:gp(bd),PropertyIsLessThanOrEqualTo:gp(bd),PropertyIsGreaterThan:gp(bd),PropertyIsGreaterThanOrEqualTo:gp(bd),PropertyIsNull:gp(wd),PropertyIsBetween:gp(xd),PropertyIsLike:gp(Sd)}};function fd(t,e,n){var r,i,o=n[n.length-1],s=o.version,a=o.featurePrefix,l=o.featureNS,u=o.propertyNames,c=o.srsName;r=a?ad(a,e):e,i="2.0.0"===s?"typeNames":"typeName",t.setAttribute(i,r),c&&t.setAttribute("srsName",c),l&&t.setAttributeNS(Hf,"xmlns:"+a,l);var h=Ar({},o);h.node=t,xp(h,Uf,yp("PropertyName"),u,n);var p=o.filter;if(p){var f=sp(Td(s),"Filter");t.appendChild(f),function(t,e,n){var r=n[n.length-1],i={node:t};Ar(i,{context:r}),xp(i,pd,yp(e.getTagName()),[e],n)}(f,p,n)}}function dd(t,e,n){var r=n[n.length-1],i=r.context.version;r.srsName=e.srsName;var o=$f[i];Nd(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.extent,n)}function gd(t,e,n){var r=n[n.length-1],i=r.context.version;r.srsName=e.srsName;var o=$f[i];Nd(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.geometry,n)}function yd(t,e,n){var r=n[n.length-1].context.version;gd(t,e,n);var i=sp(Td(r),"Distance");Bp(i,e.distance.toString()),"2.0.0"===r?i.setAttribute("uom",e.unit):i.setAttribute("units",e.unit),t.appendChild(i)}function md(t,e,n){var r=n[n.length-1].context.version;Ed(Kf[r],"ValueReference",t,e.propertyName);var i=sp(Ip,"TimePeriod");t.appendChild(i);var o=sp(Ip,"begin");i.appendChild(o),Pd(o,e.begin);var s=sp(Ip,"end");i.appendChild(s),Pd(s,e.end)}function vd(t,e,n){var r=n[n.length-1].context,i={node:t};Ar(i,{context:r});for(var o=e.conditions,s=0,a=o.length;s<a;++s){var l=o[s];xp(i,pd,yp(l.getTagName()),[l],n)}}function _d(t,e,n){var r=n[n.length-1].context,i={node:t};Ar(i,{context:r});var o=e.condition;xp(i,pd,yp(o.getTagName()),[o],n)}function bd(t,e,n){var r=n[n.length-1].context.version;void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Nd(r,t,e.propertyName),Cd(r,t,""+e.expression)}function wd(t,e,n){Nd(n[n.length-1].context.version,t,e.propertyName)}function xd(t,e,n){var r=n[n.length-1].context.version,i=Td(r);Nd(r,t,e.propertyName);var o=sp(i,"LowerBoundary");t.appendChild(o),Cd(r,o,""+e.lowerBoundary);var s=sp(i,"UpperBoundary");t.appendChild(s),Cd(r,s,""+e.upperBoundary)}function Sd(t,e,n){var r=n[n.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Nd(r,t,e.propertyName),Cd(r,t,""+e.pattern)}function Ed(t,e,n,r){var i=sp(t,e);Bp(i,r),n.appendChild(i)}function Cd(t,e,n){Ed(Td(t),"Literal",e,n)}function Nd(t,e,n){"2.0.0"===t?Ed(Kf[t],"ValueReference",e,n):Ed(Yf[t],"PropertyName",e,n)}function Pd(t,e){var n=sp(Ip,"TimeInstant");t.appendChild(n);var r=sp(Ip,"timePosition");n.appendChild(r),Bp(r,e)}function Od(t,e,n){var r=n[n.length-1],i=Ar({},r);i.node=t,xp(i,pd,yp("Query"),e,n)}function Td(t){return"2.0.0"===t?Kf[t]:Yf[t]}const Id=Jf;function Md(t,e){let n=null;if(e.length>1){n=t(e[0],e[1]);for(let r=2,i=e.length;r<i;r++)n=t(n,e[r])}else n=e[0];return n}const kd={like:Df,ilike:function(t,e){return Df(t,e,"%","_","\\",!1)},eq:function(t,e,n){return new gf(t,e,n)},ge:function(t,e){return new wf(t,e)},gt:function(t,e){return new vf(t,e)},le:function(t,e){return new Lf(t,e)},lt:function(t,e){return new If(t,e)}},Ld={and:jf,or:function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Ff,e))}},Ad=t=>t.map((t=>Array.isArray(t)?Md(Ld[t[0]],Ad(t.slice(1))):kd[t.comparitor](t.name,t.value))),Rd=t=>{let e=t.params.typename;return t.config&&t.config.typename&&(e=t.config.typename),e},Fd=t=>t.config&&t.config["geometry-name"]?t.config["geometry-name"]:"geom",jd="text/xml; subtype=gml/2.1.2";function Dd(t,e,n,r=jd){const i=Fd(e);let o=n;e.wgs84Hack&&(o=new tn("EPSG:4326"));const s=[];if(t.selection&&t.selection.length>0){const e=t.selection.map((t=>{const e=(new ys).readGeometry(t.geometry);return e.transform(n,o),new Cf(i,e,undefined)}));1===e.length?s.push(e[0]):s.push(Md(Ld.or,e))}Ad(t.fields).forEach((t=>s.push(t)));let a=null;a=s.length>1?Md(Ld.and,s):s[0];const l=Rd(e).split(":"),u={srsName:o.getCode(),featurePrefix:l[0],featureTypes:[l[1]],outputFormat:r,filter:a},c=(new Id).writeGetFeature(u);return(new XMLSerializer).serializeToString(c)}function zd(t,e,n){const r=new Id,i=t.config||{},o=Rd(t).split(":"),s={featurePrefix:o[0],featureType:o[1],srsName:i.srs||"EPSG:3857"};i["namespace-uri"]&&(s.featureNS=i["namespace-uri"]);const a=Fd(t),l=new ys({geometryName:a}),u={updates:[],inserts:[],deletes:[]};["inserts","updates","deletes"].forEach((t=>{n[t]&&(u[t]=n[t].map((t=>l.readFeature(t,{geometryName:a}))),"EPSG:3857"!==s.srsName&&u[t].forEach((t=>t.getGeometry().transform("EPSG:3857",s.srsName))))}));const c=r.writeTransaction(u.inserts,u.updates,u.deletes,s);return(new XMLSerializer).serializeToString(c)}const qd={"circle-radius":4,"circle-color":"#ffff00","circle-stroke-color":"#ffff00","line-color":"#ffff00","line-width":4,"fill-color":"#ffff00","fill-opacity":.25,"line-opacity":.25},Bd={"circle-radius":4,"circle-color":"#ff0000","circle-stroke-color":"#ff0000","line-color":"#ff0000","line-width":4,"fill-color":"#ff0000","fill-opacity":.5,"line-opacity":.5},Gd={"circle-radius":4,"circle-color":"#8470ff","circle-stroke-color":"#8470ff","line-color":"#fc8d59","line-width":6,"line-opacity":.8,"fill-color":"#91bfdb","fill-opacity":.25},Ud={"circle-radius":10,"circle-color":"#d53e4f","circle-stroke-color":"#d53e4f","line-color":"#d53e4f","line-width":6,"line-opacity":.8,"fill-color":"#d53e4f33","fill-opacity":.25},Vd="edit-temp",Wd={showBufferAll:!1,showZoomToAll:!0,showLayerCount:!0,showFeatureCount:!0},Hd=["draw-point","draw-polygon","draw-line","draw-modify","draw-remove","draw-edit"];let Yd=1e5;const Xd={opacity:1};function Kd(t){"number"!=typeof t.zIndex&&(t.zIndex=Yd,Yd--);const e=Object.assign({},Xd,t);return{type:oh.ADD,mapSource:e}}function Zd(t,e){return{type:oh.ADD_LAYER,mapSourceName:t,layer:e}}function $d(t,e="param"){const n={},r=t.getElementsByTagName(e);for(let t=0,e=r.length;t<e;t++){const e=r[t];n[e.getAttribute("name")]=e.getAttribute("value")}return n}function Jd(t,e,n){return{type:oh.LAYER_FAVORITE,mapSourceName:t,layerName:e,favorite:n}}function Qd(t,e,n){let r=_c(t,"url",!0);const i=_c(t,"file",!0)[0];return 0===r.length&&(r=[e.mapserver_url]),{type:n,serverType:"mapserver",urls:r,params:{MAP:e.mapfile_root+i}}}function tg(t,e){const n={name:t.getAttribute("name"),urls:_c(t,"url",!0),type:t.getAttribute("type"),label:t.getAttribute("title"),opacity:t.getAttribute("opacity"),zIndex:t.getAttribute("z-index"),queryable:mc(t.getAttribute("queryable"),!0),printable:mc(t.getAttribute("printable"),!0),refresh:null,layers:[],transforms:{},params:{},config:{},properties:[],idProperty:"_uuid"};n.zIndex&&(n.zIndex=parseInt(n.zIndex,10)),n.opacity=parseFloat(n.opacity),isNaN(n.opacity)&&(n.opacity=1);const r=t.getAttribute("server-type");r&&(n.serverType=r),"mapserver"===n.type?Object.assign(n,Qd(t,e,"wms")):"mapserver-wfs"===n.type&&Object.assign(n,function(t,e){const n=Qd(t,e,"wfs");return n.wgs84Hack=!0,n}(t,e)),["refresh","minresolution","maxresolution"].forEach((e=>{const r=t.getAttribute(e);r&&(n[e]=parseFloat(r))}));const i=t.getElementsByTagName("transform");for(let t=0,e=i.length;t<e;t++){const e=i[t];n.transforms[e.getAttribute("attribute")]=e.getAttribute("function")}Object.assign(n.params,{},$d(t)),Object.assign(n.config,{},$d(t,"config")),n.config["id-property"]&&(n.idProperty=n.config["id-property"],delete n.config["id-property"]),Object.assign(n.properties,function(t){const e=[],n=t.getElementsByTagName("properties")[0];if(n){const t=n.getElementsByTagName("property"),r=["name","label","type","default","min","max","step"];for(let n=0,i=t.length;n<i;n++){const i=t[n],o={};for(let t=0,e=r.length;t<e;t++){const e=r[t];null!=i.getAttribute(e)&&(o[e]=i.getAttribute(e))}if("select"===o.type){o.options=[];const t=i.getElementsByTagName("option");for(let e=0,n=t.length;e<n;e++)o.options.push({value:t[e].getAttribute("value"),label:vc(t[e])})}e.push(o)}}return e}(t));const o=[],s=t.getElementsByTagName("layer");for(let t=0,e=s.length;t<e;t++){const e=s[t],r=e.getAttribute("title"),i={name:e.getAttribute("name"),on:mc(e.getAttribute("status")),favorite:mc(e.getAttribute("favorite")),selectable:mc(e.getAttribute("selectable")),label:r||n.label,templates:{},legend:null,attribution:null,style:null,queryAs:e.getAttribute("query-as")},a=e.getElementsByTagName("legend");a.length>0&&(i.legend={type:a[0].getAttribute("type"),contents:vc(a[0])});const l=e.getElementsByTagName("attribution");l.length>0&&(i.attribution=vc(l[0]));const u=e.getElementsByTagName("template");for(let t=0,e=u.length;t<e;t++){let e={};const n=u[t],r=n.getAttribute("name"),o=n.getAttribute("src"),s=n.getAttribute("alias"),a=mc(n.getAttribute("auto"));e=s?{type:"alias",alias:s}:o?{type:"remote",src:o}:a?{type:"auto"}:{type:"local",contents:vc(n)},i.templates[r]=e}const c=_c(e,"style",!1);if(c&&c.length>0)try{i.style=JSON.parse(c)}catch(t){console.error("There was an error parsing the style for: ",n.name),console.error("Error details",t)}const h=_c(e,"filter",!1);if(h&&h.length>0)try{i.filter=JSON.parse(h)}catch(t){console.error("There was an error parsing the filter for: ",n.name),console.error("Error details",t)}i.queryAs&&(i.queryAs=i.queryAs.split(":")),o.push(Zd(n.name,i))}return[Kd(n)].concat(o)}function eg(t,e){const n=t[e.mapSourceName];for(const t of n.layers)if(t.name===e.layerName)return t;if(null==e.layerName)return n;throw console.error("Cannot find layer",e.mapSourceName,e.layerName),new Error(`Cannot find layer ${e.mapSourceName}/${e.layerName}`)}function ng(t,e){const n=e.split("/");return eg(t,{mapSourceName:n[0],layerName:n[1]})}function rg(t){if(t.layers)for(const e of t.layers)if(e.on)return!0;return!1}function ig(t,e=!1){const n=[],r=!e;for(const e in t)rg(t[e])&&(r||t[e].printable)&&n.push(e);return n}function og(t,e){return eg(t,{mapSourceName:wc(e),layerName:xc(e)})}function sg(t,e){return!0===e.on}function ag(t,e){const n=[];for(const r in t){const i=t[r].layers;for(let o=0,s=i.length;o<s;o++)e(t[r],i[o])&&n.push(r+"/"+i[o].name)}return n}function lg(t){return ag(t,sg)}function ug(t,e,n){if(t[e]){const r=t[e];for(let t=0,e=r.layers.length;t<e;t++)if(r.layers[t].name===n)return r.layers[t]}return null}function cg(t,e={},n={}){const r=void 0===e.requireVisible||e.requireVisible,i=function(t,n,i){let o=!0;if(e&&e.withTemplate){let t=e.withTemplate;"string"==typeof t&&(t=[t]),t=t.map((t=>0===t.indexOf("@")?t.slice(1):t));const n=void 0===e.anyTemplate||!0===e.anyTemplate?(t,e)=>t||e:(t,e)=>t&&e,r=i.templates;if(o=!1,r)for(let e=0,i=t.length;e<i;e++)o=n(o,void 0!==r[t[e]])}return o&&function(t){if(!1===t.queryable)return!1;switch(t.type){case"wms":case"wfs":case"ags-vector":case"geojson":case"vector":return!0;default:return!1}}(t)&&(!r||sg(0,n))},o=[];for(const e in t){const n=t[e];for(let r=0,s=n.layers.length;r<s;r++){const s=n.layers[r];let a=!1;if(s.queryAs)for(let e=0,r=s.queryAs.length;e<r;e++){const r=s.queryAs[e].split("/");i(n,s,ug(t,r[0],r[1]))&&(o.push(s.queryAs[e]),a=!0)}!a&&i(n,s,s)&&o.push(e+"/"+s.name)}}return o}function hg(t,e,n=!1){return{type:oh.ADD_FEATURES,mapSourceName:t,features:e,copy:n}}function pg(t){return{type:oh.CLEAR_FEATURES,mapSourceName:t}}function fg(t,e,n){return{type:oh.CHANGE_FEATURES,mapSourceName:t,filter:e,properties:n}}function dg(t,e,n){return(r,i)=>{const o=i().map;r({type:oh.LAYER_VIS,layerName:e,mapSourceName:t,on:n});const s=`${t}/${e}`;o.activeSource!==s&&o.editPath!==s||(r(Hh(null)),r(pg(Vd)))}}function gg(t){return{type:oh.RELOAD,mapSourceName:t}}const yg=t=>{const e=Object.assign({},t.properties);return delete e.boundedBy,Object.assign({},t,{properties:e})};function mg(t,e){return(n,r)=>{const i=og(r().mapSources,t),o=wc(t);let s=o;i&&i.queryAs&&i.queryAs.length>0&&(s=wc(i.queryAs[0]));const a=r().mapSources[s];if(a){const t=a.idProperty,r=e.id||(e.properties||{})[t];if("vector"===a.type)if(r){n(function(t,e,n,r="uuid"){return{type:oh.MODIFY_GEOMETRY,mapSourceName:t,id:e,geometry:n,idProp:r}}(s,r,e.geometry,t));const i={};i[t]=r,n(fg(s,i,e.properties))}else n(hg(s,[e]));else if("wfs"===a.type){tn("EPSG:3857");const t=function(t,e,n,r=!1){return zd(t,0,{[r?"inserts":"updates"]:n})}(a,0,[yg(e)],!r);fetch(a.urls[0]+"",{method:"POST",body:t}).then((t=>t.text())).then((t=>{n(gg(o))}))}else console.error(`${a.type} sources do not support saving.`)}}}function vg(t,e,n={}){const r=ar(t.mapStateToProps)(t.component(Cn())),i=Object.assign({},n,{app:this,services:this.services});return Pn().render(Cn().createElement(Ln,{store:this.store},Cn().createElement(r,i)),document.getElementById(e))}function _g(t,e){const n=wc(t),r=xc(t);this.store.dispatch(dg(n,r,e))}function bg(t){return{type:Rh,hint:t}}function wg(t){return{type:jh,action:t}}function xg(t){return{type:zh,payload:t}}function Sg(){return{type:Lh}}function Eg(t){return{type:kh,service:t}}function Cg(t){return{type:Ah,show:t}}var Ng=__webpack_require__(5877),Pg=__webpack_require__.n(Ng);function Og(t){const e={id:t.getAttribute("uuid"),children:[],label:t.getAttribute("title"),expand:mc(t.getAttribute("expand")),multiple:mc(t.getAttribute("multiple"),!0)},n=t.parentNode;return n&&"group"===n.tagName&&(e.parent=n.getAttribute("uuid")),e}function Tg(t,e,n=!1){const r={id:e.getAttribute("uuid"),label:e.getAttribute("title"),legend:mc(e.getAttribute("show-legend"),!0),src:[],favorite:!1,refreshEnabled:!1,refresh:null,metadata_url:null,tools:[],tip:e.getAttribute("tip"),exclusive:n,classNames:e.getAttribute("classNames")},i=["down","up","fade","unfade","zoomto","upload","download","legend-toggle","draw-point","draw-line","draw-polygon","draw-modify","draw-remove","draw-edit","clear"];for(const t of i)(mc(e.getAttribute(t),!1)||i[t])&&r.tools.push(t);["refresh","minresolution","maxresolution"].forEach((t=>{const n=e.getAttribute(t);n&&(r[t]=parseFloat(n))}));let o=!1;const s=e.getAttribute("src");if(s){const e=t.getState().mapSources,n=["minresolution","maxresolution","label"];for(const t of s.split(";")){const i=t.split("/"),s={mapSourceName:i[0],layerName:null};i.length>1&&(s.layerName=i[1]),r.src.push(s),o=o||!0===eg(e,s).favorite,n.forEach((t=>{const n=e[s.mapSourceName][t];!r[t]&&n&&(r[t]=n)}))}}const a=_c(e,"metadata",!0)[0];a&&(r.metadata_url=a),r.favorite=o;const l=e.parentNode;return l&&"group"===l.tagName&&(r.parent=l.getAttribute("uuid")),r}function Ig(t,e,n){let r=[];for(let i=0,o=n.childNodes.length;i<o;i++){const o=n.childNodes[i];let s=!1,a=null;if(e&&e.id&&(a=e.id),"group"===o.tagName){const n=Og(o);e&&!1===e.multiple&&(n.multiple=!1),r.push({type:ah,child:n}),s=n,r=r.concat(Ig(t,n,o))}else if("layer"===o.tagName){const n=Tg(t,o,e&&!1===e.multiple);r.push({type:sh,child:n}),s=n}s&&s.id&&r.push({type:lh,parentId:a,childId:s.id})}return r}function Mg(t,e){const n=e.getElementsByTagName("*");for(let t=0,e=n.length;t<e;t++)n[t].setAttribute("uuid",Pg().v4());return Ig(t,null,e)}function kg(t,e,n="last"){return{type:Mh,order:n,root:t,tool:e}}function Lg(t,e,n="last"){return{type:Mh,order:n,root:t,tool:{name:e.name,label:e.label,actionType:"drawer",actionDetail:""}}}function Ag(t,e){let n=[];for(const o of e.childNodes)if("drawer"===o.tagName){const e={name:(i=o).getAttribute("name"),label:i.getAttribute("title")};n.push(Lg(t,e)),n=n.concat(Ag(e.name,o))}else"tool"===o.tagName&&n.push(kg(t,{name:(r=o).getAttribute("name"),label:r.getAttribute("title"),actionType:r.getAttribute("type"),actionDetail:r.getAttribute("action"),cssClass:r.getAttribute("css-class")}));var r,i;return n}function Rg(t){return t?Ag("root",t):[]}function Fg(t={root:{id:Pg().v4(),children:[]}},e){const n={};switch(e.type){case sh:case ah:return function(t,e){const n={},r=e.child;return n[r.id]=r,Object.assign({},t,n)}(t,e);case lh:let r=e.parentId;r||(r="root");const i=Object.assign({},t[r],{children:[...t[r].children,e.childId]}),o={};return o[r]=i,Object.assign({},t,o);case"CATALOG_FAVORITE":const s={};return s[e.id]=Object.assign({},t[e.id],{favorite:e.favorite}),Object.assign({},t,s);case uh:const a={};return a[e.id]=Object.assign({},t[e.id],{expand:e.expand}),Object.assign({},t,a);case"CATALOG_REFRESH":return n[e.id]=Object.assign({},t[e.id],{refreshEnabled:e.refreshEnabled}),Object.assign({},t,n);case ch:return n[e.id]=Object.assign({},t[e.id],{legend:e.on}),Object.assign({},t,n);default:return t}}function jg(t,e,n){const r=[];if(!t[e.mapSourceName])return t;for(let i=0,o=t[e.mapSourceName].layers.length;i<o;i++){const o=Object.assign({},t[e.mapSourceName].layers[i]);o.name===e.layerName&&(e.type===oh.SET_TEMPLATE?o.templates[e.name]=e.template:o[n]=e[n]),r.push(o)}const i=Object.assign({},t[e.mapSourceName],{layers:r}),o={};return o[e.mapSourceName]=i,Object.assign({},t,o)}function Dg(t=[],e){const n={};switch(e.type){case oh.SET_ATTRIBUTE:return jg(t,e);case oh.LAYER_VIS:return jg(t,e,"on");case oh.LAYER_FAVORITE:return jg(t,e,"favorite");case oh.SET_TEMPLATE:return jg(t,e);case oh.ADD:return n[e.mapSource.name]=Object.assign({layers:[],params:{},printable:!0,queryable:!1},e.mapSource),Object.assign({},t,n);case oh.SET_Z:const r={};return r[e.mapSourceName]=Object.assign({},t[e.mapSourceName],{zIndex:e.zIndex}),Object.assign({},t,r);case oh.SET_OPACITY:const i={};return i[e.mapSourceName]=Object.assign({},t[e.mapSourceName],{opacity:e.opacity}),Object.assign({},t,i);case oh.ADD_LAYER:if(t[e.mapSourceName]){const n={};return n[e.mapSourceName]=Object.assign({},t[e.mapSourceName],{layers:[...t[e.mapSourceName].layers,e.layer]}),Object.assign({},t,n)}return t;case oh.REFRESH:if(t[e.mapSourceName]){const n={};return n[e.mapSourceName]=Object.assign({},t[e.mapSourceName],{refresh:e.refresh}),Object.assign({},t,n)}return t;case oh.ADD_FEATURES:case oh.CLEAR_FEATURES:case oh.REMOVE_FEATURE:case oh.REMOVE_FEATURES:case oh.CHANGE_FEATURES:case oh.MODIFY_GEOMETRY:return Object.assign({},t,function(t,e){const n=t[e.mapSourceName];let r=[],i=1;switch(n.features&&(r=n.features.slice(),i=n.featuresVersion),e.type){case oh.ADD_FEATURES:for(let t=0,n=e.features.length;!e.copy&&t<n;t++){const n={};n._uuid=Pg()(),e.features[t].properties=Object.assign({},e.features[t].properties,n)}r=r.concat(e.features),i+=1;break;case oh.CLEAR_FEATURES:r=[],i+=1;break;case oh.REMOVE_FEATURE:r=[];for(const t of n.features)t.properties._uuid!==e.id&&r.push(t);i+=1;break;case oh.REMOVE_FEATURES:r=Oc(r,e.filter),i+=1;break;case oh.CHANGE_FEATURES:r=Ic(n.features,e.filter,e.properties),i+=1;break;case oh.MODIFY_GEOMETRY:r=Ic(n.features,{_uuid:e.id},null,e.geometry),i+=1}const o={};return o[e.mapSourceName]=Object.assign(n,{features:r,featuresVersion:i}),o}(t,e));case oh.RELOAD:return((t,e)=>{const n={},r=t[e.mapSourceName];return n[e.mapSourceName]=Object.assign({},r,{featuresVersion:r.featuresVersion?r.featuresVersion+1:1,params:Object.assign({},r.params,{_ck:"."+(new Date).getTime()})}),Object.assign({},t,n)})(t,e);default:return t}}const zg={center:[0,0],zoom:1,resolution:null,extent:null,activeSource:null,interactionType:null,selectionFeatures:[],selectionBuffer:0,selectionBufferUnits:"ft",editPath:"",editTools:[]};function qg(t=zg,e){switch(e.type){case hh:const n={extent:null};for(const t of["center","zoom","resolution"])void 0!==e[t]&&(n[t]=e[t]);return Object.assign({},t,n);case Ch:return Object.assign({},t,{extent:{bbox:e.extent,projection:e.projection}});case fh:return Object.assign({},t,{activeSource:e.src,interactionType:e.tool});case dh:return Object.assign({},t,{selectionFeatures:[e.feature].concat(t.selectionFeatures)});case gh:return Object.assign({},t,{selectionFeatures:[]});case yh:return Object.assign({},t,{selectionBuffer:e.distance,selectionBufferUnits:e.units||t.selectionBufferUnits});case Gh:return function(t,e){const n={};return e.map&&e.map.defaultUnits&&(n.selectionBufferUnits=e.map.defaultUnits),Object.assign({},t,n)}(t,e.payload);case Oh:return Object.assign({},t,{editPath:e.editPath});case Th:return{...t,editTools:e.tools};default:return t}}const Bg={};function Gg(t=Bg,e){switch(e.type){case Mh:const n=e.root?e.root:"root",r=e.order?e.order:"last",i=Object.assign({},t);return i[n]||(i[n]=[]),"first"===r?i[n].unshift(e.tool):i[n].push(e.tool),i;case"TOOLBAR_REMOVE":const o={};for(const n in t){o[n]=[];for(const r of t[n])r.name!==e.name&&o[n].push(r)}return o;default:return t}}const Ug={service:null,order:[]};function Vg(t,e,n){const r=e[t],i={};return i[t]=Object.assign({},r,{progress:n,counter:void 0===r.counter?0:r.counter+1}),i}function Wg(t=Ug,e){const n={};switch(e.type){case kh:return Object.assign({},t,{service:e.service,showServiceForm:!0});case Lh:return Object.assign({},t,{service:null,showServiceForm:!1});case mh:const r=Pg().v4();n[r]=Object.assign({},e.query,{progress:"new",filter:[],results:{},rendered:{}});let i=[r].concat(t.order);const o=Object.assign({},t);if(e.singleQuery){i=[r];for(const e of t.order)delete o[e]}return Object.assign(o,{order:i},n);case wh:const s={};e.failed?s[e.layer]={failed:!0,failureMessage:e.messageText}:s[e.layer]=e.features;for(let t=0,n=e.features.length;t<n;t++)s[e.layer][t].query=e.id;const a=Object.assign({},t[e.id].results,s);return n[e.id]=Object.assign({},t[e.id],{results:a}),Object.assign({},t,n);case _h:return Object.assign({},t,Vg(e.id,t,"started"));case vh:return Object.assign({},t,Vg(e.id,t,"progress"));case bh:return Object.assign({},t,Vg(e.id,t,"finished"));case"MAP_QUERY_RENDERED_RESULTS":const l=[{data:e.data,target:e.target}].concat(t[e.id].rendered),u={};return u[e.id]=Object({},t[e.id],{rendered:l}),Object.assign({},t,u);case Sh:return function(t,e,n){const r={};for(const i in t[e].results)r[i]=Oc(t[e].results[i],n);const i=Object.assign({},t[e],{results:r}),o=Object.assign({},t);return o[e]=i,o}(t,e.id,e.filter);case xh:return function(t,e){const n=[];for(const r of t.order)r!==e&&n.push(r);const r=Object.assign({},t,{order:n});return delete r[e],r}(t,e.id);case Nh:return n[e.id]=Object.assign({},t[e.id],{filter:t[e.id].filter.concat([e.filter])}),Object.assign({},t,n);case Ph:const c=[];for(const n in t[e.id].filter)n.length>2&&n[1]!==e.field&&c.push(n);return n[e.id]=Object.assign({},t[e.id],{filter:c}),Object.assign({},t,n);case Ah:return Object.assign({},t,{showServiceForm:e.show});default:return t}}const Hg={stateId:0,hint:null,action:null,modal:""};function Yg(t=Hg,e){switch(e.type){case Rh:return Object.assign({},t,{stateId:Pg()(),hint:e.hint});case Fh:return Object.assign({},t,{stateId:Pg()(),hint:null});case jh:return Object.assign({},t,{stateId:Pg()(),action:e.action});case Dh:return Object.assign({},t,{stateId:Pg()(),action:null});case zh:return Object.assign({},t,{modal:e.payload});default:return t}}const Xg={coords:[0,0],sketchGeometry:null,size:null};function Kg(t=Xg,e){switch(e.type){case ph:return Object.assign({},t,{coords:e.coords});case Eh:return Object.assign({},t,{sketchGeometry:e.geometry});case Ih:return Object.assign({},t,{size:e.size});default:return t}}const Zg={state:"printed",printData:"",request:null};function $g(t=Zg,e){switch(e.type){case"PRINT_REQUEST":return Object.assign({},t,{state:"printing",request:e.request});case Bh:return Object.assign({},t,{state:"printing",printData:e.data});case qh:return Object.assign({},t,{state:"printed",data:"",request:null});default:return t}}const Jg={map:{}};function Qg(t=Jg,e={}){return e.type===Gh?Object.assign({},t,e.payload):t}const ty={feature:null,source:"",modal:""},ey=(t=ty,e={})=>{switch(e.type){case Uh:return{...t,feature:e.feature,source:e.source||"",isNew:!0===e.isNew,modal:"edit"};case Vh:return{...t,feature:null,source:"",modal:""};case Wh:return{...t,feature:e.feature,source:e.source||"",modal:"remove"};default:return t}};function ny(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ny(Object(n),!0).forEach((function(e){(0,k.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ny(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iy,oy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},sy=Cn().createContext();function ay(){return oy}var ly=function(){function t(){A(this,t),this.usedNamespaces={}}return F(t,[{key:"addUsedNamespaces",value:function(t){var e=this;t.forEach((function(t){e.usedNamespaces[t]||(e.usedNamespaces[t]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}();function uy(){return iy}var cy={type:"3rdParty",init:function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};oy=ry(ry({},oy),t)}(t.options.react),function(t){iy=t}(t)}};function hy(){if(console&&console.warn){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(t=console).warn.apply(t,n)}}var py={};function fy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"string"==typeof e[0]&&py[e[0]]||("string"==typeof e[0]&&(py[e[0]]=new Date),hy.apply(void 0,e))}function dy(t,e,n){t.loadNamespaces(e,(function(){t.isInitialized?n():t.on("initialized",(function e(){setTimeout((function(){t.off("initialized",e)}),0),n()}))}))}function gy(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.languages||!e.languages.length)return fy("i18n.languages were undefined or empty",e.languages),!0;var r=e.languages[0],i=!!e.options&&e.options.fallbackLng,o=e.languages[e.languages.length-1];if("cimode"===r.toLowerCase())return!0;var s=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!s(e.isLanguageChangingTo,t)||!e.hasResourceBundle(r,t)&&e.services.backendConnector.backend&&(!s(r,t)||i&&!s(o,t)))}function yy(t){return t.displayName||t.name||("string"==typeof t&&t.length>0?t:"Unknown")}function my(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?my(Object(n),!0).forEach((function(e){(0,k.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):my(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.i18n,r=(0,En.useContext)(sy)||{},i=r.i18n,o=r.defaultNS,s=n||i||uy();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new ly),!s){fy("You will need to pass in an i18next instance by using initReactI18next");var a=function(t){return Array.isArray(t)?t[t.length-1]:t},l=[a,{},!1];return l.t=a,l.i18n={},l.ready=!1,l}s.options.react&&void 0!==s.options.react.wait&&fy("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var u=vy(vy(vy({},ay()),s.options.react),e),c=u.useSuspense,h=u.keyPrefix,p=t||o||s.options&&s.options.defaultNS;p="string"==typeof p?[p]:p||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(p);var f=(s.isInitialized||s.initializedStoreOnce)&&p.every((function(t){return gy(t,s,u)}));function d(){return s.getFixedT(null,"fallback"===u.nsMode?p:p[0],h)}var g=(0,En.useState)(d),y=X(g,2),m=y[0],v=y[1],_=(0,En.useRef)(!0);(0,En.useEffect)((function(){var t=u.bindI18n,e=u.bindI18nStore;function n(){_.current&&v(d)}return _.current=!0,f||c||dy(s,p,(function(){_.current&&v(d)})),t&&s&&s.on(t,n),e&&s&&s.store.on(e,n),function(){_.current=!1,t&&s&&t.split(" ").forEach((function(t){return s.off(t,n)})),e&&s&&e.split(" ").forEach((function(t){return s.store.off(t,n)}))}}),[s,p.join()]);var b=(0,En.useRef)(!0);(0,En.useEffect)((function(){_.current&&!b.current&&v(d),b.current=!1}),[s]);var w=[m,s,f];if(w.t=m,w.i18n=s,w.ready=f,f)return w;if(!f&&!c)return w;throw new Promise((function(t){dy(s,p,(function(){t()}))}))}const by=({title:t})=>{const{t:e}=_y();return Cn().createElement("h5",null,e(t))},wy=({option:t,onClick:e})=>{const{t:n}=_y();return Cn().createElement("div",{className:"button-parent"},Cn().createElement("button",{onClick:()=>{e()}},n(t.label)))};class xy extends Cn().Component{constructor(t){super(t),this.renderBody=this.renderBody.bind(this),this.renderFooter=this.renderFooter.bind(this),this.state={}}getTitle(){return this.props.title}renderBody(){return this.props.children?this.props.children:this.props.message}renderOption(t){return Cn().createElement(wy,{key:t.value,option:t,onClick:()=>{this.close(t.value)}})}getFooterClass(t){return"modal-footer "+{1:"one",2:"two",3:"three"}[t]}getOptions(){return this.props.options}renderFooter(){const t=this.getOptions(),e=this.getFooterClass(t.length),n=[];for(const e of t)n.push(this.renderOption(e));return Cn().createElement("div",{className:e},n)}close(t){this.props.onClose&&this.props.onClose(t)}render(){return!!this.props.open&&Cn().createElement("div",{className:"modal-blocker"},Cn().createElement("div",{className:"modal-frame"},Cn().createElement("div",{className:"modal-title"},Cn().createElement(by,{title:this.getTitle()})),Cn().createElement("div",{className:"modal-body",style:this.BodyProps&&this.BodyProps.style},this.renderBody()),this.renderFooter()))}}xy.defaultProps={open:!1};const Sy=xy;var Ey=__webpack_require__(8035),Cy=__webpack_require__(2454),Ny=__webpack_require__.n(Cy),Py=[],Oy=Py.forEach,Ty=Py.slice;function Iy(t){return Oy.call(Ty.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t}var My,ky={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&"undefined"!=typeof document){var n=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null}(t.lookupCookie);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&"undefined"!=typeof document&&function(t,e,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/"};if(n){var s=new Date;s.setTime(s.getTime()+60*n*1e3),i="; expires="+s.toUTCString()}else i="";r=r?"domain="+r+";":"",o=Object.keys(o).reduce((function(t,e){return t+";"+e.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))+"="+o[e]}),""),document.cookie=t+"="+encodeURIComponent(e)+i+";"+r+o}(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},Ly={name:"querystring",lookup:function(t){var e;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");i>0&&n[r].substring(0,i)===t.lookupQuerystring&&(e=n[r].substring(i+1))}return e}};try{My="undefined"!==window&&null!==window.localStorage;var Ay="i18next.translate.boo";window.localStorage.setItem(Ay,"foo"),window.localStorage.removeItem(Ay)}catch(yA){My=!1}var Ry={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&My){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&My&&window.localStorage.setItem(e.lookupLocalStorage,t)}},Fy={name:"navigator",lookup:function(t){var e=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)e.push(navigator.languages[n]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0}},jy={name:"htmlTag",lookup:function(t){var e,n=t.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(e=n.getAttribute("lang")),e}},Dy={name:"path",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof t.lookupFromPathIndex){if("string"!=typeof n[t.lookupFromPathIndex])return;e=n[t.lookupFromPathIndex].replace("/","")}else e=n[0].replace("/","")}return e}},zy={name:"subdomain",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(e="number"==typeof t.lookupFromSubdomainIndex?n[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return e}},qy=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return F(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=Iy(e,this.options||{},{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],checkWhitelist:!0}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(ky),this.addDetector(Ly),this.addDetector(Ry),this.addDetector(Fy),this.addDetector(jy),this.addDetector(Dy),this.addDetector(zy)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var e=this;t||(t=this.options.order);var n,r=[];if(t.forEach((function(t){if(e.detectors[t]){var n=e.detectors[t].lookup(e.options);n&&"string"==typeof n&&(n=[n]),n&&(r=r.concat(n))}})),r.forEach((function(t){if(!n){var r=e.services.languageUtils.formatLanguageCode(t);e.options.checkWhitelist&&!e.services.languageUtils.isWhitelisted(r)||(n=r)}})),!n){var i=this.i18nOptions.fallbackLng;"string"==typeof i&&(i=[i]),i||(i=[]),n="[object Array]"===Object.prototype.toString.apply(i)?i[0]:i[0]||i.default&&i.default[0]}return n}},{key:"cacheUserLanguage",value:function(t,e){var n=this;e||(e=this.options.caches),e&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||e.forEach((function(e){n.detectors[e]&&n.detectors[e].cacheUserLanguage(t,n.options)})))}}]),t}();qy.type="languageDetector";const By=qy,Gy={en:{translation:JSON.parse('{"Bookmark":"Bookmark","Cancel":"Cancel","Clear":"Clear","Close":"Close","Find Me":"Find Me","Identify":"Identify","Measure":"Measure","Okay":"Okay","Print":"Print","Search":"Search","Select Features":"Select Features","Start Over":"Start Over","Zoom to Full Extent":"Zoom to Full Extent","buffer-all":"Buffer results","cancel":"Cancel","cancel-changes":"Cancel Changes","clear-features":"Clear Features","clear-features-tip":"Clear all features from the layer.","clear-previous-selection":"Clear previous selection","download-features":"Download features","download-features-tip":"Download Features to a file.","download-format":"Download format","download-help":"Choose a format then click \'Okay\' to download layer features in that format.","draw-box-label":"Draw Box","draw-edit-tip":"Edit feature properties","draw-line-tip":"Add a Line to the layer","draw-linestring-label":"Draw Line","draw-linestring-tip":"Add a LineString to the layer","draw-modify-label":"Modify Feature","draw-modify-tip":"Modify a drawn feature","draw-multipoint-label":"Draw Multi-Point","draw-open-tip":"Open drawing tools","draw-point-label":"Draw Point","draw-point-tip":"Add a Point to the layer","draw-polygon-label":"Draw Polygon","draw-polygon-tip":"Add a Polygon to the layer","draw-remove-tip":"Remove a feature from the layer","draw-select-label":"Feature from:","empty-properties":"No properties for this feature.","end":"End","end-drawing":"End Drawing","end-select":"End Selection","fade-tip":"Fade layer","favorites-help":"This tab lists all layers marked as \'Favorites\'.  Favorite layers can be selected by clicking the <i class=\'icon favorite\'></i> icon next to the layer name.","features":"Features","filter-sort":"Click to sort","finish":"End","go":"Go","grid-download-csv":"Download results as CSV","grid-min-max":"Min/Maximize Grid","label-max":"Max:","label-min":"Min:","label-value":"Value:","layer-down-tip":"Move layer down in the order","layer-refresh-tip":"Toggle automatic layer refreshing","layer-up-tip":"Move layer up in the order","layers":"Layers","map-title":"Map title","measure-area":"Area","measure-due-east":"Due East","measure-due-north":"Due North","measure-due-south":"Due South","measure-due-west":"Due West","measure-east-abbr":"E","measure-help":"Use <b>Draw line</b> to measure distances and <b>Draw Polygon</b> to measure areas.","measure-north-abbr":"N","measure-segment-length":"Segment length","measure-south-abbr":"S","measure-sq":"sq.","measure-west-abbr":"W","no-favorites":"No layers marked as favorite","page-layout":"Page layout","page-a4-landscape-legend":"A4 - Landscape with Legend","page-letter-landscape-legend":"Letter - Landscape with Legend","page-letter-landscape":"Letter - Landscape","page-letter-portrait":"Letter - Portrait","page-tabloid-landscape":"11x17 - Landscape","page-tabloid-portrait":"11x17 - Portrait","resolution":"Resolution","resolution-higher":"Higher","resolution-highest":"Highest","resolution-normal":"Normal","results-clear":"Clear results","save-changes":"Save changes","search-catalog":"Search catalog","start-service-help":"Nothing available to view. Please click a service to start in the toolbar.","toggle-legend-tip":"Toggle legend visibility.","too-many-features-title":"Too many features","too-many-features-description":"Too many features to buffer. Please, select fewer than {{max}} features.","undo-changes":"Undo Changes","unfade-tip":"Unfade layer","units":"Units","units-a":"Acres","units-ch":"Chains","units-ft":"Feet","units-h":"Hectares","units-in":"Inches","units-km":"Kilometers","units-m":"Meters","units-mi":"Miles","units-yd":"Yards","upload-file-error":"There was an error uploading the file. Please verify it is a valid GeoJSON or KML file.","upload-help":"Use the browse button to select a KML or GeoJSON file then click Okay to upload the features to the map.","upload-invalid-features":"There were {{count}} invalid features found in the file. Please check the source and try again.","upload-tip":"Upload features from a file.","upload-title":"Upload features","upload-uploaded":"There were {{count}} features uploaded","upload-uploading":"Uploading file(s)...","view-metadata-tip":"View metadata - opens new window","visible-layers-help":"This tab lists all of the visible layers. Checking a layer from the Catalog will cause the layer to appear here. Unchecking a layer\'s checkbox will cause it to disappear from this list.","with-buffer":"With buffer","zoomto-extent":"Zoom to Extent...","zoomto-results":"Zoom to results","zoomto-tip":"Zoom to layer extents.","zoom-in":"Zoom In","zoom-out":"Zoom Out"}')},es:{translation:JSON.parse('{"Bookmark":"Marcador","Cancel":"Cancelar","Clear":"Limpiar","Close":"Cerrar","Find Me":"Localizame","Identify":"Identificar objetos","Measure":"Medir","Okay":"OK","Print":"Imprimir","Search":"Buscar","Select Features":"Seleccionar objetos","Start Over":"Restablecer","Zoom to Full Extent":"Zoom a la extension","buffer-all":"Buffer objetos","cancel":"Cancelar","cancel-changes":"Cancelar los cambios","clear-features":"Limpiar objetos","clear-features-tip":"Limpiar objetos de la capa","clear-previous-selection":"Limpiar seleccion previa","download-features":"Descargar objetos","download-features-tip":"Descargar objetos a un archivo","download-help":"Elija un formato y click \'Okay\' para decsragar los objetos de la capa","draw-box-label":"Dibujar rectngulo","draw-edit-tip":"Editar atributos del objeto","draw-line-tip":"Aadir objeto lineal","draw-linestring-label":"Dibujar lnea","draw-linestring-tip":"Dibujar polilnea","draw-modify-label":"Editar geometra","draw-modify-tip":"Editar geometra existente","draw-multipoint-label":"Dibujar Multi-punto","draw-open-tip":"Abrir herramientas de dibujo","draw-point-label":"Dibujar punto","draw-point-tip":"Aadir objeto puntual","draw-polygon-label":"Dibujar polgono","draw-polygon-tip":"Aadir objeto poligonal","draw-remove-tip":"Eliminar objetos de la capa","draw-select-label":"Objetos de:","empty-properties":"No hay atributos para esta objeto.","end":"Terminar de","end-drawing":"Terminar de dibujar","end-select":"Terminar de seleccionar","fade-tip":"Oscurecer capa","favorites-help":"Esta pestaa contiene las capas seleccionadas como favoritas. Lista de capas con la <i class=\'icon favorite\'></i> seleccionada.","features":"Objetos","filter-sort":"Pulse para ordenar","finish":"Terminar","go":"OK","grid-download-csv":"Guardar como archivo CSV","grid-min-max":"Min/Maximizar Tabla","label-max":"Mx:","label-min":"Min:","label-value":"Valor:","layer-down-tip":"Mover la capa hacia abago","layer-refresh-tip":"Activar refrescado de capa automtico","layer-up-tip":"Mover la capa hacia arriba","layers":"Capas","map-title":"Titulo del mapa","measure-area":"Area","measure-due-east":"Hacia el este","measure-due-north":"Hacia el norte","measure-due-south":"Hacia el sur","measure-due-west":"Hacia Oeste","measure-east-abbr":"E","measure-help":"Use <b>Dibujar lnea</b> para medir la distancia. Use <b>Dibujar polgono</b> para medir el rea.","measure-north-abbr":"N","measure-segment-length":"Longitud del segmento","measure-south-abbr":"S","measure-sq":"<super>2</super>","measure-west-abbr":"O","no-favorites":"No hay capas favoritas.","page-layout":"Composicin de impresin","page-letter-landscape-legend":"Carta - Horizontal con leyenda","page-letter-landscape":"Carta - Horizontal","page-letter-portrait":"Carta - Vertical","page-tabloid-landscape":"A3 - Horizontal","page-tabloid-portrait":"A3 - Vertical","resolution":"Resolucin","resolution-higher":"Alta","resolution-highest":"Maxima","resolution-normal":"Normal","results-clear":"Limpiar resultados","save-changes":"Guardar los cambios","search-catalog":"Buscar en el Catalogo de capas","start-service-help":"No hay ninguna seleccion. Seleccione una opcion de la barra de herramientas","toggle-legend-tip":"Alternar visibilidad de leyenda","unfade-tip":"Aclarar capa","undo-changes":"Deshacer los cambios","units":"Unidades","units-a":"Acres","units-ch":"Chains","units-ft":"Pies","units-h":"Hectareas","units-in":"Pulgadas","units-km":"Kilmetros","units-m":"Metros","units-mi":"Millas","units-yd":"Yardas","upload-file-error":"Se produjo un error al cargar el archivo. Por favor, verifique que es un KML o GEOJSON valido","upload-help":"Utilice el boton de navegar para seleccionar un archivo KML o GEOJSON y pulse Ok para cargar los aobejtos en el mapa","upload-invalid-features":"Se encontraron {{count}} objetos invalidos en el archivo. Verifique el archivo fuente e intente nuevamente.","upload-tip":"Agregar objetos desde un archivo.","upload-title":"Agregar objetos.","upload-uploaded":"Se han aadido {{count}} objetos","upload-uploading":"Cargando archivo(s)...","view-metadata-tip":"Ver metadatos (en una nueva ventana)","visible-layers-help":"Esta pestaa muestra todas las capas visibles en el mapa. Clickando una capa del Catalogo provocara que la capa aparezca aqui. Volviendo a clickar, la capa desaparecera.","with-buffer":"Ancho de buffer","zoomto-extent":"Zoom a la extension","zoomto-results":"Zoom a la seleccion","zoomto-tip":"Zoom a la capa","zoom-in":"Acercar la imagen","zoom-out":"Alejar la imagen"}')}},Uy={order:["querystring","cookie","navigator","htmlTag"],caches:[]},Vy=class{constructor(t={}){const n=function(t){const e=Object.assign({},t);return t.resultsStyle?e.resultsStyle={highlight:Object.assign({},qd,t.resultsStyle.highlight),hot:Object.assign({},Bd,t.resultsStyle.hot)}:e.resultsStyle={highlight:qd,hot:Bd},e.selectionStyle=Object.assign({},Gd,t.selectionStyle),e}(t);this.elements=[],this.services={},this.actions={},this.config=n,(t=>{const e={},n=[];for(const r in t)n.push(fetch(t[r]).then((t=>t.json())).then((t=>{e[r]={translation:t}})));Promise.all(n).then((()=>{var t;t={detection:Uy,resources:Object.assign(Gy,e),keySeparator:!1,interpolation:{escapeValue:!1}},Pt.use(By).use(cy).init(t)}))})(t.lang||{}),function(t){var e,n,r,i,o,s,a,l,u=Object.keys(t.defs),c=u.length;for(e=0;e<c;++e){var h=u[e];if(!tn(h)){var p=t.defs(h),f=p.units;f||"longlat"!==p.projName||(f=It.DEGREES),Qe(new Mt({code:h,axisOrientation:p.axis,metersPerUnit:p.to_meter,units:f}))}}for(e=0;e<c;++e){var d=u[e],g=tn(d);for(n=0;n<c;++n){var y=u[n],m=tn(y);if(!re(d,y))if(t.defs[d]===t.defs[y])nn([g,m]);else{var v=t(d,y);r=g,i=m,o=Sn(g,m,v.forward),s=Sn(m,g,v.inverse),a=void 0,l=void 0,a=tn(r),l=tn(i),ne(a,l,on(o)),ne(l,a,on(s))}}}}(Ey.default),this.store=S(function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var o=Object.keys(n),s=void 0;try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:x}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. Don\'t try to handle @@redux/INIT or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(t){s=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var l=o[a],u=n[l],c=t[l],h=u(c,e);if(void 0===h){var p=E(l,e);throw new Error(p)}i[l]=h,r=r||h!==c}return r?i:t}}({mapSources:Dg,catalog:Fg,map:qg,toolbar:Gg,query:Wg,ui:Yg,cursor:Kg,print:$g,config:Qg,editor:ey}),function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,i){var o,s=t(n,r,i),a=s.dispatch,l={getState:s.getState,dispatch:function(t){return a(t)}};return o=e.map((function(t){return t(l)})),a=N.apply(void 0,o)(s.dispatch),P({},s,{dispatch:a})}}}(I)),this.store.dispatch(function(t){return{type:Gh,payload:t}}(n)),this.state={},this.store.subscribe((()=>{this.shouldUiUpdate()})),this.showWarnings=!0===n.showWarnings,this.experimental={};for(const t in e)this.experimental[t]=e[t].bind(this)}registerService(t,e,n={}){const r=new e(this,n);r.name=t,r.alias=n.alias||"",r.resultsConfig={...r.resultsConfig,...n.results},this.services[t]=r}registerAction(t,e,n){"object"!=typeof n&&(n={}),this.actions[t]=new e(this,n)}configureResultsLayer(t={}){this.store.dispatch(Kd({name:"blank",urls:[],type:"blank"})),this.store.dispatch(Zd("blank",{name:"blank",on:!1,label:"No basemap"})),this.store.dispatch(Kd({name:"results",urls:[],type:"vector",label:"Results",opacity:1,queryable:!1,refresh:null,options:{"always-on":!0},params:{},zIndex:200001}));const e=Object.assign({},qd,t.highlight);this.store.dispatch(Zd("results",{name:"results",on:!0,label:"Results",selectable:!0,style:e}));const n=Object.assign({},Bd,t.hot);this.store.dispatch(Zd("results",{name:"results-hot",on:!0,style:n,filter:["==","displayClass","hot"]}))}configureSelectionLayer(t,e){this.store.dispatch(Kd({name:"selection",urls:[],type:"vector",label:"Selection",opacity:1,queryable:!1,refresh:null,layers:[],options:{"always-on":!0},params:{},zIndex:200002}));const n=Object.assign({},Gd,t);this.store.dispatch(Zd("selection",{name:"selection",on:!0,style:n,filter:null})),this.store.dispatch(Kd({name:Vd,urls:[],type:"vector",opacity:1,queryable:!1,refresh:null,layers:[],options:{"always-on":!0},params:{},zIndex:200003})),this.store.dispatch(Zd(Vd,{name:Vd,on:!0,style:Object.assign({},Ud,e),filter:null}))}populateMapbook(t){let e=t;"string"==typeof t&&(e=(new DOMParser).parseFromString(t,"text/xml")),this.configureSelectionLayer(this.config.selectionStyle,this.config.editStyle),this.configureResultsLayer(this.config.resultsStyle);const n=e.getElementsByTagName("map-source");for(let t=0,e=n.length;t<e;t++){const e=tg(n[t],this.config);for(const t of e)this.store.dispatch(t)}const r=Mg(this.store,e.getElementsByTagName("catalog")[0]);for(const t of r)this.store.dispatch(t);const i=Rg(e.getElementsByTagName("toolbar")[0]);for(const t of i)this.store.dispatch(t);return e}loadMapbook(t={}){const e={...t.fetchOpts};let n=t.url;if(this.config.mapbooks){const t=yc().query.mapbook||"default";t&&this.config.mapbooks[t]&&(n=this.config.mapbooks[t])}return n?fetch(n,e).then((t=>t.text())).then((t=>this.populateMapbook(t))):t.content?new Promise(((e,n)=>{e(this.populateMapbook(t.content))})):void alert("No mapbook configured.")}add(t,e,n={}){const r=Object.assign({store:this.store},n);r.services=this.services;const i=Cn().createElement(t,r);return Pn().render(i,document.getElementById(e))}addPlugin(t,e,n={}){const r=Object.assign({store:this.store,React:Cn(),ReactDOM:Pn()},n);r.services=this.services;const i=Cn().createElement(t,r);return Pn().render(i,document.getElementById(e))}dispatchQuery(t,e,n,r,i=[]){const o=!this.config.multipleQuery,s=[];let a=i;"string"==typeof i&&(a=[i]);for(const t of r)for(const e of a)s.push(this.getTemplate(t,e));const l=function(t){const e={};return["zoomToResults","gridMinimized"].forEach((n=>{e[n]=!0===t[n]})),e}(this.services[t]);Promise.all(s).then((()=>{this.store.dispatch(function(t,e,n,r,i,o={}){return{type:mh,query:{service:t,selection:e,fields:n,layers:r,runOptions:o},singleQuery:i}}(t,e,n,r,o,l))}))}getTemplate(t,e){return new Promise(((n,r)=>{if("@"===e.substring(0,1)){const r=e.substring(1),i=og(this.store.getState().mapSources,t),o=i.templates[r];if(o)if("alias"===o.type)n(i.templates[o.alias].contents);else if("remote"===o.type){const e=wc(t),i=xc(t);fetch(o.src).then((t=>t.text())).then((t=>{this.store.dispatch(function(t,e,n,r){return{type:oh.SET_TEMPLATE,mapSourceName:t,layerName:e,name:n,template:r}}(e,i,r,{type:"local",contents:t})),n(t)})).catch((()=>{n("")}))}else n(i.templates[r].contents);else n("")}}))}renderFeaturesWithTemplate(t,e,n){let r=n,i="";if(t.results[e])if(!0===t.results[e].failed)i=`\n                    <div class="query-error">\n                        <div class="error-header">Error</div>\n                        <div class="error-contents">\n                        ${t.results[e].failureMessage}\n                        </div>\n                    </div>\n                `;else if("@"===n.substring(0,1)){const o=n.substring(1),s=og(this.store.getState().mapSources,e),a=s.templates[o];if(a?r="alias"===a.type?s.templates[a.alias].contents:s.templates[o].contents:(r=null,this.showWarnings&&console.info("Failed to find template.",e,o)),r)for(const n of t.results[e])i+=Ny().up(r,n,Ec);else if(a&&"auto"===a.type){const n=t.results[e];for(let t=0,e=n.length;t<e;t++){const e=n[t];i+='<div class="result">',i+='<div class="feature-class">',i+=s.label,i+="</div>";const r=Object.keys(e.properties||{}).filter((t=>"_uuid"!==t));if(r.length>0)for(let t=0,n=r.length;t<n;t++){const n=r[t],o=e.properties[n];i+=Ny().up("<b>{{ key }}:</b> {{ value }} <br/>",{key:n,value:o},Ec)}else i+="<i>"+Pt.t("empty-properties")+"</i>";i+="</div>"}}}else if(n)for(const r of t.results[e])i+=Ny().up(n,r,Ec);return i}renderTemplate(t,e,n){if("@"===e.substring(0,1)){const r=e.substring(1),i=og(this.store.getState().mapSources,t),o=i.templates[r];let s="";if(o)return s="alias"===o.type?i.templates[o.alias].contents:i.templates[r].contents,Ny().up(s,n,Ec)}return""}getActiveMapSources(){return ig(this.store.getState().mapSources)}getVisibleLayers(){return lg(this.store.getState().mapSources)}getQueryableLayers(t){return cg(this.store.getState().mapSources,t)}zoomToExtent(t,e){this.store.dispatch($h(t,e))}zoomTo(t,e,n){const r=hn([t,e],"EPSG:4326","EPSG:3857");this.store.dispatch(function(t,e){return{type:hh,center:t,zoom:e}}(r,n))}dispatch(t){this.store.dispatch(t)}clearFeatures(t){const e=wc(t);this.store.dispatch(pg(e))}addFeatures(t,e){const n=wc(t);this.store.dispatch(hg(n,e))}removeQueryResults(t,e,n={}){const r=n=>{"confirm"===n&&(this.store.dispatch(function(t){return{type:vh,id:t}}(t)),this.store.dispatch(function(t,e){return{type:Sh,id:t,filter:e}}(t,e)),this.removeFeatures("results/results",e),this.store.dispatch(Xh(t)))};n.withConfirm?this.confirm("remove-feature","Remove feature?",r):r("confirm")}removeFeatures(t,e){const n=wc(t);this.store.dispatch(function(t,e){return{type:oh.REMOVE_FEATURES,mapSourceName:t,filter:e}}(n,e))}changeFeatures(t,e,n){const r=wc(t);this.store.dispatch(fg(r,e,n))}changeResultFeatures(t,e){this.changeFeatures("results/results",t,e)}clearHint(){this.store.dispatch({type:Fh})}shouldUiUpdate(){const t=this.store.getState().ui;t.stateId!==this.state.stateId&&(this.state.stateId=t.stateId,this.runAction(),this.uiUpdate(t))}runAction(){const t=this.store.getState().ui;t.action&&(this.actions[t.action].run(),this.store.dispatch({type:Dh}))}startAction(t){this.store.dispatch(wg(t))}startService(t,e){this.store.dispatch(Eg(t));const n=e&&e.changeTool?e.changeTool:this.services[t].tools.default;this.store.dispatch(Hh(n)),e&&e.withFeatures&&(this.store.dispatch(np(0)),this.store.dispatch(Jh()),e.withFeatures.forEach((t=>{this.store.dispatch(Zh(t))})),this.store.dispatch(pg("selection")),this.store.dispatch(hg("selection",e.withFeatures))),this.store.dispatch(bg("service-start"))}uiUpdate(){}alert(t,e,n=null){this.showDialog(t,"Alert",e,[{label:"Okay",value:"dismiss"}],n)}confirm(t,e,n=null){this.showDialog(t,"Confirm",e,[{label:"Cancel",value:"dismiss"},{label:"Okay",value:"confirm"}],n)}showDialog(t,e,n,r,i=null){const o=document.getElementsByTagName("body")[0],s=document.createElement("div");o.appendChild(s);const a={title:e,onClose:t=>{"function"==typeof i&&i(t),o.removeChild(s)},options:r,message:n,open:!0},l=Cn().createElement(Sy,a);Pn().render(l,s)}showModal(t){this.store.dispatch(xg(t))}setView(t){this.store.dispatch(ep(t))}addProjection(t){Ac(Ey.default,t.ref,t.def)}highlightFeatures(t,e){const n={displayClass:e?"hot":""};this.changeResultFeatures(t,n)}clearHighlight(){this.highlightFeatures({displayClass:"hot"},!1)}lonLatToMeters(t,e){return hn([t,e],"EPSG:4326","EPSG:3857")}bboxToMeters(t,e,n,r){const[i,o]=this.lonLatToMeters(t,e),[s,a]=this.lonLatToMeters(n,r);return[i,o,s,a]}};function Wy(t,e){if(null==t)return{};var n,r,i=Rn(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Hy=["ns","children"];function Yy(t){var e=t.ns,n=t.children,r=X(_y(e,Wy(t,Hy)),3),i=r[0],o=r[1],s=r[2];return n(i,{i18n:o,lng:o.language},s)}class Xy extends Cn().Component{render(){const t=this.props.group;let e="group",n="";return t.expand?(e+=" gm-expand",n="open"):e+=" gm-collapse",Cn().createElement("div",{key:t.id,className:e},Cn().createElement("div",{onClick:()=>{this.props.onExpand()},className:"group-label"},Cn().createElement("i",{className:"folder icon "+n}),t.label),Cn().createElement("div",{className:"children"},this.props.children))}}Xy.defaultProps={onExpand:()=>{}},Xy.propTypes={onExpand:In().func,group:In().object.isRequired};const Ky=({tip:t,iconClass:e,onClick:n,children:r,active:i})=>{const{t:o}=_y();return Cn().createElement(Cn().Fragment,null,Cn().createElement("i",{className:(i?"active icon ":"icon ")+e,onClick:n,title:o(t)}),r)};Ky.defaultProps={onClick:()=>{},iconClass:"",tip:"",active:!1};class Zy extends Cn().Component{constructor(t){super(t),this.state={open:!1}}render(){return Cn().createElement(Ky,{tip:"clear-features-tip",iconClass:"clear",onClick:()=>{this.setState({open:!0})}},!!this.state.open&&Cn().createElement(Sy,{title:"Clear features",open:this.state.open,onClose:()=>{this.setState({open:!1});const t=this.props.layer.src[0];this.props.clearFeatures(t.mapSourceName)},options:[{label:"Cancel",value:"dismiss"},{label:"Clear",value:"clear"}]},"Remove all features from selected layer?"))}}const $y=ar(void 0,(function(t){return{clearFeatures:e=>{t(pg(e))}}}))(Zy);class Jy extends Cn().Component{onClick(){const t=this.props.layer.src[0],e=Xc(this.props.catalog,this.props.mapSources),n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];if(o.layer.src[0].mapSourceName===t.mapSourceName){const s=r+this.props.direction;if(s>=0&&s<i){const r=o.zIndex,i=e[s].zIndex,a=e[s].layer.src[0].mapSourceName;n.push({mapSourceName:t.mapSourceName,z:i}),n.push({mapSourceName:a,z:r})}}}for(let t=0,e=n.length;t<e;t++){const e=n[t];this.props.setZIndex(e.mapSourceName,e.z)}}render(){return Cn().createElement(Ky,{tip:this.props.tip,iconClass:this.props.iconClass,onClick:()=>{this.onClick()}})}}Jy.defaultProps={tip:"layer-up-tip",iconClass:"up",direction:-1,setZIndex:function(){}};const Qy=ar((function(t){return{catalog:t.catalog,mapSources:t.mapSources}}),(function(t){return{setZIndex:(e,n)=>{t(function(t,e){return{type:oh.SET_Z,mapSourceName:t,zIndex:e}}(e,n))}}}))(Jy);class tm extends Qy{}tm.defaultProps={tip:"layer-down-tip",iconClass:"down",direction:1};var em=__webpack_require__(8598),nm=__webpack_require__.n(em);const rm=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),im="fraction",om="pixels",sm="bottom-left",am="bottom-right",lm="top-left",um="top-right";function cm(t){return t[0]>0&&t[1]>0}function hm(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function pm(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}const fm=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=pm(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return oe()},t.prototype.getImage=function(t){return oe()},t.prototype.getHitDetectionImage=function(){return oe()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return oe()},t.prototype.getImageSize=function(){return oe()},t.prototype.getOrigin=function(){return oe()},t.prototype.getSize=function(){return oe()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=pm(t)},t.prototype.listenImageChange=function(t){oe()},t.prototype.load=function(){oe()},t.prototype.unlistenImageChange=function(t){oe()},t}();var dm=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,gm=/^([a-z]*)$|^hsla?\(.*\)$/i;function ym(t){return"string"==typeof t?t:bm(t)}var mm=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var i=0;for(var o in t)0==(3&i++)&&(delete t[o],--e)}r=function(t){var e,n,r,i,o;if(gm.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(t)),dm.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),i=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,l&&(i=(i<<4)+i)),o=[e,n,r,i/255]}else 0==t.indexOf("rgba(")?_m(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),_m(o)):ce(!1,14);return o}(n),t[n]=r,++e}return r}}();function vm(t){return Array.isArray(t)?t:mm(t)}function _m(t){return t[0]=kt(t[0]+.5|0,0,255),t[1]=kt(t[1]+.5|0,0,255),t[2]=kt(t[2]+.5|0,0,255),t[3]=kt(t[3],0,1),t}function bm(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:t[3])+")"}function wm(t,e,n,r){var i;return n&&n.length?i=n.shift():di?i=new OffscreenCanvas(t||300,e||300):(i=document.createElement("canvas")).style.all="unset",t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}function xm(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function Sm(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var Em=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var r=Cm(t,e,n);return r in this.cache_?this.cache_[r]:null},t.prototype.set=function(t,e,n,r){var i=Cm(t,e,n);this.cache_[i]=r,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Cm(t,e,n){return e+":"+t+":"+(n?ym(n):"null")}var Nm=new Em,Pm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Om=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=r,o.resolution=n,o.state=i,o}return Pm(e,t),e.prototype.changed=function(){this.dispatchEvent(Br)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return oe()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){oe()},e}(qr);var Tm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Im(t,e,n){var r=t;if(r.src&&gi){var i=r.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){o=!1}}var s=[Zr(r,"load",e),Zr(r,"error",n)];return function(){s.forEach($r)}}const Mm=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e,n,r,0)||this;return a.src_=i,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}return Tm(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Re(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Im(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Re(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Om);var km=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lm=null,Am=function(t){function e(e,n,r,i,o,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==i&&(a.image_.crossOrigin=i),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=o,a.size_=r,a.src_=n,a.tainted_,a}return km(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Lm||(Lm=wm(1,1)),Lm.drawImage(this.image_,0,0);try{Lm.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Lm=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Br)},e.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],n=wm(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Im(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var n=e.getContext("2d");if(n.scale(t,t),n.drawImage(this.image_,0,0),n.globalCompositeOperation="multiply","multiply"===n.globalCompositeOperation||this.isTainted_())n.fillStyle=ym(this.color_),n.fillRect(0,0,e.width/t,e.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.image_,0,0);else{for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=this.color_[0]/255,s=this.color_[1]/255,a=this.color_[2]/255,l=this.color_[3],u=0,c=i.length;u<c;u+=4)i[u]*=o,i[u+1]*=s,i[u+2]*=a,i[u+3]*=l;n.putImageData(r,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(qr),Rm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fm=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.opacity?r.opacity:1,o=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;(n=t.call(this,{opacity:i,rotation:o,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:a})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:lm,n.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:im,n.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:im,n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var l=void 0!==r.img?r.img:null,u=void 0!==r.imgSize?r.imgSize:null,c=r.src;ce(!(void 0!==c&&l),4),ce(!l||l&&u,5),void 0!==c&&0!==c.length||!l||(c=l.src||ae(l)),ce(void 0!==c&&c.length>0,6);var h=void 0!==r.src?0:2;return n.color_=void 0!==r.color?vm(r.color):null,n.iconImage_=function(t,e,n,r,i,o){var s=Nm.get(e,r,o);return s||(s=new Am(t,e,n,r,i,o),Nm.set(e,r,o,s)),s}(l,c,u,n.crossOrigin_,h,n.color_),n.offset_=void 0!==r.offset?r.offset:[0,0],n.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:lm,n.origin_=null,n.size_=void 0!==r.size?r.size:null,n}return Rm(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==im||this.anchorYUnits_==im){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==im&&(t[0]*=e[0]),this.anchorYUnits_==im&&(t[1]*=e[1])}if(this.anchorOrigin_!=lm){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=um&&this.anchorOrigin_!=am||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=sm&&this.anchorOrigin_!=am||(t[1]=-t[1]+e[1])}var n=this.getDisplacement();return t[0]-=n[0],t[1]+=n[1],this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=lm){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=um&&this.offsetOrigin_!=am||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=sm&&this.offsetOrigin_!=am||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Br,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Br,t)},e}(fm);const jm=Fm;const Dm=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();function zm(t){return Array.isArray(t)?bm(t):t}var qm="ol-hidden",Bm="ol-control",Gm=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Um=["style","variant","weight","size","lineHeight","family"],Vm=function(t){var e=t.match(Gm);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=Um.length;r<i;++r){var o=e[r+1];void 0!==o&&(n[Um[r]]=o)}return n.families=n.family.split(/,\s?/),n};function Wm(t){return 1===t?"":String(Math.round(100*t)/100)}var Hm="10px sans-serif",Ym="#000",Xm="round",Km=[],Zm="round",$m="#000",Jm="center",Qm="middle",tv=[0,0,0,0],ev=new ii,nv=new qr;nv.setSize=function(){console.warn("labelCache is deprecated.")};var rv,iv,ov=null,sv={},av=function(){var t,e,n="32px ",r=["monospace","serif"],i=r.length,o="wmytzilWMYTZIL@#/&?$%10";function s(t,s,a){for(var l=!0,u=0;u<i;++u){var c=r[u];if(e=uv(t+" "+s+" "+n+c,o),a!=c){var h=uv(t+" "+s+" "+n+a+","+c,o);l=l&&h!=e}}return!!l}function a(){for(var e=!0,n=ev.getKeys(),r=0,i=n.length;r<i;++r){var o=n[r];ev.get(o)<100&&(s.apply(this,o.split("\n"))?(Rr(sv),ov=null,rv=void 0,ev.set(o,100)):(ev.set(o,ev.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=Vm(e);if(n)for(var r=n.families,i=0,o=r.length;i<o;++i){var l=r[i],u=n.style+"\n"+n.weight+"\n"+l;void 0===ev.get(u)&&(ev.set(u,100,!0),s(n.style,n.weight,l)||(ev.set(u,0,!0),void 0===t&&(t=setInterval(a,32))))}}}();function lv(t,e){return ov||(ov=wm(1,1)),t!=rv&&(ov.font=t,rv=ov.font),ov.measureText(e)}function uv(t,e){return lv(t,e).width}function cv(t,e,n){if(e in n)return n[e];var r=uv(t,e);return n[e]=r,r}var hv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pv=function(t){function e(e){var n=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return(n=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=void 0!==e.fill?e.fill:null,n.origin_=[0,0],n.points_=e.points,n.radius_=void 0!==e.radius?e.radius:e.radius1,n.radius2_=e.radius2,n.angle_=void 0!==e.angle?e.angle:0,n.stroke_=void 0!==e.stroke?e.stroke:null,n.anchor_=null,n.size_=null,n.renderOptions_=null,n.render(),n}return hv(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var n=this.renderOptions_,r=wm(n.size*t,n.size*t);this.draw_(n,r,t),e=r.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,i=void 0===this.radius2_?r:this.radius2_;if(r<i){var o=r;r=i,i=o}var s=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/s,l=i*Math.sin(a),u=r-Math.sqrt(i*i-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=n)return h*e;var p=e/2/h,f=e/2*(u/c),d=Math.sqrt((r+p)*(r+p)+f*f)-r;if(void 0===this.radius2_||"bevel"===t)return 2*d;var g=r*Math.sin(a),y=i-Math.sqrt(r*r-g*g),m=Math.sqrt(g*g+y*y)/g;if(m<=n){var v=m*e/2-i-r;return 2*Math.max(d,v)}return 2*d},e.prototype.createRenderOptions=function(){var t,e=Zm,n=0,r=null,i=0,o=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=$m),t=zm(t),void 0===(o=this.stroke_.getWidth())&&(o=1),r=this.stroke_.getLineDash(),i=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=Zm),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=this.calculateLineJoinSize_(e,o,n),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*a+s),lineDash:r,lineDashOffset:i,lineJoin:e,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,e=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-e[0],t/2+e[1]],this.size_=[t,t]},e.prototype.draw_=function(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var r=this.fill_.getColor();null===r&&(r=Ym),e.fillStyle=zm(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=vm(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var r=wm(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{var r=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/e,s=0;s<e;s++){var a=i+s*o,l=s%2==0?n:r;t.lineTo(l*Math.cos(a),l*Math.sin(a))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ym,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(fm);const fv=pv;var dv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gv=function(t){function e(e){var n=e||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this}return dv(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(fv);const yv=gv;var mv=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=wv,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=wv,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),vv=null;function _v(t,e){if(!vv){var n=new rm({color:"rgba(255,255,255,0.4)"}),r=new Dm({color:"#3399CC",width:1.25});vv=[new mv({image:new yv({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return vv}function bv(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new mv({fill:new rm({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new mv({stroke:new Dm({color:e,width:5})}),new mv({stroke:new Dm({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new mv({image:new yv({radius:6,fill:new rm({color:n}),stroke:new Dm({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function wv(t){return t.getGeometry()}const xv=mv;const Sv=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=pm(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new rm({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=pm(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();var Ev,Cv,Nv,Pv,Ov,Tv,Iv,Mv,kv,Lv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Av=["http://www.google.com/kml/ext/2.2"],Rv=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Fv={fraction:im,pixels:om,insetPixels:om},jv=_p(Rv,{ExtendedData:M_,Region:k_,MultiGeometry:dp(x_,"geometry"),LineString:dp(__,"geometry"),LinearRing:dp(b_,"geometry"),Point:dp(S_,"geometry"),Polygon:dp(C_,"geometry"),Style:dp(P_),StyleMap:function(t,e){var n=o_.call(this,t,e);if(n){var r=e[e.length-1];Array.isArray(n)?r.Style=n:"string"==typeof n?r.styleUrl=n:ce(!1,38)}},address:dp(Dp),description:dp(Dp),name:dp(Dp),open:dp(Ap),phoneNumber:dp(Dp),styleUrl:dp(n_),visibility:dp(Ap)},_p(Av,{MultiTrack:dp((function(t,e){var n=wp([],p_,t,e);if(n)return new Do(n)}),"geometry"),Track:dp(d_,"geometry")})),Dv=_p(Rv,{ExtendedData:M_,Region:k_,Link:function(t,e){bp(zv,t,e)},address:dp(Dp),description:dp(Dp),name:dp(Dp),open:dp(Ap),phoneNumber:dp(Dp),visibility:dp(Ap)}),zv=_p(Rv,{href:dp(e_)}),qv=_p(Rv,{LatLonAltBox:function(t,e){var n=wp({},R_,t,e);if(n){var r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}},Lod:function(t,e){var n=wp({},F_,t,e);if(n){var r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}}}),Bv=_p(Rv,["Document","Placemark"]),Gv=_p(Rv,{Document:gp((function(t,e,n){xp({node:t},B_,G_,e,n,void 0,this)})),Placemark:gp(pb)}),Uv=null,Vv=null,Wv=null,Hv=null,Yv=null,Xv=null;function Kv(t){return 32/Math.min(t[0],t[1])}function Zv(t){return t}var $v=function(t){function e(e){var n=t.call(this)||this,r=e||{};return Xv||(Uv=new rm({color:Ev=[255,255,255,1]}),Tv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Vv=new jm({anchor:Cv=[20,2],anchorOrigin:sm,anchorXUnits:Nv=om,anchorYUnits:Pv=om,crossOrigin:"anonymous",rotation:0,scale:Kv(Ov=[64,64]),size:Ov,src:Tv}),Iv="NO_IMAGE",Wv=new Dm({color:Ev,width:1}),Mv=new Dm({color:[51,51,51,1],width:2}),Hv=new Sv({font:"bold 16px Helvetica",fill:Uv,stroke:Mv,scale:.8}),Yv=new xv({fill:Uv,image:Vv,text:Hv,stroke:Wv,zIndex:0}),Xv=[Yv]),n.dataProjection=tn("EPSG:4326"),n.defaultStyle_=r.defaultStyle?r.defaultStyle:Xv,n.extractStyles_=void 0===r.extractStyles||r.extractStyles,n.writeStyles_=void 0===r.writeStyles||r.writeStyles,n.sharedStyles_={},n.showPointNames_=void 0===r.showPointNames||r.showPointNames,n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",n.iconUrlFunction_=r.iconUrlFunction?r.iconUrlFunction:Zv,n.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],n}return Lv(e,t),e.prototype.readDocumentOrFolder_=function(t,e){return wp([],_p(Rv,{Document:hp(this.readDocumentOrFolder_,this),Folder:hp(this.readDocumentOrFolder_,this),Placemark:pp(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var n,r,i,o,s,a=wp({geometry:null},jv,t,e,this);if(a){var l=new ai,u=t.getAttribute("id");null!==u&&l.setId(u);var c=e[0],h=a.geometry;if(h&&Hi(h,!1,c),l.setGeometry(h),delete a.geometry,this.extractStyles_){var p=(n=a.Style,r=a.styleUrl,i=this.defaultStyle_,o=this.sharedStyles_,s=this.showPointNames_,function(t,e){var a=s,l="",u=[];if(a){var c=t.getGeometry();if(c){var h=c.getType();h===zi?(u=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Li||e===Fi})),a=u.length>0):a=h===Li||h===Fi}}a&&(l=t.get("name"),(a=a&&!!l)&&l.search(/&[^&]+;/)>-1&&(kv||(kv=document.createElement("textarea")),kv.innerHTML=l,l=kv.value));var p=i;if(n?p=n:r&&(p=Jv(r,i,o)),a){var f=function(t,e){var n=[0,0],r="start",i=t.getImage();if(i){var o=i.getSize();if(o&&2==o.length){var s=i.getScaleArray(),a=i.getAnchor();n[0]=s[0]*(o[0]-a[0]),n[1]=s[1]*(o[1]/2-a[1]),r="left"}}var l=t.getText();return l?((l=l.clone()).setFont(l.getFont()||Hv.getFont()),l.setScale(l.getScale()||Hv.getScale()),l.setFill(l.getFill()||Hv.getFill()),l.setStroke(l.getStroke()||Mv)):l=Hv.clone(),l.setText(e),l.setOffsetX(n[0]),l.setOffsetY(n[1]),l.setTextAlign(r),new xv({image:i,text:l})}(p[0],l);return u.length>0?(f.setGeometry(new Vi(u)),[f,new xv({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null})].concat(p.slice(1))):f}return p});l.setStyle(p)}return delete a.Style,l.setProperties(a,!0),l}},e.prototype.readSharedStyle_=function(t,e){var n=t.getAttribute("id");if(null!==n){var r=P_.call(this,t,e);if(r){var i=void 0,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+n,o).href:"#"+n,this.sharedStyles_[i]=r}}},e.prototype.readSharedStyleMap_=function(t,e){var n=t.getAttribute("id");if(null!==n){var r=o_.call(this,t,e);if(r){var i,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+n,o).href:"#"+n,this.sharedStyles_[i]=r}}},e.prototype.readFeatureFromNode=function(t,e){return Nr(Rv,t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){if(!Nr(Rv,t.namespaceURI))return[];var n,r=t.localName;if("Document"==r||"Folder"==r)return(n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==r){n=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,e);s&&Tr(n,s)}return n}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=cp(t);return this.readNameFromDocument(e)}return up(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var n=this.readNameFromNode(e);if(n)return n}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(Nr(Rv,e.namespaceURI)&&"name"==e.localName)return Dp(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var n=e.localName;if(Nr(Rv,e.namespaceURI)&&("Document"==n||"Folder"==n||"Placemark"==n||"kml"==n)){var r=this.readNameFromNode(e);if(r)return r}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var n=cp(t);Tr(e,this.readNetworkLinksFromDocument(n))}else up(t)?Tr(e,this.readNetworkLinksFromDocument(t)):Tr(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Tr(e,this.readNetworkLinksFromNode(n));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],n=t.firstElementChild;n;n=n.nextElementSibling)if(Nr(Rv,n.namespaceURI)&&"NetworkLink"==n.localName){var r=wp({},Dv,n,[]);e.push(r)}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;!Nr(Rv,n.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Tr(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var n=cp(t);Tr(e,this.readRegionFromDocument(n))}else up(t)?Tr(e,this.readRegionFromDocument(t)):Tr(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Tr(e,this.readRegionFromNode(n));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],n=t.firstElementChild;n;n=n.nextElementSibling)if(Nr(Rv,n.namespaceURI)&&"Region"==n.localName){var r=wp({},qv,n,[]);e.push(r)}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;!Nr(Rv,n.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Tr(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=sp(Rv[4],"kml"),r="http://www.w3.org/2000/xmlns/";n.setAttributeNS(r,"xmlns:gx",Av[0]),n.setAttributeNS(r,"xmlns:xsi",op),n.setAttributeNS(op,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:n},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=Bv[n.namespaceURI],a=vp(o,s);return xp(i,Gv,mp,a,[e],s,this),n},e}(Op);function Jv(t,e,n){return Array.isArray(t)?t:"string"==typeof t?Jv(n[t],e,n):e}function Qv(t){var e=ap(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){var r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function t_(t){var e=ap(t,!1),n=[];e=e.replace(/\s*,\s*/g,",");for(var r,i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=i.exec(e);){var o=parseFloat(r[1]),s=parseFloat(r[2]),a=r[3]?parseFloat(r[3]):0;n.push(o,s,a),e=e.substr(r[0].length)}if(""===e)return n}function e_(t){var e=ap(t,!1).trim(),n=t.baseURI;return n&&"about:blank"!=n||(n=window.location.href),n?new URL(e,n).href:e}function n_(t){var e=ap(t,!1).trim().replace(/^(?!.*#)/,"#"),n=t.baseURI;return n&&"about:blank"!=n||(n=window.location.href),n?new URL(e,n).href:e}function r_(t){return Rp(t)}var i_=_p(Rv,{Pair:function(t,e){var n=wp({},L_,t,e,this);if(n){var r=n.key;if(r&&"normal"==r){var i=n.styleUrl;i&&(e[e.length-1]=i);var o=n.Style;o&&(e[e.length-1]=o)}}}});function o_(t,e){return wp(void 0,i_,t,e,this)}var s_=_p(Rv,{Icon:dp((function(t,e){return wp({},g_,t,e)||null})),color:dp(Qv),heading:dp(Rp),hotSpot:dp((function(t){var e,n=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==n?"insetPixels"!==r?sm:lm:"insetPixels"!==r?am:um,{x:parseFloat(t.getAttribute("x")),xunits:Fv[n],y:parseFloat(t.getAttribute("y")),yunits:Fv[r],origin:e}})),scale:dp(r_)}),a_=_p(Rv,{color:dp(Qv),scale:dp(r_)}),l_=_p(Rv,{color:dp(Qv),width:dp(Rp)}),u_=_p(Rv,{color:dp(Qv),fill:dp(Ap),outline:dp(Ap)}),c_=_p(Rv,{coordinates:fp(t_)});function h_(t,e){return wp(null,c_,t,e)}var p_=_p(Av,{Track:pp(d_)}),f_=_p(Rv,{when:function(t,e){var n=e[e.length-1].whens,r=ap(t,!1),i=Date.parse(r);n.push(isNaN(i)?0:i)}},_p(Av,{coord:function(t,e){var n=e[e.length-1].coordinates,r=ap(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(i){var o=parseFloat(i[1]),s=parseFloat(i[2]),a=parseFloat(i[3]);n.push([o,s,a])}else n.push([])}}));function d_(t,e){var n=wp({coordinates:[],whens:[]},f_,t,e);if(n){for(var r=[],i=n.coordinates,o=n.whens,s=0,a=Math.min(i.length,o.length);s<a;++s)3==i[s].length&&r.push(i[s][0],i[s][1],i[s][2],o[s]);return new Ro(r,ro)}}var g_=_p(Rv,{href:dp(e_)},_p(Av,{x:dp(Rp),y:dp(Rp),w:dp(Rp),h:dp(Rp)})),y_=_p(Rv,{coordinates:fp(t_)});function m_(t,e){return wp(null,y_,t,e)}var v_=_p(Rv,{extrude:dp(Ap),tessellate:dp(Ap),altitudeMode:dp(Dp)});function __(t,e){var n=wp({},v_,t,e),r=m_(t,e);if(r){var i=new Ro(r,eo);return i.setProperties(n,!0),i}}function b_(t,e){var n=wp({},v_,t,e),r=m_(t,e);if(r){var i=new os(r,eo,[r.length]);return i.setProperties(n,!0),i}}var w_=_p(Rv,{LineString:pp(__),LinearRing:pp(b_),MultiGeometry:pp(x_),Point:pp(S_),Polygon:pp(C_)});function x_(t,e){var n,r=wp([],w_,t,e);if(!r)return null;if(0===r.length)return new Vi(r);for(var i=!0,o=r[0].getType(),s=1,a=r.length;s<a;++s)if(r[s].getType()!=o){i=!1;break}if(i){var l=void 0,u=void 0;if(o==Li){var c=r[0];for(l=c.getLayout(),u=c.getFlatCoordinates(),s=1,a=r.length;s<a;++s)Tr(u,r[s].getFlatCoordinates());O_(n=new Vo(u,l),r)}else o==Ai?O_(n=new Do(r),r):o==Ri?O_(n=new hs(r),r):o==zi?n=new Vi(r):ce(!1,37)}else n=new Vi(r);return n}function S_(t,e){var n=wp({},v_,t,e),r=m_(t,e);if(r){var i=new Bo(r,eo);return i.setProperties(n,!0),i}}var E_=_p(Rv,{innerBoundaryIs:function(t,e){var n=wp([],j_,t,e);if(n.length>0){var r=e[e.length-1];r.push.apply(r,n)}},outerBoundaryIs:function(t,e){var n=wp(void 0,D_,t,e);n&&(e[e.length-1][0]=n)}});function C_(t,e){var n=wp({},v_,t,e),r=wp([null],E_,t,e);if(r&&r[0]){for(var i=r[0],o=[i.length],s=1,a=r.length;s<a;++s)Tr(i,r[s]),o.push(i.length);var l=new os(i,eo,o);return l.setProperties(n,!0),l}}var N_=_p(Rv,{IconStyle:function(t,e){var n=wp({},s_,t,e);if(n){var r,i,o,s,a=e[e.length-1],l="Icon"in n?n.Icon:{},u=!("Icon"in n)||Object.keys(l).length>0,c=l.href;c?r=c:u&&(r=Tv);var h,p=sm,f=n.hotSpot;f?(i=[f.x,f.y],o=f.xunits,s=f.yunits,p=f.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(i=Cv,o=Nv,s=Pv):/arrow-reverse/.test(r)?(i=[54,42],o=Nv,s=Pv):/paddle/.test(r)&&(i=[32,1],o=Nv,s=Pv));var d,g=l.x,y=l.y;void 0!==g&&void 0!==y&&(h=[g,y]);var m,v=l.w,_=l.h;void 0!==v&&void 0!==_&&(d=[v,_]);var b=n.heading;void 0!==b&&(m=jt(b));var w=n.scale,x=n.color;if(u){r==Tv&&(d=Ov);var S=new jm({anchor:i,anchorOrigin:p,anchorXUnits:o,anchorYUnits:s,crossOrigin:this.crossOrigin_,offset:h,offsetOrigin:sm,rotation:m,scale:w,size:d,src:this.iconUrlFunction_(r),color:x}),E=S.getScaleArray()[0],C=S.getSize();if(null===C){var N=S.getImageState();if(0===N||1===N){var P=function(){var t=S.getImageState();if(0!==t&&1!==t){var e=S.getSize();if(e&&2==e.length){var n=Kv(e);S.setScale(E*n)}S.unlistenImageChange(P)}};S.listenImageChange(P),0===N&&S.load()}}else if(2==C.length){var O=Kv(C);S.setScale(E*O)}a.imageStyle=S}else a.imageStyle=Iv}},LabelStyle:function(t,e){var n=wp({},a_,t,e);if(n){var r=e[e.length-1],i=new Sv({fill:new rm({color:"color"in n?n.color:Ev}),scale:n.scale});r.textStyle=i}},LineStyle:function(t,e){var n=wp({},l_,t,e);if(n){var r=e[e.length-1],i=new Dm({color:"color"in n?n.color:Ev,width:"width"in n?n.width:1});r.strokeStyle=i}},PolyStyle:function(t,e){var n=wp({},u_,t,e);if(n){var r=e[e.length-1],i=new rm({color:"color"in n?n.color:Ev});r.fillStyle=i;var o=n.fill;void 0!==o&&(r.fill=o);var s=n.outline;void 0!==s&&(r.outline=s)}}});function P_(t,e){var n=wp({},N_,t,e,this);if(!n)return null;var r,i="fillStyle"in n?n.fillStyle:Uv,o=n.fill;void 0===o||o||(i=null),"imageStyle"in n?n.imageStyle!=Iv&&(r=n.imageStyle):r=Vv;var s="textStyle"in n?n.textStyle:Hv,a="strokeStyle"in n?n.strokeStyle:Wv,l=n.outline;return void 0===l||l?[new xv({fill:i,image:r,stroke:a,text:s,zIndex:void 0})]:[new xv({geometry:function(t){var e=t.getGeometry(),n=e.getType();return n===zi?new Vi(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==Ri&&e!==Di}))):n!==Ri&&n!==Di?e:void 0},fill:i,image:r,stroke:a,text:s,zIndex:void 0}),new xv({geometry:function(t){var e=t.getGeometry(),n=e.getType();return n===zi?new Vi(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Ri||e===Di}))):n===Ri||n===Di?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function O_(t,e){var n,r,i,o=e.length,s=new Array(e.length),a=new Array(e.length),l=new Array(e.length);n=!1,r=!1,i=!1;for(var u=0;u<o;++u){var c=e[u];s[u]=c.get("extrude"),a[u]=c.get("tessellate"),l[u]=c.get("altitudeMode"),n=n||void 0!==s[u],r=r||void 0!==a[u],i=i||l[u]}n&&t.set("extrude",s),r&&t.set("tessellate",a),i&&t.set("altitudeMode",l)}var T_=_p(Rv,{displayName:dp(Dp),value:dp(Dp)}),I_=_p(Rv,{Data:function(t,e){var n=t.getAttribute("name");bp(T_,t,e);var r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==n?r[n]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){bp(A_,t,e)}});function M_(t,e){bp(I_,t,e)}function k_(t,e){bp(qv,t,e)}var L_=_p(Rv,{Style:dp(P_),key:dp(Dp),styleUrl:dp(n_)}),A_=_p(Rv,{SimpleData:function(t,e){var n=t.getAttribute("name");if(null!==n){var r=Dp(t);e[e.length-1][n]=r}}}),R_=_p(Rv,{altitudeMode:dp(Dp),minAltitude:dp(Rp),maxAltitude:dp(Rp),north:dp(Rp),south:dp(Rp),east:dp(Rp),west:dp(Rp)}),F_=_p(Rv,{minLodPixels:dp(Rp),maxLodPixels:dp(Rp),minFadeExtent:dp(Rp),maxFadeExtent:dp(Rp)}),j_=_p(Rv,{LinearRing:pp(h_)}),D_=_p(Rv,{LinearRing:fp(h_)});function z_(t,e){for(var n=vm(e),r=[255*(4==n.length?n[3]:1),n[2],n[1],n[0]],i=0;i<4;++i){var o=Math.floor(r[i]).toString(16);r[i]=1==o.length?"0"+o:o}Bp(t,r.join(""))}var q_=_p(Rv,{Data:gp((function(t,e,n){t.setAttribute("name",e.name);var r={node:t},i=e.value;"object"==typeof i?(null!==i&&i.displayName&&xp(r,q_,mp,[i.displayName],n,["displayName"]),null!==i&&i.value&&xp(r,q_,mp,[i.value],n,["value"])):xp(r,q_,mp,[i],n,["value"])})),value:gp((function(t,e){Bp(t,e)})),displayName:gp((function(t,e){!function(t,e){t.appendChild(Cp().createCDATASection(e))}(t,e)}))}),B_=_p(Rv,{Placemark:gp(pb)}),G_=function(t,e,n){return sp(e[e.length-1].node.namespaceURI,"Placemark")},U_=yp("Data"),V_=_p(Rv,["href"],_p(Av,["x","y","w","h"])),W_=_p(Rv,{href:gp(Bp)},_p(Av,{x:gp(qp),y:gp(qp),w:gp(qp),h:gp(qp)})),H_=function(t,e,n){return sp(Av[0],"gx:"+n)},Y_=_p(Rv,["scale","heading","Icon","color","hotSpot"]),X_=_p(Rv,{Icon:gp((function(t,e,n){var r={node:t},i=n[n.length-1].node,o=V_[i.namespaceURI],s=vp(e,o);xp(r,W_,mp,s,n,o),s=vp(e,o=V_[Av[0]]),xp(r,W_,H_,s,n,o)})),color:gp(z_),heading:gp(qp),hotSpot:gp((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:gp(xb)}),K_=_p(Rv,["color","scale"]),Z_=_p(Rv,{color:gp(z_),scale:gp(xb)}),$_=_p(Rv,["color","width"]),J_=_p(Rv,{color:gp(z_),width:gp(qp)}),Q_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},tb=function(t,e,n){if(t)return sp(e[e.length-1].node.namespaceURI,Q_[t.getType()])},eb=yp("Point"),nb=yp("LineString"),rb=yp("LinearRing"),ib=yp("Polygon"),ob=_p(Rv,{LineString:gp(gb),Point:gp(gb),Polygon:gp(bb),GeometryCollection:gp(sb)});function sb(t,e,n){var r,i={node:t},o=e.getType(),s=[];o===zi?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===Fi?s=s.concat(t.getPoints()):e===ji?s=s.concat(t.getLineStrings()):e===Di?s=s.concat(t.getPolygons()):e===Li||e===Ai||e===Ri?s.push(t):ce(!1,39)})),r=tb):o===Fi?(s=e.getPoints(),r=eb):o===ji?(s=e.getLineStrings(),r=nb):o===Di?(s=e.getPolygons(),r=ib):ce(!1,39),xp(i,ob,r,s,n)}var ab=_p(Rv,{LinearRing:gp(gb)});function lb(t,e,n){xp({node:t},ab,rb,[e],n)}var ub=_p(Rv,{ExtendedData:gp((function(t,e,n){for(var r={node:t},i=e.names,o=e.values,s=i.length,a=0;a<s;a++)xp(r,q_,U_,[{name:i[a],value:o[a]}],n)})),MultiGeometry:gp(sb),LineString:gp(gb),LinearRing:gp(gb),Point:gp(gb),Polygon:gp(bb),Style:gp((function(t,e,n){var r,i={node:t},o={};if(e.pointStyles.length){var s=e.pointStyles[0].getText();s&&(o.LabelStyle=s);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(o.IconStyle=a)}(e.lineStyles.length&&(r=e.lineStyles[0].getStroke())&&(o.LineStyle=r),e.polyStyles.length)&&((r=e.polyStyles[0].getStroke())&&!o.LineStyle&&(o.LineStyle=r),o.PolyStyle=e.polyStyles[0]);var l=n[n.length-1].node,u=Sb[l.namespaceURI],c=vp(o,u);xp(i,Eb,mp,c,n,u)})),address:gp(Bp),description:gp(Bp),name:gp(Bp),open:gp(zp),phoneNumber:gp(Bp),styleUrl:gp(Bp),visibility:gp(zp)}),cb=_p(Rv,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),hb=yp("ExtendedData");function pb(t,e,n){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var s=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),a=e.getStyleFunction();if(a){var l=a(e,0);if(l){var u=Array.isArray(l)?l:[l],c=u;if(e.getGeometry()&&(c=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===zi?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Li||e===Fi})).length:r===Li||r===Fi}}))),this.writeStyles_){var h=u,p=u;e.getGeometry()&&(h=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===zi?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Ai||e===ji})).length:r===Ai||r===ji}})),p=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===zi?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Ri||e===Di})).length:r===Ri||r===Di}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:p}}if(c.length&&void 0===i.name){var f=c[0].getText();f&&(i.name=f.getText())}}}var d=n[n.length-1].node,g=cb[d.namespaceURI],y=vp(i,g);if(xp(r,ub,mp,y,n,g),s.length>0){var m=vp(i,s);xp(r,ub,hb,[{names:s,values:m}],n)}var v=n[0],_=e.getGeometry();_&&(_=Hi(_,!0,v)),xp(r,ub,tb,[_],n)}var fb=_p(Rv,["extrude","tessellate","altitudeMode","coordinates"]),db=_p(Rv,{extrude:gp(zp),tessellate:gp(zp),altitudeMode:gp(Bp),coordinates:gp((function(t,e,n){var r,i=n[n.length-1],o=i.layout,s=i.stride;o==to||o==no?r=2:o==eo||o==ro?r=3:ce(!1,34);var a=e.length,l="";if(a>0){l+=e[0];for(var u=1;u<r;++u)l+=","+e[u];for(var c=s;c<a;c+=s)for(l+=" "+e[c],u=1;u<r;++u)l+=","+e[c+u]}Bp(t,l)}))});function gb(t,e,n){var r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var s=n[n.length-1].node,a=fb[s.namespaceURI],l=vp(o,a);xp(i,db,mp,l,n,a)}var yb=_p(Rv,["color","fill","outline"]),mb=_p(Rv,{outerBoundaryIs:gp(lb),innerBoundaryIs:gp(lb)}),vb=yp("innerBoundaryIs"),_b=yp("outerBoundaryIs");function bb(t,e,n){var r=e.getLinearRings(),i=r.shift(),o={node:t};xp(o,mb,vb,r,n),xp(o,mb,_b,[i],n)}var wb=_p(Rv,{color:gp(z_),fill:gp(zp),outline:gp(zp)});function xb(t,e){qp(t,Math.round(1e6*e)/1e6)}var Sb=_p(Rv,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Eb=_p(Rv,{IconStyle:gp((function(t,e,n){var r={node:t},i={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),l={href:o};if(s){l.w=s[0],l.h=s[1];var u=e.getAnchor(),c=e.getOrigin();if(c&&a&&0!==c[0]&&c[1]!==s[1]&&(l.x=c[0],l.y=a[1]-(c[1]+s[1])),u&&(u[0]!==s[0]/2||u[1]!==s[1]/2)){var h={x:u[0],xunits:om,y:s[1]-u[1],yunits:om};i.hotSpot=h}}i.Icon=l;var p=e.getScaleArray()[0],f=s;null===f&&(f=Ov),2==f.length&&(p/=Kv(f)),1!==p&&(i.scale=p);var d=e.getRotation();0!==d&&(i.heading=d);var g=e.getColor();g&&(i.color=g);var y=n[n.length-1].node,m=Y_[y.namespaceURI],v=vp(i,m);xp(r,X_,mp,v,n,m)})),LabelStyle:gp((function(t,e,n){var r={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var s=e.getScale();s&&1!==s&&(i.scale=s);var a=n[n.length-1].node,l=K_[a.namespaceURI],u=vp(i,l);xp(r,Z_,mp,u,n,l)})),LineStyle:gp((function(t,e,n){var r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=n[n.length-1].node,s=$_[o.namespaceURI],a=vp(i,s);xp(r,J_,mp,a,n,s)})),PolyStyle:gp((function(t,e,n){var r={node:t},i=e.getFill(),o=e.getStroke(),s={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},a=n[n.length-1].node,l=yb[a.namespaceURI],u=vp(s,l);xp(r,wb,mp,u,n,l)}))});const Cb=$v,Nb=ar((function(t){return{mapSources:t.mapSources}}),(function(t){return{onDownload:(t,e,n)=>{let r=e.features,i=null;for(let n=0,r=e.layers.length;null===i&&n<r;n++){const r=e.layers[n];r.name===t.layerName&&void 0!==r.filter&&(i=r.filter)}null!==i&&(r=Tc(r,i)),function(t,e){let n="geomoose_"+(new Date).getTime();n+="."+e;const r=new ys;let i=new ys,o="application/vnd.geo+json";"kml"===e&&(i=new Cb,o="application/vnd.google-earth.kml+xml");const s=r.readFeatures({type:"FeatureCollection",features:t},{dataProjection:tn("EPSG:3857"),featureProjection:tn("EPSG:4326")}),a=i.writeFeatures(s),l=new Blob([a],{type:o});nm().saveAs(l,n)}(r,n)}}}))((({layer:t,mapSources:e,onDownload:n})=>{const[r,i]=(0,En.useState)("kml"),[o,s]=(0,En.useState)(!1),{t:a}=_y();return Cn().createElement(Cn().Fragment,null,Cn().createElement(Ky,{tip:"download-features-tip",iconClass:"download",onClick:()=>{s(!0)}}),!!o&&Cn().createElement(Sy,{open:!0,title:"download-features",options:[{label:"Cancel",value:"dismiss"},{label:"Okay",value:"download"}],onClose:i=>{if("download"===i){const i=t.src[0],o=e[i.mapSourceName];n(i,o,r)}s(!1)}},Cn().createElement("p",null,a("download-help")),Cn().createElement("p",null,Cn().createElement("label",null,`${a("download-format")} `),Cn().createElement("select",{value:r,onChange:t=>{i(t.target.value)}},Cn().createElement("option",{value:"geojson"},"GeoJSON"),Cn().createElement("option",{value:"kml"},"KML")))))})),Pb=({layer:t,service:e,setEditPath:n,setEditTools:r,setLayerVisibility:i,finishService:o})=>{const s=t.src[0],a=s.mapSourceName+"/"+s.layerName;return Cn().createElement(Ky,{iconClass:"modify",tip:"draw-open-tip",onClick:()=>{e&&o(),n(a);const s=[];for(let e=0,n=Hd.length;e<n;e++)t.tools.indexOf(Hd[e])>=0&&s.push(Hd[e]);r(s),i(wc(a),xc(a),!0)}})};Pb.propTypes={changeTool:In().func,layer:In().object.isRequired},Pb.defaultProps={changeTool:()=>{},drawType:"point"};const Ob=ar((t=>({service:t.query.service})),{finishService:Sg,setEditPath:rp,setEditTools:ip,setLayerVisibility:dg})(Pb),Tb=({tip:t,iconClass:e,layer:n,mapSources:r,direction:i,onFade:o})=>Cn().createElement(Ky,{tip:t,iconClass:e,onClick:()=>{const t={};for(let e=0,i=n.src.length;e<i;e++){const i=n.src[e].mapSourceName;t[i]=r[i].opacity}for(const e in t){let n=t[e]+=i;n<0?n=0:n>1&&(n=1),o(e,n)}}});Tb.defaultProps={tip:"fade-tip",iconClass:"fade",direction:-.1};const Ib=ar((function(t){return{mapSources:t.mapSources}}),(function(t){return{onFade:(e,n)=>{t(function(t,e){return{type:oh.SET_OPACITY,mapSourceName:t,opacity:e}}(e,n))}}}))(Tb);class Mb extends Cn().Component{render(){return Cn().createElement(Ky,{tip:"toggle-legend-tip",iconClass:"legend",onClick:()=>{this.props.onToggleLegend(this.props.layer)}})}}const kb=ar(void 0,(function(t){return{onToggleLegend:e=>{var n,r;t((n=e.id,r=!0!==e.legend,{type:ch,id:n,on:r}))}}}))(Mb),Lb=({href:t})=>{const{t:e}=_y();return Cn().createElement("a",{className:"metadata",href:t,target:"_blank",rel:"noopener noreferrer",title:e("view-metadata-tip")},Cn().createElement("i",{className:"icon metadata"}))};class Ab extends Cn().Component{render(){const t=function(t,e){for(let n=0,r=e.src.length;n<r;n++)if(t[e.src[n].mapSourceName].refresh)return!0;return!1}(this.props.mapSources,this.props.layer);let e="refresh";return t&&(e+=" on"),Cn().createElement(Ky,{tip:"layer-refresh-tip",iconClass:e,onClick:()=>{this.props.onToggleRefresh(this.props.layer,!t)}})}}Ab.propTypes={mapSources:In().object.isRequired,layer:In().object.isRequired,onToggleRefresh:In().func.isRequired};const Rb=ar((function(t){return{mapSources:t.mapSources}}),(function(t){return{onToggleRefresh:(e,n)=>{const r=n?e.refresh:null;for(let n=0,o=e.src.length;n<o;n++){const o=e.src[n];t((i=o.mapSourceName,{type:oh.REFRESH,mapSourceName:i,refresh:r}))}var i}}}))(Ab);class Fb extends Ib{}Fb.defaultProps={tip:"unfade-tip",iconClass:"unfade",direction:.1};var jb=["forwardedRef"];function Db(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Db(Object(n),!0).forEach((function(e){(0,k.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function r(r){var i=r.forwardedRef,o=Wy(r,jb),s=X(_y(t,o),3),a=s[0],l=s[1],u=s[2],c=zb(zb({},o),{},{t:a,i18n:l,tReady:u});return e.withRef&&i?c.ref=i:!e.withRef&&i&&(c.forwardedRef=i),Cn().createElement(n,c)}return r.displayName="withI18nextTranslation(".concat(yy(n),")"),r.WrappedComponent=n,e.withRef?Cn().forwardRef((function(t,e){return Cn().createElement(r,Object.assign({},t,{forwardedRef:e}))})):r}}function Bb(t){const e=t.getGeometry().flatCoordinates;for(let t=0,n=e.length;t<n;t++)if(isNaN(e[t]))return!1;return!0}class Gb extends Sy{close(t){"upload"===t?(this.setState({progress:"loading",withError:!1,features:0}),this.parseFiles()):this.setState({loading:!1}),this.props.onClose(t)}getOptions(){switch(this.state.progress){case"loading":return[];case"finished":return[{label:"Close",value:"dismiss"}];default:return this.props.options}}renderBody(){if("loading"===this.state.progress)return Cn().createElement("div",null,Cn().createElement("p",null,Cn().createElement("span",{className:"upload spinner"})," ",this.props.t("upload-uploading")));if("finished"===this.state.progress){let t=!1;return this.state.withError?t=Cn().createElement("p",null,this.props.t("upload-file-error")):this.state.invalid>0&&(t=Cn().createElement("p",null,this.props.t("upload-invalid-features",{count:this.state.invalid}))),Cn().createElement("div",null,Cn().createElement("p",null,this.props.t("upload-uploaded",{count:this.state.features})),t)}return Cn().createElement("div",null,Cn().createElement("p",null,this.props.t("upload-help")),Cn().createElement("p",null,Cn().createElement("input",{ref:"fileInput",type:"file",accept:".geojson,.json,.kml"})))}parseFiles(){const t=this.refs.fileInput.files,e=new FileReader,n=this;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.onload=function(t){return function(e){const r=new ys;let i=null;if("kml"===String(t.name).toLowerCase().split(".").pop())i=new Cb;else try{JSON.parse(e.target.result),i=new ys}catch(t){}if(null!==i){let t=i.readFeatures(e.target.result);const o=[];let s=0;for(const e of t)e.setGeometry(e.getGeometry().transform("EPSG:4326","EPSG:3857")),Bb(e)?o.push(e):s+=1;t=null;const a=r.writeFeaturesObject(o);n.props.onAddFeatures(a.features),n.setState({progress:"finished",features:n.state.features+a.features.length,invalid:s})}else n.setState({progress:"finished",features:0,withError:!0})}}(i),e.readAsText(i)}}}Gb.defaultProps={title:"upload-title",options:[{label:"Cancel",value:"dismiss"},{label:"Okay",value:"upload"}]};const Ub=qb()(Gb);class Vb extends Cn().Component{constructor(t){super(t),this.state={open:!1}}render(){return Cn().createElement(Ky,{tip:"upload-tip",iconClass:"upload",onClick:()=>{this.setState({open:!0})}},!!this.state.open&&Cn().createElement(Ub,{open:!0,layer:this.props.layer,onClose:t=>{"dismiss"===t&&this.setState({open:!1})},onAddFeatures:t=>{const e=this.props.layer.src[0];this.props.onAddFeatures(e.mapSourceName,t)}}))}}const Wb=ar(void 0,(function(t){return{onAddFeatures:(e,n)=>{t(hg(e,n))}}}))(Vb);class Hb extends Cn().Component{render(){return Cn().createElement(Ky,{tip:"zoomto-tip",iconClass:"zoomto",onClick:()=>{const t=this.props.layer.src[0],e=kc(this.props.mapSources[t.mapSourceName]);null!==e[0]&&this.props.onZoomTo(e)}})}}const Yb=ar((function(t){return{mapSources:t.mapSources}}),(function(t){return{onZoomTo:e=>{t($h(e))}}}))(Hb);var Xb=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),Kb="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Zb=void 0!==__webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),$b="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Zb):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},Jb=["top","right","bottom","left","width","height","size","weight"],Qb="undefined"!=typeof MutationObserver,tw=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&a()}function s(){$b(o)}function a(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);i=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Kb&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Qb?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Kb&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Jb.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ew=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},nw=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Zb},rw=lw(0,0,0,0);function iw(t){return parseFloat(t)||0}function ow(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+iw(t["border-"+n+"-width"])}),0)}var sw="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof nw(t).SVGGraphicsElement}:function(t){return t instanceof nw(t).SVGElement&&"function"==typeof t.getBBox};function aw(t){return Kb?sw(t)?function(t){var e=t.getBBox();return lw(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return rw;var r=nw(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=iw(o)}return e}(r),o=i.left+i.right,s=i.top+i.bottom,a=iw(r.width),l=iw(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==e&&(a-=ow(r,"left","right")+o),Math.round(l+s)!==n&&(l-=ow(r,"top","bottom")+s)),!function(t){return t===nw(t).document.documentElement}(t)){var u=Math.round(a+o)-e,c=Math.round(l+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(c)&&(l-=c)}return lw(i.left,i.top,a,l)}(t):rw}function lw(t,e,n,r){return{x:t,y:e,width:n,height:r}}var uw=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=lw(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=aw(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),cw=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return ew(s,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),s}(e);ew(this,{target:t,contentRect:n})},hw=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new Xb,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof nw(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new uw(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof nw(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new cw(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),pw="undefined"!=typeof WeakMap?new WeakMap:new Xb,fw=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=tw.getInstance(),r=new hw(e,n,this);pw.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){fw.prototype[t]=function(){var e;return(e=pw.get(this))[t].apply(e,arguments)}}));const dw=void 0!==Zb.ResizeObserver?Zb.ResizeObserver:fw,gw=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},yw=function(){return o.Date.now()};var mw=/\s/;var vw=/^\s+/;const _w=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&mw.test(t.charAt(e)););return e}(t)+1).replace(vw,""):t};var bw=/^[-+]0x[0-9a-f]+$/i,ww=/^0b[01]+$/i,xw=/^0o[0-7]+$/i,Sw=parseInt;const Ew=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||g(t)&&"[object Symbol]"==f(t)}(t))return NaN;if(gw(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=gw(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=_w(t);var n=ww.test(t);return n||xw.test(t)?Sw(t.slice(2),n?2:8):bw.test(t)?NaN:+t};var Cw=Math.max,Nw=Math.min;const Pw=function(t,e,n){var r,i,o,s,a,l,u=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function d(t){return u=t,a=setTimeout(y,e),c?f(t):s}function g(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function y(){var t=yw();if(g(t))return m(t);a=setTimeout(y,function(t){var n=e-(t-l);return h?Nw(n,o-(t-u)):n}(t))}function m(t){return a=void 0,p&&r?f(t):(r=i=void 0,s)}function v(){var t=yw(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return d(l);if(h)return clearTimeout(a),a=setTimeout(y,e),f(l)}return void 0===a&&(a=setTimeout(y,e)),s}return e=Ew(e)||0,gw(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Cw(Ew(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},v.flush=function(){return void 0===a?s:m(yw())},v};var Ow={debounce:Pw,throttle:function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return gw(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pw(t,e,{leading:r,maxWait:e,trailing:i})}},Tw=function(t){return"function"==typeof t},Iw=function(){return"undefined"==typeof window};function Mw(t){return Mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mw(t)}function kw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Aw(t,e){return!e||"object"!==Mw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rw(t)}function Fw(t,e){return Fw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fw(t,e)}var jw=function(t){function e(){return kw(this,e),Aw(this,Rw(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fw(t,e)}(e,t),n=e,(r=[{key:"render",value:function(){return this.props.children}}])&&Lw(n.prototype,r),e}(En.PureComponent);const Dw=jw;function zw(t){return zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zw(t)}function qw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bw(t)}function Gw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uw(t,e){return Uw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Uw(t,e)}function Vw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ww=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==zw(e)&&"function"!=typeof e?Gw(t):e}(this,Bw(e).call(this,t)),Vw(Gw(n),"cancelHandler",(function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)})),Vw(Gw(n),"rafClean",(function(){n.raf&&n.raf.cancel&&(n.raf.cancel(),n.raf=null)})),Vw(Gw(n),"toggleObserver",(function(t){var e=n.getElement();e&&n.resizeObserver[t]&&n.resizeObserver[t](e)})),Vw(Gw(n),"getElement",(function(){var t=n.props,e=t.querySelector,r=t.targetDomEl;if(!Iw()){if(e)return document.querySelector(e);if(r&&((i=r)instanceof Element||i instanceof HTMLDocument))return r;var i,o=n.element&&(0,Nn.findDOMNode)(n.element);if(o)return o.parentElement}})),Vw(Gw(n),"createUpdater",(function(){return n.rafClean(),n.raf=(t=function(t){var e=t.width,r=t.height,i=n.props.onResize;Tw(i)&&i(e,r),n.setState({width:e,height:r})},e=[],r=null,i=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e=i,r||(r=requestAnimationFrame((function(){r=null,t.apply(void 0,e)})))},i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i),n.raf;var t,e,r,i})),Vw(Gw(n),"createResizeHandler",(function(t){var e=n.state,r=e.width,i=e.height,o=n.props,s=o.handleWidth,a=o.handleHeight;if(s||a){var l=n.createUpdater();t.forEach((function(t){var e=t&&t.contentRect||{},o=e.width,u=e.height,c=s&&r!==o||a&&i!==u;!n.skipOnMount&&c&&!Iw()&&l({width:o,height:u}),n.skipOnMount=!1}))}})),Vw(Gw(n),"onRef",(function(t){n.element=t})),Vw(Gw(n),"getRenderType",(function(){var t=n.props,e=t.render,r=t.children;return Tw(e)?"renderProp":Tw(r)?"childFunction":(0,En.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"})),Vw(Gw(n),"getTargetComponent",(function(){var t=n.props,e=t.render,r=t.children,i=t.nodeType,o=n.state,s={width:o.width,height:o.height};switch(n.getRenderType()){case"renderProp":return(0,En.cloneElement)(e(s),{key:"resize-detector"});case"childFunction":return(0,En.cloneElement)(r(s));case"child":return(0,En.cloneElement)(r,s);case"childArray":return r.map((function(t){return!!t&&(0,En.cloneElement)(t,s)}));default:return(0,En.createElement)(i)}}));var r=t.skipOnMount,i=t.refreshMode,o=t.refreshRate,s=t.refreshOptions;n.state={width:void 0,height:void 0},n.skipOnMount=r,n.raf=null,n.element=null,n.unmounted=!1;var a=Ow[i];return n.resizeHandler=a?a(n.createResizeHandler,o,s):n.createResizeHandler,n.resizeObserver=new dw(n.resizeHandler),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uw(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return Cn().createElement(Dw,{ref:this.onRef},this.getTargetComponent())}}])&&qw(n.prototype,r),e}(En.PureComponent);Ww.propTypes={handleWidth:Tn.bool,handleHeight:Tn.bool,skipOnMount:Tn.bool,refreshRate:Tn.number,refreshMode:Tn.string,refreshOptions:(0,Tn.shape)({leading:Tn.bool,trailing:Tn.bool}),querySelector:Tn.string,targetDomEl:Tn.any,onResize:Tn.func,render:Tn.func,children:Tn.any,nodeType:Tn.node},Ww.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,targetDomEl:null,onResize:null,render:void 0,children:null,nodeType:"div"};const Hw=Ww;var Yw=__webpack_require__(2568),Xw=__webpack_require__.n(Yw);function Kw(){return{type:Vh}}var Zw=__webpack_require__(4231);const $w=function(){for(var t=new Zw.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Zw.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));var r=new Zw.GeoJSONWriter;return{type:"Feature",geometry:e=r.write(e),properties:arguments[0].properties}};function Jw(t,e){return tx(t,e).geometry}function Qw(t,e=null){let n=e;const r=t.geometry.type;return"Point"===r?n=t.geometry.coordinates:"MultiPoint"===r||"LineString"===r?n=t.geometry.coordinates[0]:"MultiLineString"===r||"Polygon"===r?n=t.geometry.coordinates[0][0]:"MuliPolygon"===r&&(n=t.geometry.cooredinates[0][0][0]),n}function tx(t,e){const n=tn(Rc(Qw(t,[0,0])));let r=Dc(t.geometry);r=r.transform("EPSG:4326",n);let i=jc(r);const o=(new Zw.GeoJSONReader).read(i),s=Zw.BufferOp.bufferOp(o,e);return i=(new Zw.GeoJSONWriter).write(s),{type:"Feature",properties:{},geometry:jc(Dc(i).transform(n,"EPSG:4326"))}}function ex(t,e){let n=null;for(let r=0,i=t.length;r<i;r++){const i=tx(t[r],e);n=null===n?i:$w(n,i)}return n.geometry}function nx(t){const e=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),n=t.sort(((t,n)=>{const r=Qw(t),i=Qw(n);return null===r?1:null===i||e(r)<e(i)?-1:1}));let r={...n[0]};for(let t=1,e=n.length;t<e;t++)r=$w(r,n[t]);return r}var rx=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ix={Point:function(t){return void 0!==t.m&&void 0!==t.z?new Bo([t.x,t.y,t.z,t.m],ro):void 0!==t.z?new Bo([t.x,t.y,t.z],eo):void 0!==t.m?new Bo([t.x,t.y,t.m],no):new Bo([t.x,t.y])},LineString:function(t){var e=lx(t);return new Ro(t.paths[0],e)},Polygon:function(t){var e=lx(t);return new os(t.rings,e)},MultiPoint:function(t){var e=lx(t);return new Vo(t.points,e)},MultiLineString:function(t){var e=lx(t);return new Do(t.paths,e)},MultiPolygon:function(t){var e=lx(t);return new hs(t.rings,e)}},ox={Point:function(t,e){var n,r=t.getCoordinates(),i=t.getLayout();return i===eo?n={x:r[0],y:r[1],z:r[2]}:i===no?n={x:r[0],y:r[1],m:r[2]}:i===ro?n={x:r[0],y:r[1],z:r[2],m:r[3]}:i===to?n={x:r[0],y:r[1]}:ce(!1,34),n},LineString:function(t,e){var n=ux(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}},Polygon:function(t,e){var n=ux(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}},MultiPoint:function(t,e){var n=ux(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}},MultiLineString:function(t,e){var n=ux(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}},MultiPolygon:function(t,e){for(var n=ux(t),r=t.getCoordinates(!1),i=[],o=0;o<r.length;o++)for(var s=r[o].length-1;s>=0;s--)i.push(r[o][s]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}},sx=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this)||this).geometryName_=r.geometryName,n}return rx(e,t),e.prototype.readFeatureFromObject=function(t,e,n){var r=t,i=ax(r.geometry,e),o=new ai;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(i),r.attributes){o.setProperties(r.attributes,!0);var s=r.attributes[n];void 0!==s&&o.setId(s)}return o},e.prototype.readFeaturesFromObject=function(t,e){var n=e||{};if(t.features){for(var r=[],i=t.features,o=0,s=i.length;o<s;++o)r.push(this.readFeatureFromObject(i[o],n,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,n)]},e.prototype.readGeometryFromObject=function(t,e){return ax(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?tn("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return cx(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={};if(!t.hasProperties())return n.attributes={},n;var r=t.getProperties(),i=t.getGeometry();if(i){n.geometry=cx(i,e);var o=e&&(e.dataProjection||e.featureProjection);o&&(n.geometry.spatialReference={wkid:Number(tn(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return jr(r)?n.attributes={}:n.attributes=r,n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{features:n}},e}(Qi);function ax(t,e){var n,r,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=Li;else if(t.points)i=Fi;else if(t.paths)i=1===t.paths.length?Ai:ji;else if(t.rings){var o=t,s=lx(o),a=function(t,e){var n,r,i=[],o=[],s=[];for(n=0,r=t.length;n<r;++n)i.length=0,go(i,0,t[n],e.length),Qo(i,0,i.length,e.length)?o.push([t[n]]):s.push(t[n]);for(;s.length;){var a=s.shift(),l=!1;for(n=o.length-1;n>=0;n--){var u=o[n][0];if(ye(new Ko(u).getExtent(),new Ko(a).getExtent())){o[n].push(a),l=!0;break}}l||o.push([a.reverse()])}return o}(o.rings,s);1===a.length?(i=Ri,t=Ar({},t,((n={}).rings=a[0],n))):(i=Di,t=Ar({},t,((r={}).rings=a,r)))}return Hi((0,ix[i])(t),!1,e)}function lx(t){var e=to;return!0===t.hasZ&&!0===t.hasM?e=ro:!0===t.hasZ?e=eo:!0===t.hasM&&(e=no),e}function ux(t){var e=t.getLayout();return{hasZ:e===eo||e===ro,hasM:e===no||e===ro}}function cx(t,e){return(0,ox[t.getType()])(Hi(t,!0,e),e)}const hx=sx;var px=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fx=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.featureNS_="http://mapserver.gis.umn.edu/mapserver",n.gmlFormat_=new Wp,n.layers_=r.layers?r.layers:null,n}return px(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var n=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==n)for(var i=0,o=t.childNodes.length;i<o;i++){var s=t.childNodes[i];if(s.nodeType===Node.ELEMENT_NODE){var a=s,l=e[0],u=a.localName.replace("_layer","");if(!this.layers_||Nr(this.layers_,u)){var c=u+"_feature";l.featureType=c,l.featureNS=this.featureNS_;var h={};h[c]=pp(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var p=_p([l.featureNS,null],h);a.setAttribute("namespaceURI",this.featureNS_);var f=wp([],p,a,e,this.gmlFormat_);f&&Tr(r,f)}}}if("FeatureCollection"==n){var d=wp([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);d&&(r=d)}return r},e.prototype.readFeaturesFromNode=function(t,e){var n={};return e&&Ar(n,this.getReadOptions(t,e)),this.readFeatures_(t,[n])},e}(Op);const dx=fx,gx="add",yx="remove";var mx=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vx="length",_x=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.element=n,i.index=r,i}return mx(e,t),e}(xr),bx=function(t){function e(e,n){var r=t.call(this)||this;r.on,r.once,r.un;var i=n||{};if(r.unique_=!!i.unique,r.array_=e||[],r.unique_)for(var o=0,s=r.array_.length;o<s;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return mx(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(vx)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new _x(gx,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new _x(yx,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new _x(yx,r,t)),this.dispatchEvent(new _x(gx,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(vx,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new ue(58)},e}(ii);const wx=bx;var xx=__webpack_require__(2582),Sx=function(){function t(t){this.rbush_=new xx(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[ae(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++){var o=t[r],s=e[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[r]=a,this.items_[ae(s)]=a}this.rbush_.load(n)},t.prototype.remove=function(t){var e=ae(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[ae(e)];Se([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var n,r=0,i=t.length;r<i;r++)if(n=e(t[r]))return n;return n},t.prototype.isEmpty=function(){return jr(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return _e(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}();const Ex=Sx,Cx="undefined",Nx="ready";var Px=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ox=function(t){function e(e){var n=t.call(this)||this;n.projection=tn(e.projection),n.attributions_=Tx(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:Nx,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n.viewResolver=null,n.viewRejector=null;var r=n;return n.viewPromise_=new Promise((function(t,e){r.viewResolver=t,r.viewRejector=e})),n}return Px(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return oe()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Tx(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(ii);function Tx(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Ix=Ox,Mx="addfeature",kx="removefeature";function Lx(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Ax(t,e){return[t]}function Rx(t,e){return function(n,r,i,o,s){var a=this;!function(t,e,n,r,i,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,r,i):t,!0),e.getType()==Xi&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r=e.getType(),l=void 0;r==Ki||"text"==r?l=a.responseText:"xml"==r?(l=a.responseXML)||(l=(new DOMParser).parseFromString(a.responseText,"application/xml")):r==Xi&&(l=a.response),l?o(e.readFeatures(l,{extent:n,featureProjection:i}),e.readProjection(l)):s()}else s()},a.onerror=s,a.send()}(t,e,n,r,i,(function(t,e){a.addFeatures(t),void 0!==o&&o(t)}),s||Lr)}}var Fx=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jx=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.feature=n,i.features=r,i}return Fx(e,t),e}(xr),Dx=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{attributions:r.attributions,projection:void 0,state:Nx,wrapX:void 0===r.wrapX||r.wrapX})||this).on,n.once,n.un,n.loader_=Lr,n.format_=r.format,n.overlaps_=void 0===r.overlaps||r.overlaps,n.url_=r.url,void 0!==r.loader?n.loader_=r.loader:void 0!==n.url_&&(ce(n.format_,7),n.loader_=Rx(n.url_,n.format_)),n.strategy_=void 0!==r.strategy?r.strategy:Lx;var i,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.featuresRtree_=s?new Ex:null,n.loadedExtentsRtree_=new Ex,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(i=r.features).getArray()),s||void 0!==i||(i=new wx(o)),void 0!==o&&n.addFeaturesInternal(o),void 0!==i&&n.bindFeaturesCollection_(i),n}return Fx(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=ae(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new jx(Mx,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Kr(e,Br,this.handleFeatureChange_,this),Kr(e,Sr,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,r=e.getId();return void 0!==r&&(r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e),n&&(ce(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],r=[],i=0,o=t.length;i<o;i++){var s=ae(l=t[i]);this.addToIndex_(s,l)&&n.push(l)}i=0;for(var a=n.length;i<a;i++){var l;s=ae(l=n[i]),this.setupChangeEvents_(s,l);var u=l.getGeometry();if(u){var c=u.getExtent();e.push(c),r.push(l)}else this.nullGeometryFeatures_[s]=l}this.featuresRtree_&&this.featuresRtree_.load(e,r),i=0;for(var h=n.length;i<h;i++)this.dispatchEvent(new jx(Mx,n[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Mx,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(kx,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(gx,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(yx,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach($r);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var r=new jx("clear");this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var r=e(n);if(r)return r}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),jr(this.nullGeometryFeatures_)||Tr(t,Fr(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],r=t[1],i=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||Mr;return this.featuresRtree_.forEachInExtent(a,(function(t){if(l(t)){var e=t.getGeometry(),u=s;if((s=e.closestPointXY(n,r,o,s))<u){i=t;var c=Math.sqrt(s);a[0]=n-c,a[1]=r-c,a[2]=n+c,a[3]=r+c}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=ae(e),r=e.getGeometry();if(r){var i=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new jx("changefeature",e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:ae(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&jr(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){for(var r=this.loadedExtentsRtree_,i=this.strategy_(t,e,n),o=function(t,o){var a=i[t];r.forEachInExtent(a,(function(t){return ye(t.extent,a)}))||(++s.loadingExtentsCount_,s.dispatchEvent(new jx("featuresloadstart")),s.loader_.call(s,a,e,n,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new jx("featuresloadend",void 0,t))}.bind(s),function(){--this.loadingExtentsCount_,this.dispatchEvent(new jx("featuresloaderror"))}.bind(s)),r.insert(a,{extent:a.slice()}))},s=this,a=0,l=i.length;a<l;++a)o(a);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(Se(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=ae(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=ae(t);this.featureChangeKeys_[e].forEach($r),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new jx(kx,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){ce(this.format_,7),this.url_=t,this.setLoader(Rx(t,this.format_))},e}(Ix);const zx=Dx,qx="opacity",Bx="visible",Gx="extent",Ux="zIndex",Vx="maxResolution",Wx="minResolution",Hx="maxZoom",Yx="minZoom",Xx="source";var Kx=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Zx=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=Ar({},e);return"object"==typeof e.properties&&(delete r.properties,Ar(r,e.properties)),r.opacity=void 0!==e.opacity?e.opacity:1,ce("number"==typeof r.opacity,64),r.visible=void 0===e.visible||e.visible,r.zIndex=e.zIndex,r.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,r.minResolution=void 0!==e.minResolution?e.minResolution:0,r.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,r.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==r.className?e.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return Kx(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=kt(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return oe()},e.prototype.getLayerStatesArray=function(t){return oe()},e.prototype.getExtent=function(){return this.get(Gx)},e.prototype.getMaxResolution=function(){return this.get(Vx)},e.prototype.getMinResolution=function(){return this.get(Wx)},e.prototype.getMinZoom=function(){return this.get(Yx)},e.prototype.getMaxZoom=function(){return this.get(Hx)},e.prototype.getOpacity=function(){return this.get(qx)},e.prototype.getSourceState=function(){return oe()},e.prototype.getVisible=function(){return this.get(Bx)},e.prototype.getZIndex=function(){return this.get(Ux)},e.prototype.setExtent=function(t){this.set(Gx,t)},e.prototype.setMaxResolution=function(t){this.set(Vx,t)},e.prototype.setMinResolution=function(t){this.set(Wx,t)},e.prototype.setMaxZoom=function(t){this.set(Hx,t)},e.prototype.setMinZoom=function(t){this.set(Yx,t)},e.prototype.setOpacity=function(t){ce("number"==typeof t,64),this.set(qx,t)},e.prototype.setVisible=function(t){this.set(Bx,t)},e.prototype.setZIndex=function(t){this.set(Ux,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(ii),$x="precompose",Jx="rendercomplete";var Qx=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tS=function(t){function e(e){var n=this,r=Ar({},e);delete r.source,(n=t.call(this,r)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(Xx,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return Qx(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Xx)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Cx},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&($r(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Kr(t,Br,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&($r(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&($r(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Kr(t,$x,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);ce(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=Kr(this,Br,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Xx,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Zx);function eS(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}const nS=tS;var rS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iS="renderOrder",oS=function(t){function e(e){var n=this,r=e||{},i=Ar({},r);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(n=t.call(this,i)||this).declutter_=void 0!==r.declutter&&r.declutter,n.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return rS(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(iS)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new xx(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(iS,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:_v,this.styleFunction_=null===t?void 0:function(t){var e,n;"function"==typeof t?e=t:(Array.isArray(t)?n=t:(ce("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n});return e}(this.style_),this.changed()},e}(nS);const sS=oS;var aS={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},lS=[aS.FILL],uS=[aS.STROKE],cS=[aS.BEGIN_PATH],hS=[aS.CLOSE_PATH];const pS=aS,fS=function(){function t(){}return t.prototype.drawCustom=function(t,e,n,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();var dS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gS=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return dS(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,i=this.coordinates,o=i.length,s=0,a=t.length;s<a;s+=e)r[0]=t[s],r[1]=t[s+1],ge(n,r)&&(i[o++]=r[0],i[o++]=r[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,n,r,i,o){var s=this.coordinates,a=s.length,l=this.getBufferedMaxExtent();o&&(e+=r);var u,c,h,p=t[e],f=t[e+1],d=this.tmpCoordinate_,g=!0;for(u=e+r;u<n;u+=r)d[0]=t[u],d[1]=t[u+1],(h=ve(l,d))!==c?(g&&(s[a++]=p,s[a++]=f,g=!1),s[a++]=d[0],s[a++]=d[1]):1===h?(s[a++]=d[0],s[a++]=d[1],g=!1):g=!0,p=d[0],f=d[1],c=h;return(i&&g||u===e+r)&&(s[a++]=p,s[a++]=f),a},e.prototype.drawCustomCoordinates_=function(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o],l=this.appendFlatLineCoordinates(t,e,a,r,!1,!1);i.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,n,r){this.beginGeometry(t,e);var i,o,s,a,l,u=t.getType(),c=t.getStride(),h=this.coordinates.length;switch(u){case Di:i=t.getOrientedFlatCoordinates(),a=[];var p=t.getEndss();l=0;for(var f=0,d=p.length;f<d;++f){var g=[];l=this.drawCustomCoordinates_(i,l,p[f],c,g),a.push(g)}this.instructions.push([pS.CUSTOM,h,a,t,n,Eo]),this.hitDetectionInstructions.push([pS.CUSTOM,h,a,t,r||n,Eo]);break;case Ri:case ji:s=[],i=u==Ri?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),l=this.drawCustomCoordinates_(i,0,t.getEnds(),c,s),this.instructions.push([pS.CUSTOM,h,s,t,n,So]),this.hitDetectionInstructions.push([pS.CUSTOM,h,s,t,r||n,So]);break;case Ai:case qi:i=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(i,0,i.length,c,!1,!1),this.instructions.push([pS.CUSTOM,h,o,t,n,xo]),this.hitDetectionInstructions.push([pS.CUSTOM,h,o,t,r||n,xo]);break;case Fi:i=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(i,c))>h&&(this.instructions.push([pS.CUSTOM,h,o,t,n,xo]),this.hitDetectionInstructions.push([pS.CUSTOM,h,o,t,r||n,xo]));break;case Li:i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),o=this.coordinates.length,this.instructions.push([pS.CUSTOM,h,o,t,n]),this.hitDetectionInstructions.push([pS.CUSTOM,h,o,t,r||n])}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[pS.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pS.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==pS.END_GEOMETRY?o=t:r==pS.BEGIN_GEOMETRY&&(n[2]=t,Or(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=zm(r||Ym)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=zm(i||$m);var o=e.getLineCap();n.lineCap=void 0!==o?o:Xm;var s=e.getLineDash();n.lineDash=s?s.slice():Km;var a=e.getLineDashOffset();n.lineDashOffset=a||0;var l=e.getLineJoin();n.lineJoin=void 0!==l?l:Zm;var u=e.getWidth();n.lineWidth=void 0!==u?u:1;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,n=[pS.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[pS.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||i!=t.currentLineDash&&!Ir(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[pS.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=fe(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;pe(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(fS);const yS=gS;var mS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const vS=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return mS(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([pS.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([pS.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([pS.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([pS.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=i,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0]*this.imagePixelRatio_,this.originY_=s[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterImageWithText_=e},e}(yS);var _S=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bS=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return _S(e,t),e.prototype.drawFlatCoordinates_=function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),s=[pS.MOVE_TO_LINE_TO,i,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},e.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([pS.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Km,0],cS);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(uS),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([pS.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],cS);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinates_(s,l,o[u],a);this.hitDetectionInstructions.push(uS),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(uS),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(uS),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(cS)},e}(yS);const wS=bS;var xS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SS=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return xS(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,s=void 0!==i.strokeStyle,a=n.length;this.instructions.push(cS),this.hitDetectionInstructions.push(cS);for(var l=0;l<a;++l){var u=n[l],c=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,u,r,!0,!s),p=[pS.MOVE_TO_LINE_TO,c,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(hS),this.hitDetectionInstructions.push(hS)),e=u}return o&&(this.instructions.push(lS),this.hitDetectionInstructions.push(lS)),s&&(this.instructions.push(uS),this.hitDetectionInstructions.push(uS)),e},e.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([pS.SET_FILL_STYLE,Ym]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([pS.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var l=[pS.CIRCLE,a];this.instructions.push(cS,l),this.hitDetectionInstructions.push(cS,l),void 0!==n.fillStyle&&(this.instructions.push(lS),this.hitDetectionInstructions.push(lS)),void 0!==n.strokeStyle&&(this.instructions.push(uS),this.hitDetectionInstructions.push(uS)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([pS.SET_FILL_STYLE,Ym]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([pS.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([pS.SET_FILL_STYLE,Ym]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([pS.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinatess_(s,l,o[u],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,r=0,i=n.length;r<i;++r)n[r]=vo(n[r],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(yS);const ES=SS;function CS(t,e,n,r,i){var o,s,a,l,u,c,h,p,f,d=n,g=n,y=0,m=0,v=n;for(o=n;o<r;o+=i){var _=e[o],b=e[o+1];void 0!==l&&(p=_-l,f=b-u,a=Math.sqrt(p*p+f*f),void 0!==c&&(m+=s,Math.acos((c*p+h*f)/(s*a))>t&&(m>y&&(y=m,d=v,g=o),m=0,v=o-i)),s=a,c=p,h=f),l=_,u=b}return(m+=a)>y?[v,o]:[d,g]}var NS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),PS={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},OS=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return NS(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var n=this.textFillState_,r=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(n||r)){var o=this.coordinates,s=o.length,a=t.getType(),l=null,u=t.getStride();if("line"!==i.placement||a!=Ai&&a!=ji&&a!=Ri&&a!=Di){var c=i.overflow?null:[];switch(a){case Li:case Fi:l=t.getFlatCoordinates();break;case Ai:l=t.getFlatMidpoint();break;case qi:l=t.getCenter();break;case ji:l=t.getFlatMidpoints(),u=2;break;case Ri:l=t.getFlatInteriorPoint(),i.overflow||c.push(l[2]/this.resolution),u=3;break;case Di:var h=t.getFlatInteriorPoints();for(l=[],x=0,S=h.length;x<S;x+=3)i.overflow||c.push(h[x+2]/this.resolution),l.push(h[x],h[x+1]);if(0===l.length)return;u=2}if((I=this.appendFlatPointCoordinates(l,u))===s)return;if(c&&(I-s)/2!=l.length/u){var p=s/2;c=c.filter((function(t,e){var n=o[2*(p+e)]===l[e*u]&&o[2*(p+e)+1]===l[e*u+1];return n||--p,n}))}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var f=i.padding;if(f!=tv&&(i.scale[0]<0||i.scale[1]<0)){var d=i.padding[0],g=i.padding[1],y=i.padding[2],m=i.padding[3];i.scale[0]<0&&(g=-g,m=-m),i.scale[1]<0&&(d=-d,y=-y),f=[d,g,y,m]}var v=this.pixelRatio;this.instructions.push([pS.DRAW_IMAGE,s,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,f==tv?tv:f.map((function(t){return t*v})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var _=1/v;this.hitDetectionInstructions.push([pS.DRAW_IMAGE,s,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,this.declutterImageWithText_,f,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(e)}else{if(!qe(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(l=t.getFlatCoordinates(),a==Ai)b=[l.length];else if(a==ji)b=t.getEnds();else if(a==Ri)b=t.getEnds().slice(0,1);else if(a==Di){var w=t.getEndss();b=[];for(var x=0,S=w.length;x<S;++x)b.push(w[x][0])}this.beginGeometry(t,e);for(var E=i.textAlign,C=0,N=void 0,P=0,O=b.length;P<O;++P){if(null==E){var T=CS(i.maxAngle,l,C,b[P],u);C=T[0],N=T[1]}else N=b[P];for(x=C;x<N;x+=u)o.push(l[x],l[x+1]);var I=o.length;C=b[P],this.drawChars_(s,I),s=I}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||Jm,textBaseline:e.textBaseline||Qm,scale:e.scale});var o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))},e.prototype.drawChars_=function(t,e){var n=this.textStrokeState_,r=this.textState_,i=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,l=PS[r.textBaseline],u=this.textOffsetY_*a,c=this.text_,h=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([pS.DRAW_CHARS,t,e,l,r.overflow,s,r.maxAngle,a,u,i,h*a,c,o,1]),this.hitDetectionInstructions.push([pS.DRAW_CHARS,t,e,l,r.overflow,s,r.maxAngle,1,u,i,h,c,o,1/a])},e.prototype.setTextStyle=function(t,e){var n,r,i;if(t){var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=zm(o.getColor()||Ym)):(r=null,this.textFillState_=r);var s=t.getStroke();if(s){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var a=s.getLineDash(),l=s.getLineDashOffset(),u=s.getWidth(),c=s.getMiterLimit();i.lineCap=s.getLineCap()||Xm,i.lineDash=a?a.slice():Km,i.lineDashOffset=void 0===l?0:l,i.lineJoin=s.getLineJoin()||Zm,i.lineWidth=void 0===u?1:u,i.miterLimit=void 0===c?10:c,i.strokeStyle=zm(s.getColor()||$m)}else i=null,this.textStrokeState_=i;n=this.textState_;var h=t.getFont()||Hm;av(h);var p=t.getScaleArray();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Qm,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||tv,n.scale=void 0===p?[1,1]:p;var f=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:ae(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+ae(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(yS),TS={Circle:ES,Default:yS,Image:vS,LineString:wS,Polygon:ES,Text:OS};const IS=function(){function t(t,e,n,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var r in n){var i=n[r].finish();t[e][r]=i}}return t},t.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(r={},this.buildersByZIndex_[n]=r);var i=r[e];return void 0===i&&(i=new(0,TS[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=i),i},t}();var MS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kS=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return MS(e,t),e.prototype.getFeatures=function(t){return oe()},e.prototype.prepareFrame=function(t){return oe()},e.prototype.renderFrame=function(t,e){return oe()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(r,i){var o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){},e.prototype.getDataAtPixel=function(t,e,n){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(Br,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Nx&&t.changed()},e}(ti);const LS=kS;var AS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const RS=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=i,o}return AS(e,t),e}(xr);var FS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jS=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return FS(e,t),e.prototype.useContainer=function(t,e,n){var r,i,o=this.getLayer().getClassName();if(t&&t.style.opacity===Wm(n)&&t.className===o&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(i=a.getContext("2d")),i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var s=r.style;s.position="absolute",s.width="100%",s.height="100%";var a=(i=wm()).canvas;r.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=r,this.context=i}},e.prototype.clipUnrotated=function(t,e,n){var r=je(n),i=De(n),o=Me(n),s=Ie(n);wi(e.coordinateToPixelTransform,r),wi(e.coordinateToPixelTransform,i),wi(e.coordinateToPixelTransform,o),wi(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;wi(a,r),wi(a,i),wi(a,o),wi(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new RS(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,r,i,o,s){var a=i/2,l=o/2,u=r/e,c=-u,h=-t[0]+s,p=-t[1];return Si(this.tempTransform,a,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var r,i=wi(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer().getExtent();if(s&&!ge(s,wi(e.pixelToCoordinateTransform,t.slice())))return null;try{var a=Math.round(i[0]),l=Math.round(i[1]),u=document.createElement("canvas"),c=u.getContext("2d");u.width=1,u.height=1,c.clearRect(0,0,1,1),c.drawImage(o.canvas,a,l,1,1,0,0,1,1),r=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},e}(LS);const DS=jS,zS="Circle",qS="Default",BS="Image",GS="LineString",US="Polygon",VS="Text";function WS(t,e,n,r,i,o,s,a,l,u,c,h){var p=t[e],f=t[e+1],d=0,g=0,y=0,m=0;function v(){d=p,g=f,p=t[e+=r],f=t[e+1],m+=y,y=Math.sqrt((p-d)*(p-d)+(f-g)*(f-g))}do{v()}while(e<n-r&&m+y<o);for(var _=0===y?0:(o-m)/y,b=zt(d,p,_),w=zt(g,f,_),x=e-r,S=m,E=o+a*l(u,i,c);e<n-r&&m+y<E;)v();var C,N=zt(d,p,_=0===y?0:(E-m)/y),P=zt(g,f,_);if(h){var O=[b,w,N,P];Pi(O,0,4,2,h,O,O),C=O[0]>O[2]}else C=b>N;var T,I=Math.PI,M=[],k=x+r===e;if(y=0,m=S,p=t[e=x],f=t[e+1],k){v(),T=Math.atan2(f-g,p-d),C&&(T+=T>0?-I:I);var L=(N+b)/2,A=(P+w)/2;return M[0]=[L,A,(E-o)/2,T,i],M}for(var R=0,F=i.length;R<F;){v();var j=Math.atan2(f-g,p-d);if(C&&(j+=j>0?-I:I),void 0!==T){var D=j-T;if(D+=D>I?-2*I:D<-I?2*I:0,Math.abs(D)>s)return null}T=j;for(var z=R,q=0;R<F;++R){var B=a*l(u,i[C?F-R-1:R],c);if(e+r<n&&m+y<o+q+B/2)break;q+=B}if(R!==z){var G=C?i.substring(F-z,F-R):i.substring(z,R);L=zt(d,p,_=0===y?0:(o+q/2-m)/y),A=zt(g,f,_),M.push([L,A,q/2,j,G]),o+=q}}return M}var HS=[1/0,1/0,-1/0,-1/0],YS=[],XS=[],KS=[],ZS=[];function $S(t){return t[3].declutterBox}var JS=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function QS(t,e){return"start"!==e&&"end"!==e||JS.test(t)||(e="start"===e?"left":"right"),PS[e]}var tE=function(){function t(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,n,r){var i=t+e+n+r;if(this.labels_[i])return this.labels_[i];var o=r?this.strokeStates[r]:null,s=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,u=[a.scale[0]*l,a.scale[1]*l],c=QS(t,a.textAlign||Jm),h=r&&o.lineWidth?o.lineWidth:0,p=t.split("\n"),f=p.length,d=[],g=function(t,e,n){for(var r=e.length,i=0,o=0;o<r;++o){var s=uv(t,e[o]);i=Math.max(i,s),n.push(s)}return i}(a.font,p,d),y=function(t){var e=sv[t];if(null==e){if(di){var n=Vm(t),r=lv(t,"g");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else iv||((iv=document.createElement("div")).innerHTML="M",iv.style.minHeight="0",iv.style.maxHeight="none",iv.style.height="auto",iv.style.padding="0",iv.style.border="none",iv.style.position="absolute",iv.style.display="block",iv.style.left="-99999px"),iv.style.font=t,document.body.appendChild(iv),e=iv.offsetHeight,document.body.removeChild(iv);sv[t]=e}return e}(a.font),m=g+h,v=[],_=(m+2)*u[0],b=(y*f+h)*u[1],w={width:_<0?Math.floor(_):Math.ceil(_),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:v};1==u[0]&&1==u[1]||v.push("scale",u),v.push("font",a.font),r&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",h),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),(di?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset))),n&&v.push("fillStyle",s.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");var x,S=.5-c,E=c*m+S*h;if(r)for(x=0;x<f;++x)v.push("strokeText",[p[x],E+S*d[x],.5*(h+y)+x*y]);if(n)for(x=0;x<f;++x)v.push("fillText",[p[x],E+S*d[x],.5*(h+y)+x*y]);return this.labels_[i]=w,w},t.prototype.replayTextBackground_=function(t,e,n,r,i,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,n,r,i,o,s,a,l,u,c,h,p,f,d,g){var y,m=n-(s*=h[0]),v=r-(a*=h[1]),_=i+l>t?t-l:i,b=o+u>e?e-u:o,w=f[3]+_*h[0]+f[1],x=f[0]+b*h[1]+f[2],S=m-f[3],E=v-f[0];return(d||0!==c)&&(YS[0]=S,ZS[0]=S,YS[1]=E,XS[1]=E,XS[0]=S+w,KS[0]=XS[0],KS[1]=E+x,ZS[1]=KS[1]),0!==c?(wi(y=Si([1,0,0,1,0,0],n,r,1,1,c,-n,-r),YS),wi(y,XS),wi(y,KS),wi(y,ZS),_e(Math.min(YS[0],XS[0],KS[0],ZS[0]),Math.min(YS[1],XS[1],KS[1],ZS[1]),Math.max(YS[0],XS[0],KS[0],ZS[0]),Math.max(YS[1],XS[1],KS[1],ZS[1]),HS)):_e(Math.min(S,S+w),Math.min(E,E+x),Math.max(S,S+w),Math.max(E,E+x),HS),p&&(m=Math.round(m),v=Math.round(v)),{drawImageX:m,drawImageY:v,drawImageW:_,drawImageH:b,originX:l,originY:u,declutterBox:{minX:HS[0],minY:HS[1],maxX:HS[2],maxY:HS[3],value:g},canvasTransform:y,scale:h}},t.prototype.replayImageOrLabel_=function(t,e,n,r,i,o,s){var a=!(!o&&!s),l=r.declutterBox,u=t.canvas,c=s?s[2]*r.scale[0]/2:0;return l.minX-c<=u.width/e&&l.maxX+c>=0&&l.minY-c<=u.height/e&&l.maxY+c>=0&&(a&&this.replayTextBackground_(t,YS,XS,KS,ZS,o,s),function(t,e,n,r,i,o,s,a,l,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),r.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(t,e){for(var n=t.contextInstructions,r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}(r,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(r,i,o,s,a,0,0,s,a)):t.drawImage(r,i,o,s,a,l,u,s*c[0],a*c[1]),t.restore()}(t,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=wi(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,n,r){var i=this.textStates[e],o=this.createLabel(t,e,r,n),s=this.strokeStates[n],a=this.pixelRatio,l=QS(t,i.textAlign||Jm),u=PS[i.textBaseline||Qm],c=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*i.scale[0])+2*(.5-l)*c,anchorY:u*o.height/a+2*(.5-u)*c}},t.prototype.execute_=function(t,e,n,r,i,o,s,a){var l,u,c;this.pixelCoordinates_&&Ir(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Ni(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),c=n,(u=this.renderedTransform_)[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5]);for(var h,p,f,d,g,y,m,v,_,b,w,x,S,E,C,N,P=0,O=r.length,T=0,I=0,M=0,k=null,L=null,A=this.coordinateCache_,R=this.viewRotation_,F=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,j={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},D=this.instructions!=r||this.overlaps?0:200;P<O;){var z=r[P];switch(z[0]){case pS.BEGIN_GEOMETRY:S=z[1],N=z[3],S.getGeometry()?void 0===s||qe(s,N.getExtent())?++P:P=z[2]+1:P=z[2];break;case pS.BEGIN_PATH:I>D&&(this.fill_(t),I=0),M>D&&(t.stroke(),M=0),I||M||(t.beginPath(),d=NaN,g=NaN),++P;break;case pS.CIRCLE:var q=l[T=z[1]],B=l[T+1],G=l[T+2]-q,U=l[T+3]-B,V=Math.sqrt(G*G+U*U);t.moveTo(q+V,B),t.arc(q,B,V,0,2*Math.PI,!0),++P;break;case pS.CLOSE_PATH:t.closePath(),++P;break;case pS.CUSTOM:T=z[1],h=z[2];var W=z[3],H=z[4],Y=6==z.length?z[5]:void 0;j.geometry=W,j.feature=S,P in A||(A[P]=[]);var X=A[P];Y?Y(l,T,h,2,X):(X[0]=l[T],X[1]=l[T+1],X.length=2),H(X,j),++P;break;case pS.DRAW_IMAGE:T=z[1],h=z[2],v=z[3],p=z[4],f=z[5];var K=z[6],Z=z[7],$=z[8],J=z[9],Q=z[10],tt=z[11],et=z[12],nt=z[13],rt=z[14];if(!v&&z.length>=19){_=z[18],b=z[19],w=z[20],x=z[21];var it=this.drawLabelWithPointPlacement_(_,b,w,x);v=it.label,z[3]=v;var ot=z[22];p=(it.anchorX-ot)*this.pixelRatio,z[4]=p;var st=z[23];f=(it.anchorY-st)*this.pixelRatio,z[5]=f,K=v.height,z[6]=K,nt=v.width,z[13]=nt}var at=void 0;z.length>24&&(at=z[24]);var lt=void 0,ut=void 0,ct=void 0;z.length>16?(lt=z[15],ut=z[16],ct=z[17]):(lt=tv,ut=!1,ct=!1),Q&&F?tt+=R:Q||F||(tt-=R);for(var ht=0;T<h;T+=2)if(!(at&&at[ht++]<nt/this.pixelRatio)){var pt=[t,e,v,zt=this.calculateImageOrLabelDimensions_(v.width,v.height,l[T],l[T+1],nt,K,p,f,$,J,tt,et,i,lt,ut||ct,S),Z,ut?k:null,ct?L:null],ft=void 0,dt=void 0;if(a&&rt){var gt=h-T;if(!rt[gt]){rt[gt]=pt;continue}if(ft=rt[gt],delete rt[gt],dt=$S(ft),a.collides(dt))continue}a&&a.collides(zt.declutterBox)||(ft&&(a&&a.insert(dt),this.replayImageOrLabel_.apply(this,ft)),a&&a.insert(zt.declutterBox),this.replayImageOrLabel_.apply(this,pt))}++P;break;case pS.DRAW_CHARS:var yt=z[1],mt=z[2],vt=z[3],_t=z[4];x=z[5];var bt=z[6],wt=z[7],xt=z[8];w=z[9];var St=z[10];_=z[11],b=z[12];var Et=[z[13],z[13]],Ct=this.textStates[b],Nt=Ct.font,Pt=[Ct.scale[0]*wt,Ct.scale[1]*wt],Ot=void 0;Nt in this.widths_?Ot=this.widths_[Nt]:(Ot={},this.widths_[Nt]=Ot);var Tt=ko(l,yt,mt,2),It=Math.abs(Pt[0])*cv(Nt,_,Ot);if(_t||It<=Tt){var Mt=this.textStates[b].textAlign,kt=WS(l,yt,mt,2,_,(Tt-It)*PS[Mt],bt,Math.abs(Pt[0]),cv,Nt,Ot,F?0:this.viewRotation_);t:if(kt){var Lt=[],At=void 0,Rt=void 0,Ft=void 0,jt=void 0,Dt=void 0;if(w)for(At=0,Rt=kt.length;At<Rt;++At){Ft=(Dt=kt[At])[4],jt=this.createLabel(Ft,b,"",w),p=Dt[2]+(Pt[0]<0?-St:St),f=vt*jt.height+2*(.5-vt)*St*Pt[1]/Pt[0]-xt;var zt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Dt[0],Dt[1],jt.width,jt.height,p,f,0,0,Dt[3],Et,!1,tv,!1,S);if(a&&a.collides(zt.declutterBox))break t;Lt.push([t,e,jt,zt,1,null,null])}if(x)for(At=0,Rt=kt.length;At<Rt;++At){if(Ft=(Dt=kt[At])[4],jt=this.createLabel(Ft,b,x,""),p=Dt[2],f=vt*jt.height-xt,zt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Dt[0],Dt[1],jt.width,jt.height,p,f,0,0,Dt[3],Et,!1,tv,!1,S),a&&a.collides(zt.declutterBox))break t;Lt.push([t,e,jt,zt,1,null,null])}a&&a.load(Lt.map($S));for(var qt=0,Bt=Lt.length;qt<Bt;++qt)this.replayImageOrLabel_.apply(this,Lt[qt])}}++P;break;case pS.END_GEOMETRY:if(void 0!==o){var Gt=o(S=z[1],N);if(Gt)return Gt}++P;break;case pS.FILL:D?I++:this.fill_(t),++P;break;case pS.MOVE_TO_LINE_TO:for(T=z[1],h=z[2],E=l[T],m=(C=l[T+1])+.5|0,(y=E+.5|0)===d&&m===g||(t.moveTo(E,C),d=y,g=m),T+=2;T<h;T+=2)y=(E=l[T])+.5|0,m=(C=l[T+1])+.5|0,T!=h-2&&y===d&&m===g||(t.lineTo(E,C),d=y,g=m);++P;break;case pS.SET_FILL_STYLE:k=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,M&&(t.stroke(),M=0)),t.fillStyle=z[1],++P;break;case pS.SET_STROKE_STYLE:L=z,M&&(t.stroke(),M=0),this.setStrokeStyle_(t,z),++P;break;case pS.STROKE:D?M++:t.stroke(),++P;break;default:++P}}I&&this.fill_(t),M&&t.stroke()},t.prototype.execute=function(t,e,n,r,i,o){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,i,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,n,r,i){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,i)},t}();const eE=tE;var nE=[US,zS,GS,BS,VS,qS],rE=function(){function t(t,e,n,r,i,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(i)}return t.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);var r=t[e];for(var i in r){var o=r[i];n[i]=new eE(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o){var s=2*(r=Math.round(r))+1,a=Si(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=wm(s,s));var u,c=this.hitDetectionContext_;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):l||c.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(Ce(u=[1/0,1/0,-1/0,-1/0],t),pe(u,e*(this.renderBuffer_+r),u));var h,p=function(t){if(void 0!==iE[t])return iE[t];for(var e=2*t+1,n=t*t,r=new Array(n+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var s=i*i+o*o;if(s>n)break;var a=r[s];a||(a=[],r[s]=a),a.push(4*((t+i)*e+(t+o))+3),i>0&&a.push(4*((t-i)*e+(t+o))+3),o>0&&(a.push(4*((t+i)*e+(t-o))+3),i>0&&a.push(4*((t-i)*e+(t-o))+3))}for(var l=[],u=(i=0,r.length);i<u;++i)r[i]&&l.push.apply(l,r[i]);return iE[t]=l,l}(r);function f(t,e){for(var n=c.getImageData(0,0,s,s).data,a=0,l=p.length;a<l;a++)if(n[p[a]]>0){if(!o||h!==BS&&h!==VS||-1!==o.indexOf(t)){var u=(p[a]-3)/4,f=r-u%s,d=r-(u/s|0),g=i(t,e,f*f+d*d);if(g)return g}c.clearRect(0,0,s,s);break}}var d,g,y,m,v,_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(Cr),d=_.length-1;d>=0;--d){var b=_[d].toString();for(y=this.executorsByZIndex_[b],g=nE.length-1;g>=0;--g)if(void 0!==(m=y[h=nE[g]])&&(v=m.executeHitDetection(c,a,n,f,u)))return v}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],r=e[1],i=e[2],o=e[3],s=[n,r,n,o,i,o,i,r];return Ni(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return jr(this.executorsByZIndex_)},t.prototype.execute=function(t,e,n,r,i,o,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(Cr),this.maxExtent_&&(t.save(),this.clip(t,n));var l,u,c,h,p,f,d=o||nE;for(s&&a.reverse(),l=0,u=a.length;l<u;++l){var g=a[l].toString();for(p=this.executorsByZIndex_[g],c=0,h=d.length;c<h;++c)void 0!==(f=p[d[c]])&&f.execute(t,e,n,r,i,s)}this.maxExtent_&&t.restore()},t}(),iE={};const oE=rE;var sE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aE=function(t){function e(e,n,r,i,o,s,a){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=n,l.extent_=r,l.transform_=i,l.viewRotation_=o,l.squaredTolerance_=s,l.userTransform_=a,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=[1,0,0,1,0,0],l}return sE(e,t),e.prototype.drawImages_=function(t,e,n,r){if(this.image_){var i=Ni(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var u=0,c=i.length;u<c;u+=2){var h=i[u]-this.imageAnchorX_,p=i[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var f=h+this.imageAnchorX_,d=p+this.imageAnchorY_;Si(s,f,d,1,1,l,-f,-d),o.setTransform.apply(o,s),o.translate(f,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,n,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Ni(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=r){var a=i[e]+this.textOffsetX_,l=i[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]){var u=Si(this.tmpLocalTransform_,a,l,1,1,s,-a,-l);o.setTransform.apply(o,u),o.translate(a,l),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,a,l),this.textFillState_&&o.fillText(this.text_,a,l)}}},e.prototype.moveToLineTo_=function(t,e,n,r,i){var o=this.context_,s=Ni(t,e,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;i&&(a-=2);for(var l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return i&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.moveToLineTo_(t,e,n[i],r,!0);return e},e.prototype.drawCircle=function(t){if(qe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var r=t.getFlatCoordinates();if(r){var i=t.getStride();return Ni(r,0,r.length,i,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Li:this.drawPoint(t);break;case Ai:this.drawLineString(t);break;case Ri:this.drawPolygon(t);break;case Fi:this.drawMultiPoint(t);break;case ji:this.drawMultiLineString(t);break;case Di:this.drawMultiPolygon(t);break;case zi:this.drawGeometryCollection(t);break;case qi:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&qe(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),qe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(qe(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),s=t.getStride();n.beginPath();for(var a=0,l=o.length;a<l;++a)i=this.moveToLineTo_(r,i,o[a],s,!1);n.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),qe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),qe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=i.length;s<a;++s){var l=i[s];r=this.drawRings_(n,r,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Ir(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:Jm;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var n=this;if(t){var r=t.getColor();this.fillState_={fillStyle:zm(r||Ym)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),c=e.getMiterLimit(),h=s||Km;this.strokeState_={lineCap:void 0!==o?o:Xm,lineDash:1===this.pixelRatio_?h:h.map((function(t){return t*n.pixelRatio_})),lineDashOffset:(a||0)*this.pixelRatio_,lineJoin:void 0!==l?l:Zm,lineWidth:(void 0!==u?u:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:zm(i||$m)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var n=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*this.pixelRatio_,this.imageAnchorY_=n[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:zm(n||Ym)}}else this.textFillState_=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),a=r.getLineDashOffset(),l=r.getLineJoin(),u=r.getWidth(),c=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:Xm,lineDash:s||Km,lineDashOffset:a||0,lineJoin:void 0!==l?l:Zm,lineWidth:void 0!==u?u:1,miterLimit:void 0!==c?c:10,strokeStyle:zm(i||$m)}}else this.textStrokeState_=null;var h=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScaleArray(),m=t.getText(),v=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:Hm,textAlign:void 0!==v?v:Jm,textBaseline:void 0!==_?_:Qm},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""},e}(fS);const lE=aE;var uE=.5;function cE(t,e,n,r,i,o,s){var a=wm(t[0]*uE,t[1]*uE);a.imageSmoothingEnabled=!1;for(var l=a.canvas,u=new lE(a,uE,i,null,s),c=n.length,h=Math.floor(16777215/c),p={},f=1;f<=c;++f){var d=n[f-1],g=d.getStyleFunction()||r;if(r){var y=g(d,o);if(y){Array.isArray(y)||(y=[y]);for(var m="#"+("000000"+(f*h).toString(16)).slice(-6),v=0,_=y.length;v<_;++v){var b=y[v],w=b.getGeometryFunction()(d);if(w&&qe(i,w.getExtent())){var x=b.clone(),S=x.getFill();S&&S.setColor(m);var E=x.getStroke();E&&(E.setColor(m),E.setLineDash(null)),x.setText(void 0);var C=b.getImage();if(C&&0!==C.getOpacity()){var N=C.getImageSize();if(!N)continue;var P=wm(N[0],N[1],void 0,{alpha:!1}),O=P.canvas;P.fillStyle=m,P.fillRect(0,0,O.width,O.height),x.setImage(new jm({img:O,imgSize:N,anchor:C.getAnchor(),anchorXUnits:om,anchorYUnits:om,offset:C.getOrigin(),opacity:1,size:C.getSize(),scale:C.getScale(),rotation:C.getRotation(),rotateWithView:C.getRotateWithView()}))}var T=x.getZIndex()||0;(k=p[T])||(k={},p[T]=k,k.Polygon=[],k.Circle=[],k.LineString=[],k.Point=[]),k[w.getType().replace("Multi","")].push(w,x)}}}}}for(var I=Object.keys(p).map(Number).sort(Cr),M=(f=0,I.length);f<M;++f){var k=p[I[f]];for(var L in k){var A=k[L];for(v=0,_=A.length;v<_;v+=2){u.setStyle(A[v+1]);for(var R=0,F=e.length;R<F;++R)u.setTransform(e[R]),u.drawGeometry(A[v])}}}return a.getImageData(0,0,l.width,l.height)}function hE(t,e,n){var r=[];if(n){var i=Math.floor(Math.round(t[0])*uE),o=Math.floor(Math.round(t[1])*uE),s=4*(kt(i,0,n.width-1)+kt(o,0,n.height-1)*n.width),a=n.data[s],l=n.data[s+1],u=n.data[s+2]+256*(l+256*a),c=Math.floor(16777215/e.length);u&&u%c==0&&r.push(e[u/c-1])}return r}var pE={Point:function(t,e,n,r,i){var o,s=n.getImage(),a=n.getText();if(i&&(t=i,o=s&&a&&a.getText()?{}:void 0),s){if(2!=s.getImageState())return;var l=t.getBuilder(n.getZIndex(),BS);l.setImageStyle(s,o),l.drawPoint(e,r)}if(a&&a.getText()){var u=t.getBuilder(n.getZIndex(),VS);u.setTextStyle(a,o),u.drawText(e,r)}},LineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var s=t.getBuilder(n.getZIndex(),GS);s.setFillStrokeStyle(null,o),s.drawLineString(e,r)}var a=n.getText();if(a&&a.getText()){var l=(i||t).getBuilder(n.getZIndex(),VS);l.setTextStyle(a),l.drawText(e,r)}},Polygon:function(t,e,n,r,i){var o=n.getFill(),s=n.getStroke();if(o||s){var a=t.getBuilder(n.getZIndex(),US);a.setFillStrokeStyle(o,s),a.drawPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),VS);u.setTextStyle(l),u.drawText(e,r)}},MultiPoint:function(t,e,n,r,i){var o,s=n.getImage(),a=n.getText();if(i&&(t=i,o=s&&a&&a.getText()?{}:void 0),s){if(2!=s.getImageState())return;var l=t.getBuilder(n.getZIndex(),BS);l.setImageStyle(s,o),l.drawMultiPoint(e,r)}if(a&&a.getText()){var u=(i||t).getBuilder(n.getZIndex(),VS);u.setTextStyle(a,o),u.drawText(e,r)}},MultiLineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var s=t.getBuilder(n.getZIndex(),GS);s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,r)}var a=n.getText();if(a&&a.getText()){var l=(i||t).getBuilder(n.getZIndex(),VS);l.setTextStyle(a),l.drawText(e,r)}},MultiPolygon:function(t,e,n,r,i){var o=n.getFill(),s=n.getStroke();if(s||o){var a=t.getBuilder(n.getZIndex(),US);a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),VS);u.setTextStyle(l),u.drawText(e,r)}},GeometryCollection:function(t,e,n,r,i){var o,s,a=e.getGeometriesArray();for(o=0,s=a.length;o<s;++o)(0,pE[a[o].getType()])(t,a[o],n,r,i)},Circle:function(t,e,n,r,i){var o=n.getFill(),s=n.getStroke();if(o||s){var a=t.getBuilder(n.getZIndex(),zS);a.setFillStrokeStyle(o,s),a.drawCircle(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),VS);u.setTextStyle(l),u.drawText(e,r)}}};function fE(t,e){return parseInt(ae(t),10)-parseInt(ae(e),10)}function dE(t,e){var n=gE(t,e);return n*n}function gE(t,e){return.5*t/e}function yE(t,e,n,r,i,o,s){var a=!1,l=n.getImage();if(l){var u=l.getImageState();2==u||3==u?l.unlistenImageChange(i):(0==u&&l.load(),u=l.getImageState(),l.listenImageChange(i),a=!0)}return function(t,e,n,r,i,o){var s=n.getGeometryFunction()(e);if(s){var a=s.simplifyTransformed(r,i);n.getRenderer()?mE(t,a,n,e):(0,pE[a.getType()])(t,a,n,e,o)}}(t,e,n,r,o,s),a}function mE(t,e,n,r){if(e.getType()!=zi)t.getBuilder(n.getZIndex(),qS).drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer());else for(var i=e.getGeometries(),o=0,s=i.length;o<s;++o)mE(t,i[o],n,r)}var vE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_E=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=[1/0,1/0,-1/0,-1/0],n.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return vE(e,t),e.prototype.useContainer=function(e,n,r){r<1&&(e=null),t.prototype.useContainer.call(this,e,n,r)},e.prototype.renderWorlds=function(t,e,n){var r=e.extent,i=e.viewState,o=i.center,s=i.resolution,a=i.projection,l=i.rotation,u=a.getExtent(),c=this.getLayer().getSource(),h=e.pixelRatio,p=e.viewHints,f=!(p[0]||p[1]),d=this.context,g=Math.round(e.size[0]*h),y=Math.round(e.size[1]*h),m=c.getWrapX()&&a.canWrapX(),v=m?ze(u):null,_=m?Math.ceil((r[2]-u[2])/v)+1:1,b=m?Math.floor((r[0]-u[0])/v):0;do{var w=this.getRenderTransform(o,s,l,h,g,y,b*v);t.execute(d,1,w,l,f,void 0,n)}while(++b<_)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];!function(t,e,n){bi(t,e,0,0,n,0,0)}(this.pixelTransform,1/n,1/n),Ei(this.inversePixelTransform,this.pixelTransform);var i=Ci(this.pixelTransform);this.useContainer(e,i,r.opacity);var o=this.context,s=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;var u=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);s.width!=u||s.height!=c?(s.width=u,s.height=c,s.style.transform!==i&&(s.style.transform=i)):this.containerReused||o.clearRect(0,0,u,c),this.preRender(o,t);var h=t.viewState,p=(h.projection,!1),f=!0;if(r.extent&&this.clipping){var d=wn(r.extent);(p=(f=qe(d,t.extent))&&!ye(d,t.extent))&&this.clipUnrotated(o,t,d)}f&&this.renderWorlds(a,t),p&&o.restore(),this.postRender(o,t);var g=Wm(r.opacity),y=this.container;return g!==y.style.opacity&&(y.style.opacity=g),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];wi(this.pixelTransform,n);var r=this.renderedCenter_,i=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,a=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],c=n[0]*uE,h=n[1]*uE;u.push(this.getRenderTransform(r,i,o,uE,c,h,0).slice());var p=l.getSource(),f=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!ye(f,a)){for(var d=a[0],g=ze(f),y=0,m=void 0;d<f[0];)m=g*--y,u.push(this.getRenderTransform(r,i,o,uE,c,h,m).slice()),d+=g;for(y=0,d=a[2];d>f[2];)m=g*++y,u.push(this.getRenderTransform(r,i,o,uE,c,h,m).slice()),d-=g}this.hitDetectionImageData_=cE(n,u,this.renderedFeatures_,l.getStyleFunction(),a,i,o)}e(hE(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=this;if(this.replayGroup_){var s,a=e.viewState.resolution,l=e.viewState.rotation,u=this.getLayer(),c={},h=function(t,e,n){var o=ae(t),s=c[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return c[o]=!0,i.splice(i.lastIndexOf(s),1),r(t,u,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return c[o]=!0,r(t,u,e);i.push(c[o]={feature:t,layer:u,geometry:e,distanceSq:n,callback:r})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some((function(r){return s=r.forEachFeatureAtCoordinate(t,a,l,n,h,r===o.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),s}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource();if(!n)return!1;var r=t.viewHints[0],i=t.viewHints[1],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&r||!s&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,l=t.viewState,u=l.projection,c=l.resolution,h=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=fE);var g=l.center.slice(),y=pe(a,f*c),m=y.slice(),v=[y.slice()],_=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!ye(_,t.extent)){var b=ze(_),w=Math.max(ze(y)/2,b);y[0]=_[0]-w,y[2]=_[2]+w,Ke(g,u);var x=function(t,e){var n=e.getExtent(),r=ke(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){var i=ze(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}(v[0],u);x[0]<_[0]&&x[2]<_[2]?v.push([x[0]+b,x[1],x[2]+b,x[3]]):x[0]>_[0]&&x[2]>_[2]&&v.push([x[0]-b,x[1],x[2]-b,x[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&ye(this.wrappedRenderedExtent_,y))return Ir(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S,E=new IS(gE(c,h),y,c,h);this.getLayer().getDeclutter()&&(S=new IS(gE(c,h),y,c,h));var C,N=mn();if(N){for(var P=0,O=v.length;P<O;++P){var T=bn(v[P]);n.loadFeatures(T,xn(c),N)}C=un(N,u)}else for(P=0,O=v.length;P<O;++P)n.loadFeatures(v[P],c,u);var I=dE(c,h),M=function(t){var n,r=t.getStyleFunction()||e.getStyleFunction();if(r&&(n=r(t,c)),n){var i=this.renderFeature(t,I,n,E,C,S);this.dirty_=this.dirty_||i}}.bind(this),k=bn(y),L=n.getFeaturesInExtent(k);for(d&&L.sort(d),P=0,O=L.length;P<O;++P)M(L[P]);this.renderedFeatures_=L;var A=E.finish(),R=new oE(y,c,h,n.getOverlaps(),A,e.getRenderBuffer());return S&&(this.declutterExecutorGroup=new oE(y,c,h,n.getOverlaps(),S.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=m,this.wrappedRenderedExtent_=y,this.renderedCenter_=g,this.renderedProjection_=u,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,r,i,o){if(!n)return!1;var s=!1;if(Array.isArray(n))for(var a=0,l=n.length;a<l;++a)s=yE(r,t,n[a],e,this.boundHandleStyleImageChange_,i,o)||s;else s=yE(r,t,n,e,this.boundHandleStyleImageChange_,i,o);return s},e}(DS);const bE=_E;var wE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const xE=function(t){function e(e){return t.call(this,e)||this}return wE(e,t),e.prototype.createRenderer=function(){return new bE(this)},e}(sS),SE="postrender";var EE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CE=function(t){function e(e){var n=t.call(this)||this,r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),n.element=r||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return EE(e,t),e.prototype.disposeInternal=function(){Sm(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Sm(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)$r(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Lr&&this.listenerKeys.push(Kr(t,SE,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(ii);const NE=CE;var PE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),OE="units",TE="degrees",IE="metric",ME=[1,2,5],kE=25.4/.28,LE=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,n.once,n.un,n.innerElement_=document.createElement("div"),n.innerElement_.className=i+"-inner",n.element.className=i+" ol-unselectable",n.element.appendChild(n.innerElement_),n.viewState_=null,n.minWidth_=void 0!==r.minWidth?r.minWidth:64,n.renderedVisible_=!1,n.renderedWidth_=void 0,n.renderedHTML_="",n.addChangeListener(OE,n.handleUnitsChanged_),n.setUnits(r.units||IE),n.scaleBar_=r.bar||!1,n.scaleBarSteps_=r.steps||4,n.scaleBarText_=r.text||!1,n.dpi_=r.dpi||void 0,n}return PE(e,t),e.prototype.getUnits=function(){return this.get(OE)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(OE,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,n=t.projection,r=this.getUnits(),i=r==TE?It.DEGREES:It.METERS,o=en(n,t.resolution,e,i),s=this.minWidth_*(this.dpi_||kE)/kE,a=s*o,l="";if(r==TE){var u=Tt[It.DEGREES];(a*=u)<u/60?(l="",o*=3600):a<u?(l="",o*=60):l=""}else"imperial"==r?a<.9144?(l="in",o/=.0254):a<1609.344?(l="ft",o/=.3048):(l="mi",o/=1609.344):"nautical"==r?(o/=1852,l="nm"):r==IE?a<.001?(l="m",o*=1e6):a<1?(l="mm",o*=1e3):a<1e3?l="m":(l="km",o/=1e3):"us"==r?a<.9144?(l="in",o*=39.37):a<1609.344?(l="ft",o/=.30480061):(l="mi",o/=1609.3472):ce(!1,33);for(var c,h,p,f,d=3*Math.floor(Math.log(s*o)/Math.log(10));;){p=Math.floor(d/3);var g=Math.pow(10,p);if(c=ME[(d%3+3)%3]*g,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(h>=s)break;++d}f=this.scaleBar_?this.createScaleBar(h,c,l):c.toFixed(p<0?-p:0)+" "+l,this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,n){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,s="#ffffff",a=0;a<this.scaleBarSteps_;a++)0===a&&i.push(this.createMarker("absolute",a)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+s+';"></div>'+this.createMarker("relative",a)+(a%2==0||2===this.scaleBarSteps_?this.createStepText(a,t,!1,e,n):"")+"</div>"),a===this.scaleBarSteps_-1&&i.push(this.createStepText(a+1,t,!0,e,n)),s="#ffffff"===s?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,n,r,i){var o=(0===t?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(n?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=en(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),e=this.dpi_||kE,n=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*n*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},e}(NE);const AE=LE,RE="center",FE="resolution",jE="rotation";function DE(t,e,n){return function(r,i,o,s,a){if(r){var l=e?0:o[0]*i,u=e?0:o[1]*i,c=a?a[0]:0,h=a?a[1]:0,p=t[0]+l/2+c,f=t[2]-l/2+c,d=t[1]+u/2+h,g=t[3]-u/2+h;p>f&&(f=p=(f+p)/2),d>g&&(g=d=(g+d)/2);var y=kt(r[0],p,f),m=kt(r[1],d,g),v=30*i;return s&&n&&(y+=-v*Math.log(1+Math.max(0,p-r[0])/v)+v*Math.log(1+Math.max(0,r[0]-f)/v),m+=-v*Math.log(1+Math.max(0,d-r[1])/v)+v*Math.log(1+Math.max(0,r[1]-g)/v)),[y,m]}}}function zE(t){return t}function qE(t,e,n,r){var i=ze(e)/n[0],o=Re(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function BE(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),kt(r,n/2,2*e)}function GE(t,e,n,r,i){return function(o,s,a,l){if(void 0!==o){var u=r?qE(t,r,a,i):t;return(void 0===n||n)&&l?BE(o,u,e):kt(o,e,u)}}}function UE(t){return void 0!==t?0:void 0}function VE(t){return void 0!==t?t:void 0}function WE(t){return Math.pow(t,3)}function HE(t){return 1-WE(1-t)}function YE(t){return 3*t*t-2*t*t*t}function XE(t){return t}var KE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZE=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=Ar({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=rn(r.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,r.center&&(r.center=_n(r.center,n.projection_)),r.extent&&(r.extent=wn(r.extent,n.projection_)),n.applyOptions_(r),n}return KE(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,r,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,a=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,u=void 0!==t.showFullExtent&&t.showFullExtent,c=rn(t.projection,"EPSG:3857"),h=c.getExtent(),p=t.constrainOnlyCenter,f=t.extent;if(a||f||!c.isGlobal()||(p=!1,f=h),void 0!==t.resolutions){var d=t.resolutions;n=d[i],r=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,n,r){return function(i,o,s,a){if(void 0!==i){var l=t[0],u=t[t.length-1],c=n?qE(l,n,s,r):l;if(a)return void 0===e||e?BE(i,c,u):kt(i,u,c);var h=Math.min(c,i),p=Math.floor(Pr(t,h,o));return t[p]>c&&p<t.length-1?t[p+1]:t[p]}}}(d,l,!p&&f,u):GE(n,r,l,!p&&f,u)}else{var g=(h?Math.max(ze(h),Re(h)):360*Tt[It.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),y=g/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=g/Math.pow(s,i),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(s,o):g/Math.pow(s,o):y),o=i+Math.floor(Math.log(n/r)/Math.log(s)),r=n/Math.pow(s,o-i),e=t.constrainResolution?function(t,e,n,r,i,o){return function(s,a,l,u){if(void 0!==s){var c=i?qE(e,i,l,o):e,h=void 0!==n?n:0;if(u)return void 0===r||r?BE(s,c,h):kt(s,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),f=-a*(.5-1e-9)+.5,d=Math.min(c,s),g=Math.floor(Math.log(e/d)/Math.log(t)+f),y=Math.max(p,g);return kt(e/Math.pow(t,y),h,c)}}}(s,n,r,l,!p&&f,u):GE(n,r,l,!p&&f,u)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:s}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return DE(t.extent,t.constrainOnlyCenter,e)}var n=rn(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,DE(r,!1,!1)}return zE}(t),r=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(n=jt(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}):!1===e?VE:"number"==typeof e?function(t){var e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):VE}return UE;var n}(t);this.constraints_={center:n,resolution:r,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var r=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(r[3]-e[3]+e[1]-r[1]),s=i/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-s])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=Ar({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Ar({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=Ar({},r)).center=_n(r.center,this.getProjection())),r.anchor&&((r=Ar({},r)).anchor=_n(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var r=0;r<n&&!this.isDef();++r){var i=arguments[r];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(r!==n){for(var o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,u=[];r<n;++r){var c=arguments[r],h={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||YE,callback:e};if(c.center&&(h.sourceCenter=s,h.targetCenter=c.center.slice(),s=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=l;var p=Dt(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+p,l=h.targetRotation}JE(h)?h.complete=!0:o+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(0,1),this.updateAnimations_()}else e&&$E(e,!0)},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var r=this.animations_[e];if(r[0].callback&&$E(r[0].callback,!1),!t)for(var i=0,o=r.length;i<o;++i){var s=r[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var r=this.animations_[n],i=!0,o=0,s=r.length;o<s;++o){var a=r[o];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):i=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],f=a.targetCenter[0],d=a.targetCenter[1];this.nextCenter_=a.targetCenter;var g=h+c*(f-h),y=p+c*(d-p);this.targetCenter_=[g,y]}if(a.sourceResolution&&a.targetResolution){var m=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){var v=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(m,0,v,!0);this.targetCenter_=this.calculateCenterZoom(_,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var b=1===c?Dt(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){var w=this.constraints_.rotation(b,!0);this.targetCenter_=this.calculateCenterRotate(w,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=b}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=r[0].callback;x&&$E(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,r,i,o=this.getCenterInternal();return void 0!==o&&(He(n=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),i=e,(r=n)[0]+=+i[0],r[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();return void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?vn(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(RE)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return bn(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();ce(n,1);var r=this.getResolution();ce(void 0!==r,2);var i=this.getRotation();return ce(void 0!==i,3),Ae(n,r,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(FE)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(wn(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),r=ze(t)/n[0],i=Re(t)/n[1];return Math.max(r,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(jE)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.padding_;if(i){var o=this.getViewportSizeMinusPadding_();r=QE(r,this.getViewportSize_(),[o[0]/2+i[3],o[1]/2+i[0]],e,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var i=Pr(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=kt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,kt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(ce(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))ce(!Be(t),25),n=ss(r=wn(t,this.getProjection()));else if(t.getType()===qi){var r;(n=ss(r=wn(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),ke(r))}else{var i=mn();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),s=1/0,a=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=o){var p=i[c]*n-i[c+1]*r,f=i[c]*r+i[c+1]*n;s=Math.min(s,p),a=Math.min(a,f),l=Math.max(l,p),u=Math.max(u,f)}return[s,a,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.getViewportSizeMinusPadding_());var i,o=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,s?0:1);var u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),p=ke(a);p[0]+=(o[1]-o[3])/2*l,p[1]+=(o[0]-o[2])/2*l;var f=p[0]*h-p[1]*c,d=p[1]*h+p[0]*c,g=this.getConstrainedCenter([f,d],l),y=n.callback?n.callback:Lr;void 0!==n.duration?this.animateInternal({resolution:l,center:g,duration:n.duration,easing:n.easing},y):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),$E(y,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(_n(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(QE(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,r){var i,o=this.padding_;if(o&&t){var s=this.getViewportSizeMinusPadding_(-n),a=QE(t,r,[s[0]/2+o[3],s[1]/2+o[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=vn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&_n(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=_n(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(_n(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,i,n),s=this.constraints_.center(this.targetCenter_,o,i,n,this.calculateCenterShift(this.targetCenter_,o,r,i));this.get(jE)!==r&&this.set(jE,r),this.get(FE)!==o&&this.set(FE,o),this.get(RE)&&We(this.get(RE),s)||this.set(RE,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var r=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(0===r&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();var u=n||(0===r?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===o&&this.getCenterInternal()&&We(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:r,easing:HE,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var r=n&&_n(n,this.getProjection());this.endInteractionInternal(t,e,r)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,r)},e}(ii);function $E(t,e){setTimeout((function(){t(e)}),0)}function JE(t){return!(t.sourceCenter&&t.targetCenter&&!We(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function QE(t,e,n,r,i){var o=Math.cos(-i),s=Math.sin(-i),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;return[(a+=(e[0]/2-n[0])*r)*o-(l+=(n[1]-e[1]/2)*r)*(s=-s),l*o+a*s]}const tC=ZE;var eC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nC=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return eC(e,t),e.prototype.dispatchRenderEvent=function(t,e){oe()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Si(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ei(r,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,s,a){var l,u=e.viewState;function c(t,e,n,r){return i.call(o,e,t?n:null,r)}var h=u.projection,p=Ke(t.slice(),h),f=[[0,0]];if(h.canWrapX()&&r){var d=ze(h.getExtent());f.push([-d,0],[d,0])}for(var g=e.layerStatesArray,y=g.length,m=[],v=[],_=0;_<f.length;_++)for(var b=y-1;b>=0;--b){var w=g[b],x=w.layer;if(x.hasRenderer()&&eS(w,u)&&s.call(a,x)){var S=x.getRenderer(),E=x.getSource();if(S&&E){var C=E.getWrapX()?p:t,N=c.bind(null,w.managed);v[0]=C[0]+f[_][0],v[1]=C[1]+f[_][1],l=S.forEachFeatureAtCoordinate(v,e,n,N,m)}if(l)return l}}if(0!==m.length){var P=1/m.length;return m.forEach((function(t,e){return t.distanceSq+=e*P})),m.sort((function(t,e){return t.distanceSq-e.distanceSq})),m.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){return oe()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,r,Mr,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){oe()},e.prototype.scheduleExpireIconCache=function(t){Nm.canExpireCache()&&t.postRenderFunctions.push(rC)},e}(Er);function rC(t,e){Nm.expire()}const iC=nC;var oC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sC=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=Kr(ev,Sr,e.redrawText.bind(e)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return oC(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var r=new RS(t,void 0,e);n.dispatchEvent(r)}},e.prototype.disposeInternal=function(){$r(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent($x,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var r=[],i=null,o=0,s=e.length;o<s;++o){var a=e[o];if(t.layerIndex=o,eS(a,n)&&(a.sourceState==Nx||a.sourceState==Cx)){var l=a.layer,u=l.render(t,i);u&&(u!==i&&(this.children_.push(u),i=u),"getDeclutter"in l&&r.push(l))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,r=0;;++r){var i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){for(var o=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],u=l.layer;if(u.hasRenderer()&&eS(l,o)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=r(u,c);if(h)return h}}}},e}(iC);const aC=sC;var lC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uC="layers",cC=function(t){function e(e){var n=this,r=e||{},i=Ar({},r);delete i.layers;var o=r.layers;return(n=t.call(this,i)||this).on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(uC,n.handleLayersChanged_),o?Array.isArray(o)?o=new wx(o.slice(),{unique:!0}):ce("function"==typeof o.getArray,43):o=new wx(void 0,{unique:!0}),n.setLayers(o),n}return lC(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach($r),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Kr(t,gx,this.handleLayersAdd_,this),Kr(t,yx,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach($r);Rr(this.listenerKeys_);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.listenerKeys_[ae(o)]=[Kr(o,Sr,this.handleLayerChange_,this),Kr(o,Br,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[ae(e)]=[Kr(e,Sr,this.handleLayerChange_,this),Kr(e,Br,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=ae(t.element);this.listenerKeys_[e].forEach($r),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(uC)},e.prototype.setLayers=function(t){this.set(uC,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var r=this.getLayerState(),i=r.zIndex;t||void 0!==r.zIndex||(i=0);for(var o=n,s=e.length;o<s;o++){var a=e[o];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),a.minZoom=Math.max(a.minZoom,r.minZoom),a.maxZoom=Math.min(a.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==a.extent?a.extent=Fe(a.extent,r.extent):a.extent=r.extent),void 0===a.zIndex&&(a.zIndex=i)}return e},e.prototype.getSourceState=function(){return Nx},e}(Zx);const hC=cC;var pC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fC=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==r?r:null,i}return pC(e,t),e}(xr);const dC=fC;var gC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yC=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,o)||this;return s.originalEvent=r,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s}return gC(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(dC);const mC=yC,vC={SINGLECLICK:"singleclick",CLICK:Ur,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},_C="pointerdown";var bC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wC=function(t){function e(e,n){var r=t.call(this,e)||this;r.map_=e,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var i=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=i,r.pointerdownListenerKey_=Kr(i,_C,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=Kr(i,"pointermove",r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(Yr,r.boundHandleTouchMove_,!!yi&&{passive:!1}),r}return bC(e,t),e.prototype.emulateClick_=function(t){var e=new mC(vC.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new mC(vC.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new mC(vC.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==vC.POINTERUP||e.type==vC.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==vC.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new mC(vC.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach($r),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new mC(vC.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var r=t[n];this.down_[n]="function"==typeof r?Lr:r}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Kr(i,vC.POINTERMOVE,this.handlePointerMove_,this),Kr(i,vC.POINTERUP,this.handlePointerUp_,this),Kr(this.element_,vC.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Kr(this.element_.getRootNode(),vC.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new mC(vC.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new mC(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&($r(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Yr,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&($r(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach($r),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(qr);const xC=wC,SC="layergroup",EC="size",CC="target",NC="view";var PC=1/0,OC=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Rr(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},t.prototype.enqueue=function(t){ce(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=PC&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,i=e[t],o=n[t],s=t;t<r>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<r&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=o,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,i=n[e],o=r[e];e>t;){var s=this.getParentIndex_(e);if(!(r[s]>o))break;n[e]=n[s],r[e]=r[s],e=s}n[e]=i,r[e]=o},t.prototype.reprioritize=function(){var t,e,n,r=this.priorityFunction_,i=this.elements_,o=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=r(t=i[e]))==PC?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=n,i[s++]=t);i.length=s,o.length=s,this.heapify_()},t}();const TC=OC;var IC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MC=function(t){function e(e,n){var r=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return IC(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(Br,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(Br,this.boundHandleTileChange_);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,r,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),0!==n.getState()||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++i,n.load())},e}(TC);const kC=MC;var LC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AC=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new hC({layers:t.layers});return o.layergroup=s,o.target=t.target,o.view=t.view instanceof tC?t.view:new tC,void 0!==t.controls&&(Array.isArray(t.controls)?n=new wx(t.controls.slice()):(ce("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new wx(t.interactions.slice()):(ce("function"==typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new wx(t.overlays.slice()):(ce("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new wx,{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:fi,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=r.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=r.controls||new wx,n.interactions=r.interactions||new wx,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new kC(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(SC,n.handleLayerGroupChanged_),n.addChangeListener(NC,n.handleViewChanged_),n.addChangeListener(EC,n.handleSizeChanged_),n.addChangeListener(CC,n.handleTargetChanged_),n.setProperties(r.values);var i=n;return!e.view||e.view instanceof tC||e.view.then((function(t){i.setView(new tC(t))})),n.controls.addEventListener(gx,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(yx,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(gx,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(yx,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(gx,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(yx,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return LC(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:Mr,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,i,s,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var r=n||{},i=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||Mr;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Mr,i=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,o,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(CC)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return vn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?wi(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(SC)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof wx)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer.getSource();if(r&&r.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=_n(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?wi(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(EC)},e.prototype.getView=function(){return this.get(NC)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,r){return function(t,e,n,r,i){if(!t||!(n in t.wantedTiles))return PC;if(!t.wantedTiles[n][e.getKey()])return PC;var o=t.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,t,e,n,r)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new mC(n,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===_C||n===Xr||n===Vr){var r=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(i===r?r.documentElement:i).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,r=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var o=Date.now()-t.time>8;n=o?0:8,r=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}!t||!this.hasListener(Jx)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(Jx,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)$r(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(Gr,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Xr,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Hr,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Sm(this.viewport_)}if(t){for(var r in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new xC(this,this.moveTolerance_),vC)this.mapBrowserEventHandler_.addEventListener(vC[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Gr,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Xr,this.boundHandleBrowserEvent_,!!yi&&{passive:!1});var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Kr(i,Vr,this.handleBrowserEvent,this),Kr(i,Wr,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Hr,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&($r(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&($r(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Kr(t,Sr,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Kr(t,Br,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach($r),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Kr(t,Sr,this.render,this),Kr(t,Br,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this,n=this.getSize(),r=this.getView(),i=this.frameState_,o=null;if(void 0!==n&&cm(n)&&r&&r.isDef()){var s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Ae(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{}},a.nextCenter&&a.nextResolution){var l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=Ae(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!Be(this.previousExtent_)&&!Se(o.extent,this.previousExtent_))&&(this.dispatchEvent(new dC("movestart",this,i)),this.previousExtent_=be(this.previousExtent_)),this.previousExtent_&&!o.viewHints[0]&&!o.viewHints[1]&&!Se(o.extent,this.previousExtent_)&&(this.dispatchEvent(new dC("moveend",this,o)),fe(o.extent,this.previousExtent_))),this.dispatchEvent(new dC(SE,this,o)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){this.set(SC,t)},e.prototype.setSize=function(t){this.set(EC,t)},e.prototype.setTarget=function(t){this.set(CC,t)},e.prototype.setView=function(t){if(!t||t instanceof tC)this.set(NC,t);else{this.set(NC,new tC);var e=this;t.then((function(t){e.setView(new tC(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(r)||isNaN(i)||!cm(e=[r,i])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(ii);const RC=AC;var FC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jC=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===r.collapsed||r.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==r.collapsible,n.collapsible_=void 0===r.collapsible||r.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",s=void 0!==r.expandClassName?r.expandClassName:i+"-expand",a=void 0!==r.collapseLabel?r.collapseLabel:"",l=void 0!==r.collapseClassName?r.collapseClassName:i+"-collpase";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a,n.collapseLabel_.className=l):n.collapseLabel_=a;var u=void 0!==r.label?r.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=s):n.label_=u;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=o,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(Ur,n.handleClick_.bind(n),!1);var h=i+" ol-unselectable "+Bm+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return FC(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],r=!0,i=t.layerStatesArray,o=0,s=i.length;o<s;++o){var a=i[o];if(eS(a,t.viewState)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(r),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Ir(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?xm(this.collapseLabel_,this.label_):xm(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(NE);const DC=jC;var zC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qC=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"",s=void 0!==r.compassClassName?r.compassClassName:"ol-compass";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=o):(n.label_=o,n.label_.classList.add(s));var a=r.tipLabel?r.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(n.label_),l.addEventListener(Ur,n.handleClick_.bind(n),!1);var u=i+" ol-unselectable "+Bm,c=n.element;return c.className=u,c.appendChild(l),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=void 0!==r.duration?r.duration:250,n.autoHide_=void 0===r.autoHide||r.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(qm),n}return zC(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:HE}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(qm);i||0!==n?i&&0!==n&&this.element.classList.remove(qm):this.element.classList.add(qm)}this.label_.style.transform=r}this.rotation_=n}},e}(NE);const BC=qC;var GC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const UC=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),target:r.target})||this;var i=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,s=void 0!==r.zoomInClassName?r.zoomInClassName:i+"-in",a=void 0!==r.zoomOutClassName?r.zoomOutClassName:i+"-out",l=void 0!==r.zoomInLabel?r.zoomInLabel:"+",u=void 0!==r.zoomOutLabel?r.zoomOutLabel:"",c=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",h=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(Ur,n.handleClick_.bind(n,o),!1);var f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=h,f.appendChild("string"==typeof u?document.createTextNode(u):u),f.addEventListener(Ur,n.handleClick_.bind(n,-o),!1);var d=i+" ol-unselectable "+Bm,g=n.element;return g.className=d,g.appendChild(p),g.appendChild(f),n.duration_=void 0!==r.duration?r.duration:250,n}return GC(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var r=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.duration_,easing:HE})):e.setZoom(r)}}},e}(NE),VC="active";var WC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HC=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return WC(e,t),e.prototype.getActive=function(){return this.get(VC)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(VC,t)},e.prototype.setMap=function(t){this.map_=t},e}(ii);function YC(t,e,n,r){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==r?r:250,easing:HE})}}const XC=HC;var KC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZC=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:250,n}return KC(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==vC.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;YC(r.getView(),o,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(XC);const $C=ZC;var JC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function QC(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}const tN=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return JC(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==vC.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==vC.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==vC.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==vC.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===vC.POINTERDOWN||e===vC.POINTERDRAG||e===vC.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==vC.POINTERUP?delete this.trackedPointers_[n]:(t.type==vC.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Fr(this.trackedPointers_)}},e}(XC);function eN(t){var e=arguments;return function(t){for(var n=!0,r=0,i=e.length;r<i&&(n=n&&e[r](t));++r);return n}}var nN=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},rN=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},iN=Mr,oN=function(t){var e=t.originalEvent;return 0==e.button&&!(hi&&pi&&e.ctrlKey)},sN=kr,aN=function(t){return t.type==vC.SINGLECLICK},lN=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},uN=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},cN=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},hN=function(t){var e=t.originalEvent;return ce(void 0!==e,56),"mouse"==e.pointerType},pN=function(t){var e=t.originalEvent;return ce(void 0!==e,56),e.isPrimary&&0===e.button},fN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dN=function(t){function e(e){var n=t.call(this,{stopDown:kr})||this,r=e||{};n.kinetic_=r.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=r.condition?r.condition:eN(lN,pN);return n.condition_=r.onFocusOnly?eN(rN,i):i,n.noKinetic_=!1,n}return fN(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,r=this.targetPointers,i=QC(r);if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();e=o,n=s.getResolution(),e[0]*=n,e[1]*=n,He(o,s.getRotation()),s.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(o),a=e.getCoordinateFromPixelInternal([s[0]-r*Math.cos(i),s[1]-r*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:HE})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(tN);const gN=dN;var yN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mN=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{stopDown:kr})||this).condition_=r.condition?r.condition:nN,n.lastAngle_=void 0,n.duration_=void 0!==r.duration?r.duration:250,n}return yN(e,t),e.prototype.handleDragEvent=function(t){if(hN(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==UE){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!hN(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!hN(t)||!oN(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(tN);const vN=mN;var _N=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bN=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return _N(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+n,r.top=Math.min(t[1],e[1])+n,r.width=Math.abs(e[0]-t[0])+n,r.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new os([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(Er);const wN=bN;var xN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SN=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=r,i}return xN(e,t),e}(xr);const EN=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.box_=new wN(r.className||"ol-dragbox"),n.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.startPixel_=null,n.condition_=r.condition?r.condition:oN,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return xN(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new SN("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new SN(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new SN("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(tN);var CN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const NN=function(t){function e(e){var n=this,r=e||{},i=r.condition?r.condition:uN;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return CN(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var r=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(r),o=e.getResolution()/i;(n=n.clone()).scale(o*o)}e.fitInternal(n,{duration:this.duration_,easing:HE})},e}(EN);var PN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ON=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.defaultCondition_=function(t){return lN(t)&&cN(t)},n.condition_=void 0!==r.condition?r.condition:n.defaultCondition_,n.duration_=void 0!==r.duration?r.duration:100,n.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,n}return PN(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Vr){var n=t.originalEvent,r=n.keyCode;if(this.condition_(t)&&(40==r||37==r||39==r||38==r)){var i=t.map.getView(),o=i.getResolution()*this.pixelDelta_,s=0,a=0;40==r?a=-o:37==r?s=-o:39==r?s=o:a=o;var l=[s,a];He(l,i.getRotation()),function(t,e,n){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:XE,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),n.preventDefault(),e=!0}}return!e},e}(XC);var TN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),IN=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.condition_=r.condition?r.condition:cN,n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:100,n}return TN(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Vr||t.type==Wr){var n=t.originalEvent,r=n.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var i=t.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_;YC(i.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(XC);const MN=IN;var kN=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var i=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/r,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();const LN=kN;var AN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RN="trackpad",FN=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,r)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,n.duration_=void 0!==r.duration?r.duration:250,n.timeout_=void 0!==r.timeout?r.timeout:80,n.useAnchor_=void 0===r.useAnchor||r.useAnchor,n.constrainResolution_=void 0!==r.constrainResolution&&r.constrainResolution;var i=r.condition?r.condition:iN;return n.condition_=r.onFocusOnly?eN(rN,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return AN(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==Xr)return!0;var e,n=t.map,r=t.originalEvent;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Xr&&(e=r.deltaY,ci&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=fi),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?RN:"wheel");var o=n.getView();if(this.mode_===RN&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-kt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),YC(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(XC);const jN=FN;var DN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zN=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=kr),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return DN(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==UE){var l=s.getViewport().getBoundingClientRect(),u=QC(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(tN);const qN=zN;var BN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),GN=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=kr),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==r.duration?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return BN(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,s=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var u=a.getViewport().getBoundingClientRect(),c=QC(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(tN);const UN=GN;var VN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const WN=function(t){function e(e){return(e=Ar({},e)).controls||(e.controls=function(t){var e={},n=new wx;return(void 0===e.zoom||e.zoom)&&n.push(new UC(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new BC(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new DC(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},n=new wx,r=new LN(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new vN),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new $C({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new gN({onFocusOnly:e.onFocusOnly,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new qN),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new UN({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new ON),n.push(new MN({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new jN({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new NN({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return VN(e,t),e.prototype.createRenderer=function(){return new aC(this)},e}(RC);var HN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YN=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.selected=n,o.deselected=r,o.mapBrowserEvent=i,o}return HN(e,t),e}(xr),XN={},KN=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r,i,o=e||{};if(n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=o.condition?o.condition:aN,n.addCondition_=o.addCondition?o.addCondition:sN,n.removeCondition_=o.removeCondition?o.removeCondition:sN,n.toggleCondition_=o.toggleCondition?o.toggleCondition:uN,n.multi_=!!o.multi&&o.multi,n.filter_=o.filter?o.filter:Mr,n.hitTolerance_=o.hitTolerance?o.hitTolerance:0,n.style_=void 0!==o.style?o.style:(Tr((r=bv()).Polygon,r.LineString),Tr(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),n.features_=o.features||new wx,o.layers)if("function"==typeof o.layers)i=o.layers;else{var s=o.layers;i=function(t){return Nr(s,t)}}else i=Mr;return n.layerFilter_=i,n.featureLayerAssociation_={},n}return HN(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[ae(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[ae(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(gx,this.boundAddFeature_),this.features_.addEventListener(yx,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(gx,this.boundAddFeature_),this.features_.removeEventListener(yx,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;this.style_&&this.applySelectedStyle_(e)},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=ae(t);e in XN||(XN[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var n=this.getMap().getInteractions().getArray(),r=n.length-1;r>=0;--r){var i=n[r];if(i!==this&&i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}var o=ae(t);t.setStyle(XN[o]),delete XN[o]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[ae(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),n=this.removeCondition_(t),r=this.toggleCondition_(t),i=!e&&!n&&!r,o=t.map,s=this.getFeatures(),a=[],l=[];if(i){Rr(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=s.getLength()-1;u>=0;--u){var c=s.item(u),h=l.indexOf(c);h>-1?l.splice(h,1):(s.remove(c),a.push(c))}0!==l.length&&s.extend(l)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!r||Nr(s.getArray(),t)?(n||r)&&Nr(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=a.length-1;p>=0;--p)s.remove(a[p]);s.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new YN("select",l,a,t)),!0},e}(XC);const ZN=KN;var $N=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JN=function(t){function e(e,n,r){var i=t.call(this)||this;if(void 0!==r&&void 0===n)i.setFlatCoordinates(r,e);else{var o=n||0;i.setCenterAndRadius(e,o,r)}return i}return $N(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=t-i[0],s=e-i[1],a=o*o+s*s;if(a<r){if(0===a)for(var l=0;l<this.stride;++l)n[l]=i[l];else{var u=this.getRadius()/Math.sqrt(a);for(n[0]=i[0]+u*o,n[1]=i[1]+u*s,l=2;l<this.stride;++l)n[l]=i[l]}return n.length=this.stride,a}return r},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,r=t-n[0],i=e-n[1];return r*r+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return _e(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return qi},e.prototype.intersectsExtent=function(t){if(qe(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Oe(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=fo(r,0,t,this.stride);r[i++]=r[0]+e;for(var o=1,s=this.stride;o<s;++o)r[i++]=r[o];r.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Pi(n,0,n.length,r,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Oi(n,0,n.length,r,t,e,n)),this.changed()},e}(ao);JN.prototype.transform;const QN=JN;var tP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eP="Point",nP="LineString",rP="Polygon",iP="Circle",oP="drawstart",sP=function(t){function e(e,n){var r=t.call(this,e)||this;return r.feature=n,r}return tP(e,t),e}(xr),aP=function(t){function e(e){var n=this,r=e;r.stopDown||(r.stopDown=kr),(n=t.call(this,r)||this).on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=e.source?e.source:null,n.features_=e.features?e.features:null,n.snapTolerance_=e.snapTolerance?e.snapTolerance:12,n.type_=e.type,n.mode_=function(t){switch(t){case Li:case Fi:return eP;case Ai:case ji:return nP;case Ri:case Di:return rP;case qi:return iP;default:throw new Error("Invalid type: "+t)}}(n.type_),n.stopClick_=!!e.stopClick,n.minPoints_=e.minPoints?e.minPoints:n.mode_===rP?3:2,n.maxPoints_=n.mode_===iP?2:e.maxPoints?e.maxPoints:1/0,n.finishCondition_=e.finishCondition?e.finishCondition:Mr;var i,o=e.geometryFunction;if(!o){var s,a=n.mode_;a===iP?o=function(t,e,n){var r=e||new QN([NaN,NaN]),i=_n(t[0]),o=Ye(i,_n(t[t.length-1]));r.setCenterAndRadius(i,Math.sqrt(o));var s=mn();return s&&r.transform(n,s),r}:(a===eP?s=Bo:a===nP?s=Ro:a===rP&&(s=os),o=function(t,e,n){return e?a===rP?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new s(t),e})}return n.geometryFunction_=o,n.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,n.overlay_=new xE({source:new zx({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=bv(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),n.geometryName_=e.geometryName,n.condition_=e.condition?e.condition:lN,n.freehandCondition_,e.freehand?n.freehandCondition_=iN:n.freehandCondition_=e.freehandCondition?e.freehandCondition:uN,n.addChangeListener(VC,n.updateState_),n}return tP(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===Gr&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==eP&&this.freehandCondition_(e);var n=e.type===vC.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===vC.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===vC.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===vC.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===vC.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===vC.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===vC.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,e)&&r},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new mC(vC.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&this.mode_!==eP||(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,r=e[0]-n[0],i=e[1]-n[1],o=r*r+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,r=[this.finishCoordinate_],i=this.mode_;if(i===eP)e=!0;else if(i===iP)e=2===this.sketchCoords_.length;else if(i===nP)n=this.sketchCoords_.length>this.minPoints_;else if(i===rP){var o=this.sketchCoords_;n=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(n)for(var s=this.getMap(),a=0,l=r.length;a<l;a++){var u=r[a],c=s.getPixelFromCoordinate(u),h=t[0]-c[0],p=t[1]-c[1],f=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+p*p)<=f){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new ai(new Bo(t)),this.updateSketchFeatures_())},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new ai);var e=t.getLinearRing(0),n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new Ro(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))},e.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===eP?this.sketchCoords_=t.slice():this.mode_===rP?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ai(new Ro(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new ai,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new sP(oP,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,r=this.getMap(),i=this.sketchFeature_.getGeometry(),o=r.getView().getProjection();this.mode_===eP?n=this.sketchCoords_:this.mode_===rP?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(r.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=t[0],n[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),i.getType()===Ri&&this.mode_!==rP?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,r=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;o===nP||o===iP?(this.finishCoordinate_=t.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),this.geometryFunction_(n,r,i)):o===rP&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,r,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r=this.mode_;if(r===nP||r===iP){if((t=this.sketchCoords_).splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();var i=this.finishCoordinate_.slice();t[t.length-1]=i,this.createOrUpdateSketchPoint_(i)}this.geometryFunction_(t,e,n),e.getType()===Ri&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(r===rP){(t=this.sketchCoords_[0]).splice(-2,1);var o=this.sketchLine_.getGeometry();t.length>=2&&(i=t[t.length-2].slice(),t[t.length-1]=i,this.createOrUpdateSketchPoint_(i)),o.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,n)}1===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===nP?(e.pop(),this.geometryFunction_(e,n,r)):this.mode_===rP&&(e[0].pop(),this.geometryFunction_(e,n,r),e=n.getCoordinates()),this.type_===Fi?t.setGeometry(new Vo([e])):this.type_===ji?t.setGeometry(new Do([e])):this.type_===Di&&t.setGeometry(new hs([e])),this.dispatchEvent(new sP("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new sP("drawabort",t))},e.prototype.appendCoordinates=function(t){var e,n=this.mode_,r=!this.sketchFeature_;if(r&&this.startDrawing_(t[0]),n===nP||n===iP)e=this.sketchCoords_;else{if(n!==rP)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}r&&e.shift(),e.pop();for(var i=0;i<t.length;i++)this.addToDrawing_(t[i]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new ai(new Bo(n)),this.updateSketchFeatures_(),this.dispatchEvent(new sP(oP,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(tN);const lP=aP;var uP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cP=[0,0,0,0],hP=[],pP="modifyend",fP=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.features=n,i.mapBrowserEvent=r,i}return uP(e,t),e}(xr),dP=function(t){function e(e){var n,r,i=t.call(this,e)||this;if(i.on,i.once,i.un,i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:pN,i.defaultDeleteCondition_=function(t){return function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(t)&&aN(t)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:iN,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.featuresBeingModified_=null,i.rBush_=new Ex,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new xE({source:new zx({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(n=bv(),function(t,e){return n.Point}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,i.hitDetection_=null,e.features?r=e.features:e.source&&(i.source_=e.source,r=new wx(i.source_.getFeatures()),i.source_.addEventListener(Mx,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(kx,i.handleSourceRemove_.bind(i))),!r)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(i.hitDetection_=e.hitDetection),i.features_=r,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(gx,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(yx,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i.delta_=[0,0],i.snapToPointer_=void 0===e.snapToPointer?!i.hitDetection_:e.snapToPointer,i}return uP(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),t.addEventListener(Br,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new wx;for(var n=this.featuresBeingModified_.getArray(),r=0,i=e.length;r<i;++r)for(var o=e[r],s=0,a=o.length;s<a;++s){var l=o[s].feature;l&&-1===n.indexOf(l)&&this.featuresBeingModified_.push(l)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new fP("modifystart",this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Br,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(var r=n.length-1;r>=0;--r){for(var i=n[r],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),r={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r){var o=n[r],s={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),s={feature:t,geometry:e,index:r,segment:o};this.rBush_.insert(he(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length-1;s<a;++s){var l=o.slice(s,s+2),u={feature:t,geometry:e,depth:[r],index:s,segment:l};this.rBush_.insert(he(l),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length-1;s<a;++s){var l=o.slice(s,s+2),u={feature:t,geometry:e,depth:[r],index:s,segment:l};this.rBush_.insert(he(l),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length;s<a;++s)for(var l=o[s],u=0,c=l.length-1;u<c;++u){var h=l.slice(u,u+2),p={feature:t,geometry:e,depth:[s,r],index:u,segment:h};this.rBush_.insert(he(h),p)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[n,n]},i={feature:t,geometry:e,index:1,segment:[n,n]},o=[r,i];r.featureSegments=o,i.featureSegments=o,this.rBush_.insert(we(n),r);var s=e,a=mn();if(a&&this.getMap()){var l=this.getMap().getView().getProjection();s=as(s=s.clone().transform(a,l)).transform(l,a)}this.rBush_.insert(s.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r){var i=n[r];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}},e.prototype.createOrUpdateVertexFeature_=function(t,e,n){var r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(t):(r=new ai(new Bo(t)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",e),r.set("geometries",n),r},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=vC.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=vC.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==vC.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],r=[],i=0,o=this.dragSegments_.length;i<o;++i){var s=this.dragSegments_[i],a=s[0],l=a.feature;-1===n.indexOf(l)&&n.push(l);var u=a.geometry;-1===r.indexOf(u)&&r.push(u);for(var c=a.depth,h=void 0,p=a.segment,f=s[1];e.length<u.getStride();)e.push(p[f][e.length]);switch(u.getType()){case Li:h=e,p[0]=e,p[1]=e;break;case Fi:(h=u.getCoordinates())[a.index]=e,p[0]=e,p[1]=e;break;case Ai:(h=u.getCoordinates())[a.index+f]=e,p[f]=e;break;case ji:case Ri:(h=u.getCoordinates())[c[0]][a.index+f]=e,p[f]=e;break;case Di:(h=u.getCoordinates())[c[1]][c[0]][a.index+f]=e,p[f]=e;break;case qi:if(p[0]=e,p[1]=e,0===a.index)this.changingFeature_=!0,u.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var d=t.map.getView().getProjection(),g=Xe(_n(u.getCenter()),_n(e)),y=mn();if(y){var m=u.clone().transform(y,d);m.setRadius(g),g=m.transform(d,y).getRadius()}u.setRadius(g),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(u,h)}this.createOrUpdateVertexFeature_(e,n,r)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;var n=this.vertexFeature_;if(n){var r=t.map.getView().getProjection(),i=[],o=n.getGeometry().getCoordinates(),s=he([o]),a=this.rBush_.getInExtent(s),l={};a.sort(gP);for(var u=0,c=a.length;u<c;++u){var h=a[u],p=h.segment,f=ae(h.geometry),d=h.depth;if(d&&(f+="-"+d.join("-")),l[f]||(l[f]=new Array(2)),h.geometry.getType()!==qi||1!==h.index)if(!We(p[0],o)||l[f][0])if(!We(p[1],o)||l[f][1])ae(p)in this.vertexSegments_&&!l[f][0]&&!l[f][1]&&this.insertVertexCondition_(t)&&i.push(h);else{if((h.geometry.getType()===Ai||h.geometry.getType()===ji)&&l[f][0]&&0===l[f][0].index)continue;this.dragSegments_.push([h,1]),l[f][1]=h}else this.dragSegments_.push([h,0]),l[f][0]=h;else We(mP(e,h,r),o)&&!l[f][0]&&(this.dragSegments_.push([h,0]),l[f][0]=h)}i.length&&this.willModifyFeatures_(t,[i]);for(var g=i.length-1;g>=0;--g)this.insertVertex_(i[g],o)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],r=n.geometry;if(r.getType()===qi){var i=r.getCenter(),o=n.featureSegments[0],s=n.featureSegments[1];o.segment[0]=i,o.segment[1]=i,s.segment[0]=i,s.segment[1]=i,this.rBush_.update(we(i),o);var a=r,l=mn();if(l){var u=t.map.getView().getProjection();a=as(a=a.clone().transform(l,u)).transform(u,l)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(he(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new fP(pP,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,n){var r,i,o=this,s=n||e.getCoordinateFromPixel(t),a=e.getView().getProjection();if(this.hitDetection_){var l="object"==typeof this.hitDetection_?function(t){return t===o.hitDetection_}:void 0;e.forEachFeatureAtPixel(t,(function(t,e,n){if((n=n||t.getGeometry()).getType()===Li&&Nr(o.features_.getArray(),t)){i=n;var s=n.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:n,segment:[s,s]}]}return!0}),{layerFilter:l})}if(!r){var u=bn(pe(wn(we(s,cP)),e.getView().getResolution()*this.pixelTolerance_,cP));r=this.rBush_.getInExtent(u)}if(r&&r.length>0){var c=r.sort((function(t,e){return yP(s,t,a)-yP(s,e,a)}))[0],h=c.segment,p=mP(s,c,a),f=e.getPixelFromCoordinate(p),d=Xe(t,f);if(i||d<=this.pixelTolerance_){var g={};if(g[ae(h)]=!0,this.snapToPointer_||(this.delta_[0]=p[0]-s[0],this.delta_[1]=p[1]-s[1]),c.geometry.getType()===qi&&1===c.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(p,[c.feature],[c.geometry]);else{var y=e.getPixelFromCoordinate(h[0]),m=e.getPixelFromCoordinate(h[1]),v=Ye(f,y),_=Ye(f,m);d=Math.sqrt(Math.min(v,_)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(p=v>_?h[1]:h[0]),this.createOrUpdateVertexFeature_(p,[c.feature],[c.geometry]);var b={};b[ae(c.geometry)]=!0;for(var w=1,x=r.length;w<x;++w){var S=r[w].segment;if(!(We(h[0],S[0])&&We(h[1],S[1])||We(h[0],S[1])&&We(h[1],S[0])))break;var E=ae(r[w].geometry);E in b||(b[E]=!0,g[ae(S)]=!0)}}return void(this.vertexSegments_=g)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var n,r=t.segment,i=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case ji:case Ri:(n=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case Di:(n=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case Ai:(n=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,n);var l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,a,s,1);var u={segment:[r[0],e],feature:i,geometry:o,depth:s,index:a};l.insert(he(u.segment),u),this.dragSegments_.push([u,1]);var c={segment:[e,r[1]],feature:i,geometry:o,depth:s,index:a+1};l.insert(he(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=vC.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var e=this.removeVertex_();return this.dispatchEvent(new fP(pP,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1},e.prototype.removeVertex_=function(){var t,e,n,r,i,o,s,a,l,u,c,h=this.dragSegments_,p={},f=!1;for(i=h.length-1;i>=0;--i)c=ae((u=(n=h[i])[0]).feature),u.depth&&(c+="-"+u.depth.join("-")),c in p||(p[c]={}),0===n[1]?(p[c].right=u,p[c].index=u.index):1==n[1]&&(p[c].left=u,p[c].index=u.index+1);for(c in p){switch(l=p[c].right,s=p[c].left,(a=(o=p[c].index)-1)<0&&(a=0),t=e=(r=(u=void 0!==s?s:l).geometry).getCoordinates(),f=!1,r.getType()){case ji:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(o,1),f=!0);break;case Ai:e.length>2&&(e.splice(o,1),f=!0);break;case Di:t=t[u.depth[1]];case Ri:(t=t[u.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),f=!0,0===o&&(t.pop(),t.push(t[0]),a=t.length-1))}if(f){this.setGeometryCoordinates_(r,e);var d=[];if(void 0!==s&&(this.rBush_.remove(s),d.push(s.segment[0])),void 0!==l&&(this.rBush_.remove(l),d.push(l.segment[1])),void 0!==s&&void 0!==l){var g={depth:u.depth,feature:u.feature,geometry:u.geometry,index:a,segment:d};this.rBush_.insert(he(g.segment),g)}this.updateSegmentIndices_(r,o,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,r){this.rBush_.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===n||void 0===i.depth||Ir(i.depth,n))&&i.index>e&&(i.index+=r)}))},e}(tN);function gP(t,e){return t.index-e.index}function yP(t,e,n){var r=e.geometry;if(r.getType()===qi){var i=r;if(1===e.index){var o=mn();o&&(i=i.clone().transform(o,n));var s=Ye(i.getCenter(),_n(t)),a=Math.sqrt(s)-i.getRadius();return a*a}}var l=_n(t);return hP[0]=_n(e.segment[0]),hP[1]=_n(e.segment[1]),function(t,e){return Ye(t,Ve(t,e))}(l,hP)}function mP(t,e,n){var r=e.geometry;if(r.getType()===qi&&1===e.index){var i=r,o=mn();return o&&(i=i.clone().transform(o,n)),vn(i.getClosestPoint(_n(t)))}var s=_n(t);return hP[0]=_n(e.segment[0]),hP[1]=_n(e.segment[1]),vn(Ve(s,hP))}const vP=dP;var _P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const bP=function(t){function e(e){var n=e||{};return t.call(this,n)||this}return _P(e,t),e}(nS);var wP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xP=function(t){function e(e){var n=t.call(this,e)||this;return n.image_=null,n}return wP(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,r=t.viewState,i=r.resolution,o=this.getLayer().getSource(),s=t.viewHints,a=t.extent;if(void 0!==e.extent&&(a=Fe(a,wn(e.extent,r.projection))),!s[0]&&!s[1]&&!Be(a))if(o){var l=r.projection,u=o.getImage(a,i,n,l);u&&this.loadImage(u)&&(this.image_=u)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var n=this.image_,r=n.getExtent(),i=n.getResolution(),o=n.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,u=l.center,c=l.resolution,h=t.size,p=a*i/(c*o),f=Math.round(h[0]*a),d=Math.round(h[1]*a),g=l.rotation;if(g){var y=Math.round(Math.sqrt(f*f+d*d));f=y,d=y}Si(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,g,-f/2,-d/2),Ei(this.inversePixelTransform,this.pixelTransform);var m=Ci(this.pixelTransform);this.useContainer(e,m,s.opacity);var v=this.context,_=v.canvas;_.width!=f||_.height!=d?(_.width=f,_.height=d):this.containerReused||v.clearRect(0,0,f,d);var b=!1,w=!0;if(s.extent){var x=wn(s.extent,l.projection);(b=(w=qe(x,t.extent))&&!ye(x,t.extent))&&this.clipUnrotated(v,t,x)}var S=n.getImage(),E=Si(this.tempTransform,f/2,d/2,p,p,0,o*(r[0]-u[0])/i,o*(u[1]-r[3])/i);this.renderedResolution=i*a/o;var C=S.width*E[0],N=S.height*E[3];if(Ar(v,this.getLayer().getSource().getContextOptions()),this.preRender(v,t),w&&C>=.5&&N>=.5){var P=E[4],O=E[5],T=s.opacity,I=void 0;1!==T&&(I=v.globalAlpha,v.globalAlpha=T),v.drawImage(S,0,0,+S.width,+S.height,Math.round(P),Math.round(O),Math.round(C),Math.round(N)),1!==T&&(v.globalAlpha=I)}return this.postRender(v,t),b&&v.restore(),m!==_.style.transform&&(_.style.transform=m),this.container},e}(DS);const SP=xP;var EP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const CP=function(t){function e(e){return t.call(this,e)||this}return EP(e,t),e.prototype.createRenderer=function(){return new SP(this)},e}(bP);var NP="1.3.0",PP={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},OP=function(){function t(t,e,n,r,i,o){this.sourceProj_=t,this.targetProj_=e;var s={},a=cn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ze(r)==ze(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ze(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ze(this.targetProj_.getExtent()):null;var l=je(n),u=De(n),c=Me(n),h=Ie(n),p=this.transformInv_(l),f=this.transformInv_(u),d=this.transformInv_(c),g=this.transformInv_(h),y=10+(o?Math.max(0,Math.ceil(At(Te(n)/(o*o*256*256)))):0);if(this.addQuad_(l,u,c,h,p,f,d,g,y),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach((function(t,e,n){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-m>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-m>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-m>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,r,i,o){this.triangles_.push({source:[r,i,o],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,r,i,o,s,a,l){var u=he([i,o,s,a]),c=this.sourceWorldWidth_?ze(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,f=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=ze(he([t,e,n,r]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&c&&(f=c>.25||f)),!(!f&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||qe(u,this.maxSourceExtent_)){var d=0;if(!(f||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)f=!0;else if(1!=(d=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(l>0){if(!f){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(g),m=void 0;m=p?(Dt(i[0],h)+Dt(s[0],h))/2-Dt(y[0],h):(i[0]+s[0])/2-y[0];var v=(i[1]+s[1])/2-y[1];f=m*m+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var _=[(e[0]+n[0])/2,(e[1]+n[1])/2],b=this.transformInv_(_),w=[(r[0]+t[0])/2,(r[1]+t[1])/2],x=this.transformInv_(w);this.addQuad_(t,e,_,w,i,o,b,x,l-1),this.addQuad_(w,_,n,r,x,b,s,a,l-1)}else{var S=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(S),C=[(n[0]+r[0])/2,(n[1]+r[1])/2],N=this.transformInv_(C);this.addQuad_(t,S,C,r,i,E,N,a,l-1),this.addQuad_(S,e,n,C,E,o,s,N,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(t,n,r,i,s,a),0==(14&d)&&this.addTriangle_(t,n,e,i,s,o),d&&(0==(13&d)&&this.addTriangle_(e,r,t,o,a,i),0==(7&d)&&this.addTriangle_(e,r,n,o,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,r){var i=e.source;Ce(t,i[0]),Ce(t,i[1]),Ce(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();const TP=OP;var IP;function MP(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function kP(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function LP(t,e,n,r){var i=hn(n,e,t),o=en(e,r,n),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var l=t.getExtent();if(!l||ge(l,i)){var u=en(t,o,i)/o;isFinite(u)&&u>0&&(o/=u)}return o}function AP(t,e,n,r,i,o,s,a,l,u,c,h){var p=wm(Math.round(n*t),Math.round(n*e));if(Ar(p,h),0===l.length)return p.canvas;function f(t){return Math.round(t*n)/n}p.scale(n,n),p.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){Ee(d,t.extent)}));var g=ze(d),y=Re(d),m=wm(Math.round(n*g/r),Math.round(n*y/r));Ar(m,h);var v=n/r;l.forEach((function(t,e,n){var r=t.extent[0]-d[0],i=-(t.extent[3]-d[3]),o=ze(t.extent),s=Re(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,r*v,i*v,o*v,s*v)}));var _=je(s);return a.getTriangles().forEach((function(t,e,i){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],g=s[1][1],y=s[2][0],v=s[2][1],b=f((a[0][0]-_[0])/o),w=f(-(a[0][1]-_[1])/o),x=f((a[1][0]-_[0])/o),S=f(-(a[1][1]-_[1])/o),E=f((a[2][0]-_[0])/o),C=f(-(a[2][1]-_[1])/o),N=l,P=u;l=0,u=0;var O=function(t){for(var e=t.length,n=0;n<e;n++){for(var r=n,i=Math.abs(t[n][n]),o=n+1;o<e;o++){var s=Math.abs(t[o][n]);s>i&&(i=s,r=o)}if(0===i)return null;var a=t[r];t[r]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*h[p]}return h}([[c-=N,g-=P,0,0,x-b],[y-=N,v-=P,0,0,E-b],[0,0,c,g,S-w],[0,0,y,v,C-w]]);if(O){if(p.save(),p.beginPath(),function(){if(void 0===IP){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",MP(t,4,5,4,0),MP(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;IP=kP(e,0)||kP(e,4)||kP(e,8)}return IP}()||h===PP){p.moveTo(x,S);for(var T=b-x,I=w-S,M=0;M<4;M++)p.lineTo(x+f((M+1)*T/4),S+f(M*I/3)),3!=M&&p.lineTo(x+f((M+1)*T/4),S+f((M+1)*I/3));p.lineTo(E,C)}else p.moveTo(x,S),p.lineTo(b,w),p.lineTo(E,C);p.clip(),p.transform(O[0],O[2],O[1],O[3],b,w),p.translate(d[0]-N,d[3]-P),p.scale(r/n,-r/n),p.drawImage(m.canvas,0,0),p.restore()}})),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var r=t.target,i=(r[0][0]-_[0])/o,s=-(r[0][1]-_[1])/o,a=(r[1][0]-_[0])/o,l=-(r[1][1]-_[1])/o,u=(r[2][0]-_[0])/o,c=-(r[2][1]-_[1])/o;p.beginPath(),p.moveTo(a,l),p.lineTo(i,s),p.lineTo(u,c),p.closePath(),p.stroke()})),p.restore()),p.canvas}var RP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const FP=function(t){function e(e,n,r,i,o,s,a){var l=this,u=e.getExtent(),c=n.getExtent(),h=c?Fe(r,c):r,p=LP(e,n,ke(h),i),f=new TP(e,n,h,u,.5*p,i),d=s(f.calculateSourceExtent(),p,o),g=d?0:4,y=d?d.getPixelRatio():1;return(l=t.call(this,r,i,y,g)||this).targetProj_=n,l.maxSourceExtent_=u,l.triangulation_=f,l.targetResolution_=i,l.targetExtent_=r,l.sourceImage_=d,l.sourcePixelRatio_=y,l.contextOptions_=a,l.canvas_=null,l.sourceListenerKey_=null,l}return RP(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(2==t){var e=ze(this.targetExtent_)/this.targetResolution_,n=Re(this.targetExtent_)/this.targetResolution_;this.canvas_=AP(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=Kr(this.sourceImage_,Br,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){$r(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Om);var jP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DP=function(t){function e(e,n){var r=t.call(this,e)||this;return r.image=n,r}return jP(e,t),e}(xr),zP=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return n.on,n.once,n.un,n.resolutions_=void 0!==e.resolutions?e.resolutions:null,n.reprojectedImage_=null,n.reprojectedRevision_=0,n.contextOptions_=!1===e.imageSmoothing?PP:void 0,n}return jP(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Pr(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,n,r){var i=this.getProjection();if(i&&r&&!ln(i,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ln(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&Se(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new FP(i,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,i)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(r=i),this.getImageInternal(t,e,n,r)},e.prototype.getImageInternal=function(t,e,n,r){return oe()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new DP("imageloadstart",e));break;case 2:this.loading=!1,this.dispatchEvent(new DP("imageloadend",e));break;case 3:this.loading=!1,this.dispatchEvent(new DP("imageloaderror",e))}},e}(Ix);function qP(t,e){t.getImage().src=e}const BP=zP;function GP(t,e){var n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));var r=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var UP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),VP=[101,101],WP=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this).crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,n.url_=r.url,n.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:qP,n.params_=r.params||{},n.v13_=!0,n.updateV13_(),n.serverType_=r.serverType,n.hidpi_=void 0===r.hidpi||r.hidpi,n.image_=null,n.imageSize_=[0,0],n.renderedRevision_=0,n.ratio_=void 0!==r.ratio?r.ratio:1.5,n}return UP(e,t),e.prototype.getFeatureInfoUrl=function(t,e,n,r){if(void 0!==this.url_){var i=tn(n),o=this.getProjection();o&&o!==i&&(e=LP(o,i,t,e),t=hn(t,i,o));var s=Ae(t,e,0,VP),a={SERVICE:"WMS",VERSION:NP,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Ar(a,this.params_,r);var l=Math.floor((t[0]-s[0])/e),u=Math.floor((s[3]-t[1])/e);return a[this.v13_?"I":"X"]=l,a[this.v13_?"J":"Y"]=u,this.getRequestUrl_(s,VP,1,o||i,a)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var n={SERVICE:"WMS",VERSION:NP,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.params_.LAYERS;if(Array.isArray(r)&&1!==r.length)return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i/28e-5}return Ar(n,e),GP(this.url_,n)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==n||this.hidpi_&&void 0!==this.serverType_||(n=1);var i=e/n,o=ke(t),s=Ae(o,i,0,[Math.ceil(ze(t)/i),Math.ceil(Re(t)/i)]),a=Ae(o,i,0,[Math.ceil(this.ratio_*ze(t)/i),Math.ceil(this.ratio_*Re(t)/i)]),l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==n&&ye(l.getExtent(),s))return l;var u={SERVICE:"WMS",VERSION:NP,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Ar(u,this.params_),this.imageSize_[0]=Math.round(ze(a)/i),this.imageSize_[1]=Math.round(Re(a)/i);var c=this.getRequestUrl_(a,this.imageSize_,n,r,u);return this.image_=new Mm(a,e,n,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Br,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,n,r,i){if(ce(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":var o=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":i.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":i.DPI=90*n;break;default:ce(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var s,a=r.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=s.join(","),GP(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Ar(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||NP;this.v13_=function(t,e){for(var n=(""+t).split("."),r="1.3".split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),s=parseInt(r[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}(t)>=0},e}(BP);const HP=WP,YP=tn("EPSG:3857");function XP(t){const e=[];for(const n of t.layers)n.on&&e.push(n.name);const n={url:t.urls[0],ratio:1,params:Object.assign({VERSION:"1.1.1",LAYERS:e.join(",")},t.params),serverType:t.serverType,minResolution:t.minresolution,maxResolution:t.maxresolution};return t.params["cross-origin"]?n.crossOrigin=t.params["cross-origin"]:0===t.urls[0].indexOf("http")&&(n.crossOrigin="anonymous"),n}var KP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZP=function(t){function e(e,n,r){var i=t.call(this)||this,o=r||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return KP(e,t),e.prototype.changed=function(){this.dispatchEvent(Br)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){oe()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var r=e-n+1e3/60;return r>=this.transition_?1:WE(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(qr);const $P=ZP;var JP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const QP=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=i,a.src_=r,a.key=r,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=o,a}return JP(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=wm(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Im(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}($P);var tO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eO=function(t){function e(e,n,r,i,o,s,a,l,u,c,h,p){var f=t.call(this,o,0)||this;f.renderEdges_=void 0!==h&&h,f.contextOptions_=p,f.pixelRatio_=a,f.gutter_=l,f.canvas_=null,f.sourceTileGrid_=n,f.targetTileGrid_=i,f.wrappedTileCoord_=s||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var d=i.getTileCoordExtent(f.wrappedTileCoord_),g=f.targetTileGrid_.getExtent(),y=f.sourceTileGrid_.getExtent(),m=g?Fe(d,g):d;if(0===Te(m))return f.state=4,f;var v=e.getExtent();v&&(y=y?Fe(y,v):v);var _=i.getResolution(f.wrappedTileCoord_[0]),b=function(t,e,n,r){var i=ke(n),o=LP(t,e,i,r);return(!isFinite(o)||o<=0)&&Oe(n,(function(n){return o=LP(t,e,n,r),isFinite(o)&&o>0})),o}(e,r,m,_);if(!isFinite(b)||b<=0)return f.state=4,f;var w=void 0!==c?c:.5;if(f.triangulation_=new TP(e,r,m,y,b*w,_),0===f.triangulation_.getTriangles().length)return f.state=4,f;f.sourceZ_=n.getZForResolution(b);var x=f.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(x[1]=kt(x[1],y[1],y[3]),x[3]=kt(x[3],y[1],y[3])):x=Fe(x,y)),Te(x)){for(var S=n.getTileRangeForExtentAndZ(x,f.sourceZ_),E=S.minX;E<=S.maxX;E++)for(var C=S.minY;C<=S.maxY;C++){var N=u(f.sourceZ_,E,C,a);N&&f.sourceTiles_.push(N)}0===f.sourceTiles_.length&&(f.state=4)}else f.state=4;return f}return tO(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,r){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=AP(r,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,r){var i=e.getState();if(0==i||1==i){t++;var o=Kr(e,Br,(function(n){var r=e.getState();2!=r&&3!=r&&4!=r||($r(o),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach($r),this.sourcesListenerKeys_=null},e}($P);const nO=eO;var rO=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return ce(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return ce(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){ce(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();const iO=rO;function oO(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function sO(t,e,n){return t+"/"+e+"/"+n}function aO(t){return sO(t[0],t[1],t[2])}function lO(t){return(t[1]<<t[0])+t[2]}var uO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uO(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey().split("/").map(Number)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(aO(e.tileCoord)),e.release())}.bind(this))}},e}(iO);const hO=cO;var pO=function(){function t(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function fO(t,e,n,r,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new pO(t,e,n,r)}const dO=pO;var gO=[0,0,0],yO=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,ce(function(t,e,n){var r=function(t,e){return e-t}||Cr;return t.every((function(e,n){if(0===n)return!0;var i=r(t[n-1],e);return!(i>0||0===i)}))}(this.resolutions_),17),!t.origins)for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,ce(this.origins_.length==this.resolutions_.length,20));var i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=je(i)),ce(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,ce(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,ce(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new dO(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){var r=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(r.minX,n.minX),n.maxX=Math.min(r.maxX,n.maxX),n.minY=Math.max(r.minY,n.minY),n.maxY=Math.min(r.maxY,n.maxY)}return n}),this):i&&this.calculateTileRanges_(i)}return t.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var s=r.minY,a=r.maxY;s<=a;++s)n([e,i,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var i,o,s=null,a=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):s=this.getTileCoordExtent(t,r);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?fO(i=Math.floor(i/2),i,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(s,a,n)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],i=2*t[2];return fO(r,r+1,i,i+1,e)}var o=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var r=t[0],i=t[1],o=t[2];if(e===r)return fO(i,o,i,o,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-r),a=Math.floor(i*s),l=Math.floor(o*s);return e<r?fO(a,a,l,l,n):fO(a,Math.floor(s*(i+1))-1,l,Math.floor(s*(o+1))-1,n)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=pm(this.getTileSize(t),this.tmpSize_),s=r[0]+e.minX*o[0]*i,a=r[0]+(e.maxX+1)*o[0]*i;return _e(s,r[1]+e.minY*o[1]*i,a,r[1]+(e.maxY+1)*o[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=gO;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var i=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),fO(i,r[1],o,r[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=pm(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=pm(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*i[0]*r,s=n[1]-(t[2]+1)*i[1]*r;return _e(o,s,o+i[0]*r,s+i[1]*r,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,i){var o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),l=pm(this.getTileSize(o),this.tmpSize_),u=r?.5:0,c=r?.5:0,h=Math.floor((t-a[0])/n+u),p=Math.floor((a[1]-e)/n+c),f=s*h/l[0],d=s*p/l[1];return r?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),oO(o,f,d,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,i){var o=this.getOrigin(n),s=this.getResolution(n),a=pm(this.getTileSize(n),this.tmpSize_),l=r?.5:0,u=r?.5:0,c=Math.floor((t-o[0])/s+l),h=Math.floor((o[1]-e)/s+u),p=c/a[0],f=h/a[1];return r?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),oO(n,p,f,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return kt(Pr(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},t}();const mO=yO;function vO(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,r){return function(t,e,n,r){var i=bO(t,undefined,n);return new mO({extent:t,origin:Le(t,"top-left"),resolutions:i,tileSize:n})}(wO(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function _O(t){var e=t||{},n=e.extent||tn("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:bO(n,e.maxZoom,e.tileSize,e.maxResolution)};return new mO(r)}function bO(t,e,n,r){for(var i=void 0!==e?e:42,o=Re(t),s=ze(t),a=pm(void 0!==n?n:256),l=r>0?r:Math.max(s/a[0],o/a[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function wO(t){var e=(t=tn(t)).getExtent();if(!e){var n=180*Tt[It.DEGREES]/t.getMetersPerUnit();e=_e(-n,-n,n,n)}return e}var xO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SO=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var r=e.tileGrid;return r&&pm(r.getTileSize(r.getMinZoom()),[256,256]),n.tileCache=new hO(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return xO(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=sO(e,u,c),a=!1,i.containsKey(s)&&(a=2===(o=i.get(s)).getState())&&(a=!1!==r(o)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,r,i){return oe()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:vO(t)},e.prototype.getTileCacheForProjection=function(t){return ce(ln(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=this.getTilePixelRatio(e),o=pm(r.getTileSize(t),this.tmpSize);return 1==i?o:hm(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=wO(n);if(ge(o,i))return e;var s=ze(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,r)}(r,t,n)),function(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o=e.getFullTileRange(n);return!o||o.containsXY(r,i)}(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,r){},e}(Ix),EO=function(t){function e(e,n){var r=t.call(this,e)||this;return r.tile=n,r}return xO(e,t),e}(xr);const CO=SO;function NO(t,e){var n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(r,s[1].toString()).replace(i,s[2].toString()).replace(o,(function(){var t=s[0],n=e.getFullTileRange(t);return ce(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}function PO(t){return 1===t.length?t[0]:function(e,n,r){if(e){var i=Dt(lO(e),t.length);return t[i](e,n,r)}}}var OO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),TO=function(t){function e(n){var r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return r.generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(r.tileUrlFunction=n.tileUrlFunction),r.urls=null,n.urls?r.setUrls(n.urls):n.url&&r.setUrl(n.url),r.tileLoadingKeys_={},r}return OO(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,r=ae(n),i=n.getState();1==i?(this.tileLoadingKeys_[r]=!0,e="tileloadstart"):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new EO(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=NO(t[i],e);return PO(r)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var r=sO(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(CO);const IO=TO;var MO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kO=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:LO,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:QP,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.contextOptions_=!1===e.imageSmoothing?PP:void 0,n.renderReprojectionEdges_=!1,n}return MO(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!ln(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!ln(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!ln(e,t)){var n=ae(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=vO(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||ln(e,t))return this.tileCache;var n=ae(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new hO(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,r,i,o){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),l=a?this.tileUrlFunction(a,r,i):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Br,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,r,i){var o=this.getProjection();if(o&&i&&!ln(o,i)){var s=this.getTileCacheForProjection(i),a=[t,e,n],l=void 0,u=aO(a);s.containsKey(u)&&(l=s.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(i),f=this.getTileCoordForTileUrlFunction(a,i),d=new nO(o,h,i,p,a,f,this.getTilePixelRatio(r),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return d.key=c,l?(d.interimTile=l,d.refreshInterimChain(),s.replace(u,d)):s.set(u,d),d}return this.getTileInternal(t,e,n,r,o||i)},e.prototype.getTileInternal=function(t,e,n,r,i){var o=null,s=sO(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var l=o;o=this.createTile_(t,e,n,r,i,a),0==l.getState()?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,r,i,a),this.tileCache.set(s,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=tn(t);if(n){var r=ae(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},e}(IO);function LO(t,e){t.getImage().src=e}const AO=kO;var RO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FO=function(t){function e(e){var n=e||{},r=void 0!==n.projection?n.projection:"EPSG:3857",i=void 0!==n.tileGrid?n.tileGrid:_O({extent:wO(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:r,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return RO(e,t),e}(AO);const jO=FO,DO="preload",zO="useInterimTilesOnError";var qO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const BO=function(t){function e(e){var n=this,r=e||{},i=Ar({},r);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return qO(e,t),e.prototype.getPreload=function(){return this.get(DO)},e.prototype.setPreload=function(t){this.set(DO,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(zO)},e.prototype.setUseInterimTilesOnError=function(t){this.set(zO,t)},e}(nS);var GO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UO=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new dO(0,0,0,0),n}return GO(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!r},e.prototype.getTile=function(t,e,n,r){var i=r.pixelRatio,o=r.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,i,o);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,e,n,r)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],r=t.viewState,i=r.projection,o=r.resolution,s=r.center,a=r.rotation,l=t.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getRevision(),p=c.getTileGridForProjection(i),f=p.getZForResolution(o,c.zDirection),d=p.getResolution(f),g=t.extent,y=n.extent&&wn(n.extent);y&&(g=Fe(g,wn(n.extent)));var m=c.getTilePixelRatio(l),v=Math.round(t.size[0]*m),_=Math.round(t.size[1]*m);if(a){var b=Math.round(Math.sqrt(v*v+_*_));v=b,_=b}var w=d*v/2/m,x=d*_/2/m,S=[s[0]-w,s[1]-x,s[0]+w,s[1]+x],E=p.getTileRangeForExtentAndZ(g,f),C={};C[f]={};var N=this.createLoadedTileFinder(c,i,C),P=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var T=E.minX;T<=E.maxX;++T)for(var I=E.minY;I<=E.maxY;++I){var M=this.getTile(f,T,I,t);if(this.isDrawableTile(M)){var k=ae(this);if(2==M.getState()){C[f][M.tileCoord.toString()]=M;var L=M.inTransition(k);this.newTiles_||!L&&-1!==this.renderedTiles.indexOf(M)||(this.newTiles_=!0)}if(1===M.getAlpha(k,t.time))continue}var A=p.getTileCoordChildTileRange(M.tileCoord,O,P),R=!1;A&&(R=N(f+1,A)),R||p.forEachTileCoordParentTileRange(M.tileCoord,N,O,P)}var F=d/o;Si(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,a,-v/2,-_/2);var j=Ci(this.pixelTransform);this.useContainer(e,j,n.opacity);var D=this.context,z=D.canvas;Ei(this.inversePixelTransform,this.pixelTransform),Si(this.tempTransform,v/2,_/2,F,F,0,-v/2,-_/2),z.width!=v||z.height!=_?(z.width=v,z.height=_):this.containerReused||D.clearRect(0,0,v,_),y&&this.clipUnrotated(D,t,y),Ar(D,c.getContextOptions()),this.preRender(D,t),this.renderedTiles.length=0;var q,B,G,U=Object.keys(C).map(Number);U.sort(Cr),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(q=[],B=[]):U=U.reverse();for(var V=U.length-1;V>=0;--V){var W=U[V],H=c.getTilePixelSize(W,l,i),Y=p.getResolution(W)/d,X=H[0]*Y*F,K=H[1]*Y*F,Z=p.getTileCoordForCoordAndZ(je(S),W),$=p.getTileCoordExtent(Z),J=wi(this.tempTransform,[m*($[0]-S[0])/d,m*(S[3]-$[3])/d]),Q=m*c.getGutterForProjection(i),tt=C[W];for(var et in tt){var nt=(M=tt[et]).tileCoord,rt=Z[1]-nt[1],it=Math.round(J[0]-(rt-1)*X),ot=Z[2]-nt[2],st=Math.round(J[1]-(ot-1)*K),at=it-(T=Math.round(J[0]-rt*X)),lt=st-(I=Math.round(J[1]-ot*K)),ut=f===W;if(!(L=ut&&1!==M.getAlpha(ae(this),t.time)))if(q){D.save(),G=[T,I,T+at,I,T+at,I+lt,T,I+lt];for(var ct=0,ht=q.length;ct<ht;++ct)if(f!==W&&W<B[ct]){var pt=q[ct];D.beginPath(),D.moveTo(G[0],G[1]),D.lineTo(G[2],G[3]),D.lineTo(G[4],G[5]),D.lineTo(G[6],G[7]),D.moveTo(pt[6],pt[7]),D.lineTo(pt[4],pt[5]),D.lineTo(pt[2],pt[3]),D.lineTo(pt[0],pt[1]),D.clip()}q.push(G),B.push(W)}else D.clearRect(T,I,at,lt);this.drawTileImage(M,t,T,I,at,lt,Q,ut),q&&!L?(D.restore(),this.renderedTiles.unshift(M)):this.renderedTiles.push(M),this.updateUsedTiles(t.usedTiles,c,M)}}this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!Se(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=l,this.renderedProjection=i,this.manageTilePyramid(t,c,p,l,i,g,f,u.getPreload()),this.scheduleExpireCache(t,c),this.postRender(D,t),n.extent&&D.restore(),j!==z.style.transform&&(z.style.transform=j);var ft=Wm(n.opacity),dt=this.container;return ft!==dt.style.opacity&&(dt.style.opacity=ft),this.container},e.prototype.drawTileImage=function(t,e,n,r,i,o,s,a){var l=this.getTileImage(t);if(l){var u=ae(this),c=a?t.getAlpha(u,e.time):1,h=c!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,r,i,o),h&&this.context.restore(),1!==c?e.animate=!0:a&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=ae(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var r=ae(e);r in t||(t[r]={}),t[r][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,r,i,o,s,a,l){var u=ae(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,f,d,g,y=t.wantedTiles[u],m=t.tileQueue,v=0;for(g=n.getMinZoom();g<=s;++g)for(h=n.getTileRangeForExtentAndZ(o,g,h),p=n.getResolution(g),f=h.minX;f<=h.maxX;++f)for(d=h.minY;d<=h.maxY;++d)s-g<=a?(++v,0==(c=e.getTile(g,f,d,r,i)).getState()&&(y[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,f,d,i);e.updateCacheSize(v,i)},e}(DS);UO.prototype.getLayer;const VO=UO;var WO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const HO=function(t){function e(e){return t.call(this,e)||this}return WO(e,t),e.prototype.createRenderer=function(){return new VO(this)},e}(BO);function YO(t){let e=null;return t.params["cross-origin"]?e=t.params["cross-origin"]:0===t.urls[0].indexOf("http")&&(e="anonymous"),{crossOrigin:e,urls:t.urls}}var XO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KO=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).params_=r.params||{},n.hidpi_=void 0===r.hidpi||r.hidpi,n.tmpExtent_=[1/0,1/0,-1/0,-1/0],n.setKey(n.getKeyForParams_()),n}return XO(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,n,r,i,o){var s=this.urls;if(s){var a=i.getCode().split(/:(?=\d+$)/).pop();return o.SIZE=e[0]+","+e[1],o.BBOX=n.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),GP((1==s.length?s[0]:s[Dt(lO(t),s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){Ar(this.params_,t),this.setKey(this.getKeyForParams_())},e.prototype.tileUrlFunction=function(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var i=r.getTileCoordExtent(t,this.tmpExtent_),o=pm(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=hm(o,e,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Ar(s,this.params_),this.getRequestUrl_(t,o,i,e,n,s)}},e}(AO);const ZO=KO;function $O(t){let e=null;return t.params["cross-origin"]?e=t.params["cross-origin"]:0===t.urls[0].indexOf("http")&&(e="anonymous"),{crossOrigin:e,url:t.urls[0],params:t.params}}const JO="hybrid",QO="vector";var tT=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eT={image:[US,zS,GS,BS,VS],hybrid:[US,GS],vector:[]},nT={hybrid:[BS,VS,qS],vector:[US,zS,GS,BS,VS,qS]},rT=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.dirty_=!1,n.renderedLayerRevision_,n.renderedPixelToCoordinateTransform_=null,n.renderedRotation_,n.tmpTransform_=[1,0,0,1,0,0],n}return tT(e,t),e.prototype.prepareTile=function(t,e,n){var r,i=t.getState();return 2!==i&&3!==i||(this.updateExecutorGroup_(t,e,n),this.tileImageNeedsRender_(t)&&(r=!0)),r},e.prototype.getTile=function(e,n,r,i){var o=i.pixelRatio,s=i.viewState,a=s.resolution,l=s.projection,u=this.getLayer(),c=u.getSource().getTile(e,n,r,o,l),h=i.viewHints,p=!(h[0]||h[1]);return!p&&c.wantedResolution||(c.wantedResolution=a),this.prepareTile(c,o,l)&&(p||Date.now()-i.time<8)&&u.getRenderMode()!==QO&&this.renderTileImage_(c,i),t.prototype.getTile.call(this,e,n,r,i)},e.prototype.isDrawableTile=function(e){var n=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&(n.getRenderMode()===QO?ae(n)in e.executorGroups:e.hasContext(n))},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,n){var r=this.getLayer(),i=r.getRevision(),o=r.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(r);if(a.dirty||a.renderedResolution!==s||a.renderedRevision!=i||a.renderedRenderOrder!=o){var l=r.getSource(),u=r.getDeclutter(),c=l.getTileGrid(),h=l.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),p=l.getSourceTiles(e,n,t),f=ae(r);delete t.hitDetectionImageData[f],t.executorGroups[f]=[],u&&(t.declutterExecutorGroups[f]=[]);for(var d=function(n,i){var d=p[n];if(2!=d.getState())return"continue";var y=d.tileCoord,m=c.getTileCoordExtent(y),v=Fe(h,m),_=pe(v,r.getRenderBuffer()*s,g.tmpExtent),b=Se(m,v)?null:_;a.dirty=!1;var w=new IS(0,_,s,e),x=u?new IS(0,v,s,e):void 0,S=dE(s,e),E=function(t){var e,n=t.getStyleFunction()||r.getStyleFunction();if(n&&(e=n(t,s)),e){var i=this.renderFeature(t,S,e,w,x);this.dirty_=this.dirty_||i,a.dirty=a.dirty||i}},C=d.getFeatures();o&&o!==a.renderedRenderOrder&&C.sort(o);for(var N=0,P=C.length;N<P;++N){var O=C[N];b&&!qe(b,O.getGeometry().getExtent())||E.call(g,O)}var T=w.finish(),I=r.getRenderMode()!==QO&&u&&1===p.length?null:v,M=new oE(I,s,e,l.getOverlaps(),T,r.getRenderBuffer());if(t.executorGroups[f].push(M),x){var k=new oE(null,s,e,l.getOverlaps(),x.finish(),r.getRenderBuffer());t.declutterExecutorGroups[f].push(k)}},g=this,y=0,m=p.length;y<m;++y)d(y);a.renderedRevision=i,a.renderedRenderOrder=o,a.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=e.viewState.resolution,s=e.viewState.rotation;n=null==n?0:n;var a=this.getLayer(),l=a.getSource().getTileGridForProjection(e.viewState.projection),u=he([t]);pe(u,o*n,u);for(var c,h={},p=function(t,e,n){var o=t.getId();void 0===o&&(o=ae(t));var s=h[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return h[o]=!0,i.splice(i.lastIndexOf(s),1),r(t,a,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return h[o]=!0,r(t,a,e);i.push(h[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:r})}},f=this.renderedTiles,d=function(r,i){var h=f[r];if(!qe(l.getTileCoordExtent(h.wrappedTileCoord),u))return"continue";var d=ae(a),g=[h.executorGroups[d]],y=h.declutterExecutorGroups[d];y&&g.push(y),g.some((function(r){for(var i=r===y?e.declutterTree.all().map((function(t){return t.value})):null,a=0,l=r.length;a<l;++a){var u=r[a];if(c=u.forEachFeatureAtCoordinate(t,o,s,n,p,i))return!0}}))},g=0,y=f.length;!c&&g<y;++g)d(g);return c},e.prototype.getFeatures=function(t){return new Promise(function(e,n){for(var r,i=this.getLayer(),o=ae(i),s=i.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,c=s.getTileGridForProjection(a),h=wi(this.renderedPixelToCoordinateTransform_,t.slice()),p=c.getTileCoordForCoordAndResolution(h,u),f=0,d=this.renderedTiles.length;f<d;++f)if(p.toString()===this.renderedTiles[f].tileCoord.toString()){if(2===(r=this.renderedTiles[f]).getState()){var g=c.getTileCoordExtent(r.tileCoord);s.getWrapX()&&a.canWrapX()&&!ye(l,g)&&Ke(h,a);break}r=void 0}if(!r||r.loadingSourceTiles>0)e([]);else{var y=je(c.getTileCoordExtent(r.wrappedTileCoord)),m=[(h[0]-y[0])/u,(y[1]-h[1])/u],v=r.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),_=r.hitDetectionImageData[o];if(!_&&!this.animatingOrInteracting_){var b=pm(c.getTileSize(c.getZForResolution(u))),w=this.renderedRotation_;_=cE(b,[this.getRenderTransform(c.getTileCoordCenter(r.wrappedTileCoord),u,0,uE,b[0]*uE,b[1]*uE,0)],v,i.getStyleFunction(),c.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(i).renderedResolution,w),r.hitDetectionImageData[o]=_}e(hE(m,v,_))}}.bind(this))},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderDeclutter=function(t){var e=this.context,n=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,i=!(r[0]||r[1]),o=this.renderedTiles,s=0,a=o.length;s<a;++s){var l=o[s],u=l.declutterExecutorGroups[ae(this.getLayer())];if(u)for(var c=u.length-1;c>=0;--c)u[c].execute(this.context,1,this.getTileRenderTransform(l,t),t.viewState.rotation,i,void 0,t.declutterTree)}e.globalAlpha=n},e.prototype.getTileRenderTransform=function(t,e){var n=e.pixelRatio,r=e.viewState,i=r.center,o=r.resolution,s=r.rotation,a=e.size,l=Math.round(a[0]*n),u=Math.round(a[1]*n),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),h=t.tileCoord,p=c.getTileCoordExtent(t.wrappedTileCoord),f=c.getTileCoordExtent(h,this.tmpExtent)[0]-p[0];return _i(xi(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(i,o,s,n,l,u,f))},e.prototype.renderFrame=function(e,n){var r=e.viewHints,i=!(r[0]||r[1]);t.prototype.renderFrame.call(this,e,n),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),s=o.getRenderMode(),a=this.context,l=a.globalAlpha;a.globalAlpha=o.getOpacity();for(var u=nT[s],c=e.viewState.rotation,h=this.renderedTiles,p=[],f=[],d=h.length-1;d>=0;--d)for(var g=h[d],y=this.getTileRenderTransform(g,e),m=g.executorGroups[ae(o)],v=!1,_=0,b=m.length;_<b;++_){var w=m[_];if(w.hasExecutors(u)){var x=g.tileCoord[0],S=void 0;if(!v&&(S=w.getClipCoords(y))){a.save();for(var E=0,C=p.length;E<C;++E){var N=p[E];x<f[E]&&(a.beginPath(),a.moveTo(S[0],S[1]),a.lineTo(S[2],S[3]),a.lineTo(S[4],S[5]),a.lineTo(S[6],S[7]),a.moveTo(N[6],N[7]),a.lineTo(N[4],N[5]),a.lineTo(N[2],N[3]),a.lineTo(N[0],N[1]),a.clip())}}w.execute(a,1,y,c,i,u),!v&&S&&(a.restore(),p.push(S),f.push(x),v=!0)}}return a.globalAlpha=l,this.container},e.prototype.renderFeature=function(t,e,n,r,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var s=0,a=n.length;s<a;++s)o=yE(r,t,n[s],e,this.boundHandleStyleImageChange_,void 0,i)||o;else o=yE(r,t,n,e,this.boundHandleStyleImageChange_,void 0,i);return o},e.prototype.tileImageNeedsRender_=function(t){var e=this.getLayer();if(e.getRenderMode()===QO)return!1;var n=t.getReplayState(e),r=e.getRevision(),i=t.wantedResolution;return n.renderedTileResolution!==i||n.renderedTileRevision!==r},e.prototype.renderTileImage_=function(t,e){var n=this.getLayer(),r=t.getReplayState(n),i=n.getRevision(),o=t.executorGroups[ae(n)];r.renderedTileRevision=i;var s=t.wrappedTileCoord,a=s[0],l=n.getSource(),u=e.pixelRatio,c=e.viewState.projection,h=l.getTileGridForProjection(c),p=h.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*p,d=h.getResolution(a),g=t.getContext(n);u=Math.round(Math.max(u,f/u));var y=l.getTilePixelSize(a,u,c);g.canvas.width=y[0],g.canvas.height=y[1];var m=u/f;if(1!==m){var v=vi(this.tmpTransform_);xi(v,m,m),g.setTransform.apply(g,v)}var _=h.getTileCoordExtent(s,this.tmpExtent),b=f/d,w=vi(this.tmpTransform_);xi(w,b,-b),function(t,e,n){_i(t,bi(mi,1,0,0,1,e,n))}(w,-_[0],-_[3]);for(var x=0,S=o.length;x<S;++x)o[x].execute(g,m,w,0,!0,eT[n.getRenderMode()]);r.renderedTileResolution=t.wantedResolution},e}(VO);const iT=rT;var oT=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const sT=function(t){function e(e){var n=this,r=e||{},i=Ar({},r);delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,"image"===r.renderMode&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var o=r.renderMode||JO;return ce(o==JO||o==QO,28),n.renderMode_=o,n.setPreload(r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return oT(e,t),e.prototype.createRenderer=function(){return new iT(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(DO)},e.prototype.getUseInterimTilesOnError=function(){return this.get(zO)},e.prototype.setPreload=function(t){this.set(DO,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(zO,t)},e}(sS);var aT=[1,0,0,1,0,0],lT=function(){function t(t,e,n,r,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=r}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===Li?we(this.flatCoordinates_):xe(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=ke(this.getExtent());this.flatInteriorPoints_=Zo(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=ls(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=$o(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Co(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,n=this.ends_,r=0,i=n.length;r<i;++r){var o=n[r],s=Co(t,e,o,2,.5);Tr(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t){var e=(t=tn(t)).getExtent(),n=t.getWorldExtent();if(e&&n){var r=Re(n)/Re(e);Si(aT,n[0],n[3],r,-r,0,0,0),Ni(this.flatCoordinates_,0,this.flatCoordinates_.length,2,aT,this.flatCoordinates_)}},t.prototype.getEnds=function(){return this.ends_},t}();lT.prototype.getEndss=lT.prototype.getEnds,lT.prototype.getFlatCoordinates=lT.prototype.getOrientedFlatCoordinates;const uT=lT;var cT=__webpack_require__(4138);function hT(t){return t*Math.PI/180}"function"==typeof Object.assign&&Object.assign;var pT=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function fT(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var n=document.createElement("canvas");return n.width=t,n.height=e,n}var dT,gT=Array(256).join("");function yT(t,e){if(e>=.05){for(var n="",r=t.split("\n"),i=gT.slice(0,Math.round(e/.1)),o=0,s=r.length;o<s;++o)o>0&&(n+="\n"),n+=r[o].split("").join(i);return n}return t}function mT(){return dT||(dT=fT(1,1).getContext("2d")),dT}function vT(t,e){return mT().measureText(t).width+(t.length-1)*e}var _T={};function bT(t,e,n,r){if(-1!==t.indexOf("\n")){for(var i=t.split("\n"),o=[],s=0,a=i.length;s<a;++s)o.push(bT(i[s],e,n,r));return o.join("\n")}var l=n+","+e+","+t+","+r,u=_T[l];if(!u){var c=t.split(" ");if(c.length>1){var h=mT();h.font=e;var p=h.measureText("M").width*n,f="";for(o=[],s=0,a=c.length;s<a;++s){var d=c[s],g=f+(f?" ":"")+d;vT(g,r)<=p?f=g:(f&&o.push(f),f=d)}for(f&&o.push(f),s=0,a=o.length;s<a&&a>1;++s){var y=o[s];if(vT(y,r)<.35*p){var m=s>0?vT(o[s-1],r):1/0,v=s<a-1?vT(o[s+1],r):1/0;o.splice(s,1),a-=1,m<v?(o[s-1]+=" "+y,s-=1):o[s]=y+" "+o[s]}}for(s=0,a=o.length-1;s<a;++s){var _=o[s],b=o[s+1];if(vT(_,r)>.7*p&&vT(b,r)<.6*p){var w=_.split(" "),x=w.pop();vT(x,r)<.2*p&&(o[s]=w.join(" "),o[s+1]=x+" "+b),a-=1}}u=o.join("\n")}else u=t;u=yT(u,r),_T[l]=u}return u}nv&&Kr(nv,"clear",(function(){_T={}}));var wT,xT,ST=dc,ET=fc,CT=hc,NT=pc,PT={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},OT={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},TT={},IT={zoom:0},MT={};function kT(t,e,n,r,i){var o=t.id;MT[o]||(MT[o]={});var s=MT[o];if(!s[n]){var a=(t[e]||TT)[n],l=ms[e+"_"+t.type][n];void 0===a&&(a=l.default);var u=CT(a);if(!u&&ST(a)&&(a=ET(a,l),u=!0),u){var c=function(t,e){var n=NT(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}(a,l);s[n]=c.evaluate.bind(c)}else"color"==l.type&&(a=la.parse(a)),s[n]=function(){return a}}return IT.zoom=r,s[n](IT,i)}var LT={};function AT(t,e){if(t){if(0===t.a||0===e)return;var n=t.a;return e=void 0===e?1:e,"rgba("+Math.round(255*t.r/n)+","+Math.round(255*t.g/n)+","+Math.round(255*t.b/n)+","+n*e+")"}return t}var RT=/^([^]*)\{(.*)\}([^]*)$/;function FT(t,e){var n;do{if(n=t.match(RT)){var r=e[n[2]]||"";t=n[1]+r+n[3]}}while(n);return t}function jT(t,e,n,r,i,o,s){if(void 0===r&&(r=pT),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var a,l;if(o)if("undefined"!=typeof Image){var u=new Image;u.crossOrigin="anonymous",u.onload=function(){a=u,l=[u.width,u.height],t.changed(),u.onload=null},u.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(a=t.data.image,l=[a.width,a.height])}))}for(var h,p=function(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Au(t[n],e[t[n].ref]));return t}(e.layers),f={},d=[],g=0,y=p.length;g<y;++g){var m=p[g],v=m.id;if("string"==typeof n&&m.source==n||-1!==n.indexOf(v)){var _=m["source-layer"];if(!h){h=m.source;var b=e.sources[h];if(!b)throw new Error('Source "'+h+'" is not defined');var w=b.type;if("vector"!==w&&"geojson"!==w)throw new Error('Source "'+h+'" is not of type "vector" or "geojson", but "'+w+'"')}var x=f[_];x||(x=[],f[_]=x),x.push({layer:m,index:g}),d.push(v)}delete MT[v],delete LT[v]}var S=new Dm,E=new rm,C={},N={},P=[],O=function(t,e){var n=t.getProperties(),o=f[n.layer];if(o){var u=r.indexOf(e);-1==u&&(u=function(t,e){for(var n=0,r=e.length;n<r;++n)if(e[n]<t&&n+1<r){var i=e[n]/e[n+1];return n+Math.log(e[n]/t)/Math.log(i)}return r-1}(e,r));for(var c=PT[t.getGeometry().getType()],h={properties:n,type:c},p=-1,d=function(r,f){var d=o[r],g=d.layer,y=g.id,m=g.layout||TT,v=g.paint||TT;if("none"===m.visibility||"minzoom"in g&&u<g.minzoom||"maxzoom"in g&&u>=g.maxzoom)return"continue";var _=g.filter;if(!_||function(t,e,n,r){return t in LT||(LT[t]=wu(e).filter),IT.zoom=r,LT[t](IT,n)}(y,_,h,u)){g;var b=void 0,w=void 0,x=void 0,O=void 0,T=void 0,I=void 0,M=d.index;if(3==c&&("fill"==g.type||"fill-extrusion"==g.type))if(w=kT(g,"paint",g.type+"-opacity",u,h),g.type+"-pattern"in v){var k=kT(g,"paint",g.type+"-pattern",u,h);if(k){var L="string"==typeof k?FT(k,n):k.toString();if(a&&i&&i[L]){++p,(I=P[p])&&I.getFill()&&!I.getStroke()&&!I.getText()||(I=new xv({fill:new rm}),P[p]=I),x=I.getFill(),I.setZIndex(M);var A=N[ct=L+"."+w];if(!A){var R=fT((ht=i[L]).width,ht.height),F=R.getContext("2d");F.globalAlpha=w,F.drawImage(a,ht.x,ht.y,ht.width,ht.height,0,0,ht.width,ht.height),A=F.createPattern(R,"repeat"),N[ct]=A}x.setColor(A)}}}else(b=AT(kT(g,"paint",g.type+"-color",u,h),w))&&(g.type+"-outline-color"in v&&(T=AT(kT(g,"paint",g.type+"-outline-color",u,h),w)),T||(T=b),++p,(I=P[p])&&I.getFill()&&I.getStroke()&&!I.getText()||(I=new xv({fill:new rm,stroke:new Dm}),P[p]=I),(x=I.getFill()).setColor(b),(O=I.getStroke()).setColor(T),O.setWidth(1),I.setZIndex(M));if(1!=c&&"line"==g.type){b=!("line-pattern"in v)&&"line-color"in v?AT(kT(g,"paint","line-color",u,h),kT(g,"paint","line-opacity",u,h)):void 0;var j=kT(g,"paint","line-width",u,h);b&&j>0&&(++p,(I=P[p])&&I.getStroke()&&!I.getFill()&&!I.getText()||(I=new xv({stroke:new Dm}),P[p]=I),(O=I.getStroke()).setLineCap(kT(g,"layout","line-cap",u,h)),O.setLineJoin(kT(g,"layout","line-join",u,h)),O.setMiterLimit(kT(g,"layout","line-miter-limit",u,h)),O.setColor(b),O.setWidth(j),O.setLineDash(v["line-dasharray"]?kT(g,"paint","line-dasharray",u,h).map((function(t){return t*j})):null),I.setZIndex(M))}var D=!1,z=null,q=0,B=void 0,G=void 0,U=void 0;if((1==c||2==c)&&"icon-image"in m){var V=kT(g,"layout","icon-image",u,h);if(V){B="string"==typeof V?FT(V,n):V.toString();var W=void 0;if(a&&i&&i[B]){var H=kT(g,"layout","icon-rotation-alignment",u,h);if(2==c){var Y=t.getGeometry();if(Y.getFlatMidpoint||Y.getFlatMidpoints){var X=Y.getExtent();if(Math.sqrt(Math.max(Math.pow((X[2]-X[0])/e,2),Math.pow((X[3]-X[1])/e,2)))>150){var K="MultiLineString"===Y.getType()?Y.getFlatMidpoints():Y.getFlatMidpoint();if(xT||(xT=new uT("Point",wT=[NaN,NaN],[],{},null)),W=xT,wT[0]=K[0],wT[1]=K[1],"line"===(Pt=kT(g,"layout","symbol-placement",u,h))&&"map"===H)for(var Z=Y.getStride(),$=Y.getFlatCoordinates(),J=0,Q=$.length-Z;J<Q;J+=Z){var tt=$[J],et=$[J+1],nt=$[J+Z],rt=$[J+Z+1],it=Math.min(tt,nt),ot=Math.min(et,rt),st=Math.max(tt,nt),at=Math.max(et,rt);if(K[0]>=it&&K[0]<=st&&K[1]>=ot&&K[1]<=at){q=Math.atan2(et-rt,nt-tt);break}}}}}if(2!==c||W){var lt=kT(g,"layout","icon-size",u,h),ut=void 0!==v["icon-color"]?kT(g,"paint","icon-color",u,h):null;if(!ut||0!==ut.a){var ct=B+"."+lt;if(null!==ut&&(ct+="."+ut),!(G=C[ct])){var ht=i[B];G=new jm({color:ut?[255*ut.r,255*ut.g,255*ut.b,ut.a]:void 0,img:a,imgSize:l,size:[ht.width,ht.height],offset:[ht.x,ht.y],rotateWithView:"map"===H,scale:lt/ht.pixelRatio}),C[ct]=G}}G&&(++p,(I=P[p])&&I.getImage()&&!I.getFill()&&!I.getStroke()||(I=new xv,P[p]=I),I.setGeometry(W),G.setRotation(q+hT(kT(g,"layout","icon-rotate",u,h))),G.setOpacity(kT(g,"paint","icon-opacity",u,h)),G.setAnchor(OT[kT(g,"layout","icon-anchor",u,h)]),I.setImage(G),z=I.getText(),I.setText(void 0),I.setZIndex(M),D=!0,U=!1)}else U=!0}}}if(1==c&&"circle-radius"in v){++p,(I=P[p])&&I.getImage()&&!I.getFill()&&!I.getStroke()||(I=new xv,P[p]=I);var pt=kT(g,"paint","circle-radius",u,h),ft=AT(kT(g,"paint","circle-stroke-color",u,h),kT(g,"paint","circle-stroke-opacity",u,h)),dt=AT(kT(g,"paint","circle-color",u,h),kT(g,"paint","circle-opacity",u,h)),gt=kT(g,"paint","circle-stroke-width",u,h),yt=pt+"."+ft+"."+dt+"."+gt;(G=C[yt])||(G=new yv({radius:pt,stroke:ft&&gt>0?new Dm({width:gt,color:ft}):void 0,fill:dt?new rm({color:dt}):void 0}),C[yt]=G),I.setImage(G),z=I.getText(),I.setText(void 0),I.setGeometry(void 0),I.setZIndex(M),D=!0}var mt=void 0;if("text-field"in m&&(mt=FT(kT(g,"layout","text-field",u,h).toString(),n).trim(),w=kT(g,"paint","text-opacity",u,h)),mt&&w&&!U){D||(++p,(I=P[p])&&I.getText()&&!I.getFill()&&!I.getStroke()||(I=new xv,P[p]=I),I.setImage(void 0),I.setGeometry(void 0)),I.getText()||I.setText(z||new Sv({padding:[2,2,2,2]})),z=I.getText();var vt=Math.round(kT(g,"layout","text-size",u,h)),_t=kT(g,"layout","text-font",u,h),bt=kT(g,"layout","text-line-height",u,h),wt=cT(s?s(_t):_t,vt,bt),xt=m["text-transform"];"uppercase"==xt?mt=mt.toUpperCase():"lowercase"==xt&&(mt=mt.toLowerCase());var St=kT(g,"layout","text-max-width",u,h),Et=kT(g,"layout","text-letter-spacing",u,h),Ct=2==c?yT(mt,Et):bT(mt,wt,St,Et);z.setText(Ct),z.setFont(wt),z.setRotation(hT(kT(g,"layout","text-rotate",u,h)));var Nt=kT(g,"layout","text-anchor",u,h),Pt=D||1==c?"point":kT(g,"layout","symbol-placement",u,h);z.setPlacement(Pt);var Ot=kT(g,"paint","text-halo-width",u,h),Tt=kT(g,"layout","text-offset",u,h),It=kT(g,"paint","text-translate",u,h),Mt=0,kt=0;if("point"==Pt){var Lt="center";-1!==Nt.indexOf("left")?(Lt="left",kt=Ot):-1!==Nt.indexOf("right")&&(Lt="right",kt=-Ot),z.setTextAlign(Lt);var At=kT(g,"layout","text-rotation-alignment",u,h);z.setRotateWithView("map"==At)}else z.setMaxAngle(hT(kT(g,"layout","text-max-angle",u,h))*mt.length/Ct.length),z.setTextAlign(),z.setRotateWithView(!1);var Rt="middle";0==Nt.indexOf("bottom")?(Rt="bottom",Mt=-Ot-.5*(bt-1)*vt):0==Nt.indexOf("top")&&(Rt="top",Mt=Ot+.5*(bt-1)*vt),z.setTextBaseline(Rt),z.setOffsetX(Tt[0]*vt+kt+It[0]),z.setOffsetY(Tt[1]*vt+Mt+It[1]),E.setColor(AT(kT(g,"paint","text-color",u,h),w)),z.setFill(E);var Ft=AT(kT(g,"paint","text-halo-color",u,h),w);if(Ft){S.setColor(Ft),Ot*=2;var jt=.5*vt;S.setWidth(Ot<=jt?Ot:jt),z.setStroke(S)}else z.setStroke(void 0);var Dt=kT(g,"layout","text-padding",u,h),zt=z.getPadding();Dt!==zt[0]&&(zt[0]=Dt,zt[1]=Dt,zt[2]=Dt,zt[3]=Dt),I.setZIndex(M)}}},g=0,y=o.length;g<y;++g)d(g);return p>-1?(P.length=p+1,P):void 0}};return t.setStyle(O),t.set("mapbox-source",h),t.set("mapbox-layers",d),O}var DT,zT=__webpack_require__(9975),qT=/font-family: ?([^;]*);/,BT=/("|')/g;function GT(t){if(!DT){DT={};for(var e=document.styleSheets,n=0,r=e.length;n<r;++n){var i=e[n];try{var o=i.rules||i.cssRules;if(o)for(var s=0,a=o.length;s<a;++s){var l=o[s];if(5==l.type){var u=l.cssText.match(qT);DT[u[1].replace(BT,"")]=!0}}}catch(t){}}}return t in DT}var UT={},VT=zT.getNames();function WT(t){var e=t.toString();if(e in UT)return t;for(var n=t.map((function(t){var e=cT(t,1).split(" ");return[e.slice(3).join(" ").replace(/"/g,""),e[1]+e[0]]})),r=0,i=n.length;r<i;++r){var o=n[r],s=o[0];if(!GT(s)&&-1!==VT.indexOf(s)){var a="https://fonts.googleapis.com/css?family="+s.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+a+'"]')){var l=document.createElement("link");l.href=a,l.rel="stylesheet",document.head.appendChild(l)}}}return UT[e]=!0,t}var HT=/^(.*)(\?.*)$/;function YT(t,e,n){var r=(t=function(t,e){return e&&0===t.indexOf(".")&&(t=e+t),t}(t,e)).match(HT);return r?r[1]+n+(r.length>2?r[2]:""):t+n}function XT(t,e,n){if(e.name===Vd){const r="Modify"===n||"_Modify"===n;return void t.setStyle(((t=Ud,e=!1)=>{const n=[new xv({stroke:new Dm({color:t["line-color"],width:3}),fill:new rm({color:t["fill-color"],opacity:t["fill-opacity"]})})];return e&&n.push(new xv({image:new yv({radius:5,fill:new rm({color:t["circle-color"]})}),geometry:t=>{const e=t.getGeometry(),n=e.getType().toLowerCase();let r=[];if("polygon"===n||"multilinestring"===n)r=e.getCoordinates().flat();else if("multipolygon"===n)r=e.getCoordinates().flat(2);else{if("point"===n)return e;r=e.getCoordinates()}return new Vo(r)}})),n})(e.layers[0].style,r))}const r=[];for(const t of e.layers)if(!0===t.on){const e=["fill","line","circle","symbol"];for(let n=0,i=e.length;n<i;n++){const i=e[n];let o=t=>0===t.indexOf(i);if("symbol"===i&&(o=t=>0===t.indexOf("symbol")||0===t.indexOf("text")),Object.keys(t.style).filter(o).length>0){const e={id:`${t.name}-${i}`,type:i,source:"dummy-source",paint:{},layout:{}};["paint","layout"].forEach((n=>{Object.keys(ms[`${n}_${i}`]).forEach((r=>{t.style[r]&&(e[n][r]=t.style[r])}))})),void 0!==t.filter&&(e.filter=t.filter),r.push(e)}}}!function(t,e,n,r,i){new Promise((function(o,s){if("object"!=typeof e&&(e=JSON.parse(e)),8!=e.version)return s(new Error("glStyle version 8 required."));if(!(t instanceof xE||t instanceof sT))return s(new Error("Can only apply to VectorLayer or VectorTileLayer"));var a,l,u;function c(){u||e.sprite&&!a?u?(t.setStyle(u),o()):s(new Error("Something went wrong trying to apply style.")):(u=jT(t,e,n,i,a,l,WT),t.getStyle()?o():s(new Error("Nothing to show for source ["+n+"]")))}if(e.sprite){var h=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",p=YT(e.sprite,r,h+".json");fetch(p,{credentials:"same-origin"}).then((function(t){return t.ok||""===h?t:(p=YT(e.sprite,r,".json"),fetch(p,{credentials:"same-origin"}))})).then((function(t){if(t.ok)return t.json();s(new Error("Problem fetching sprite from "+p+": "+t.statusText))})).then((function(t){if(void 0===t)return s(new Error("No sprites found."));a=t,l=YT(e.sprite,r,h+".png"),c()})).catch((function(t){s(new Error("Sprites cannot be loaded: "+p+": "+t.message))}))}else c()}))}(t,{version:8,layers:r,sources:{"dummy-source":{type:"vector"}}},"dummy-source")}new ys,Sv.prototype.getOverflow=()=>!0;var KT,ZT=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();KT=Error,ZT((function(t){var e=this,n="Unexpected response status: "+t.status;return(e=KT.call(this,n)||this).name="ResponseError",e.response=t,e}),KT),function(t){ZT((function(e){var n=t.call(this,"Failed to issue request")||this;return n.name="ClientError",n.client=e,n}),t)}(Error);var $T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JT=function(t){function e(e){var n=this,r=void 0!==e.hidpi&&e.hidpi;return(n=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",imageSmoothing:e.imageSmoothing,opaque:!0,projection:tn("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).hidpi_=r,n.culture_=void 0!==e.culture?e.culture:"en-us",n.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,n.apiKey_=e.key,n.imagerySet_=e.imagerySet,function(t,e,n,r){var i=document.createElement("script"),o="olc_"+ae(e);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+"jsonp="+o;var a=setTimeout((function(){s()}),1e4);window[o]=function(t){clearTimeout(a),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+n.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+n.apiKey_+"&c="+n.culture_,n.handleImageryMetadataResponse.bind(n)),n}return $T(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],n=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,r=wO(this.getProjection()),i=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],s=_O({extent:r,minZoom:e.zoomMin,maxZoom:n,tileSize:o});this.tileGrid=s;var a=this.culture_,l=this.hidpi_;if(this.tileUrlFunction=PO(e.imageUrlSubdomains.map((function(t){var n=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",a);return function(t,e,i){if(t){oO(t[0],t[1],t[2],n);var o=r;return l&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,n,r=t[0],i=new Array(r),o=1<<r-1;for(e=0;e<r;++e)n=48,t[1]&o&&(n+=1),t[2]&o&&(n+=2),i[e]=String.fromCharCode(n),o>>=1;return i.join("")}(n))}}}))),e.imageryProviders){var u=un(tn("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var n=[],r=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(r.resolution,this.zDirection),s=i.getTileCoordForCoordAndZ(r.center,o)[0];return e.imageryProviders.map((function(e){for(var r=!1,i=e.coverageAreas,o=0,a=i.length;o<a;++o){var l=i[o];if(s>=l.zoomMin&&s<=l.zoomMax){var c=l.bbox;if(qe(Ge([c[1],c[0],c[3],c[2]],u),t.extent)){r=!0;break}}}r&&n.push(e.attribution)})),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),n}.bind(this))}this.setState(Nx)}else this.setState("error")},e}(AO);const QT=JT;function tI(t){let e=!1,n=!1;for(const r of t.layers)!0===r.on&&("aerials"===r.name?e=!0:"roads"===r.name&&(n=!0));let r="Road";if(e&&n)r="AerialWithLabels";else if(e)r="Aerial";else if(n)r="Road";else for(const e of t.layers)!0===e.on&&(r=e.name);return{key:t.params.key,imagerySet:r}}var eI=.9996,nI=.00669438,rI=Math.pow(nI,2),iI=Math.pow(nI,3),oI=nI/(1-nI),sI=Math.sqrt(1-nI),aI=(1-sI)/(1+sI),lI=Math.pow(aI,2),uI=Math.pow(aI,3),cI=Math.pow(aI,4),hI=Math.pow(aI,5),pI=1-nI/4-3*rI/64-5*iI/256,fI=3*nI/8+3*rI/32+45*iI/1024,dI=15*rI/256+45*iI/1024,gI=35*iI/3072,yI=1.5*aI-27/32*uI+269/512*hI,mI=21/16*lI-55/32*cI,vI=151/96*uI-417/128*hI,_I=1097/512*cI,bI=6378137,wI="CDEFGHJKLMNPQRSTUVWXX";function xI(t,e,n,r,i,o){if(o=void 0===o||o,!r&&void 0===i)throw new Error("either zoneLetter or northern needs to be set");if(r&&void 0!==i)throw new Error("set either zoneLetter or northern, but not both");if(o){if(t<1e5||1e6<=t)throw new RangeError("easting out of range (must be between 100 000 m and 999 999 m)");if(e<0||e>1e7)throw new RangeError("northing out of range (must be between 0 m and 10 000 000 m)")}if(n<1||n>60)throw new RangeError("zone number out of range (must be between 1 and 60)");if(r){if(1!==(r=r.toUpperCase()).length||-1===wI.indexOf(r))throw new RangeError("zone letter out of range (must be between C and X)");i=r>="N"}var s=t-5e5,a=e;i||(a-=1e7);var l=a/eI/(bI*pI),u=l+yI*Math.sin(2*l)+mI*Math.sin(4*l)+vI*Math.sin(6*l)+_I*Math.sin(8*l),c=Math.sin(u),h=Math.pow(c,2),p=Math.cos(u),f=Math.tan(u),d=Math.pow(f,2),g=Math.pow(f,4),y=1-nI*h,m=Math.sqrt(y),v=(1-nI)/y,_=aI*p*p,b=_*_,w=s/(bI/m*eI),x=Math.pow(w,2),S=Math.pow(w,3),E=Math.pow(w,4),C=Math.pow(w,5),N=Math.pow(w,6),P=(w-S/6*(1+2*d+_)+C/120*(5-2*_+28*d-3*b+8*oI+24*g))/p;return{latitude:CI(u-f/v*(x/2-E/24*(5+3*d+10*_-4*b-9*oI))+N/720*(61+90*d+298*_+45*g-252*oI-3*b)),longitude:CI(P)+EI(n)}}function SI(t,e,n){if(t>84||t<-80)throw new RangeError("latitude out of range (must be between 80 deg S and 84 deg N)");if(e>180||e<-180)throw new RangeError("longitude out of range (must be between 180 deg W and 180 deg E)");var r,i=NI(t),o=Math.sin(i),s=Math.cos(i),a=Math.tan(i),l=Math.pow(a,2),u=Math.pow(a,4);r=void 0===n?function(t,e){if(56<=t&&t<64&&3<=e&&e<12)return 32;if(72<=t&&t<=84&&e>=0){if(e<9)return 31;if(e<21)return 33;if(e<33)return 35;if(e<42)return 37}return Math.floor((e+180)/6)+1}(t,e):n;var c=function(t){return-80<=t&&t<=84?wI[Math.floor((t+80)/8)]:null}(t),h=NI(e),p=NI(EI(r)),f=bI/Math.sqrt(1-nI*o*o),d=oI*s*s,g=s*(h-p),y=Math.pow(g,2),m=Math.pow(g,3),v=Math.pow(g,4),_=Math.pow(g,5),b=Math.pow(g,6),w=bI*(pI*i-fI*Math.sin(2*i)+dI*Math.sin(4*i)-gI*Math.sin(6*i)),x=eI*(w+f*a*(y/2+v/24*(5-l+9*d+4*d*d)+b/720*(61-58*l+u+600*d-330*oI)));return t<0&&(x+=1e7),{easting:eI*f*(g+m/6*(1-l+d)+_/120*(5-18*l+u+72*d-58*oI))+5e5,northing:x,zoneNum:r,zoneLetter:c}}function EI(t){return 6*(t-1)-180+3}function CI(t){return t/Math.PI*180}function NI(t){return t*Math.PI/180}const PI=[["S","T","U","V","W","X","Y","Z"],["A","B","C","D","E","F","G","H"],["J","K","L","M","N","P","Q","R"],["S","T","U","V","W","X","Y","Z"],["A","B","C","D","E","F","G","H"],["J","K","L","M","N","P","Q","R"]],OI=[["F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","A","B","C","D","E"],["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V"]],TI={1e4:1,1e3:2,100:3,10:4,1:5},II=(t,e,n,r)=>1e5===e?"ew"===r?PI[n%6][Math.floor(t/1e5)-1]:OI[n%2][Math.floor(t%2e6/1e5)]:((t<1e6?"0":"")+t).slice(2,TI[e]+2),MI=(t,e,n,r=1e5)=>{const i=[],o=[],s=6*t-180-6,a=SI(e[1],e[0]<s?s:e[0]),l=SI(e[1],s+6,t).easting,u=Math.ceil(a.easting/r)*r,c=Math.floor(l/r)*r;let h="";r<10?h="-1m":r<100?h="-10m":r<=1e3&&(h="-1k");const p="zone-ew-start"+h,f="zone-ew-end"+h;for(let s=u;s<=c;s+=r){const l=xI(s,a.northing,t,null,!0),u=sn([l.longitude,e[1]]),c=sn([l.longitude,e[3]]);i.push({geom:new Ro(u.concat(c),to)});const h=xI(s,a.northing,t,null,!0),d=sn([h.longitude,h.latitude]),g=new Bo([d[0],n[1]]);s%1e5==0&&(o.push({geom:g.clone(),label:II(s,1e5,t,"ew"),class:p}),o.push({geom:g.clone(),label:II(s-1e5,1e5,t,"ew"),class:f})),1e5!==r&&o.push({geom:g.clone(),label:II(s,r,t,"ew"),class:"ew-center"})}return{lines:i,points:o}},kI=(t,e,n,r=1e5)=>{const i=[],o=[],s=6*t-180,a=s-6,l=SI(e[3],e[3]),u=SI(e[1],e[0]<a?a:e[0]),c=SI(e[1],s>e[2]?e[2]:s);let h=sn([a,0])[0];a<e[0]&&(h=n[0]);const p=Math.floor(u.northing/r)*r,f=Math.ceil(l.northing/r)*r;for(let l=p;l<=f;l+=r){const p=xI(u.easting,l,t,null,!0),f=xI(c.easting,l,t,null,!0),d=sn([a,p.latitude]),g=sn([s,f.latitude]);d[0]=a<e[0]?n[0]:d[0],g[0]=s>e[2]?n[2]:g[0];const y=xI(u.easting,l,t,null,!0),m=sn([y.longitude,y.latitude]);i.push({geom:new Ro(d.concat(g),to)});const v=new Bo([h,m[1]]);l%1e5==0&&(o.push({geom:v.clone(),label:II(l,1e5,t,"ns"),class:"ns-start"}),o.push({geom:v.clone(),label:II(l-1e5,1e5,t,"ns"),class:"ns-end"})),1e5!==r&&o.push({geom:v.clone(),label:II(l,r,t,"ns"),class:"ns"})}return{lines:i,points:o}},LI=t=>{let e=1e6;return t<.02?e=1:t<.25?e=10:t<2.5?e=100:t<25?e=1e3:t<160?e=1e4:t<2500&&(e=1e5),e},AI=class extends xE{constructor(t={}){super({renderBuffer:0,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.setSource(new zx({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new wx,overlaps:!1,useSpatialIndex:!1})),this.zoneLineStyle=t.zoneLineStyle||new xv({stroke:new Dm({color:"#ff0000",width:4})}),this.gridLineStyle=t.gridLineStyle||new xv({stroke:new Dm({color:"rgba(0,0,0,0.9)",width:1})});const e={font:"14px Calibri,sans-serif",textBaseline:"bottom",textAlign:"center",fill:new rm({color:"rgba(0,0,0,1)"}),stroke:new Dm({color:"rgba(255,255,255,1)",width:3}),text:"00",...t.gridLabelStyle},n={...e,textBaseline:"middle",textAlign:"left",offsetX:5};this.labelStyle={"zone-ew-start":new xv({text:new Sv({...e,textAlign:"left",offsetX:5})}),"zone-ew-end":new xv({text:new Sv({...e,textAlign:"right",offsetX:-5})}),"zone-ew-start-1k":new xv({text:new Sv({...e,textAlign:"left",offsetX:14})}),"zone-ew-end-1k":new xv({text:new Sv({...e,textAlign:"right",offsetX:-14})}),"zone-ew-start-10m":new xv({text:new Sv({...e,textAlign:"left",offsetX:20})}),"zone-ew-end-10m":new xv({text:new Sv({...e,textAlign:"right",offsetX:-20})}),"zone-ew-start-1m":new xv({text:new Sv({...e,textAlign:"left",offsetX:25})}),"zone-ew-end-1m":new xv({text:new Sv({...e,textAlign:"right",offsetX:-25})}),"ew-center":new xv({text:new Sv({...e,font:"12px Calibri,sans-serif",textAlign:"center"})}),ns:new xv({text:new Sv({...n,squareIdStyle:e,font:"12px Calibri,sans-serif"})}),"ns-start":new xv({text:new Sv({...n,offsetY:-15})}),"ns-end":t.northSouthLabelStyle||new xv({text:new Sv({...n,offsetY:15})})},this.intervalFn=t.intervalFn||LI}loaderFunction(t,e,n){const r=this.getSource().getFeaturesCollection();r.clear(),this.loadedExtent_=t;const i=(t=>an([t[0],t[1]]).concat(an([t[2],t[3]])))(t),o=(t=>{const e=Math.floor((180+t[0])/6+1),n=Math.ceil((180+t[2])/6+1),r=[];for(let t=e;t<n;t++)r.push(t);return r})(i),s=this.intervalFn(e);for(let e=0,n=o.length;e<n;e++){const n=o[e],a=new ai,l=6*n-180,u=sn([l,-90]).concat(sn([l,0])).concat(sn([l,90]));if(a.setGeometry(new Ro(u,to)),a.setStyle(this.zoneLineStyle),r.push(a),s<=1e5){const e=MI(n,i,t,s),o=kI(n,i,t,s),a=e.lines.concat(o.lines),l=e.points.concat(o.points);for(let t=0,e=a.length;t<e;t++){const e=a[t],n=new ai;n.setGeometry(e.geom),n.setStyle(this.gridLineStyle),r.push(n)}for(let t=0,e=l.length;t<e;t++){const e=l[t],n=new ai;n.setGeometry(e.geom);const i=this.labelStyle[e.class].clone();i.getText().setText(e.label),n.setStyle(i),r.push(n)}}}}strategyFunction(t,e){return this.loadedExtent_&&!Se(this.loadedExtent_,t)&&this.getSource().removeLoadedExtent(this.loadedExtent_),[t]}},RI=t=>"number"===t||"range"===t,FI=t=>{const e=RI(t.type);return t.default?e?parseFloat(t.default):t.default:e?0:""};class jI extends Sy{constructor(t){super(t),this.state={properties:null}}componentDidUpdate(t){if(t.feature!==this.props.feature){const t=(t=>{const e={};return t.forEach((t=>{e[t.name]=FI(t)})),e})(this.props.properties),e=this.props.feature&&this.props.feature.properties;this.setState({properties:{...t,...e}})}}renderOption(t){return Cn().createElement("div",{className:"button-parent",key:t.value},Cn().createElement("button",{onClick:()=>{const e=Object.assign({},this.props.feature,{properties:this.state.properties});this.props.onClose(t.value,this.props.path,e)}},this.props.t(t.label)))}renderInput(t){const e=t.type,n=this.state.properties[t.name],r=void 0===n?FI(t):n,i={type:e,value:r,onChange:n=>{const r=RI(e)?parseFloat(n.target.value):n.target.value,i=Object.assign({},this.state.properties,{[t.name]:r});this.setState({properties:i})}};return"range"!==e&&"number"!==e||["min","max","step"].forEach((e=>{void 0!==t[e]&&(i[e]=t[e])})),"select"===e?Cn().createElement("select",i,t.options.map((t=>Cn().createElement("option",{key:t.value,value:t.value},t.label)))):Cn().createElement("input",i)}renderBody(){return Cn().createElement("div",{className:"editor-list"},this.state.properties&&this.props.properties.map((t=>Cn().createElement("div",{key:t.name,className:"editor-attribute"},Cn().createElement("label",null,t.label),this.renderInput(t)))))}}jI.defaultProps={attributes:[],options:[{label:"Close",value:"close"},{label:"save-changes",value:"save"}]};const DI=qb()(jI),zI=ar((t=>{let e=[];const n=t.editor&&"edit"===t.editor.modal;if(n){const n=wc(t.map.editPath);let r=null;try{r=og(t.mapSources,t.map.editPath)}catch(t){}if(r&&r.queryAs&&r.queryAs.length>0){const n=wc(r.queryAs[0]);e=t.mapSources[n].properties}else e=t.mapSources[n].properties}return{title:"draw-edit-tip",open:n,path:t.map.editPath,properties:e,feature:t.editor?t.editor.feature:null,isNew:t.editor?t.editor.isNew:null}}),(t=>({onClose:(e,n,r)=>{"save"===e&&t(mg(n,r)),t(pg(Vd)),t(Kw())}})))(DI);class qI extends Sy{getTitle(){return this.props.t("draw-remove-tip")}close(t){this.props.onClose(t,this.props.mapSource,this.props.feature)}renderBody(){return Cn().createElement("div",null)}}qI.defaultProps={attributes:[],options:[{label:"Cancel",value:"canel"},{label:"Okay",value:"remove"}]};const BI=qb()(ar((t=>({open:"remove"===t.editor.modal,mapSource:t.editor.source,feature:t.editor.feature})),((t,e)=>({onClose:(e,n,r)=>{"remove"===e&&t(function(t,e){return(n,r)=>{const i=og(r().mapSources,t),o=wc(t);let s=o;i&&i.queryAs&&i.queryAs.length>0&&(s=wc(i.queryAs[0]));const a=r().mapSources[s];if(a){const t=a.idProperty,r=e.id||(e.properties||{})[t];if("vector"===a.type)return n({type:oh.REMOVE_FEATURE,mapSourceName:s,id:r}),new Promise((t=>t()));if("wfs"===a.type){tn("EPSG:3857");const t=function(t,e,n){return zd(t,0,{deletes:n})}(a,0,[yg(e)]);return fetch(a.urls[0]+"",{method:"POST",body:t}).then((t=>t.text())).then((t=>{n(gg(o))}))}console.error(`${a.type} sources do not support saving.`)}}}(n,r)),t(pg(Vd)),t(Kw())}})))(qI));class GI extends Cn().Component{render(){return 0!==this.props.attributions.length&&Cn().createElement("div",{className:"attribution-display"},this.props.attributions.map((t=>Cn().createElement("div",{dangerouslySetInnerHTML:{__html:t},className:"attribution",key:Pg()()}))))}}GI.propTypes={attributions:In().array},GI.defaultProps={attributions:[]};const UI=ar((t=>{const e=[];for(const n in t.mapSources){const r=t.mapSources[n].layers;for(let t=0,n=r.length;t<n;t++){const n=r[t];n.on&&n.attribution&&e.push(n.attribution)}}return{attributions:e}}))(GI);class VI extends Cn().Component{render(){return(t=>{const e=[];for(let n=t.minZoom;n<=t.maxZoom;n++)e.push(n);return Cn().createElement("div",{className:"jump-to-zoom"},"Zoom:"," ",Cn().createElement("select",{value:t.zoom,onChange:e=>{t.setZoom(e.target.value)}},e.map((t=>Cn().createElement("option",{key:t,value:t},t)))))})(this.props)}}VI.propTypes={minZoom:In().number,maxZoom:In().number,zoom:In().number,setZoom:In().func},VI.defaultProps={minZoom:1,maxZoom:22,zoom:1,setZoom:()=>{}};const WI=ar((t=>({zoom:t.map.zoom||1})),(t=>({setZoom:e=>{t(ep({zoom:e}))}})))(VI),HI=({label:t,icon:e,onClick:n,t:r,index:i,disabled:o})=>Cn().createElement("div",{className:`map-button fade-in ${i} ${o?"disabled":""}`,title:r(t),onClick:n},Cn().createElement("i",{className:e}));HI.defaultProps={label:"",icon:"",onClick:()=>{},t:t=>t,index:0,disabled:!1},HI.propTypes={label:In().string,icon:In().string,onClick:In().func,t:In().func,index:In().number,disabled:In().bool};const YI=qb()(HI),XI=({editPath:t,saveFeature:e,olLayers:n,changeTool:r,setFeatures:i})=>{const o=(0,En.useCallback)((()=>{i(Vd,[]),r("Modify",t)}),[r,i,Vd]),s=(0,En.useCallback)((()=>{i(Vd,[]),r(null)})),a=(0,En.useCallback)((r=>{const i=n["edit-temp"].getSource().getFeatures().slice(0,1).map((t=>zc(t)));if(i.length>0){const n=i[0];e(t,n),o()}}),[n,Vd]);return(0,En.useEffect)((()=>{const t=t=>{let e=!1;"Escape"===t.key?(o(),e=!0):"s"===t.key&&t.ctrlKey?(a(),e=!0):"x"===t.key&&t.ctrlKey&&(s(),e=!0),e&&(t.preventDefault(),t.stopPropagation())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[o,a]),Cn().createElement(Cn().Fragment,null,Cn().createElement(YI,{label:"save-changes",icon:"icon save",index:4,onClick:a}),Cn().createElement(YI,{disabled:!0,label:"undo-changes",icon:"icon undo",index:3}),Cn().createElement(YI,{label:"cancel-changes",icon:"icon cancel",index:2,onClick:o}),Cn().createElement(YI,{label:"end-drawing",icon:"icon stop",index:1,onClick:s}))},KI=({changeTool:t,setFeatures:e})=>{const n=(0,En.useCallback)((()=>{e(Vd,[]),t(null)}));return(0,En.useEffect)((()=>{const t=t=>{"Escape"===t.key&&(n(),t.preventDefault(),t.stopPropagation())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[t]),Cn().createElement(YI,{label:"end-drawing",icon:"icon stop",index:1,onClick:()=>n()})},ZI={"draw-point":"point","draw-polygon":"polygon","draw-line":"line","draw-modify":"modify","draw-remove":"remove","draw-edit":"edit"},$I={"draw-remove":"Remove","draw-modify":"Modify","draw-point":"Point","draw-line":"LineString","draw-polygon":"Polygon","draw-edit":"Edit"},JI=({editTools:t,editPath:e,setEditPath:n,setEditTools:r,changeTool:i})=>Cn().createElement(Cn().Fragment,null,t.map(((t,n)=>Cn().createElement(YI,{key:t,label:`${t}-tip`,icon:`icon ${ZI[t]}`,index:n+2,onClick:()=>i($I[t],e)}))),Cn().createElement(YI,{label:"Close",icon:"icon close",index:t.length+2,onClick:()=>{n(""),r([])}})),QI=({changeTool:t,editPath:e,editTools:n,saveFeature:r,setFeatures:i,olLayers:o,interactionType:s,activeSource:a,setZoom:l,setEditPath:u,setEditTools:c,zoom:h})=>{let p=!1;return!s&&e?p=Cn().createElement(JI,{editTools:n,setEditPath:u,setEditTools:c,changeTool:t,editPath:e}):s&&s.indexOf("Modify")>=0&&"edit-temp/edit-temp"===a?p=Cn().createElement(XI,{olLayers:o,changeTool:t,saveFeature:r,editPath:e,setFeatures:i}):s&&(p=Cn().createElement(KI,{changeTool:t,setFeatures:i})),Cn().createElement(Cn().Fragment,null,Cn().createElement(YI,{label:"zoom-in",icon:"icon zoom-in",index:0,onClick:()=>l(h+1)}),Cn().createElement(YI,{label:"zoom-out",icon:"icon zoom-out",index:0,onClick:()=>l(h-1)}),Cn().createElement("span",{style:{display:"inline-block",width:16}}),p)};function tM(t){const e=[];!1!==t.allowRotate&&e.push(new BC);const n=Object.assign({enabled:!1,units:"metric"},t.scaleLine);return!1!==n.enabled&&e.push(new AE({units:n.units})),e}const eM=new ys,nM=(t,e,n,r)=>{const i=((t,e=10)=>{let n=e;try{t.config["pixel-tolerance"]&&(n=parseFloat(t.config["pixel-tolerance"]))}catch(t){}return n})(e,r);if(i>0&&"Point"===t.geometry.type){const e=i*n;return ih(t.geometry.coordinates,e)}return t};class rM extends Cn().Component{constructor(){super(),this.olLayers={},this.currentInteraction=null,this.intervals={},this.updateMapSize=this.updateMapSize.bind(this),this.sketchFeature=null}updateSource(t){const e=this.props.mapSources[t],n=this.olLayers[t];switch(e.type){case"wms":!function(t,e,n){const r=e.getSource(),i=XP(n);bc(i.params,r.getParams())&&r.updateParams(i.params),r.getUrl()!==i.url&&r.setUrl(i.url)}(this.map,n,e);break;case"xyz":!function(t,e,n){const r=e.getSource(),i=YO(n),o=r.getUrls();let s=!1;if(o.length!==i.urls.length)s=!0;else for(const t of o)i.urls.indexOf(t)<0&&(s=!0);s&&r.setUrls(i.urls)}(this.map,n,e);break;case"ags":!function(t,e,n){const r=e.getSource(),i=$O(n);r.getUrls()[0]!==i.url&&r.setUrl(i.url)}(this.map,n,e);break;case"vector":case"wfs":case"ags-vector":case"geojson":!function(t,e,n,r){if("vector"===n.type){if(e.get("featuresVersion")!==n.featuresVersion){const t=e.getSource();t.clear(!0);const r=(new ys).readFeatures({type:"FeatureCollection",features:n.features});t.addFeatures(r),e.set("featuresVersion",n.featuresVersion)}}else e.get("featuresVersion")!==n.featuresVersion&&(e.set("featuresVersion",n.featuresVersion),e.getSource().refresh());XT(e,n,r)}(this.map,n,e,this.props.mapView.interactionType);break;case"bing":!function(t,e,n){const r=e.getSource(),i=tI(n);i.imagerySet!==r.getImagerySet()&&e.setSource(new QT(i))}(this.map,n,e);break;case"usng":((t,e,n)=>{const r=n.layers.filter((t=>t.on)).length>0;e.setVisible(r)})(this.map,n,e);break;case"blank":break;default:console.info("Unhandled map-source type: "+e.type)}}createLayer(t){switch(t.type){case"wms":return function(t){return new CP({source:new HP(XP(t))})}(t);case"xyz":return function(t){return new HO({source:new jO(YO(t)),minResolution:t.minresolution,maxResolution:t.maxresolution})}(t);case"ags":return function(t){return new HO({source:new ZO($O(t)),minResolution:t.minresolution,maxResolution:t.maxresolution})}(t);case"vector":case"wfs":case"ags-vector":case"geojson":return function(t){const e=new zx(function(t){if("wfs"===t.type){let e=Wp,n="text/xml; subtype=gml/2.1.2";return t.params.outputFormat&&(n=t.params.outputFormat),n.toLowerCase().indexOf("json")>=0&&(e=ys),{format:new e({}),projection:"EPSG:4326",url:function(e){void 0===t.params.typename&&console.error('No "typename" param defined for a WFS layer. This will fail.');const r=Object.assign({},{srsname:"EPSG:3857",outputFormat:n,service:"WFS",version:"1.1.0",request:"GetFeature",bbox:e.concat("EPSG:3857").join(",")},t.params);return rh(t.urls[0],r)},strategy:Ax}}return"geojson"===t.type?{format:new ys,projection:t.params.crs?t.params.crs:"EPSG:4326",url:t.urls[0]}:"ags-vector"===t.type?{loader:function(e,n,r){const i=t.urls[0]+"/query/",o=Object.assign({},{f:"json",returnGeometry:"true",spatialRel:"esriSpatialRelIntersects",geometry:JSON.stringify({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]}),spatialReference:JSON.stringify({wkid:102100}),geometryType:"esriGeometryEnvelope",inSR:102100,outSR:102100,outFields:"*",returnIdsOnly:!0},t.params);wr()({url:i,data:o,type:"jsonp",success:e=>{if(e.error)console.error("Error loading object IDs for "+t.label);else{const n=new hx,r=e.objectIds;if(null!==r){const e=r.length,s=Object.assign({},o,{returnIdsOnly:!1}),a=[];let l=[];for(let t=0;t<e;t++)Jc(Object.assign(s,{objectIds:l.concat([r[t]]).join(",")}))>2e3&&(a.push(l.slice()),l=[]),l.push(r[t]);l.length>0&&a.push(l);for(const e of a)wr()({url:i,data:Object.assign({},o,{returnIdsOnly:!1,objectIds:e.join(",")}),type:"jsonp",success:e=>{e.error?console.error("Error loading feature batch for "+t.label):this.addFeatures(n.readFeatures(e,{}))}})}}},error:t=>{console.error(t)}})},strategy:(e=_O({tileSize:512}),function(t,n,r){var i=e.getZForResolution(function(t,e){return t}(n)),o=e.getTileRangeForExtentAndZ(wn(t),i),s=[],a=[i,0,0];for(a[1]=o.minX;a[1]<=o.maxX;++a[1])for(a[2]=o.minY;a[2]<=o.maxY;++a[2])s.push(bn(e.getTileCoordExtent(a)));return s})}:{};var e}(t));t.transforms&&e.on("addfeature",(function(e){const n=e.feature;n.setProperties(Zc(t.transforms,n.getProperties()))}));const n={source:e,minResolution:t.minresolution,maxResolution:t.maxresolution,declutter:mc((t.config||{}).declutter)},r=new xE(n);return XT(r,t),r}(t);case"bing":return function(t){return new HO({source:new QT(tI(t)),minResolution:t.minresolution,maxResolution:t.maxresolution})}(t);case"usng":return new AI;case"blank":return new CP;default:throw new Error("Unhandled creation of map-source type: "+t.type)}}wmsGetFeatureInfoQuery(t,e,n){const r=this.map.getView().getProjection(),i=this.props.mapView,o=wc(n),s=e=>{this.props.store.dispatch(Kh(t,n,!0,[],e)),setTimeout((()=>{this.checkQueryForCompleteness(t,n)}),200)},a=e.filter((t=>t.geometry&&"Point"===t.geometry.type));if(0===a.length)return void s("No valid selection geometry.");const l=a[0].geometry.coordinates,u=this.olLayers[o].getSource(),c={FEATURE_COUNT:1e3,QUERY_LAYERS:xc(n),INFO_FORMAT:"application/vnd.ogc.gml"},h=u.getFeatureInfoUrl(l,i.resolution,r.getCode(),c);fetch(h,{headers:{"Access-Control-Request-Headers":"*"}}).then((t=>t.text())).then((e=>{if(e){const r=(new dx).readFeatures(e),i=eM.writeFeaturesObject(r).features;this.props.store.dispatch(Kh(t,n,!1,i))}else s();this.checkQueryForCompleteness(t,n)})).catch(((e,r)=>{s(),this.checkQueryForCompleteness(t,n)}))}checkQueryForCompleteness(t,e){const n=this.props.queries[t];let r=!0;if(n&&n.layers)for(const t of n.layers)r=r&&(n.results[t]||t===e);else n&&n.layers.length>0&&(r=!1);r&&(n.runOptions&&n.runOptions.zoomToResults&&this.props.zoomToResults(n),this.props.store.dispatch(Xh(t)))}wfsGetFeatureQuery(t,e,n){const r=this.map.getView().getProjection(),i=wc(n),o=this.props.mapSources[i];let s=r;o.wgs84Hack&&(s=new tn("EPSG:4326"));let a=this.olLayers[i];a||(a=this.createLayer(o));let l="text/xml; subtype=gml/2.1.2";o.params.outputFormat&&(l=o.params.outputFormat),e.selection&&1===e.selection.length&&(e.selection[0]=nM(e.selection[0],o,this.props.mapView.resolution,10));const u=Dd(e,o,r,l),c=o.urls[0]+"?"+Sc(o.params),h=l.toLowerCase().indexOf("json")>0;fetch(c,{method:"POST",body:u,headers:{"Access-Control-Request-Headers":"*"}}).then((t=>t.text())).then((e=>{if(e)if(e.search(/(ows|wfs):exception/i)>=0){const r=cp(e),i=["ows:ExceptionText","wfs:ExceptionText"];let o="";for(let t=0,e=i.length;t<e;t++){const e=r.getElementsByTagName(i[t]);for(let t=0,n=e.length;t<n;t++)o+=ap(e[t])+"\n"}void 0!==typeof console&&console.error(o),this.props.store.dispatch(Kh(t,n,!0,[],o))}else{let i=[];if(h)i=JSON.parse(e).features;else{const t=(new Wp).readFeatures(e,{featureProjection:r,dataProjection:s}),n=new ys;for(const e of t){const t=n.writeFeatureObject(e);t.properties.boundedBy=e.getGeometry().getExtent(),i.push(t)}}i=$c(o.transforms,i),this.props.store.dispatch(Kh(t,n,!1,i))}this.checkQueryForCompleteness(t,n)})).catch((()=>{this.props.store.dispatch(Kh(t,n,!0,[],"Server error. Check network logs.")),this.checkQueryForCompleteness(t,n)}))}agsFeatureQuery(t,e,n){const r=wc(n),i=this.props.mapSources[r];let o=this.olLayers[r];o||(o=this.createLayer(i));const s=function(t){return t.replace("*","%")},a=function(t,e,n){return"number"==typeof n?e+" "+t+" "+n:`${e} ${t} '${n}'`},l={like:function(t,e){return t+" like '"+s(e)+"'"},ilike:function(t,e){return"upper("+t+") like upper('"+s(e)+"')"},eq:function(t,e){return a("=",t,e)},ge:function(t,e){return a(">=",t,e)},gt:function(t,e){return a(">",t,e)},le:function(t,e){return a("<=",t,e)},lt:function(t,e){return a("<",t,e)}},u=new hx,c={f:"json",returnGeometry:"true",spatialReference:JSON.stringify({wkid:102100}),inSR:102100,outSR:102100,outFields:"*"};if(e.selection&&e.selection.length>0){const t=nM(e.selection[0],i,this.props.mapView.resolution,2).geometry,n=eM.readGeometry(t),r={Point:"esriGeometryPoint",MultiPoint:"esriGeometryMultipoint",LineString:"esriGeometryPolyline",Polygon:"esriGeometryPolygon"};c.geometryType=r[t.type],c.geometry=u.writeGeometry(n),c.spatialRel="esriSpatialRelIntersects"}const h=[];for(const t of e.fields)h.push(l[t.comparitor](t.name,t.value));c.where=h.join(" and ");const p=Object.assign({},c,i.params);Kc({url:i.urls[0]+"/query/",method:"get",type:"jsonp",data:p,success:e=>{if(e)if(e.error&&200!==e.error.code)console.error(e.error),this.props.store.dispatch(Kh(t,n,!0,[]));else{const r=u.readFeatures(e),o=new ys;let s=[];for(const t of r){const e=o.writeFeatureObject(t);e.properties.boundedBy=t.getGeometry().getExtent(),s.push(e)}s=$c(i.transforms,s),this.props.store.dispatch(Kh(t,n,!1,s))}},error:()=>{this.props.store.dispatch(Kh(t,n,!0,[]))},complete:()=>{this.checkQueryForCompleteness(t,n)}})}vectorLayerQuery(t,e,n){const r=wc(n),i=this.props.mapSources[r];let o=this.olLayers[r];o||(o=this.createLayer(i));const s=o.getSource(),a=new ys,l=[],u=e.selection?e.selection[0]:null;if(u&&u.geometry&&"Point"===u.geometry.type){const t=u.geometry.coordinates;s.forEachFeatureAtCoordinateDirect(t,(t=>{const e=a.writeFeatureObject(t);null!==e.properties&&l.push(e)}))}this.props.store.dispatch(Kh(t,n,!1,l)),this.checkQueryForCompleteness(t,n)}runQuery(t,e){const n=t[e];n.layers&&0!==n.layers.length||this.props.finishQuery(e);for(const t of n.layers){const r=wc(t);switch(this.props.mapSources[r].type){case"wms":this.wmsGetFeatureInfoQuery(e,n.selection,t);break;case"wfs":this.wfsGetFeatureQuery(e,n,t);break;case"ags-vector":this.agsFeatureQuery(e,n,t);break;case"geojson":case"vector":this.vectorLayerQuery(e,n,t)}}}checkQueries(t){for(const e in t){const n=t[e];n&&"new"===n.progress&&(this.props.store.dispatch(Yh(e)),this.runQuery(t,e))}if(t.order.length>0){const e=t.order[0],n=t[e];if("finished"===n.progress){const t=JSON.stringify(n.filter),r=Xw()(t);this.currentQueryId===e&&this.currentQueryFilter===r||(this.renderQueryLayer(n),this.currentQueryId=e,this.currentQueryFilter=r)}}else{const t=this.props.mapSources.results;t&&t.features&&t.features.length>0&&this.props.store.dispatch(pg("results"))}}removeRefreshInterval(t){this.intervals[t]&&(clearInterval(this.intervals[t]),delete this.intervals[t])}refreshLayer(t){if("wms"===t.type){const e=this.olLayers[t.name].getSource(),n=e.getParams();n[".ck"]=Pg().v4(),e.updateParams(n)}}createRefreshInterval(t){this.intervals.hasOwnProperty(t.name)||(this.intervals[t.name]=setInterval((()=>{this.refreshLayer(t)}),1e3*t.refresh))}renderQueryLayer(t){if(this.props.mapSources.results){this.props.store.dispatch(pg("results"));let e=[];for(const n in t.results)!0!==t.results[n].failed&&(e=e.concat(Tc(t.results[n],t.filter)));this.props.store.dispatch(hg("results",e))}else console.error('No "results" layer has been defined, cannot do smart query rendering.')}refreshMapSources(){const t=!0===this.props.printOnly,e=ig(this.props.mapSources,t);for(const t in this.olLayers)e.indexOf(t)<0&&(this.olLayers[t].setVisible(!1),this.removeRefreshInterval(t));for(const t of e){const e=this.props.mapSources[t];this.olLayers[t]?(this.updateSource(t),this.olLayers[t].setVisible(!0)):(this.olLayers[t]=this.createLayer(e),this.map.addLayer(this.olLayers[t])),this.olLayers[t].setZIndex(e.zIndex),this.olLayers[t].setOpacity(e.opacity),null!==e.refresh?this.createRefreshInterval(e):null===e.refresh&&this.intervals[t]&&this.removeRefreshInterval(t)}}addSelectionFeatures(t,e){const n=t.map((t=>eM.writeFeatureObject(t))),r=0===e||isNaN(e)?0:e;let i=n;if(0!==r){const t=Qc(n,"EPSG:3857","EPSG:4326");i=[nx(Qc(t.map((t=>{const e=tx(t,r);return e.properties={buffer:!0},e})),"EPSG:4326","EPSG:3857"))]}this.props.setSelectionFeatures(n),this.props.setFeatures("selection",i)}configureSelectionLayer(){const t=new zx;this.selectionLayer=new xE({source:t}),XT(this.selectionLayer,{layers:[{on:!0,style:this.props.selectionStyle}]})}componentDidMount(){this.configureSelectionLayer();const t={};this.props.center?(t.center=this.props.center,this.props.zoom?t.zoom=this.props.zoom:this.props.resolution&&(t.resolution=this.props.resolution)):(t.center=this.props.mapView.center,this.props.mapView.zoom?t.zoom=this.props.mapView.zoom:t.resolution=this.props.mapView.resolution),this.props.config.view&&["extent","center","zoom","maxZoom","minZoom"].forEach((e=>{this.props.config.view[e]&&(t[e]=this.props.config.view[e])})),this.map=new WN({target:this.mapDiv,layers:[this.selectionLayer],logo:!1,view:new tC(t),controls:tM(this.props.config)}),this.props.mapView.extent&&this.zoomToExtent(this.props.mapView.extent),this.map.on("moveend",(()=>{const t=this.map.getView();this.props.store.dispatch(ep({center:t.getCenter(),resolution:t.getResolution(),zoom:t.getZoom()}))})),this.map.on("pointermove",(t=>{const e=(n=t.coordinate,{type:ph,coords:n});var n;if(this.props.store.dispatch(e),this.sketchFeature){const t=jc(this.sketchFeature.getGeometry());this.props.store.dispatch(Qh(t))}})),this.props.mapRenderedCallback&&this.map.on("postrender",(()=>this.props.mapRenderedCallback(this.map))),this.refreshMapSources(),this.props.onMapResize({width:this.mapDiv.clientWidth,height:this.mapDiv.clientHeight})}activateDrawTool(t,e,n){const r=null===e,i=wc(e),o=this.props.mapSources[i];void 0===t&&(t=null);let s=this.selectionLayer.getSource();if(r||(s=this.olLayers[i].getSource()),this.stopDrawing(),this.currentInteraction=t,null!==t){if("Select"===t)this.drawTool=new ZN({toggleCondition:uN,layers:[this.olLayers[i]]}),this.drawTool.on("select",(t=>{const e=t.target.getFeatures();this.addSelectionFeatures(e.getArray(),this.props.selectionBuffer)}));else if("Modify"===t||"Edit"===t||"Remove"===t){let n=null;try{n=og(this.props.mapSources,e)}catch(t){}const r=n=>{this.props.setEditPath(e),this.props.setFeatures(Vd,n,!0),n&&n.length>0&&("Remove"===t?this.props.removeFeature(e,n[0]):"Edit"===t?this.props.onEditProperties(n[0]):"Modify"===t&&this.props.changeTool("_Modify","edit-temp/edit-temp"))};if(!o||["wfs","vector","geojson"].indexOf(o.type)>=0){const t=o?[this.olLayers[i]]:[this.selectionLayer];this.drawTool=new ZN({layers:t,style:null}),this.drawTool.on("select",(t=>{r([eM.writeFeatureObject(t.selected[0])])}))}else if(n&&n.queryAs.length>0){const t=this.olLayers["edit-temp"].getSource();this.drawTool=new lP({type:"Point",source:t}),this.drawTool.on("drawend",(e=>{const i=wc(n.queryAs[0]),o=this.props.mapSources[i];let s=zc(e.feature);const a=this.map.getView().getProjection();s=nM(s,o,this.props.mapView.resolution,10),t.clear(),function(t,e,n,r=jd){const i=Dd(t,e,n,r);return fetch(e.urls[0],{method:"POST",body:i}).then((t=>t.text())).then((t=>{let n=(new Wp).readFeatures(t,{}).map((t=>{const e=zc(t);return e.properties={...e.properties,boundedBy:t.getGeometry().getExtent()},e}));return n=$c(e.transforms,n),n}))}({selection:[s],fields:[]},o,a).then((t=>{r(t)}))}))}}else if("_Modify"===t){const t=s.getFeatures();this.drawTool=new vP({features:new wx(t)})}else if(""!==t){const i=this.olLayers["edit-temp"].getSource(),a={type:t};"Box"===t&&(a.type="Circle",a.geometryFunction=function(t,e,n){var r=he([t[0],t[t.length-1]].map((function(t){return _n(t)}))),i=[[Ie(r),Me(r),De(r),je(r),Ie(r)]],o=e;o?o.setCoordinates(i):o=new os(i);var s=mn();return s&&o.transform(n,s),o}),this.drawTool=new lP(a),!0===n&&"MultiPoint"!==t?this.drawTool.on("drawstart",(t=>{s.clear(),this.sketchFeature=t.feature})):this.drawTool.on("drawstart",(t=>{this.sketchFeature=t.feature})),r?this.drawTool.on("drawend",(e=>{this.sketchFeature=null,this.props.store.dispatch(Qh(null));let n=[e.feature];"MultiPoint"===t&&(n=this.selectionLayer.getSource().getFeatures(),n.push(e.feature)),this.addSelectionFeatures(n,this.props.selectionBuffer)})):this.drawTool.on("drawend",(t=>{const n=eM.writeFeatureObject(t.feature);i.clear();const r=og(this.props.mapSources,e);let s=o;if(r.queryAs&&r.queryAs.length>0){const t=wc(r.queryAs[0]);s=this.props.mapSources[t]}mc(s.config["edit-attributes-on-add"],!0)?(this.props.setEditPath(e),this.props.onEditProperties(n,!0)):this.props.saveFeature(e,n),this.sketchFeature=null,this.props.store.dispatch(Qh(null))}))}this.drawTool&&this.map.addInteraction(this.drawTool)}}stopDrawing(){this.drawTool&&(this.map.removeInteraction(this.drawTool),this.drawTool=null,this.currentInteraction=null)}updateMapSize(t,e){if(this.map&&this.mapDiv){this.map.updateSize();const t=this.mapDiv.getElementsByTagName("canvas");if(t&&t[0]&&"none"!==t[0].style.display)return!0}return!1}zoomToExtent(t){let e=t.bbox;const n=t.projection;if(n){const t=this.map.getView().getProjection();e=pn(e,tn(n),t)}this.map.getView().fit(e,{size:this.map.getSize()})}componentDidUpdate(t){if(this.props.mapView.extent)this.zoomToExtent(this.props.mapView.extent);else if(this.props.mapView){const t=this.map.getView(),e=this.props.mapView,n=t.getCenter(),r=t.getResolution();n[0]===e.center[0]&&n[1]===e.center[1]&&r===e.resolution||(this.map.getView().setCenter(e.center),this.map.getView().setResolution(e.resolution)),e.zoom&&t.getZoom()!==e.zoom&&this.map.getView().setZoom(e.zoom)}if(this.selectionLayer){if(this.props.selectionBuffer!==t.selectionBuffer){const t=this.props.selectionFeatures.map((t=>eM.readFeature(t)));t.length>0&&this.addSelectionFeatures(t,this.props.selectionBuffer)}if(this.props.selectionFeatures!==t.selectionFeatures){const t=this.selectionLayer.getSource();t.clear(),this.props.selectionFeatures.forEach((e=>{t.addFeature(eM.readFeature(e))}))}}if(this.checkQueries(this.props.queries),this.map){this.refreshMapSources();const e=this.props.mapView.interactionType;if(e!==t.mapView.interactionType||this.props.mapView.activeSource!==t.mapView.activeSource||e!==this.currentInteraction){const t=null===this.props.mapView.activeSource;if(this.activateDrawTool(this.props.mapView.interactionType,this.props.mapView.activeSource,t),["Polygon","LineString","Box","Point","MultiPoint"].indexOf(this.props.mapView.interactionType)>=0){const t={Box:"Polygon",MultiPoint:"Point"},n=this.props.selectionFeatures.filter((n=>n.geometry.type===e||void 0!==t[e]&&n.geometry.type===t[e]));this.props.setSelectionFeatures(n),this.props.setFeatures("selection",n)}}this.props.onMapResize({width:this.mapDiv.clientWidth,height:this.mapDiv.clientHeight})}}render(){this.map&&setTimeout(this.updateMapSize,250);const t=this.updateMapSize;if(!t()){const e=setInterval((function(){t()&&clearInterval(e)}),250)}const e=this.props.config||{},n=!0===e.enableZoomJump;return Cn().createElement("div",{className:"map",ref:t=>{this.mapDiv=t}},Cn().createElement(UI,{store:this.props.store}),Cn().createElement(Hw,{handleWidth:!0,handleHeight:!0,onResize:this.updateMapSize}),Cn().createElement(zI,{store:this.props.store}),Cn().createElement(BI,{store:this.props.store}),Cn().createElement("div",{className:"map-tools"},n&&Cn().createElement(WI,{store:this.props.store}),Cn().createElement(QI,{saveFeature:(t,e)=>{if(null===t){const t=eM.readFeature(e);this.addSelectionFeatures([t],this.props.selectionBuffer)}else this.props.saveFeature(t,e)},editPath:this.props.mapView.editPath,editTools:this.props.mapView.editTools,olLayers:this.olLayers,setFeatures:this.props.setFeatures,changeTool:this.props.changeTool,interactionType:this.props.mapView.interactionType,activeSource:this.props.mapView.activeSource,setZoom:this.props.setZoom,zoom:this.props.mapView.zoom,showZoom:!0===e.showZoom,setEditPath:this.props.setEditPath,setEditTools:this.props.setEditTools})))}}rM.defaultProps={services:{},onMapResize:()=>{}};const iM=ar((function(t){return{mapSources:t.mapSources,mapView:t.map,queries:t.query,serviceName:t.query.service,config:t.config.map||{},selectionStyle:t.config.selectionStyle||{},selectionBuffer:Gc(t.map.selectionBuffer,t.map.selectionBufferUnits,"m"),selectionFeatures:t.map.selectionFeatures}}),(function(t){return{changeTool:(e,n)=>{t(Hh(e,n))},finishQuery:e=>{t(Xh(e))},onEditProperties:(e,n=!1)=>{t(function(t,e=!1){return{type:Uh,feature:t,isNew:e}}(e,n))},setSelectionFeatures:e=>{t(Jh()),e.forEach((e=>{t(Zh(e))}))},setFeatures:(e,n,r=!1)=>{t(pg(e)),t(hg(e,n,r))},zoomToResults:e=>{const n=eh(e.results);n&&t($h(n))},setEditPath:e=>t(rp(e)),setEditTools:e=>t(ip(e)),saveFeature:(e,n)=>{t(mg(e,n))},setZoom:e=>t(ep({zoom:e})),removeFeature:(e,n)=>{t(function(t,e){return{type:Wh,feature:e,source:t}}(e,n))},onMapResize:e=>t(function(t){return{type:Ih,size:t}}(e))}}))(qb()(rM));function oM(t,e,n){for(const e of t.layers)if(e.name===n&&void 0!==e.legend&&null!==e.legend){if("html"===e.legend.type)return{type:"html",html:e.legend.contents};if("img"===e.legend.type)return{type:"img",images:[e.legend.contents]};if("nolegend"===e.legend.type)return{type:"nolegend"}}return"wms"===t.type?function(t,e,n){const r=t.urls[0].split("?")[0],i=Object.assign({REQUEST:"GetLegendGraphic",SCALE:nh(e.resolution,YP),SERVICE:"WMS",VERSION:"1.1.1",WIDTH:"250",LAYER:n,FORMAT:"image/png"},t.params),o=[];return o.push(r+"?"+Sc(i)),{type:"img",images:o}}(t,e,n):{type:"nolegend"}}class sM extends En.Component{constructor(t){super(t),this.renderLegend=this.renderLegend.bind(this)}htmlLegend(t){return{__html:t}}renderLegend(t){const e=oM(this.props.mapSources[t.mapSourceName],this.props.mapView,t.layerName),n="legend_"+t.mapSourceName+"_"+t.layerName;let r=0;switch(e.type){case"html":return Cn().createElement("div",{key:n,className:"legend-html",dangerouslySetInnerHTML:this.htmlLegend(e.html)});case"img":const t=[];r=0;for(const i of e.images)t.push(Cn().createElement("img",{alt:"layer legend",key:n+r,className:"legend-image",src:i})),r+=1;return Cn().createElement("div",{key:n,className:"legend-images"}," ",t," ");default:return!1}}render(){const t=this.props.layer;return!!Hc(this.props.mapSources,t)&&Cn().createElement("div",{className:"catalog-legend"},t.src.map(this.renderLegend))}}const aM=ar((function(t){return{mapSources:t.mapSources,mapView:t.map}}))(sM),lM=(t,e,n=[])=>{const r=t[e];if(r)if(r.children)for(let e=0,i=r.children.length;e<i;e++){const i=t[r.children[e]];n=i.children?n.concat(lM(t,r.children[e],n)):n.concat([i])}else n=n.concat([e]);return n},uM=ar((function(t,e){return{catalog:t.catalog,on:Hc(t.mapSources,e.layer)}}),(function(t,e){return{onChange:(n,r)=>{const i=e.layer;if(!0!==i.exclusive)for(let e=0,r=i.src.length;e<r;e++){const r=i.src[e];t(dg(r.mapSourceName,r.layerName,n))}else{for(let e=0,n=i.src.length;e<n;e++){const n=i.src[e];t(dg(n.mapSourceName,n.layerName,!0))}for(let e=0,n=r.length;e<n;e++){const n=r[e];t(dg(n.mapSourceName,n.layerName,!1))}}}}}))((t=>{let e="checkbox icon";return!0===t.layer.exclusive&&(e="radio icon"),t.on&&(e+=" on"),Cn().createElement("i",{className:e,onClick:()=>{if(!0===t.layer.exclusive){const e=((t,e)=>{let n=e.parent;for(;t[n]&&t[n].parent&&t[t[n].parent]&&!1===t[t[n].parent].multiple;)n=t[n].parent;let r=[];return lM(t,n,[]).filter((t=>t.id!==e.id)).forEach((t=>{r=r.concat(t.src)})),r})(t.catalog,t.layer);t.onChange(!t.on,e)}else t.onChange(!t.on)}})}));function cM(t,e){let n=!0;for(let r=0,i=e.src.length;r<i;r++){const i=e.src[r],o=ug(t,i.mapSourceName,i.layerName);n=n&&o.favorite}return n}class hM extends Cn().Component{render(){const t=cM(this.props.mapSources,this.props.layer);let e="favorite icon";return t||(e+=" not"),Cn().createElement("i",{className:e,onClick:()=>{this.props.onToggleFavorite(this.props.layer,!t)}})}}hM.propTypes={mapSources:In().object.isRequired,layer:In().object.isRequired,onToggleFavorite:In().func.isRequired};const pM=ar((function(t){return{mapSources:t.mapSources}}),(function(t){return{onToggleFavorite:(e,n)=>{for(let r=0,i=e.src.length;r<i;r++){const i=e.src[r];t(Jd(i.mapSourceName,i.layerName,n))}}}}))(hM),fM=({layer:t,resolution:e,forceTools:n})=>{const r=["layer"];if(t.on&&r.push("on"),t.classNames&&r.push(t.classNames),(t.minresolution||t.maxresolution)&&e){const n=void 0!==t.minresolution?t.minresolution:-1,i=void 0!==t.maxresolution?t.maxresolution:1e3;(e<n||e>i)&&r.push("out-of-resolution")}const i=((t,e)=>t.tools.concat(e))(t,n);return Cn().createElement("div",{key:t.id,className:r.join(" ")},Cn().createElement("div",{className:"layer-label",title:t.tip},Cn().createElement(uM,{layer:t}),Cn().createElement(pM,{layer:t}),Cn().createElement("span",null,t.label),null!==t.refresh&&Cn().createElement(Rb,{layer:t}),!!t.metadata_url&&Cn().createElement(Lb,{href:t.metadata_url})),Cn().createElement("div",{className:"layer-tools"},((t,e)=>{const n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r],o=t.id+"_"+i;switch(i){case"up":n.push(Cn().createElement(Qy,{key:o,layer:t}));break;case"down":n.push(Cn().createElement(tm,{key:o,layer:t}));break;case"fade":n.push(Cn().createElement(Ib,{key:o,layer:t}));break;case"unfade":n.push(Cn().createElement(Fb,{key:o,layer:t}));break;case"zoomto":n.push(Cn().createElement(Yb,{key:o,layer:t}));break;case"upload":n.push(Cn().createElement(Wb,{key:o,layer:t}));break;case"download":n.push(Cn().createElement(Nb,{key:o,layer:t}));break;case"clear":n.push(Cn().createElement($y,{key:o,layer:t}));break;case"legend-toggle":n.push(Cn().createElement(kb,{layer:t,key:o}))}}return n})(t,i),(t=>t.filter((t=>Hd.indexOf(t)>=0)).length>0)(i)&&Cn().createElement(Ob,{layer:t})),!!t.legend&&Cn().createElement(aM,{layer:t}))};fM.propTypes={forceTools:In().array},fM.defaultProps={forceTools:[]};const dM=fM;function gM(){return!0}function yM(t,e,n,r,i=gM){const o=e[n];return o.children?Cn().createElement(Xy,{key:n,group:o,onExpand:()=>{var e,r;t((e=n,r=!0!==o.expand,{type:uh,id:e,expand:r}))}},o.children.map((n=>yM(t,e,n,r,i)))):!!i(o)&&Cn().createElement(dM,{key:n,layer:o,resolution:r})}function mM(t,e,n,r,i=gM){const o=e[n];let s=[];if(o.children)for(let n=0,a=o.children.length;n<a;n++){const a=mM(t,e,o.children[n],r,i);a.length>0&&(s=s.concat(a))}else i(o)&&s.push(Cn().createElement(dM,{key:n,layer:o,resolution:r}));return s}class vM extends Cn().Component{constructor(t){super(t),this.state={searchFilter:""}}render(){const t=this.props.showSearch?"catalog searchable":"catalog",e=t=>""===this.state.searchFilter||t.label.toLowerCase().indexOf(this.state.searchFilter)>=0;return Cn().createElement(Ln,{store:this.props.store},Cn().createElement("div",{className:t},this.props.showSearch&&Cn().createElement("div",{className:"searchbox"},Cn().createElement(Yy,null,(t=>Cn().createElement("input",{onChange:t=>{this.setState({searchFilter:t.target.value.toLowerCase()})},placeholder:t("search-catalog")})))),""===this.state.searchFilter?this.props.catalog.root.children.map((t=>yM(this.props.dispatch,this.props.catalog,t,this.props.resolution))):this.props.catalog.root.children.map((t=>mM(this.props.dispatch,this.props.catalog,t,this.props.resolution,e)))))}}vM.defaultProps={showSearch:!0};const _M=ar((t=>({mapSources:t.mapSources,catalog:t.catalog,resolution:t.map?t.map.resolution:-1})))(vM),bM=({tool:t,onClick:e,currentService:n,currentDrawTool:r})=>{const{t:i}=_y(),o=i(t.label),s=t.name===n;return Cn().createElement("span",{onClick:()=>{e(t,n,r)},key:t.name,className:`${s?"active ":""}${t.cssClass||"tool "+t.name}`,title:o},Cn().createElement("span",{className:"icon"}),Cn().createElement("span",{className:"label"},o))};bM.defaultProps={onClick:(t,e)=>{}},bM.propTypes={tool:In().object.isRequired,onClick:In().func};const wM=ar((t=>({currentService:t.query.service,currentDrawTool:t.map.interactionType})),(function(t,e){return{onClick:(n,r,i)=>{if("service"===n.actionType){t(Eg(n.name));let o=null;e.serviceDef&&e.serviceDef.tools&&e.serviceDef.tools.default&&(o=e.serviceDef.tools.default),n.name!==r?(t(np(0)),t(Hh(o))):null===i&&t(Hh(o)),t(bg("service-start"))}else"action"===n.actionType&&t(wg(n.name))}}}))(bM),xM=({label:t,tools:e,services:n})=>{const{t:r}=_y();return Cn().createElement("div",{className:"drawer tool"},Cn().createElement("span",{className:"drawer icon"}),Cn().createElement("span",{className:"label"},r(t)),Cn().createElement("div",{className:"drawer-contents"},e.map(((t,e)=>Cn().createElement(wM,{key:`btn${e}`,tool:t,serviceDef:"service"===t.actionType?n[t.name]:void 0})))))};xM.defaultProps={label:"Unititled drawer",tools:[]},xM.propTypes={label:In().string,tools:In().array};const SM=xM;class EM extends Cn().Component{render(){return Cn().createElement(Ln,{store:this.props.store},Cn().createElement("div",{className:"toolbar"},this.props.toolbar.root.map((t=>"drawer"===t.actionType?Cn().createElement(SM,{key:t.name,label:t.label,tools:this.props.toolbar[t.name],services:this.props.services}):Cn().createElement(wM,{tool:t,key:t.name,serviceDef:"service"===t.actionType?this.props.services[t.name]:void 0})))))}}const CM=ar((function(t){return{toolbar:t.toolbar}}))(EM);class NM extends Cn().Component{constructor(t){super(t),this.changeSelectLayer=this.changeSelectLayer.bind(this),this.state={selectLayer:null},"Select"===this.props.geomType&&(this.state.selectLayer=this.props.selectableLayers[0])}changeSelectLayer(t){this.setState({selectLayer:t.target.value})}getSelectOptions(){const t=[];for(let e=0,n=this.props.selectableLayers.length;e<n;e++){const n=this.props.selectableLayers[e],r=wc(n),i=xc(n),o=ug(this.props.mapSources,r,i).label;t.push(Cn().createElement("option",{key:n,value:n},o))}return t}componentDidMount(){if("Select"===this.props.interactionType&&"Select"===this.props.geomType){const t=this.props.selectableLayers[0];this.setState({selectLayer:t}),this.props.onChange("Select",t)}}render(){const t=this.props.geomType;let e="draw-tool",n="";this.props.interactionType===t&&(e+=" selected");const r=`draw-${t.toLowerCase()}-label`;return"Select"===t&&(n=Cn().createElement("select",{value:this.state.selectLayer,onChange:this.changeSelectLayer},this.getSelectOptions())),Cn().createElement(Yy,null,(i=>Cn().createElement("div",{key:"draw-tool-"+t,className:e,onClick:()=>{this.props.onChange(t,this.state.selectLayer)}},Cn().createElement("i",{className:"radio-icon"}),` ${i(r)}`,n)))}}const PM=ar((function(t){return{interactionType:t.map.interactionType,mapSources:t.mapSources,selectableLayers:(e=t.mapSources,ag(e,(function(t,e){return function(t,e){switch(t.type){case"wfs":case"vector":case"ags-vector":return!0===e.selectable;default:return!1}}(t,e)&&sg(0,e)})))};var e}),(function(t){return{onChange:(e,n)=>{t(Hh(e,n))}}}))(NM);var OM=__webpack_require__(6115),TM=__webpack_require__.n(OM);function IM(t,e,n=4){const r=void 0!==t.precision?t.precision:n;return e.map((t=>t.toFixed(r))).join(", ")}class MM extends Cn().Component{constructor(t){if(super(t),this.u=new(TM()),this.defaultProjections=[{label:"X,Y",ref:"xy"},{label:"Lat,Lng",ref:"EPSG:4326"},{label:"USNG",ref:"usng"}],this.namedProjections=["xy","usng","latlon"],this.getProjectionCoords=this.getProjectionCoords.bind(this),this.getCoordinateDisplay=this.getCoordinateDisplay.bind(this),this.props.projections){this.projections=[];for(const t of this.props.projections){void 0!==t.projDef&&Ac(Ey.default,t.ref,t.projDef);const e=-1!==this.namedProjections.indexOf(t.ref);let n=!1;if(!e)try{(0,Ey.default)(t.ref,[0,0]),n=!0}catch(t){console.error("Undefined projection",t)}(e||n)&&this.projections.push(t)}}else this.projections=this.defaultProjections}mapXY(){const t=this.props.coords;return t[0].toFixed(1)+", "+t[1].toFixed(1)}usng(){const t=this.getLatLonCoords();try{const e=this.props.resolution,n=Math.max(Math.min(Math.ceil(Math.log10(1e5/e)),5),0);return this.u.fromLonLat({lon:t[0],lat:t[1]},n)}catch(t){return console.error("Bug with USNG coordinate",t),"--"}}getLatLonCoords(){const t=new tn("EPSG:3857"),e=new tn("EPSG:4326");return hn(this.props.coords,t,e)}latlon(t,e=!0){const n=this.getLatLonCoords(),r=e?(i=this.props.zoom)>18?6:i>9?4:2:4;var i;return IM(t,[n[1],n[0]],r)}getProjectionCoords(t){return IM(t,(0,Ey.default)("EPSG:3857",t.ref,this.props.coords))}getCoordinateDisplay(t){let e="";switch(t.ref){case"usng":e=Cn().createElement("span",{className:"coordinates map-usng",key:"usng"},Cn().createElement("label",null,t.label)," ",this.usng());break;case"latlon":e=Cn().createElement("span",{className:"coordinates map-latlon",key:"latlon"},Cn().createElement("label",null,t.label)," ",this.latlon(t));break;case"xy":e=Cn().createElement("span",{className:"coordinates map-xy",key:"xy"},Cn().createElement("label",null,t.label)," ",IM(t,this.props.coords,1));break;default:{const n="coordinates map-"+t.ref.replace(/:/g,"-");e=Cn().createElement("span",{className:n,key:t.ref},Cn().createElement("label",null,t.label),this.getProjectionCoords(t));break}}return e}render(){const t=this.projections.map(this.getCoordinateDisplay);return Cn().createElement("span",{className:"coordinate-display"},t)}}class kM extends En.Component{constructor(t){super(t),this.state={units:this.props.initialUnits?this.props.initialUnits:"ft"}}getBearing(t,e){let n="-";if(t&&e){n="N0-0-0E";let r=e[1]-t[1],i=e[0]-t[0];if(0===r)n=t[0]>e[0]?this.props.t("measure-due-west"):this.props.t("measure-due-east");else if(0===i)n=t[1]>e[1]?this.props.t("measure-due-south"):this.props.t("measure-due-north");else{let t=this.props.t("measure-north-abbr"),e=this.props.t("measure-east-abbr");r<0&&(t=this.props.t("measure-south-abbr")),i<0&&(e=this.props.t("measure-west-abbr")),r=Math.abs(r),i=Math.abs(i);const o=Math.atan(i/r)/(2*Math.PI)*360,s=parseInt(o,10),a=60*(o-s),l=parseInt(a,10);n=t+s+"-"+l+"-"+parseInt(60*(a-l),10)+e}}return n}calculateLength(t,e,n){let r=new Ro([t,e]);return r=r.transform(this.props.mapProjection,n),Vc(r.getLength(),this.state.units)}getSegmentInfo(t){let e=new Bo(t.coordinates[0]);e=e.transform(this.props.mapProjection,"EPSG:4326");const n=tn(Rc(e.getCoordinates())),r=[].concat(t.coordinates);null!==this.props.cursor.sketchGeometry&&(r[r.length-1]=this.props.cursor.coords);const i=[];for(let t=1,e=r.length;t<e;t++){const e=this.calculateLength(r[t-1],r[t],n),o=this.getBearing(r[t-1],r[t]);i.push({id:t,len:e,bearing:o})}return i.reverse()}renderSegments(t){const e=this.getSegmentInfo(t);let n=0;const r=[];for(let t=0,i=e.length;t<i;t++){const i=e[t];n+=i.len,r.push(Cn().createElement("tr",{key:"segment"+t},Cn().createElement("td",null,i.id),Cn().createElement("td",null,i.len.toFixed(2)),Cn().createElement("td",null,i.bearing)))}return r.unshift(Cn().createElement("tr",{key:"line_total"},Cn().createElement("td",null,""),Cn().createElement("td",null,n.toFixed(2)),Cn().createElement("td",null,""))),Cn().createElement("table",{className:"measured-segments"},Cn().createElement("tbody",null,Cn().createElement("tr",{key:"header"},Cn().createElement("th",null),Cn().createElement("th",null,this.props.t("measure-segment-length")," (",this.props.t(`units-${this.state.units}`),")"),Cn().createElement("th",null,"Bearing")),r))}renderArea(t){let e=new Bo(t.coordinates[0][0]);e=e.transform(this.props.mapProjection,"EPSG:4326");const n=tn(Rc(e.getCoordinates())),r=Wc(Dc(t).transform(this.props.mapProjection,n).getArea(),this.state.units);return Cn().createElement("table",{className:"measured-area"},Cn().createElement("tbody",null,Cn().createElement("tr",{key:"header"},Cn().createElement("th",null,this.props.t("measure-area")," (",this.props.t("measure-sq")," ",this.props.t(`units-${this.state.units}`),")")),Cn().createElement("tr",null,Cn().createElement("td",null,r.toFixed(2)))))}renderMeasureOutput(){let t=this.props.cursor.sketchGeometry;return null===t&&this.props.map.selectionFeatures.length>0&&(t=this.props.map.selectionFeatures[0].geometry),!(null===t||"LineString"===t.type&&t.coordinates.length<2||"Polygon"===t.type&&t.coordinates[0].length<3)&&("Point"===t.type?Cn().createElement(MM,{coords:t.coordinates,projections:this.props.pointProjections,resolution:this.props.map.resolution}):"LineString"===t.type?this.renderSegments(t):"Polygon"===t.type&&this.renderArea(t))}changeUnits(t){this.setState({units:t})}renderUnitOption(t,e){const n=this.state.units===t?"selected":"";return Cn().createElement("div",{key:"units-"+t,className:"radio-option "+n,onClick:()=>{this.changeUnits(t)}},Cn().createElement("i",{className:"radio-icon"})," ",e?`${this.props.t("measure-sq")} `:"",this.props.t(`units-${t}`))}renderUnitOptions(){const t=this.props.t("units");let e=this.props.map.interactionType;return"Select"===e&&this.props.map.selectionFeatures.length>0&&(e=this.props.map.selectionFeatures[0].geometry.type),"LineString"===e?Cn().createElement("div",{className:"measure-units"},Cn().createElement("b",null,t,":"),this.renderUnitOption("m"),this.renderUnitOption("km"),this.renderUnitOption("ft"),this.renderUnitOption("mi"),this.renderUnitOption("ch")):"Polygon"===e&&Cn().createElement("div",{className:"measure-units"},Cn().createElement("b",null,t,":"),this.renderUnitOption("m",!0),this.renderUnitOption("km",!0),this.renderUnitOption("ft",!0),this.renderUnitOption("mi",!0),this.renderUnitOption("a"),this.renderUnitOption("h"))}render(){return Cn().createElement("div",{className:"measure-tool"},Cn().createElement("div",{dangerouslySetInnerHTML:{__html:this.props.t("measure-help")}}),Cn().createElement("div",{className:"draw-tools"},Cn().createElement(PM,{key:"measure-point",geomType:"Point"}),Cn().createElement(PM,{key:"measure-line",geomType:"LineString"}),Cn().createElement(PM,{key:"measure-poly",geomType:"Polygon"}),Cn().createElement(PM,{key:"measure-select",geomType:"Select"})),this.renderUnitOptions(),Cn().createElement("br",null),this.renderMeasureOutput())}}const LM=ar((function(t){return{map:t.map,cursor:t.cursor,mapProjection:"EPSG:3857"}}))(qb()(kM)),AM=()=>Pg().v4();class RM extends En.Component{constructor(t){super(t),this.state={value:t.value?t.value:t.field.default?t.field.default:""},this.onChange=this.onChange.bind(this)}getId(){return AM()}getValue(){return this.state.value}getName(){return this.props.field.name}onChange(t){const e=t.target.value;this.setState({value:e}),this.setValue(this.getName(),e)}setValue(t,e){this.props.setValue(t,e)}render(){const t=this.getId();return Cn().createElement("div",{className:"service-input"},Cn().createElement("label",{htmlFor:"input-"+t},this.props.field.label),Cn().createElement("input",{onChange:this.onChange,value:this.state.value,type:"text",id:"input-"+t,placeholder:this.props.field.placeHolder,className:this.props.field.helpText?"has-help-text":""}),this.props.field.helpText&&Cn().createElement("div",{className:"helper-text",htmlFor:"input-"+t},this.props.field.helpText))}}class FM extends RM{renderOption(t){return Cn().createElement("option",{key:t.value,value:t.value},t.label)}getOptions(){return this.props.field.options}componentDidMount(){const t=this.getOptions();(void 0===this.props.field.default||t.filter((t=>t.value===this.props.field.default)).length<1)&&this.onChange({target:{value:t.length>0?t[0].value:""}})}render(){const t=this.getId(),e=this.getOptions();return Cn().createElement("div",{className:"service-input select"},Cn().createElement("label",{htmlFor:"input-"+t},this.props.field.label),Cn().createElement("select",{id:"input-"+t,value:this.state.value,onChange:this.onChange},e.map(this.renderOption)))}}const jM=["ft","yd","mi","in","m","km","ch"],DM=({label:t,value:e,units:n,onChange:r})=>{const i="input-"+AM(),[o,s]=(0,En.useState)(e),{t:a}=_y();return(0,En.useEffect)((()=>{s(e)}),[e]),Cn().createElement("div",{className:"service-input length"},Cn().createElement("label",{htmlFor:i},t),Cn().createElement("input",{className:"measure",onChange:t=>{s(t.target.value);const e=parseFloat(t.target.value);isNaN(e)||r(e,n)},id:i,value:o}),Cn().createElement("select",{className:"units",onChange:t=>{r(e,t.target.value)},value:n},jM.map((t=>Cn().createElement("option",{key:t,value:t},a(`units-${t}`))))))};class zM extends RM{constructor(t){super(t);const e=t.field.units?t.field.units:"ft",n=t.field.default?t.field.default:0;this.value=n,this.selected_units=e,this.onUnitsChanged=this.onUnitsChanged.bind(this),this.onValueChanged=this.onValueChanged.bind(this),this.state={value:n,units:e}}onChange(t,e){isNaN(this.state.value)||this.setValue(this.getName(),{distance:this.state.value,units:this.state.units})}onUnitsChanged(t){const e=t.target.value;this.onChange(this.state.value,e),this.setState({units:e})}onValueChanged(t){const e=parseFloat(t.target.value);this.onChange(e,this.state.units),this.setState({value:e})}componentDidUpdate(t){t.field!==this.props.field&&this.setState({value:this.props.field.default,units:this.props.field.units})}render(){return Cn().createElement(DM,{label:this.props.field.label,value:this.state.value,units:this.state.units,onChange:(t,e)=>{this.onChange(t,e),this.setState({value:t,units:e})}})}}const qM=["sketch/default"];class BM extends FM{getOptions(){const t=[];for(let e=0,n=this.props.layers.length;e<n;e++){const n=ng(this.props.mapSources,this.props.layers[e]);t.push({value:this.props.layers[e],label:n.label})}return t.sort(((t,e)=>qM.indexOf(t.value)>=0?1:qM.indexOf(e.value)>=0||t<e?-1:1))}}BM.propTypes={layers:In().array},BM.defaultProps={mapSources:{},layers:[]};const GM=ar((function(t,e){return{layers:(e.filter&&e.filter.layers?e.filter.layers:null)||cg(t.mapSources,e.field.filter),mapSources:t.mapSources}}))(BM),UM=({distance:t,units:e,setBuffer:n})=>{const{t:r}=_y();return Cn().createElement(DM,{label:r("with-buffer"),value:t,units:e,onChange:(t,e)=>{n(t,e)}})};UM.propTypes={distance:In().number,units:In().string,setBuffer:In().func},UM.defaultProps={distsance:0,setBuffer:(t,e)=>{}};const VM=ar((function(t){return{distance:t.map.selectionBuffer,units:t.map.selectionBufferUnits}}),(function(t){return{setBuffer:(e,n)=>{t(np(e,n))}}}))(UM);function WM(t){const e={};for(let n=0,r=t.fields.length;n<r;n++){const r=t.fields[n];e[r.name]=r.default}return e}class HM extends Cn().Component{constructor(t){super(t),this.state={values:WM(this.props.serviceDef),validateFieldValuesResultMessage:null},this.handleKeyboard=this.handleKeyboardShortcuts.bind(this)}submit(){const t=this.props.serviceDef;let e=!0,n=null;if(t.validateFieldValues){const r=t.validateFieldValues(this.state.values);e=r.valid,n=r.message}e?this.props.onSubmit(this.state.values):this.setState({validateFieldValuesResultMessage:n})}handleKeyboardShortcuts(t){const e=t.which;13===e?this.submit():27===e&&this.props.onCancel()}UNSAFE_componentWillUpdate(t,e){null!==t.serviceDef&&this.props.serviceName!==t.serviceName&&this.setState({values:WM(t.serviceDef),validateFieldValuesResultMessage:null})}componentDidMount(){document.addEventListener("keyup",this.handleKeyboard)}componentWillUnmount(){document.removeEventListener("keyup",this.handleKeyboard)}render(){const t=this.props.serviceDef,e=t.bufferAvailable,n=[];t.drawToolsLabel&&n.push(Cn().createElement("label",{key:"label"},t.drawToolsLabel));for(const e of["Box","Point","MultiPoint","LineString","Polygon","Select","Modify"]){const r="draw_tool_"+e;t.tools[e]&&n.push(Cn().createElement(PM,{key:r,geomType:e}))}const r=(t,e)=>{const n=Object.assign({},this.state.values);n[t]=e,this.setState({values:n})},i=!!e&&Cn().createElement(VM,{key:"buffer-input"}),o=this.props.serviceDef.fields.map((t=>function(t,e,n){let r=RM;if("select"===t.type)r=FM;else if("length"===t.type)r=zM;else if("layers-list"===t.type)r=GM;else if("hidden"===t.type)return!1;return Cn().createElement(r,{key:t.name,field:t,value:e,setValue:n})}(t,this.state.values[t.name],r)));let s=[];return s=!0===t.fieldsFirst?[o,n,i]:[n,i,o],Cn().createElement("div",{className:"service-form"},Cn().createElement("h3",null,this.props.t(t.title)),s,!!this.state.validateFieldValuesResultMessage&&Cn().createElement("div",{className:"query-error"},Cn().createElement("div",{className:"error-header"},"Error"),Cn().createElement("div",{className:"error-contents"},this.state.validateFieldValuesResultMessage)),Cn().createElement("div",{className:"tab-controls"},Cn().createElement("button",{className:"close-button",onClick:()=>{this.props.onCancel()}},Cn().createElement("i",{className:"close-icon"})," ",this.props.t("Close")),Cn().createElement("button",{className:"go-button",onClick:()=>{this.submit()}},Cn().createElement("i",{className:"go-icon"})," ",this.props.t("go"))))}}const YM=qb()(HM);class XM extends Cn().Component{constructor(){super(),this.finishedQueries={},this.renderQuery=this.renderQuery.bind(this),this.renderQueryResults=this.renderQueryResults.bind(this),this.state={lastService:null,lastFeature:"",values:{},showTooManyFeatures:!1},this.fieldValues={}}renderQueryResults(t,e){let n="";if("finished"===e.progress&&this.props.services[e.service]){const r=this.props.services[e.service];r.renderQueryResults&&r.renderQueryResults(t,e),r.resultsAsHtml&&(n=r.resultsAsHtml(t,e))}else n="failed"===e.progress?"There was an error with your query please try again.":'<i class="service spinner"></i>';return{__html:n}}renderQuery(t){const e=this.props.queries[t],n=this.props.services[e.service],r={...this.props.resultsConfig,...n.resultsConfig};let i=n.resultsTitle;const o=!1!==n.showHeader;i||(i=n.title+" Results");let s=0,a=0;for(const t in e.results)!0!==e.results[t].failed&&(s+=1,a+=e.results[t].length);const l=a<=this.props.config.bufferMaxFeatures,u=Cn().createElement("div",{className:"results-info"},r.showFeatureCount&&Cn().createElement("div",{className:"results-info-item features-count"},Cn().createElement("div",{className:"label"},this.props.t("features")),Cn().createElement("div",{className:"value"},a)),r.showLayerCount&&Cn().createElement("div",{className:"results-info-item layers-count"},Cn().createElement("div",{className:"label"},this.props.t("layers")),Cn().createElement("div",{className:"value"},s)),r.showBufferAll&&Cn().createElement("div",{className:"results-info-item buffer-all"},Cn().createElement("div",{className:"label"},this.props.t("buffer-all")),Cn().createElement("div",{className:"value",onClick:()=>{l?this.props.bufferAll(e):this.setState({showTooManyFeatures:!0})}},Cn().createElement("span",{className:"icon buffer"}))),r.showZoomToAll&&Cn().createElement("div",{className:"results-info-item zoomto"},Cn().createElement("div",{className:"label"},this.props.t("zoomto-results")),Cn().createElement("div",{className:"value",onClick:()=>{this.props.zoomToResults(e)}},Cn().createElement("span",{className:"icon zoomto"}))));return Cn().createElement("div",{key:t},Cn().createElement("div",{className:"results-header"},this.props.t(i),Cn().createElement("div",{className:"results-tools"},Cn().createElement("i",{title:this.props.t("results-clear"),className:"icon clear",onClick:()=>{this.props.removeQuery(t)}}))),Cn().createElement("div",{className:"results-query-id"},t),!!o&&u,Cn().createElement("div",{dangerouslySetInnerHTML:this.renderQueryResults(t,e)}))}checkQueries(t){for(const e of t.order){const n=t[e],r=this.props.services[n.service];n&&"new"===n.progress&&"function"==typeof r.runQuery&&(this.props.store.dispatch(Yh(e)),r.runQuery(e,n))}}UNSAFE_componentWillUpdate(t,e){if(this.state.lastService!==t.queries.service&&null!==t.queries.service)"measure"===t.queries.service&&this.props.changeDrawTool("LineString"),this.setState({lastService:t.queries.service,lastFeature:""}),this.fieldValues[t.queries.service]||(this.fieldValues[t.queries.service]={});else{const e=this.state.lastService,n=t.services[e];if(n&&n.autoGo){const t=n.fields?n.fields.filter((t=>!0!==t.optional)).length:0;(n.bufferAvailable||t.length>0)&&console.error("Misconfigured service. This service has been configured with autoGo but has required fields")}}this.checkQueries(t.queries)}componentDidUpdate(t){if(this.props.queries.service!==t.service&&(void 0!==t.service&&this.props.setUiHint("service-manager"),this.refs.serviceForm)){const t=this.refs.serviceForm.getElementsByTagName("input");t.length>0&&t[0].focus()}const e=this.props.queries.service||this.state.lastService;if(e){const n=this.props.services[e];n&&this.props.selectionFeatures!==t.selectionFeatures&&this.props.selectionFeatures.length>0&&(!0===n.autoGo?this.props.startQuery(this.props.selectionFeatures,this.props.services[e],this.state.values):this.props.startService(e))}!this.props.queries.showServiceForm&&this.props.queries.order.length>0&&t.queries.order[0]!==this.props.queries.order[0]&&this.props.setUiHint("new-results")}render(){let t;if("measure"===this.props.queries.service){const e=Object.assign({},{store:this.props.store},this.props.measureToolOptions);t=Cn().createElement(LM,e)}else if(null!==this.props.queries.service&&this.props.queries.showServiceForm){const e=this.props.queries.service,n=this.props.services[e];t=Cn().createElement(YM,{serviceName:e,serviceDef:n,onSubmit:t=>{!0!==n.autoGo&&(!0!==n.keepAlive&&this.props.changeDrawTool(null),this.props.startQuery(this.props.selectionFeatures,n,t)),this.setState({values:t})},onCancel:()=>{this.props.changeDrawTool(null),this.props.onServiceFinished()}})}else if(this.props.queries.order.length>0)t=Cn().createElement(Cn().Fragment,null,Cn().createElement(Sy,{open:this.state.showTooManyFeatures,options:[{value:"okay",label:this.props.t("Close")}],onClose:()=>{this.setState({showTooManyFeatures:!1})},title:this.props.t("too-many-features-title")},this.props.t("too-many-features-description",{max:this.props.config.bufferMaxFeatures})),this.props.queries.order.map(this.renderQuery));else{let e=!1;this.props.selectionFeatures&&this.props.selectionFeatures.length>0&&(e=!0),t=Cn().createElement(Cn().Fragment,null,Cn().createElement("div",{className:"info-box"},this.props.t("start-service-help")),Cn().createElement("div",{className:"clear-controls"},Cn().createElement("button",{disabled:!e,className:"clear-button",onClick:()=>{this.props.clearSelectionFeatures()}},Cn().createElement("i",{className:"clear icon"})," ",this.props.t("clear-previous-selection"))))}return Cn().createElement(Ln,{store:this.props.store},Cn().createElement("div",{className:"service-manager"},t))}}const KM=ar((t=>({queries:t.query,map:t.map,selectionFeatures:t.mapSources.selection?t.mapSources.selection.features:[],resultsConfig:{...Wd,...t.config.results},config:{bufferMaxFeatures:100,...t.config.query}})),(function(t,e){return{onServiceFinsihed:()=>{t(Sg())},startQuery:(n,r,i)=>{const o=function(t){if(t&&t.length>0&&"MultiPoint"===t[0].geometry.type){const e=[];for(const n of t)"MultiPoint"===n.geometry.type&&e.push(n.geometry.coordinates[0]);return[{type:"Feature",properties:{},geometry:{type:"MultiPoint",coordinates:e}}]}return t}(n),s=r.fields.map((t=>({name:t.name,value:i[t.name]||t.default})));!0!==r.keepAlive?(t(Hh(null)),t(Sg())):t(Cg(!1)),e.services[r.name].query(o,s)},changeDrawTool:e=>{t(Hh(e))},removeQuery:e=>{t(function(t){return{type:xh,id:t}}(e))},zoomToResults:e=>{const n=eh(e.results);n&&t($h(n))},clearSelectionFeatures:()=>{t(Jh()),t(pg("selection"))},onServiceFinished:()=>{t(Hh(null)),t(Sg())},setUiHint:e=>{t(bg(e))},startService:e=>{t(Eg(e))},showServiceForm:e=>{t(Cg(e))},bufferAll:e=>{let n=[];for(const t in e.results)n=n.concat(e.results[t]);n.length>0&&(t(Eg("buffer-select")),t(Hh("")),t(np(0)),t(Jh()),n.forEach((e=>{t(Zh(e))})),t(pg("selection")),t(hg("selection",n)))}}}))(qb()(XM));class ZM extends Cn().Component{render(){const t=mM(this.props.dispatch,this.props.catalog,"root",this.props.resolution,(t=>cM(this.props.mapSources,t)));return Cn().createElement(Ln,{store:this.props.store},Cn().createElement(Yy,null,(e=>Cn().createElement("div",{className:"catalog favorites flat"},Cn().createElement("div",{className:"info-box",dangerouslySetInnerHTML:{__html:e("favorites-help")}}),t.length>0?"":Cn().createElement("i",null,e("no-favorites")),t))))}}const $M=ar((t=>({mapSources:t.mapSources,catalog:t.catalog,resolution:t.map?t.map.resolution:-1})))(ZM),JM=ar((function(t){return{mapSources:t.mapSources,catalog:t.catalog}}))((({store:t,catalog:e,mapSources:n})=>{const{t:r}=_y(),i=Xc(e,n);let o;if(i.length>0){const t=[];for(let e=0,n=i.length;e<n;e++){const n=i[e];t.push(Cn().createElement(dM,{key:"layer-"+e,layer:n.layer,forceTools:["up","down"]}))}o=t}else o=Cn().createElement("i",null,"No layers are visible");return Cn().createElement(Ln,{store:t},Cn().createElement("div",{className:"catalog visble-layers visible-layers flat"},Cn().createElement("div",{className:"info-box"},r("visible-layers-help")),o))}));var QM=__webpack_require__(7460);const tk=({l:t})=>{const{t:e}=_y();return Cn().createElement("label",null,e(t))};class ek extends Sy{constructor(t){super(t),this.onChange=this.onChange.bind(this),this.state={value:""}}onChange(t){this.setState({value:t.target.value})}setFilter(){const t=this.state.value,e=this.props.column.property,n=[];if("list"===this.props.column.filter.type)if(t.indexOf(void 0)>=0){let r=["==",["coalesce",["get",e],""],""];t.length>1&&(r=["any",r,["in",["get",e]].concat(t.filter((t=>void 0!==t)))]),n.push(r)}else n.push(["in",e].concat(t));else"range"===this.props.column.filter.type?(""!==this.state.min&&n.push([">=",e,this.state.min]),""!==this.state.max&&n.push(["<=",e,this.state.max])):n.push(["==",e,t]);this.props.store.dispatch(tp(this.props.queryId,e));for(const t of n)this.props.store.dispatch((r=this.props.queryId,{type:Nh,id:r,filter:t}));var r}close(t){if("set"===t)this.setFilter();else if("clear"===t)if(this.props.store.dispatch(tp(this.props.queryId,this.props.column.property)),"list"===this.props.column.filter.type){const t=[];for(const e of this.filter_values)t.push(e.value);this.setState({value:t})}else"range"===this.props.column.filter.type?this.setState({min:"",max:""}):this.setState({value:""});this.props.onClose()}getTitle(){return"Set filter for "+this.props.column.title}getOptions(){return[{label:"Cancel",value:"dismiss"},{label:"Clear",value:"clear"},{label:"Set",value:"set"}]}renderBody(){return Cn().createElement("div",null,Cn().createElement(tk,{l:"label-value"})," ",Cn().createElement("input",{onChange:this.onChange,value:this.state.value,ref:"input"}))}}class nk extends ek{constructor(t){super(t);const e=this.props.column.property,n=[];let r=[];if(t.column.filter.values)r=t.column.filter.values;else for(let t=0,i=this.props.results.length;t<i;t++){const i=this.props.results[t].properties[e];r.indexOf(i)<0&&(r.push(i),n[r.length-1]=!0)}this.state={value:[...r],orderedValues:r,selectedValues:n}}renderBody(){const t=t=>!0===this.state.selectedValues[t],e=t=>{const e={...this.state.selectedValues,[t]:!this.state.selectedValues[t]},n=[];for(const t in e)!0===e[t]&&n.push(this.state.orderedValues[parseInt(t,10)]);this.setState({...this.state,selectedValues:e,value:n})};return Cn().createElement("div",null,this.state.orderedValues.map(((n,r)=>Cn().createElement("div",{key:n||"empty",className:"checkbox",onClick:()=>{e(r)}},Cn().createElement("i",{className:"icon checkbox "+(t(r)?"on":"")}),n||"(empty)"))))}}class rk extends ek{constructor(t){super(t),this.setMax=this.setMax.bind(this),this.setMin=this.setMin.bind(this),this.state={min:"",max:""}}setBound(t,e){const n={};n[t]=""!==e?parseFloat(e):"",this.setState(n)}setMin(t){this.setBound("min",t.target.value)}setMax(t){this.setBound("max",t.target.value)}renderBody(){return Cn().createElement("div",null,Cn().createElement("div",null,Cn().createElement(tk,{l:"label-min"}),Cn().createElement("input",{value:this.state.min,onChange:this.setMin})),Cn().createElement("div",null,Cn().createElement(tk,{l:"label-max"}),Cn().createElement("input",{value:this.state.max,onChange:this.setMax})))}}class ik extends Cn().Component{constructor(t){super(t),this.state={open:!1}}render(){if(!this.props.column.filter)return!1;const t=()=>{this.setState({open:!1})};let e=!1;switch(this.props.column.filter.type){case"list":e=Cn().createElement(nk,{open:this.state.open,onClose:t,ref:"modal",column:this.props.column,results:this.props.results,store:this.props.store,queryId:this.props.queryId});break;case"range":e=Cn().createElement(rk,{open:this.state.open,onClose:t,ref:"modal",column:this.props.column,results:this.props.results,store:this.props.store,queryId:this.props.queryId});break;default:e=Cn().createElement(ek,{open:this.state.open,onClose:t,ref:"modal",column:this.props.column,results:this.props.results,store:this.props.store,queryId:this.props.queryId})}return Cn().createElement("span",null,Cn().createElement("i",{title:"filter",onClick:()=>{this.setState({open:!0})},className:"filter icon"}),e)}}class ok extends Cn().Component{constructor(){super(),this.state={sortBy:null,sortAs:"string",sortAsc:!0,minimized:!1},this.nextSort=this.nextSort.bind(this)}nextSort(t){if(this.state.sortBy===t.property)this.state.sortAsc?this.setState({sortAsc:!1}):this.setState({sortBy:null,sortAsc:!0});else{const e=t.sortAs?t.sortAs:"string";this.setState({sortBy:t.property,sortAsc:!0,sortAs:e})}}getHeaderRow(t,e){const n=[];let r=0;const i=this.props.queries.order[0];for(const o of e){let e=null,s="icon sort";const a=this.props.t("filter-sort");o.sortAs&&(this.state.sortBy===o.property&&(this.state.sortAsc?s+=" asc":s+=" desc"),e=Cn().createElement("i",{title:a,onClick:()=>{this.nextSort(o)},className:s}));const l=Cn().createElement(ik,{store:this.props.store,column:o,results:t,queryId:i});n.push(Cn().createElement("th",{key:"col"+r},o.title," ",e," ",l," ")),r++}return n}sortResults(t){const e=Intl.Collator(),n=[].concat(t),r=this.state.sortBy,i=this.state.sortAsc,o=this.state.sortAs;return n.sort(((t,n)=>{let s=t.properties[r],a=n.properties[r];return"number"===o?(s=parseFloat(s),a=parseFloat(a),i?s<a?-1:1:a<s?-1:1):i?e.compare(s,a):e.compare(a,s)})),n}getRows(t,e){let n=t;null!==this.state.sortBy&&(n=this.sortResults(t));let r="";for(const t of n)r+=Ny().up(e,t,Ec);return{__html:r}}resultsAsCSV(t,e){const n=[],r=[];for(const e of t)e.property&&n.push(e.property);r.push(n);for(const t of e){const e=[];for(const r of n)e.push(t.properties[r]);r.push(e)}const i=new Blob([(0,QM.unparse)(r)],{type:"text/csv;charset=utf-8"}),o="download_"+(new Date).getTime()+".csv";nm().saveAs(i,o)}componentDidUpdate(t){if(t.queries.order[0]!==this.props.queries.order[0]&&this.props.queries.order[0]){const t=this.props.queries.order[0],e=this.props.queries[t];e&&e.runOptions&&!0===e.runOptions.gridMinimized&&this.setState({minimized:!0})}}render(){let t,e,n=[],r=!1;const i=this.props.queries.order[0];if(i){const o=this.props.queries[i];if("finished"===o.progress){const i=this.props.services[o.service],s=i.alias||i.name;Object.keys(o.results).forEach((i=>{let a=null;try{a=og(this.props.mapSources,i)}catch(t){}if(null!==a){const l=a.templates[s+"-grid-columns"]||a.templates.gridColumns;if(l&&"object"==typeof l.contents)t=l.contents;else try{t=JSON.parse(l.contents)}catch(t){}const u=a.templates[s+"-grid-row"]||a.templates.gridRow;u&&(e=u.contents),t&&e&&(n=Tc(o.results[i],o.filter),o.results[i].length>0&&(r=!0))}}))}}if(!r)return!1;const o=this.state.minimized?"maximize":"minimize",s=this.state.minimized?"hide":"";return Cn().createElement("div",{className:"gm-grid"},Cn().createElement("div",{className:"toolbar"},Cn().createElement("span",{onClick:()=>{this.resultsAsCSV(t,n)},className:"tool download",title:this.props.t("grid-download-csv")},Cn().createElement("i",{className:"icon download"})),Cn().createElement("span",{onClick:()=>{this.setState({minimized:!this.state.minimized})},className:"tool "+o,title:this.props.t("grid-min-max")},Cn().createElement("i",{className:"icon "+o}))),Cn().createElement("div",{className:"grid-display "+s},Cn().createElement("table",null,Cn().createElement("thead",null,Cn().createElement("tr",null,this.getHeaderRow(n,t))),Cn().createElement("tbody",{dangerouslySetInnerHTML:this.getRows(n,e)}))))}}const sk=ar((function(t){return{queries:t.query,mapSources:t.mapSources}}))(qb()(ok));class ak extends Cn().Component{render(){return Cn().createElement("span",{className:"version"},"3.9.0")}}const lk=ar((function(t){return{coords:t.cursor.coords,resolution:t.map.resolution,zoom:t.map.zoom}}))(MM);var uk=Uint8Array,ck=Uint16Array,hk=Uint32Array,pk=new uk([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fk=new uk([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dk=new uk([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gk=function(t,e){for(var n=new ck(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new hk(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},yk=gk(pk,2),mk=yk[0],vk=yk[1];mk[28]=258,vk[258]=28;for(var _k=gk(fk,0),bk=_k[0],wk=_k[1],xk=new ck(32768),Sk=0;Sk<32768;++Sk){var Ek=(43690&Sk)>>>1|(21845&Sk)<<1;Ek=(61680&(Ek=(52428&Ek)>>>2|(13107&Ek)<<2))>>>4|(3855&Ek)<<4,xk[Sk]=((65280&Ek)>>>8|(255&Ek)<<8)>>>1}var Ck=function(t,e,n){for(var r=t.length,i=0,o=new ck(e);i<r;++i)++o[t[i]-1];var s,a=new ck(e);for(i=0;i<e;++i)a[i]=a[i-1]+o[i-1]<<1;if(n){s=new ck(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],h=a[t[i]-1]++<<c,p=h|(1<<c)-1;h<=p;++h)s[xk[h]>>>l]=u}else for(s=new ck(r),i=0;i<r;++i)s[i]=xk[a[t[i]-1]++]>>>15-t[i];return s},Nk=new uk(288);for(Sk=0;Sk<144;++Sk)Nk[Sk]=8;for(Sk=144;Sk<256;++Sk)Nk[Sk]=9;for(Sk=256;Sk<280;++Sk)Nk[Sk]=7;for(Sk=280;Sk<288;++Sk)Nk[Sk]=8;var Pk=new uk(32);for(Sk=0;Sk<32;++Sk)Pk[Sk]=5;var Ok=Ck(Nk,9,0),Tk=Ck(Nk,9,1),Ik=Ck(Pk,5,0),Mk=Ck(Pk,5,1),kk=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Lk=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(7&e)&n},Ak=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(7&e)},Rk=function(t){return(t/8>>0)+(7&t&&1)},Fk=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof ck?ck:t instanceof hk?hk:uk)(n-e);return r.set(t.subarray(e,n)),r},jk=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Dk=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},zk=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return[new uk(0),0];if(1==i){var s=new uk(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var p=o[0].s;for(r=1;r<i;++r)o[r].s>p&&(p=o[r].s);var f=new ck(p+1),d=qk(n[c-1],f,0);if(d>e){r=0;var g=0,y=d-e,m=1<<y;for(o.sort((function(t,e){return f[e.s]-f[t.s]||t.f-e.f}));r<i;++r){var v=o[r].s;if(!(f[v]>e))break;g+=m-(1<<d-f[v]),f[v]=e}for(g>>>=y;g>0;){var _=o[r].s;f[_]<e?g-=1<<e-f[_]++-1:++r}for(;r>=0&&g;--r){var b=o[r].s;f[b]==e&&(--f[b],++g)}d=e}return[new uk(f),d]},qk=function(t,e,n){return-1==t.s?Math.max(qk(t.l,e,n+1),qk(t.r,e,n+1)):e[t.s]=n},Bk=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ck(++e),r=0,i=t[0],o=1,s=function(t){n[r++]=t},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return[n.subarray(0,r),e]},Gk=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Uk=function(t,e,n){var r=n.length,i=Rk(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},Vk=function(t,e,n,r,i,o,s,a,l,u,c){jk(e,c++,n),++i[256];for(var h=zk(i,15),p=h[0],f=h[1],d=zk(o,15),g=d[0],y=d[1],m=Bk(p),v=m[0],_=m[1],b=Bk(g),w=b[0],x=b[1],S=new ck(19),E=0;E<v.length;++E)S[31&v[E]]++;for(E=0;E<w.length;++E)S[31&w[E]]++;for(var C=zk(S,7),N=C[0],P=C[1],O=19;O>4&&!N[dk[O-1]];--O);var T,I,M,k,L=u+5<<3,A=Gk(i,Nk)+Gk(o,Pk)+s,R=Gk(i,p)+Gk(o,g)+s+14+3*O+Gk(S,N)+(2*S[16]+3*S[17]+7*S[18]);if(L<=A&&L<=R)return Uk(e,c,t.subarray(l,l+u));if(jk(e,c,1+(R<A)),c+=2,R<A){T=Ck(p,f,0),I=p,M=Ck(g,y,0),k=g;var F=Ck(N,P,0);for(jk(e,c,_-257),jk(e,c+5,x-1),jk(e,c+10,O-4),c+=14,E=0;E<O;++E)jk(e,c+3*E,N[dk[E]]);c+=3*O;for(var j=[v,w],D=0;D<2;++D){var z=j[D];for(E=0;E<z.length;++E){var q=31&z[E];jk(e,c,F[q]),c+=N[q],q>15&&(jk(e,c,z[E]>>>5&127),c+=z[E]>>>12)}}}else T=Ok,I=Nk,M=Ik,k=Pk;for(E=0;E<a;++E)if(r[E]>255){q=r[E]>>>18&31,Dk(e,c,T[q+257]),c+=I[q+257],q>7&&(jk(e,c,r[E]>>>23&31),c+=pk[q]);var B=31&r[E];Dk(e,c,M[B]),c+=k[B],B>3&&(Dk(e,c,r[E]>>>5&8191),c+=fk[B])}else Dk(e,c,T[r[E]]),c+=I[r[E]];return Dk(e,c,T[256]),c+I[256]},Wk=new hk([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Hk=new uk(0),Yk=function(t,e,n,r,i){return function(t,e,n,r,i,o){var s=t.length,a=new uk(r+s+5*(1+Math.floor(s/7e3))+i),l=a.subarray(r,a.length-i),u=0;if(!e||s<8)for(var c=0;c<=s;c+=65535){var h=c+65535;h<s?u=Uk(l,u,t.subarray(c,h)):(l[c]=o,u=Uk(l,u,t.subarray(c,s)))}else{for(var p=Wk[e-1],f=p>>>13,d=8191&p,g=(1<<n)-1,y=new ck(32768),m=new ck(g+1),v=Math.ceil(n/3),_=2*v,b=function(e){return(t[e]^t[e+1]<<v^t[e+2]<<_)&g},w=new hk(25e3),x=new ck(288),S=new ck(32),E=0,C=0,N=(c=0,0),P=0,O=0;c<s;++c){var T=b(c),I=32767&c,M=m[T];if(y[I]=M,m[T]=I,P<=c){var k=s-c;if((E>7e3||N>24576)&&k>423){u=Vk(t,l,0,w,x,S,C,N,O,c-O,u),N=E=C=0,O=c;for(var L=0;L<286;++L)x[L]=0;for(L=0;L<30;++L)S[L]=0}var A=2,R=0,F=d,j=I-M&32767;if(k>2&&T==b(c-j))for(var D=Math.min(f,k)-1,z=Math.min(32767,c),q=Math.min(258,k);j<=z&&--F&&I!=M;){if(t[c+A]==t[c+A-j]){for(var B=0;B<q&&t[c+B]==t[c+B-j];++B);if(B>A){if(A=B,R=j,B>D)break;var G=Math.min(j,B-2),U=0;for(L=0;L<G;++L){var V=c-j+L+32768&32767,W=V-y[V]+32768&32767;W>U&&(U=W,M=V)}}}j+=(I=M)-(M=y[I])+32768&32767}if(R){w[N++]=268435456|vk[A]<<18|wk[R];var H=31&vk[A],Y=31&wk[R];C+=pk[H]+fk[Y],++x[257+H],++S[Y],P=c+A,++E}else w[N++]=t[c],++x[t[c]]}}u=Vk(t,l,o,w,x,S,C,N,O,c-O,u),o||(u=Uk(l,u,Hk))}return Fk(a,0,r+Rk(u)+i)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)};function Xk(t,e){void 0===e&&(e={});var n=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length,s=0;s!=o;){for(var a=Math.min(s+5552,o);s<a;++s)i+=r+=n[s];r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}}();n.p(t);var r=Yk(t,e,2,4);return function(t,e){var n=e.level,r=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)}(r,e),function(t,e,n){for(;n;++e)t[e]=n,n>>>=8}(r,r.length-4,n.d()),r}function Kk(t,e){return function(t,e,n){var r=t.length,i=!e||n,o=!n||n.i;n||(n={}),e||(e=new uk(3*r));var s=function(t){var n=e.length;if(t>n){var r=new uk(Math.max(2*n,t));r.set(e),e=r}},a=n.f||0,l=n.p||0,u=n.b||0,c=n.l,h=n.d,p=n.m,f=n.n,d=8*r;do{if(!c){n.f=a=Lk(t,l,1);var g=Lk(t,l+1,3);if(l+=3,!g){var y=t[(P=Rk(l)+4)-4]|t[P-3]<<8,m=P+y;if(m>r){if(o)throw"unexpected EOF";break}i&&s(u+y),e.set(t.subarray(P,m),u),n.b=u+=y,n.p=l=8*m;continue}if(1==g)c=Tk,h=Mk,p=9,f=5;else{if(2!=g)throw"invalid block type";var v=Lk(t,l,31)+257,_=Lk(t,l+10,15)+4,b=v+Lk(t,l+5,31)+1;l+=14;for(var w=new uk(b),x=new uk(19),S=0;S<_;++S)x[dk[S]]=Lk(t,l+3*S,7);l+=3*_;var E=kk(x),C=(1<<E)-1;if(!o&&l+b*(E+7)>d)break;var N=Ck(x,E,1);for(S=0;S<b;){var P,O=N[Lk(t,l,C)];if(l+=15&O,(P=O>>>4)<16)w[S++]=P;else{var T=0,I=0;for(16==P?(I=3+Lk(t,l,3),l+=2,T=w[S-1]):17==P?(I=3+Lk(t,l,7),l+=3):18==P&&(I=11+Lk(t,l,127),l+=7);I--;)w[S++]=T}}var M=w.subarray(0,v),k=w.subarray(v);p=kk(M),f=kk(k),c=Ck(M,p,1),h=Ck(k,f,1)}if(l>d)throw"unexpected EOF"}i&&s(u+131072);for(var L=(1<<p)-1,A=(1<<f)-1,R=p+f+18;o||l+R<d;){var F=(T=c[Ak(t,l)&L])>>>4;if((l+=15&T)>d)throw"unexpected EOF";if(!T)throw"invalid length/literal";if(F<256)e[u++]=F;else{if(256==F){c=null;break}var j=F-254;if(F>264){var D=pk[S=F-257];j=Lk(t,l,(1<<D)-1)+mk[S],l+=D}var z=h[Ak(t,l)&A],q=z>>>4;if(!z)throw"invalid distance";if(l+=15&z,k=bk[q],q>3&&(D=fk[q],k+=Ak(t,l)&(1<<D)-1,l+=D),l>d)throw"unexpected EOF";i&&s(u+131072);for(var B=u+j;u<B;u+=4)e[u]=e[u-k],e[u+1]=e[u+1-k],e[u+2]=e[u+2-k],e[u+3]=e[u+3-k];u=B}}n.l=c,n.p=l,n.b=u,c&&(a=1,n.m=p,n.d=h,n.n=f)}while(!a);return u==e.length?e:Fk(e,0,u)}((function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"}(t),t.subarray(2,-4)),e)}var Zk=function(){return"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:this}();function $k(){Zk.console&&"function"==typeof Zk.console.log&&Zk.console.log.apply(Zk.console,arguments)}var Jk={log:$k,warn:function(t){Zk.console&&("function"==typeof Zk.console.warn?Zk.console.warn.apply(Zk.console,arguments):$k.call(null,arguments))},error:function(t){Zk.console&&("function"==typeof Zk.console.error?Zk.console.error.apply(Zk.console,arguments):$k(t))}};function Qk(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){iL(r.response,e,n)},r.onerror=function(){Jk.error("could not download file")},r.send()}function tL(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function eL(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var nL,rL,iL=Zk.saveAs||("object"!==("undefined"==typeof window?"undefined":M(window))||window!==Zk?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Zk.URL||Zk.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?tL(i.href)?Qk(t,e,n):eL(i,i.target="_blank"):eL(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){eL(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(tL(t))Qk(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){eL(r)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==M(e)&&(Jk.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return Qk(t,e,n);var i="application/octet-stream"===t.type,o=/constructor/i.test(Zk.HTMLElement)||Zk.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&"object"===("undefined"==typeof FileReader?"undefined":M(FileReader))){var a=new FileReader;a.onloadend=function(){var t=a.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},a.readAsDataURL(t)}else{var l=Zk.URL||Zk.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout((function(){l.revokeObjectURL(u)}),4e4)}});function oL(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}function sL(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=lL(n,r,i,o,e[0],7,-680876936),o=lL(o,n,r,i,e[1],12,-389564586),i=lL(i,o,n,r,e[2],17,606105819),r=lL(r,i,o,n,e[3],22,-1044525330),n=lL(n,r,i,o,e[4],7,-176418897),o=lL(o,n,r,i,e[5],12,1200080426),i=lL(i,o,n,r,e[6],17,-1473231341),r=lL(r,i,o,n,e[7],22,-45705983),n=lL(n,r,i,o,e[8],7,1770035416),o=lL(o,n,r,i,e[9],12,-1958414417),i=lL(i,o,n,r,e[10],17,-42063),r=lL(r,i,o,n,e[11],22,-1990404162),n=lL(n,r,i,o,e[12],7,1804603682),o=lL(o,n,r,i,e[13],12,-40341101),i=lL(i,o,n,r,e[14],17,-1502002290),n=uL(n,r=lL(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=uL(o,n,r,i,e[6],9,-1069501632),i=uL(i,o,n,r,e[11],14,643717713),r=uL(r,i,o,n,e[0],20,-373897302),n=uL(n,r,i,o,e[5],5,-701558691),o=uL(o,n,r,i,e[10],9,38016083),i=uL(i,o,n,r,e[15],14,-660478335),r=uL(r,i,o,n,e[4],20,-405537848),n=uL(n,r,i,o,e[9],5,568446438),o=uL(o,n,r,i,e[14],9,-1019803690),i=uL(i,o,n,r,e[3],14,-187363961),r=uL(r,i,o,n,e[8],20,1163531501),n=uL(n,r,i,o,e[13],5,-1444681467),o=uL(o,n,r,i,e[2],9,-51403784),i=uL(i,o,n,r,e[7],14,1735328473),n=cL(n,r=uL(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=cL(o,n,r,i,e[8],11,-2022574463),i=cL(i,o,n,r,e[11],16,1839030562),r=cL(r,i,o,n,e[14],23,-35309556),n=cL(n,r,i,o,e[1],4,-1530992060),o=cL(o,n,r,i,e[4],11,1272893353),i=cL(i,o,n,r,e[7],16,-155497632),r=cL(r,i,o,n,e[10],23,-1094730640),n=cL(n,r,i,o,e[13],4,681279174),o=cL(o,n,r,i,e[0],11,-358537222),i=cL(i,o,n,r,e[3],16,-722521979),r=cL(r,i,o,n,e[6],23,76029189),n=cL(n,r,i,o,e[9],4,-640364487),o=cL(o,n,r,i,e[12],11,-421815835),i=cL(i,o,n,r,e[15],16,530742520),n=hL(n,r=cL(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=hL(o,n,r,i,e[7],10,1126891415),i=hL(i,o,n,r,e[14],15,-1416354905),r=hL(r,i,o,n,e[5],21,-57434055),n=hL(n,r,i,o,e[12],6,1700485571),o=hL(o,n,r,i,e[3],10,-1894986606),i=hL(i,o,n,r,e[10],15,-1051523),r=hL(r,i,o,n,e[1],21,-2054922799),n=hL(n,r,i,o,e[8],6,1873313359),o=hL(o,n,r,i,e[15],10,-30611744),i=hL(i,o,n,r,e[6],15,-1560198380),r=hL(r,i,o,n,e[13],21,1309151649),n=hL(n,r,i,o,e[4],6,-145523070),o=hL(o,n,r,i,e[11],10,-1120210379),i=hL(i,o,n,r,e[2],15,718787259),r=hL(r,i,o,n,e[9],21,-343485551),t[0]=_L(n,t[0]),t[1]=_L(r,t[1]),t[2]=_L(i,t[2]),t[3]=_L(o,t[3])}function aL(t,e,n,r,i,o){return e=_L(_L(e,t),_L(r,o)),_L(e<<i|e>>>32-i,n)}function lL(t,e,n,r,i,o,s){return aL(e&n|~e&r,t,e,i,o,s)}function uL(t,e,n,r,i,o,s){return aL(e&r|n&~r,t,e,i,o,s)}function cL(t,e,n,r,i,o,s){return aL(e^n^r,t,e,i,o,s)}function hL(t,e,n,r,i,o,s){return aL(n^(e|~r),t,e,i,o,s)}function pL(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)sL(r,fL(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(sL(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,sL(r,i),r}function fL(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}nL=Zk.atob.bind(Zk),rL=Zk.btoa.bind(Zk);var dL="0123456789abcdef".split("");function gL(t){for(var e="",n=0;n<4;n++)e+=dL[t>>8*n+4&15]+dL[t>>8*n&15];return e}function yL(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function mL(t){return pL(t).map(yL).join("")}var vL="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=gL(t[e]);return t.join("")}(pL("hello"));function _L(t,e){if(vL){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function bL(t,e){var n,r,i,o;if(t!==n){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+s.charCodeAt(l))%256,a[l]=a[u],a[u]=c}n=t,r=a}else a=r;var h=e.length,p=0,f=0,d="";for(l=0;l<h;l++)f=(f+(c=a[p=(p+1)%256]))%256,a[p]=a[f],a[f]=c,s=a[(a[p]+a[f])%256],d+=String.fromCharCode(e.charCodeAt(l)^s);return d}var wL={print:4,modify:8,copy:16,"annot-forms":32};function xL(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(t){if(void 0!==wL.perm)throw new Error("Invalid permission: "+t);i+=wL[t]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=mL(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=bL(this.encryptionKey,this.padding)}function SL(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function EL(t){if("object"!==M(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!r],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,r)}catch(n){Zk.console&&Jk.error("jsPDF PubSub Error",n.message,n)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function CL(t){if(!(this instanceof CL))return new CL(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function NL(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function PL(t,e,n,r,i){if(!(this instanceof PL))return new PL(t,e,n,r,i);this.type="axial"===t?2:3,this.coords=e,this.colors=n,NL.call(this,r,i)}function OL(t,e,n,r,i){if(!(this instanceof OL))return new OL(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,NL.call(this,r,i)}function TL(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,u="S",c=null;"object"===M(t=t||{})&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,null!==(c=t.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),s=t.filters||(!0===o?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=EL;var d="1.3",g=f.__private__.getPdfVersion=function(){return d};f.__private__.setPdfVersion=function(t){d=t};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var m=f.__private__.getPageFormat=function(t){return y[t]};i=i||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},_=v.COMPAT;function b(){this.saveGraphicsState(),Q(new Lt(dt,0,0,-dt,0,On()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),u="n",_=v.ADVANCED}function w(){this.restoreGraphicsState(),u="S",_=v.COMPAT}var x=f.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};f.advancedAPI=function(t){var e=_===v.COMPAT;return e&&b.call(this),"function"!=typeof t||(t(this),e&&w.call(this)),this},f.compatAPI=function(t){var e=_===v.ADVANCED;return e&&w.call(this),"function"!=typeof t||(t(this),e&&b.call(this)),this},f.isAdvancedAPI=function(){return _===v.ADVANCED};var S,E=function(t){if(_!==v.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=f.roundToPrecision=f.__private__.roundToPrecision=function(t,n){var r=e||n;if(isNaN(t)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(r).replace(/0+$/,"")};S=f.hpf=f.__private__.hpf="number"==typeof l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,l)}:"smart"===l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,16)};var N=f.f2=f.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return C(t,2)},P=f.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return C(t,3)},O=f.scale=f.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return _===v.COMPAT?t*dt:_===v.ADVANCED?t:void 0},T=function(t){return _===v.COMPAT?On()-t:_===v.ADVANCED?t:void 0},I=function(t){return O(T(t))};f.__private__.setPrecision=f.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var k,L="00000000000000000000000000000000",A=f.__private__.getFileId=function(){return L},R=f.__private__.setFileId=function(t){return L=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():L.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==c&&(Re=new xL(c.userPermissions,c.userPassword,c.ownerPassword,L)),L};f.setFileId=function(t){return R(t),this},f.getFileId=function(){return A()};var F=f.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",r=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),o=[n,B(r),"'",B(i),"'"].join("");return["D:",t.getFullYear(),B(t.getMonth()+1),B(t.getDate()),B(t.getHours()),B(t.getMinutes()),B(t.getSeconds()),o].join("")},j=f.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,r=parseInt(t.substr(8,2),10),i=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),s=parseInt(t.substr(14,2),10);return new Date(e,n,r,i,o,s,0)},D=f.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=F(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return k=e},z=f.__private__.getCreationDate=function(t){var e=k;return"jsDate"===t&&(e=j(k)),e};f.setCreationDate=function(t){return D(t),this},f.getCreationDate=function(t){return z(t)};var q,B=f.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},G=f.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},U=0,V=[],W=[],H=0,Y=[],X=[],K=!1,Z=W,$=function(){U=0,H=0,W=[],V=[],Y=[],Bt=Dt(),Gt=Dt()};f.__private__.setCustomOutputDestination=function(t){K=!0,Z=t};var J=function(t){K||(Z=t)};f.__private__.resetCustomOutputDestination=function(){K=!1,Z=W};var Q=f.__private__.out=function(t){return t=t.toString(),H+=t.length+1,Z.push(t),Z},tt=f.__private__.write=function(t){return Q(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},et=f.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return nt};var rt=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(t){return rt=_===v.ADVANCED?t/dt:t,this};var it,ot=f.__private__.getFontSize=f.getFontSize=function(){return _===v.COMPAT?rt:rt*dt},st=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(t){return st=t,this},f.__private__.getR2L=f.getR2L=function(){return st};var at,lt=f.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))it=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');it=t}else it=parseInt(t,10)};f.__private__.getZoomMode=function(){return it};var ut,ct=f.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');at=t};f.__private__.getPageMode=function(){return at};var ht=f.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');ut=t};f.__private__.getLayoutMode=function(){return ut},f.__private__.setDisplayMode=f.setDisplayMode=function(t,e,n){return lt(t),ht(e),ct(n),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(t){if(-1===Object.keys(pt).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[t]},f.__private__.getDocumentProperties=function(){return pt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(t){for(var e in pt)pt.hasOwnProperty(e)&&t[e]&&(pt[e]=t[e]);return this},f.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(pt).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[t]=e};var ft,dt,gt,yt,mt,vt={},_t={},bt=[],wt={},xt={},St={},Et={},Ct=null,Nt=0,Pt=[],Ot=new EL(f),Tt=t.hotfixes||[],It={},Mt={},kt=[],Lt=function t(e,n,r,i,o,s){if(!(this instanceof t))return new t(e,n,r,i,o,s);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(s)&&(s=0),this._matrix=[e,n,r,i,o,s]};Object.defineProperty(Lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Lt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Lt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(t)},Lt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,r=t.shx*this.sx+t.sy*this.shx,i=t.shx*this.shy+t.sy*this.sy,o=t.tx*this.sx+t.ty*this.shx+this.tx,s=t.tx*this.shy+t.ty*this.sy+this.ty;return new Lt(e,n,r,i,o,s)},Lt.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,s=Math.sqrt(t*t+e*e),a=(t/=s)*n+(e/=s)*r;n-=t*a,r-=e*a;var l=Math.sqrt(n*n+r*r);return a/=l,t*(r/=l)<e*(n/=l)&&(t=-t,e=-e,a=-a,s=-s),{scale:new Lt(s,0,0,l,0,0),translate:new Lt(1,0,0,1,i,o),rotate:new Lt(t,e,-e,t,0,0),skew:new Lt(1,0,a,1,0,0)}},Lt.prototype.toString=function(t){return this.join(" ")},Lt.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,s=1/(t*r-e*n),a=r*s,l=-e*s,u=-n*s,c=t*s;return new Lt(a,l,u,c,-a*i-u*o,-l*i-c*o)},Lt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new bn(e,n)},Lt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new bn(t.x+t.w,t.y+t.h));return new wn(e.x,e.y,n.x-e.x,n.y-e.y)},Lt.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty;return new Lt(t,e,n,r,i,o)},f.Matrix=Lt;var At=f.matrixMult=function(t,e){return e.multiply(t)},Rt=new Lt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Rt;var Ft=function(t,e){if(!xt[t]){var n=(e instanceof PL?"Sh":"P")+(Object.keys(wt).length+1).toString(10);e.id=n,xt[t]=n,wt[n]=e,Ot.publish("addPattern",e)}};f.ShadingPattern=PL,f.TilingPattern=OL,f.addShadingPattern=function(t,e){return E("addShadingPattern()"),Ft(t,e),this},f.beginTilingPattern=function(t){E("beginTilingPattern()"),Sn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},f.endTilingPattern=function(t,e){E("endTilingPattern()"),e.stream=X[q].join("\n"),Ft(t,e),Ot.publish("endTilingPattern",e),kt.pop().restore()};var jt=f.__private__.newObject=function(){var t=Dt();return zt(t,!0),t},Dt=f.__private__.newObjectDeferred=function(){return U++,V[U]=function(){return H},U},zt=function(t,e){return e="boolean"==typeof e&&e,V[t]=H,e&&Q(t+" 0 obj"),t},qt=f.__private__.newAdditionalObject=function(){var t={objId:Dt(),content:""};return Y.push(t),t},Bt=Dt(),Gt=Dt(),Ut=f.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(e[i])).toString(16)).slice(-2);return r},Vt=f.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,r=t.ch2,i=t.ch3,o=t.ch4,s="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var a=new oL(n);if(a.ok)n=a.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,i=255&l}if(void 0===r||void 0===o&&n===r&&r===i)e="string"==typeof n?n+" "+s[0]:2===t.precision?N(n/255)+" "+s[0]:P(n/255)+" "+s[0];else if(void 0===o||"object"===M(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",s[1]].join(" ");e="string"==typeof n?[n,r,i,s[1]].join(" "):2===t.precision?[N(n/255),N(r/255),N(i/255),s[1]].join(" "):[P(n/255),P(r/255),P(i/255),s[1]].join(" ")}else e="string"==typeof n?[n,r,i,o,s[2]].join(" "):2===t.precision?[N(n),N(r),N(i),N(o),s[2]].join(" "):[P(n),P(r),P(i),P(o),s[2]].join(" ");return e},Wt=f.__private__.getFilters=function(){return s},Ht=f.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||Wt(),r=t.alreadyAppliedFilters||[],i=t.addLength1||!1,o=e.length,s=t.objectId,a=function(t){return t};if(null!==c&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==c&&(a=Re.encryptor(s,0));var l={};!0===n&&(n=["FlateEncode"]);var u=t.additionalKeyValues||[],h=(l=void 0!==TL.API.processDataByFilters?TL.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(u.push({key:"Length",value:l.data.length}),!0===i&&u.push({key:"Length1",value:o})),0!=h.length)if(h.split("/").length-1==1)u.push({key:"Filter",value:h});else{u.push({key:"Filter",value:"["+h+"]"});for(var p=0;p<u.length;p+=1)if("DecodeParms"===u[p].key){for(var f=[],d=0;d<l.reverseChain.split("/").length-1;d+=1)f.push("null");f.push(u[p].value),u[p].value="["+f.join(" ")+"]"}}Q("<<");for(var g=0;g<u.length;g++)Q("/"+u[g].key+" "+u[g].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(a(l.data)),Q("endstream"))},Yt=f.__private__.putPage=function(t){var e=t.number,n=t.data,r=t.objId,i=t.contentsObjId;zt(r,!0),Q("<</Type /Page"),Q("/Parent "+t.rootDictionaryObjId+" 0 R"),Q("/Resources "+t.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(S(t.mediaBox.bottomLeftX))+" "+parseFloat(S(t.mediaBox.bottomLeftY))+" "+S(t.mediaBox.topRightX)+" "+S(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Q("/CropBox ["+S(t.cropBox.bottomLeftX)+" "+S(t.cropBox.bottomLeftY)+" "+S(t.cropBox.topRightX)+" "+S(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Q("/BleedBox ["+S(t.bleedBox.bottomLeftX)+" "+S(t.bleedBox.bottomLeftY)+" "+S(t.bleedBox.topRightX)+" "+S(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Q("/TrimBox ["+S(t.trimBox.bottomLeftX)+" "+S(t.trimBox.bottomLeftY)+" "+S(t.trimBox.topRightX)+" "+S(t.trimBox.topRightY)+"]"),null!==t.artBox&&Q("/ArtBox ["+S(t.artBox.bottomLeftX)+" "+S(t.artBox.bottomLeftY)+" "+S(t.artBox.topRightX)+" "+S(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Q("/UserUnit "+t.userUnit),Ot.publish("putPage",{objId:r,pageContext:Pt[e],pageNumber:e,page:n}),Q("/Contents "+i+" 0 R"),Q(">>"),Q("endobj");var o=n.join("\n");return _===v.ADVANCED&&(o+="\nQ"),zt(i,!0),Ht({data:o,filters:Wt(),objectId:i}),Q("endobj"),r},Xt=f.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=Nt;t++)Pt[t].objId=Dt(),Pt[t].contentsObjId=Dt();for(t=1;t<=Nt;t++)n.push(Yt({number:t,data:X[t],objId:Pt[t].objId,contentsObjId:Pt[t].contentsObjId,mediaBox:Pt[t].mediaBox,cropBox:Pt[t].cropBox,bleedBox:Pt[t].bleedBox,trimBox:Pt[t].trimBox,artBox:Pt[t].artBox,userUnit:Pt[t].userUnit,rootDictionaryObjId:Bt,resourceDictionaryObjId:Gt}));zt(Bt,!0),Q("<</Type /Pages");var r="/Kids [";for(e=0;e<Nt;e++)r+=n[e]+" 0 R ";Q(r+"]"),Q("/Count "+Nt),Q(">>"),Q("endobj"),Ot.publish("postPutPages")},Kt=function(t){Ot.publish("putFont",{font:t,out:Q,newObject:jt,putStream:Ht}),!0!==t.isAlreadyPutted&&(t.objectNumber=jt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+SL(t.postScriptName)),Q("/Subtype /Type1"),"string"==typeof t.encoding&&Q("/Encoding /"+t.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Zt=function(){for(var t in vt)vt.hasOwnProperty(t)&&(!1===h||!0===h&&p.hasOwnProperty(t))&&Kt(vt[t])},$t=function(t){t.objectNumber=jt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[S(t.x),S(t.y),S(t.x+t.width),S(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");Ht({data:n,additionalKeyValues:e,objectId:t.objectNumber}),Q("endobj")},Jt=function(){for(var t in It)It.hasOwnProperty(t)&&$t(It[t])},Qt=function(t,e){var n,r=[],i=1/(e-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=t[0].offset){var o={offset:0,color:t[0].color};t.unshift(o)}if(1!=t[t.length-1].offset){var s={offset:1,color:t[t.length-1].color};t.push(s)}for(var a="",l=0,u=0;u<r.length;u++){for(n=r[u];n>t[l+1].offset;)l++;var c=t[l].offset,h=(n-c)/(t[l+1].offset-c),p=t[l].color,f=t[l+1].color;a+=G(Math.round((1-h)*p[0]+h*f[0]).toString(16))+G(Math.round((1-h)*p[1]+h*f[1]).toString(16))+G(Math.round((1-h)*p[2]+h*f[2]).toString(16))}return a.trim()},te=function(t,e){e||(e=21);var n=jt(),r=Qt(t.colors,e),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+e+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ht({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),t.objectNumber=jt(),Q("<< /ShadingType "+t.type),Q("/ColorSpace /DeviceRGB");var o="/Coords ["+S(parseFloat(t.coords[0]))+" "+S(parseFloat(t.coords[1]))+" ";2===t.type?o+=S(parseFloat(t.coords[2]))+" "+S(parseFloat(t.coords[3])):o+=S(parseFloat(t.coords[2]))+" "+S(parseFloat(t.coords[3]))+" "+S(parseFloat(t.coords[4]))+" "+S(parseFloat(t.coords[5])),Q(o+="]"),t.matrix&&Q("/Matrix ["+t.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},ee=function(t,e){var n=Dt(),r=jt();e.push({resourcesOid:n,objectOid:r}),t.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+t.boundingBox.map(S).join(" ")+"]"}),i.push({key:"XStep",value:S(t.xStep)}),i.push({key:"YStep",value:S(t.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),t.matrix&&i.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),Ht({data:t.stream,additionalKeyValues:i,objectId:t.objectNumber}),Q("endobj")},ne=function(t){var e;for(e in wt)wt.hasOwnProperty(e)&&(wt[e]instanceof PL?te(wt[e]):wt[e]instanceof OL&&ee(wt[e],t))},re=function(t){for(var e in t.objectNumber=jt(),Q("<<"),t)switch(e){case"opacity":Q("/ca "+N(t[e]));break;case"stroke-opacity":Q("/CA "+N(t[e]))}Q(">>"),Q("endobj")},ie=function(){var t;for(t in St)St.hasOwnProperty(t)&&re(St[t])},oe=function(){for(var t in Q("/XObject <<"),It)It.hasOwnProperty(t)&&It[t].objectNumber>=0&&Q("/"+t+" "+It[t].objectNumber+" 0 R");Ot.publish("putXobjectDict"),Q(">>")},se=function(){Re.oid=jt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Re.v),Q("/R "+Re.r),Q("/U <"+Re.toHexString(Re.U)+">"),Q("/O <"+Re.toHexString(Re.O)+">"),Q("/P "+Re.P),Q(">>"),Q("endobj")},ae=function(){for(var t in Q("/Font <<"),vt)vt.hasOwnProperty(t)&&(!1===h||!0===h&&p.hasOwnProperty(t))&&Q("/"+t+" "+vt[t].objectNumber+" 0 R");Q(">>")},le=function(){if(Object.keys(wt).length>0){for(var t in Q("/Shading <<"),wt)wt.hasOwnProperty(t)&&wt[t]instanceof PL&&wt[t].objectNumber>=0&&Q("/"+t+" "+wt[t].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),Q(">>")}},ue=function(t){if(Object.keys(wt).length>0){for(var e in Q("/Pattern <<"),wt)wt.hasOwnProperty(e)&&wt[e]instanceof f.TilingPattern&&wt[e].objectNumber>=0&&wt[e].objectNumber<t&&Q("/"+e+" "+wt[e].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),Q(">>")}},ce=function(){if(Object.keys(St).length>0){var t;for(t in Q("/ExtGState <<"),St)St.hasOwnProperty(t)&&St[t].objectNumber>=0&&Q("/"+t+" "+St[t].objectNumber+" 0 R");Ot.publish("putGStateDict"),Q(">>")}},he=function(t){zt(t.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ae(),le(),ue(t.objectOid),ce(),oe(),Q(">>"),Q("endobj")},pe=function(){var t=[];Zt(),ie(),Jt(),ne(t),Ot.publish("putResources"),t.forEach(he),he({resourcesOid:Gt,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources")},fe=function(){Ot.publish("putAdditionalObjects");for(var t=0;t<Y.length;t++){var e=Y[t];zt(e.objId,!0),Q(e.content),Q("endobj")}Ot.publish("postPutAdditionalObjects")},de=function(t){_t[t.fontName]=_t[t.fontName]||{},_t[t.fontName][t.fontStyle]=t.id},ge=function(t,e,n,r,i){var o={id:"F"+(Object.keys(vt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Ot.publish("addFont",{font:o,instance:this}),vt[o.id]=o,de(o),o.id},ye=function(t){for(var e=0,n=nt.length;e<n;e++){var r=ge.call(this,t[e][0],t[e][1],t[e][2],nt[e][3],!0);!1===h&&(p[r]=!0);var i=t[e][0].split("-");de({id:r,fontName:i[0],fontStyle:i[1]||""})}Ot.publish("addFonts",{fonts:vt,dictionary:_t})},me=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!Zk.console)throw new Error(n);Zk.console.error(n,t),Zk.alert&&alert(n)}},t.foo.bar=t,t.foo},ve=function(t,e){var n,r,i,o,s,a,l,u,c;if(i=(e=e||{}).sourceEncoding||"Unicode",s=e.outputEncoding,(e.autoencode||s)&&vt[ft].metadata&&vt[ft].metadata[i]&&vt[ft].metadata[i].encoding&&(o=vt[ft].metadata[i].encoding,!s&&vt[ft].encoding&&(s=vt[ft].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(l=!1,a=[],n=0,r=t.length;n<r;n++)(u=s[t.charCodeAt(n)])?a.push(String.fromCharCode(u)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(l=!0);t=a.join("")}for(n=t.length;void 0===l&&0!==n;)t.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return t;for(a=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if((c=(u=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(u-(c<<8))}return String.fromCharCode.apply(void 0,a)},_e=f.__private__.pdfEscape=f.pdfEscape=function(t,e){return ve(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},be=f.__private__.beginPage=function(t){X[++Nt]=[],Pt[Nt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},Se(Nt),J(X[q])},we=function(t,e){var r,o,s;switch(n=e||n,"string"==typeof t&&(r=m(t.toLowerCase()),Array.isArray(r)&&(o=r[0],s=r[1])),Array.isArray(t)&&(o=t[0]*dt,s=t[1]*dt),isNaN(o)&&(o=i[0],s=i[1]),(o>14400||s>14400)&&(Jk.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),s=Math.min(14400,s)),i=[o,s],n.substr(0,1)){case"l":s>o&&(i=[s,o]);break;case"p":o>s&&(i=[s,o])}be(i),nn(tn),Q(hn),0!==mn&&Q(mn+" J"),0!==vn&&Q(vn+" j"),Ot.publish("addPage",{pageNumber:Nt})},xe=function(t){t>0&&t<=Nt&&(X.splice(t,1),Pt.splice(t,1),Nt--,q>Nt&&(q=Nt),this.setPage(q))},Se=function(t){t>0&&t<=Nt&&(q=t)},Ee=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return X.length-1},Ce=function(t,e,n){var r,i=void 0;return n=n||{},t=void 0!==t?t:vt[ft].fontName,e=void 0!==e?e:vt[ft].fontStyle,r=t.toLowerCase(),void 0!==_t[r]&&void 0!==_t[r][e]?i=_t[r][e]:void 0!==_t[t]&&void 0!==_t[t][e]?i=_t[t][e]:!1===n.disableWarning&&Jk.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=_t.times[e])&&(i=_t.times.normal),i},Ne=f.__private__.putInfo=function(){var t=jt(),e=function(t){return t};for(var n in null!==c&&(e=Re.encryptor(t,0)),Q("<<"),Q("/Producer ("+_e(e("jsPDF "+TL.version))+")"),pt)pt.hasOwnProperty(n)&&pt[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+_e(e(pt[n]))+")");Q("/CreationDate ("+_e(e(k))+")"),Q(">>"),Q("endobj")},Pe=f.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Bt;switch(jt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+e+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+it;"%"===n.substr(n.length-1)&&(it=parseInt(it)/100),"number"==typeof it&&Q("/OpenAction [3 0 R /XYZ null null "+N(it)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}at&&Q("/PageMode /"+at),Ot.publish("putCatalog"),Q(">>"),Q("endobj")},Oe=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(U+1)),Q("/Root "+U+" 0 R"),Q("/Info "+(U-1)+" 0 R"),null!==c&&Q("/Encrypt "+Re.oid+" 0 R"),Q("/ID [ <"+L+"> <"+L+"> ]"),Q(">>")},Te=f.__private__.putHeader=function(){Q("%PDF-"+d),Q("%")},Ie=f.__private__.putXRef=function(){var t="0000000000";Q("xref"),Q("0 "+(U+1)),Q("0000000000 65535 f ");for(var e=1;e<=U;e++)"function"==typeof V[e]?Q((t+V[e]()).slice(-10)+" 00000 n "):void 0!==V[e]?Q((t+V[e]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Me=f.__private__.buildDocument=function(){$(),J(W),Ot.publish("buildDocument"),Te(),Xt(),fe(),pe(),null!==c&&se(),Ne(),Pe();var t=H;return Ie(),Oe(),Q("startxref"),Q(""+t),Q("%%EOF"),J(X[q]),W.join("\n")},ke=f.__private__.getBlob=function(t){return new Blob([et(t)],{type:"application/pdf"})},Le=f.output=f.__private__.output=me((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Me();case"save":f.save(e.filename);break;case"arraybuffer":return et(Me());case"blob":return ke(Me());case"bloburi":case"bloburl":if(void 0!==Zk.URL&&"function"==typeof Zk.URL.createObjectURL)return Zk.URL&&Zk.URL.createObjectURL(ke(Me()))||void 0;Jk.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=Me();try{n=rL(r)}catch(t){n=rL(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Zk)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(i=e.pdfObjectUrl,o="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",a=Zk.open();return null!==a&&a.document.write(s),a}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Zk)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',u=Zk.open();if(null!==u){u.document.write(l);var c=this;u.document.documentElement.querySelector("#pdfViewer").onload=function(){u.document.title=e.filename,u.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return u}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Zk))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',p=Zk.open();if(null!==p&&(p.document.write(h),p.document.title=e.filename),p||"undefined"==typeof safari)return p;break;case"datauri":case"dataurl":return Zk.document.location.href=this.output("datauristring",e);default:return null}})),Ae=function(t){return!0===Array.isArray(Tt)&&Tt.indexOf(t)>-1};switch(r){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=1==Ae("px_scaling")?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);dt=r}var Re=null;D(),R();var Fe=function(t){return null!==c?Re.encryptor(t,0):function(t){return t}},je=f.__private__.getPageInfo=f.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pt[t].objId,pageNumber:t,pageContext:Pt[t]}},De=f.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in Pt)if(Pt[e].objId===t)break;return je(e)},ze=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Pt[q].objId,pageNumber:q,pageContext:Pt[q]}};f.addPage=function(){return we.apply(this,arguments),this},f.setPage=function(){return Se.apply(this,arguments),J.call(this,X[q]),this},f.insertPage=function(t){return this.addPage(),this.movePage(q,t),this},f.movePage=function(t,e){var n,r;if(t>e){n=X[t],r=Pt[t];for(var i=t;i>e;i--)X[i]=X[i-1],Pt[i]=Pt[i-1];X[e]=n,Pt[e]=r,this.setPage(e)}else if(t<e){n=X[t],r=Pt[t];for(var o=t;o<e;o++)X[o]=X[o+1],Pt[o]=Pt[o+1];X[e]=n,Pt[e]=r,this.setPage(e)}return this},f.deletePage=function(){return xe.apply(this,arguments),this},f.__private__.text=f.text=function(t,e,n,r,i){var o,s,a,l,u,c,h,f,d,g=(r=r||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var y=n;n=e,e=t,t=y}if(arguments[3]instanceof Lt==0?(a=arguments[4],l=arguments[5],"object"===M(h=arguments[3])&&null!==h||("string"==typeof a&&(l=a,a=null),"string"==typeof h&&(l=h,h=null),"number"==typeof h&&(a=h,h=null),r={flags:h,angle:a,align:l})):(E("The transform parameter of text() with a Matrix value"),d=i),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return g;var m="",b=!1,w="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Qe,x=g.internal.scaleFactor;function C(t){return t=t.split("\t").join(Array(r.TabLen||9).join(" ")),_e(t,h)}function N(t){for(var e,n=t.concat(),r=[],i=n.length;i--;)"string"==typeof(e=n.shift())?r.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?r.push(e[0]):r.push([e[0],e[1],e[2]]);return r}function P(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var r,i,o=t.concat(),s=[],a=o.length;a--;)"string"==typeof(r=o.shift())?s.push(e(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=e(r[0],r[1],r[2]),s.push([i[0],i[1],i[2]]));n=s}return n}var T=!1,I=!0;if("string"==typeof t)T=!0;else if(Array.isArray(t)){var k=t.concat();s=[];for(var L,A=k.length;A--;)("string"!=typeof(L=k.shift())||Array.isArray(L)&&"string"!=typeof L[0])&&(I=!1);T=I}if(!1===T)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var R=rt/g.internal.scaleFactor,F=R*(w-1);switch(r.baseline){case"bottom":n-=F;break;case"top":n+=R-F;break;case"hanging":n+=R-2*F;break;case"middle":n+=R/2-F}if((c=r.maxWidth||0)>0&&("string"==typeof t?t=g.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(g.splitTextToSize(e,c))}),[]))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:_e,activeFontKey:ft,fonts:vt,activeFontSize:rt}},Ot.publish("preProcessText",o),t=o.text,a=(r=o.options).angle,d instanceof Lt==0&&a&&"number"==typeof a){a*=Math.PI/180,0===r.rotationDirection&&(a=-a),_===v.ADVANCED&&(a=-a);var j=Math.cos(a),D=Math.sin(a);d=new Lt(j,D,-D,j,0,0)}else a&&a instanceof Lt&&(d=a);_!==v.ADVANCED||d||(d=Rt),void 0!==(u=r.charSpace||gn)&&(m+=S(O(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=r.horizontalScale)&&(m+=S(100*f)+" Tz\n"),r.lang;var z=-1,q=void 0!==r.renderingMode?r.renderingMode:r.stroke,B=g.internal.getCurrentPageInfo().pageContext;switch(q){case 0:case!1:case"fill":z=0;break;case 1:case!0:case"stroke":z=1;break;case 2:case"fillThenStroke":z=2;break;case 3:case"invisible":z=3;break;case 4:case"fillAndAddForClipping":z=4;break;case 5:case"strokeAndAddPathForClipping":z=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":z=6;break;case 7:case"addToPathForClipping":z=7}var G=void 0!==B.usedRenderingMode?B.usedRenderingMode:-1;-1!==z?m+=z+" Tr\n":-1!==G&&(m+="0 Tr\n"),-1!==z&&(B.usedRenderingMode=z),l=r.align||"left";var U,V=rt*w,W=g.internal.pageSize.getWidth(),H=vt[ft];u=r.charSpace||gn,c=r.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},r.flags);var Y=[];if("[object Array]"===Object.prototype.toString.call(t)){var X;s=N(t),"left"!==l&&(U=s.map((function(t){return g.getStringUnitWidth(t,{font:H,charSpace:u,fontSize:rt,doKerning:!1})*rt/x})));var K,Z=0;if("right"===l){e-=U[0],t=[],A=s.length;for(var $=0;$<A;$++)0===$?(K=an(e),X=ln(n)):(K=O(Z-U[$]),X=-V),t.push([s[$],K,X]),Z=U[$]}else if("center"===l){e-=U[0]/2,t=[],A=s.length;for(var J=0;J<A;J++)0===J?(K=an(e),X=ln(n)):(K=O((Z-U[J])/2),X=-V),t.push([s[J],K,X]),Z=U[J]}else if("left"===l){t=[],A=s.length;for(var tt=0;tt<A;tt++)t.push(s[tt])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],A=s.length,c=0!==c?c:W;for(var et=0;et<A;et++)X=0===et?ln(n):-V,K=0===et?an(e):0,et<A-1?Y.push(S(O((c-U[et])/(s[et].split(" ").length-1)))):Y.push(0),t.push([s[et],K,X])}}var nt="boolean"==typeof r.R2L?r.R2L:st;!0===nt&&(t=P(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:_e,activeFontKey:ft,fonts:vt,activeFontSize:rt}},Ot.publish("postProcessText",o),t=o.text,b=o.mutex.isHex||!1;var it=vt[ft].encoding;"WinAnsiEncoding"!==it&&"StandardEncoding"!==it||(t=P(t,(function(t,e,n){return[C(t),e,n]}))),s=N(t),t=[];for(var ot,at,lt,ut=0,ct=1,ht=Array.isArray(s[0])?ct:ut,pt="",dt=function(t,e,n){var i="";return n instanceof Lt?(n="number"==typeof r.angle?At(n,new Lt(1,0,0,1,t,e)):At(new Lt(1,0,0,1,t,e),n),_===v.ADVANCED&&(n=At(new Lt(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=S(t)+" "+S(e)+" Td\n",i},gt=0;gt<s.length;gt++){switch(pt="",ht){case ct:lt=(b?"<":"(")+s[gt][0]+(b?">":")"),ot=parseFloat(s[gt][1]),at=parseFloat(s[gt][2]);break;case ut:lt=(b?"<":"(")+s[gt]+(b?">":")"),ot=an(e),at=ln(n)}void 0!==Y&&void 0!==Y[gt]&&(pt=Y[gt]+" Tw\n"),0===gt?t.push(pt+dt(ot,at,d)+lt):ht===ut?t.push(pt+lt):ht===ct&&t.push(pt+dt(ot,at,d)+lt)}t=ht===ut?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var yt="BT\n/";return yt+=ft+" "+rt+" Tf\n",yt+=S(rt*w)+" TL\n",yt+=fn+"\n",yt+=m,yt+=t,Q(yt+="ET"),p[ft]=!0,g};var qe=f.__private__.clip=f.clip=function(t){return Q("evenodd"===t?"W*":"W"),this};f.clipEvenOdd=function(){return qe("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var Be=f.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(t){return Be(t)&&(u=t),this};var Ge=f.__private__.getStyle=f.getStyle=function(t){var e=u;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},Ue=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(t){return Ve("f",t),this},f.fillEvenOdd=function(t){return Ve("f*",t),this},f.fillStroke=function(t){return Ve("B",t),this},f.fillStrokeEvenOdd=function(t){return Ve("B*",t),this};var Ve=function(t,e){"object"===M(e)?Ye(e,t):Q(t)},We=function(t){null===t||_===v.ADVANCED&&void 0===t||(t=Ge(t),Q(t))};function He(t,e,n,r,i){var o=new OL(e||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var s=t+"$$"+this.cloneIndex+++"$$";return Ft(s,o),o}var Ye=function(t,e){var n=xt[t.key],r=wt[n];if(r instanceof PL)Q("q"),Q(Xe(e)),r.gState&&f.setGState(r.gState),Q(t.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(r instanceof OL){var i=new Lt(1,0,0,-1,0,On());t.matrix&&(i=i.multiply(t.matrix||Rt),n=He.call(r,t.key,t.boundingBox,t.xStep,t.yStep,i).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),r.gState&&f.setGState(r.gState),Q(e),Q("Q")}},Xe=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ke=f.moveTo=function(t,e){return Q(S(O(t))+" "+S(I(e))+" m"),this},Ze=f.lineTo=function(t,e){return Q(S(O(t))+" "+S(I(e))+" l"),this},$e=f.curveTo=function(t,e,n,r,i,o){return Q([S(O(t)),S(I(e)),S(O(n)),S(I(r)),S(O(i)),S(I(o)),"c"].join(" ")),this};f.__private__.line=f.line=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Be(i))throw new Error("Invalid arguments passed to jsPDF.line");return _===v.COMPAT?this.lines([[n-t,r-e]],t,e,[1,1],i||"S"):this.lines([[n-t,r-e]],t,e,[1,1]).stroke()},f.__private__.lines=f.lines=function(t,e,n,r,i,o){var s,a,l,u,c,h,p,f,d,g,y,m;if("number"==typeof t&&(m=n,n=e,e=t,t=m),r=r||[1,1],o=o||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(r)||!Be(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ke(e,n),s=r[0],a=r[1],u=t.length,g=e,y=n,l=0;l<u;l++)2===(c=t[l]).length?(g=c[0]*s+g,y=c[1]*a+y,Ze(g,y)):(h=c[0]*s+g,p=c[1]*a+y,f=c[2]*s+g,d=c[3]*a+y,g=c[4]*s+g,y=c[5]*a+y,$e(h,p,f,d,g,y));return o&&Ue(),We(i),this},f.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.c;switch(n.op){case"m":Ke(r[0],r[1]);break;case"l":Ze(r[0],r[1]);break;case"c":$e.apply(this,r);break;case"h":Ue()}}return this},f.__private__.rect=f.rect=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Be(i))throw new Error("Invalid arguments passed to jsPDF.rect");return _===v.COMPAT&&(r=-r),Q([S(O(t)),S(I(e)),S(O(n)),S(O(r)),"re"].join(" ")),We(i),this},f.__private__.triangle=f.triangle=function(t,e,n,r,i,o,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Be(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,r-e],[i-n,o-r],[t-i,e-o]],t,e,[1,1],s,!0),this},f.__private__.roundedRect=f.roundedRect=function(t,e,n,r,i,o,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Be(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),o=Math.min(o,.5*r),this.lines([[n-2*i,0],[i*a,0,i,o-o*a,i,o],[0,r-2*o],[0,o*a,-i*a,o,-i,o],[2*i-n,0],[-i*a,0,-i,-o*a,-i,-o],[0,2*o-r],[0,-o*a,i*a,-o,i,-o]],t+i,e,[1,1],s,!0),this},f.__private__.ellipse=f.ellipse=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Be(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*r;return Ke(t+n,e),$e(t+n,e-s,t+o,e-r,t,e-r),$e(t-o,e-r,t-n,e-s,t-n,e),$e(t-n,e+s,t-o,e+r,t,e+r),$e(t+o,e+r,t+n,e+s,t+n,e),We(i),this},f.__private__.circle=f.circle=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||!Be(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,r)},f.setFont=function(t,e,n){return n&&(e=x(e,n)),ft=Ce(t,e,{disableWarning:!1}),this};var Je=f.__private__.getFont=f.getFont=function(){return vt[Ce.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var t,e,n={};for(t in _t)if(_t.hasOwnProperty(t))for(e in n[t]=[],_t[t])_t[t].hasOwnProperty(e)&&n[t].push(e);return n},f.addFont=function(t,e,n,r,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=x(n,r)),i=i||"Identity-H",ge.call(this,t,e,n,i)};var Qe,tn=t.lineWidth||.200025,en=f.__private__.getLineWidth=f.getLineWidth=function(){return tn},nn=f.__private__.setLineWidth=f.setLineWidth=function(t){return tn=t,Q(S(O(t))+" w"),this};f.__private__.setLineDash=TL.API.setLineDash=TL.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return S(O(t))})).join(" "),e=S(O(e)),Q("["+t+"] "+e+" d"),this};var rn=f.__private__.getLineHeight=f.getLineHeight=function(){return rt*Qe};f.__private__.getLineHeight=f.getLineHeight=function(){return rt*Qe};var on=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(Qe=t),this},sn=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Qe};on(t.lineHeight);var an=f.__private__.getHorizontalCoordinate=function(t){return O(t)},ln=f.__private__.getVerticalCoordinate=function(t){return _===v.ADVANCED?t:Pt[q].mediaBox.topRightY-Pt[q].mediaBox.bottomLeftY-O(t)},un=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(t){return S(an(t))},cn=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(t){return S(ln(t))},hn=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ut(hn)},f.__private__.setStrokeColor=f.setDrawColor=function(t,e,n,r){return hn=Vt({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Q(hn),this};var pn=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ut(pn)},f.__private__.setFillColor=f.setFillColor=function(t,e,n,r){return pn=Vt({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Q(pn),this};var fn=t.textColor||"0 g",dn=f.__private__.getTextColor=f.getTextColor=function(){return Ut(fn)};f.__private__.setTextColor=f.setTextColor=function(t,e,n,r){return fn=Vt({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var gn=t.charSpace,yn=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(gn||0)};f.__private__.setCharSpace=f.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return gn=t,this};var mn=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(t){var e=f.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mn=e,Q(e+" J"),this};var vn=0;f.__private__.setLineJoin=f.setLineJoin=function(t){var e=f.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vn=e,Q(e+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(S(O(t))+" M"),this},f.GState=CL,f.setGState=function(t){(t="string"==typeof t?St[Et[t]]:_n(null,t)).equals(Ct)||(Q("/"+t.id+" gs"),Ct=t)};var _n=function(t,e){if(!t||!Et[t]){var n=!1;for(var r in St)if(St.hasOwnProperty(r)&&St[r].equals(e)){n=!0;break}if(n)e=St[r];else{var i="GS"+(Object.keys(St).length+1).toString(10);St[i]=e,e.id=i}return t&&(Et[t]=e.id),Ot.publish("addGState",e),e}};f.addGState=function(t,e){return _n(t,e),this},f.saveGraphicsState=function(){return Q("q"),bt.push({key:ft,size:rt,color:fn}),this},f.restoreGraphicsState=function(){Q("Q");var t=bt.pop();return ft=t.key,rt=t.size,fn=t.color,Ct=null,this},f.setCurrentTransformationMatrix=function(t){return Q(t.toString()+" cm"),this},f.comment=function(t){return Q("#"+t),this};var bn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var r=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(t){i=t.toString()}}),this},wn=function(t,e,n,r){bn.call(this,t,e),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this},xn=function(){this.page=Nt,this.currentPage=q,this.pages=X.slice(0),this.pagesContext=Pt.slice(0),this.x=gt,this.y=yt,this.matrix=mt,this.width=Nn(q),this.height=On(q),this.outputDestination=Z,this.id="",this.objectNumber=-1};xn.prototype.restore=function(){Nt=this.page,q=this.currentPage,Pt=this.pagesContext,X=this.pages,gt=this.x,yt=this.y,mt=this.matrix,Pn(q,this.width),Tn(q,this.height),Z=this.outputDestination};var Sn=function(t,e,n,r,i){kt.push(new xn),Nt=q=0,X=[],gt=t,yt=e,mt=i,be([n,r])},En=function(t){if(Mt[t])kt.pop().restore();else{var e=new xn,n="Xo"+(Object.keys(It).length+1).toString(10);e.id=n,Mt[t]=n,It[n]=e,Ot.publish("addFormObject",e),kt.pop().restore()}};for(var Cn in f.beginFormObject=function(t,e,n,r,i){return Sn(t,e,n,r,i),this},f.endFormObject=function(t){return En(t),this},f.doFormObject=function(t,e){var n=It[Mt[t]];return Q("q"),Q(e.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},f.getFormObject=function(t){var e=It[Mt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},f.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(iL(ke(Me()),t),"function"==typeof iL.unload&&Zk.setTimeout&&setTimeout(iL.unload,911),this):new Promise((function(e,n){try{var r=iL(ke(Me()),t);"function"==typeof iL.unload&&Zk.setTimeout&&setTimeout(iL.unload,911),e(r)}catch(t){n(t.message)}}))},TL.API)TL.API.hasOwnProperty(Cn)&&("events"===Cn&&TL.API.events.length?function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(Ot,TL.API.events):f[Cn]=TL.API[Cn]);var Nn=f.getPageWidth=function(t){return(Pt[t=t||q].mediaBox.topRightX-Pt[t].mediaBox.bottomLeftX)/dt},Pn=f.setPageWidth=function(t,e){Pt[t].mediaBox.topRightX=e*dt+Pt[t].mediaBox.bottomLeftX},On=f.getPageHeight=function(t){return(Pt[t=t||q].mediaBox.topRightY-Pt[t].mediaBox.bottomLeftY)/dt},Tn=f.setPageHeight=function(t,e){Pt[t].mediaBox.topRightY=e*dt+Pt[t].mediaBox.bottomLeftY};return f.internal={pdfEscape:_e,getStyle:Ge,getFont:Je,getFontSize:ot,getCharSpace:yn,getTextColor:dn,getLineHeight:rn,getLineHeightFactor:sn,getLineWidth:en,write:tt,getHorizontalCoordinate:an,getVerticalCoordinate:ln,getCoordinateString:un,getVerticalCoordinateString:cn,collections:{},newObject:jt,newAdditionalObject:qt,newObjectDeferred:Dt,newObjectDeferredBegin:zt,getFilters:Wt,putStream:Ht,events:Ot,scaleFactor:dt,pageSize:{getWidth:function(){return Nn(q)},setWidth:function(t){Pn(q,t)},getHeight:function(){return On(q)},setHeight:function(t){Tn(q,t)}},encryptionOptions:c,encryption:Re,getEncryptor:Fe,output:Le,getNumberOfPages:Ee,pages:X,out:Q,f2:N,f3:P,getPageInfo:je,getPageInfoByObjId:De,getCurrentPageInfo:ze,getPDFVersion:g,Point:bn,Rectangle:wn,Matrix:Lt,hasHotfix:Ae},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Nn(q)},set:function(t){Pn(q,t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return On(q)},set:function(t){Tn(q,t)},enumerable:!0,configurable:!0}),ye.call(f,nt),ft="F1",we(i,n),Ot.publish("initialized"),f}xL.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},xL.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},xL.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},xL.prototype.processOwnerPassword=function(t,e){return bL(mL(e).substr(0,5),t)},xL.prototype.encryptor=function(t,e){var n=mL(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return bL(n,t)}},CL.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||M(t)!==M(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return 0===r},TL.API={events:[]},TL.version="2.5.1";var IL=TL.API,ML=1,kL=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},LL=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},AL=function(t){return t.toFixed(2)},RL=function(t){return t.toFixed(5)};IL.__acroform__={};var FL=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},jL=function(t){return t*ML},DL=function(t){var e=new tA,n=dA.internal.getHeight(t)||0,r=dA.internal.getWidth(t)||0;return e.BBox=[0,0,Number(AL(r)),Number(AL(n))],e},zL=IL.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},qL=IL.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},BL=IL.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},GL=IL.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BL(t,e-1)},UL=IL.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zL(t,e-1)},VL=IL.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qL(t,e-1)},WL=IL.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(o)||0,[Number(AL(l.lowerLeft_X)),Number(AL(l.lowerLeft_Y)),Number(AL(l.upperRight_X)),Number(AL(l.upperRight_Y))]},HL=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=YL(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+AL(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=DL(t);return o.scope=t.scope,o.stream=e.join("\n"),o}},YL=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(t){return t.split("\n")})):i.map((function(t){return[t]}));var o=n,s=dA.internal.getHeight(t)||0;s=s<0?-s:s;var a=dA.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(e,n,r){if(e+1<i.length){var o=n+" "+i[e+1][0];return XL(o,t,r).width<=a-4}return!1};o++;t:for(;o>0;){e="",o--;var u,c,h=XL("3",t,o).height,p=t.multiline?s-o:(s-h)/2,f=p+=2,d=0,g=0,y=0;if(o<=0){e="(...) Tj\n",e+="% Width of Text: "+XL(e,t,o=12).width+", FieldWidth:"+a+"\n";break}for(var m="",v=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var b=!1;if(1!==i[_].length&&y!==i[_].length-1){if((h+2)*(v+2)+2>s)continue t;m+=i[_][y],b=!0,g=_,_--}else{m=" "==(m+=i[_][y]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var w=parseInt(_),x=l(w,m,o),S=_>=i.length-1;if(x&&!S){m+=" ",y=0;continue}if(x||S){if(S)g=w;else if(t.multiline&&(h+2)*(v+2)+2>s)continue t}else{if(!t.multiline)continue t;if((h+2)*(v+2)+2>s)continue t;g=w}}for(var E="",C=d;C<=g;C++){var N=i[C];if(t.multiline){if(C===g){E+=N[y]+" ",y=(y+1)%N.length;continue}if(C===d){E+=N[N.length-1]+" ";continue}}E+=N[0]+" "}switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,c=XL(E,t,o).width,t.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;default:u=2}e+=AL(u)+" "+AL(f)+" Td\n",e+="("+kL(E)+") Tj\n",e+=-AL(u)+" 0 Td\n",f=-(o+2),c=0,d=b?g:g+1,v++,m=""}break}return r.text=e,r.fontSize=o,r},XL=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},KL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ZL=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},$L=IL.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(t){return t};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(0!==o&&(i+=" "),M(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":"/"!==t[o].substr(0,1)?(void 0!==e&&n&&(r=n.internal.getEncryptor(e)),i+="("+kL(r(t[o].toString()))+")"):i+=t[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},JL=function(t,e,n){var r=function(t){return t};return void 0!==e&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+kL(r(t))+")"},QL=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};QL.prototype.toString=function(){return this.objId+" 0 R"},QL.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},QL.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:$L(i,this.objId,this.scope)}):i instanceof QL?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&t.push({key:r,value:i}))}return t};var tA=function(){QL.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};FL(tA,QL);var eA=function(){QL.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+kL(e(t))+")"}},set:function(e){t=e}})};FL(eA,QL);var nA=function t(){QL.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(e,3))},set:function(t){!0===Boolean(t)?this.F=UL(e,3):this.F=VL(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(t){r=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(t){r[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(t){r[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(t){r[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(t){r[3]=t}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof cA)return;o="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+kL(e(o))+")"},set:function(t){o=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(t){o=t}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===u?50/ML:u},set:function(t){u=t}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof cA||this instanceof pA))return JL(h,this.objId,this.scope)},set:function(t){t=t.toString(),h=t}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof aA==0?JL(p,this.objId,this.scope):p},set:function(t){t=t.toString(),p=this instanceof aA==0?"("===t.substr(0,1)?LL(t.substr(1,t.length-2)):LL(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof aA==1?LL(p.substr(1,p.length-1)):p},set:function(t){t=t.toString(),p=this instanceof aA==1?"/"+t:t}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof aA==0?JL(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof aA==0?"("===t.substr(0,1)?LL(t.substr(1,t.length-2)):LL(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof aA==1?LL(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof aA==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var d,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(t){t=Boolean(t),g=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(d)return d},set:function(t){d=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,1):this.Ff=VL(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,2):this.Ff=VL(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,3):this.Ff=VL(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==y)return y},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');y=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(y){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};FL(nA,QL);var rA=function(){nA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $L(e,this.objId,this.scope)},set:function(t){var n,r;r=[],"string"==typeof(n=t)&&(r=function(t,e,n){n||(n=1);for(var r,i=[];r=e.exec(t);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,18):this.Ff=VL(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=UL(this.Ff,19):this.Ff=VL(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=UL(this.Ff,20),e.sort()):this.Ff=VL(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,22):this.Ff=VL(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,23):this.Ff=VL(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,27):this.Ff=VL(this.Ff,27)}}),this.hasAppearanceStream=!1};FL(rA,nA);var iA=function(){rA.call(this),this.fontName="helvetica",this.combo=!1};FL(iA,rA);var oA=function(){iA.call(this),this.combo=!0};FL(oA,iA);var sA=function(){oA.call(this),this.edit=!0};FL(sA,oA);var aA=function(){nA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,15):this.Ff=VL(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,16):this.Ff=VL(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,17):this.Ff=VL(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,26):this.Ff=VL(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+kL(t(e[n]))+")");return r.push(">>"),r.join("\n")}},set:function(t){"object"===M(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};FL(aA,nA);var lA=function(){aA.call(this),this.pushButton=!0};FL(lA,aA);var uA=function(){aA.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};FL(uA,aA);var cA=function(){var t,e;nA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),r)n.push("/"+e+" ("+kL(t(r[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===M(t)&&(r=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(t){"string"==typeof t&&(r.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dA.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};FL(cA,nA),uA.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},uA.prototype.createOption=function(t){var e=new cA;return e.Parent=this,e.optionName=t,this.Kids.push(e),mA.call(this.scope,e),e};var hA=function(){aA.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dA.CheckBox.createAppearanceStream()};FL(hA,aA);var pA=function(){nA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,13):this.Ff=VL(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,21):this.Ff=VL(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,23):this.Ff=VL(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,24):this.Ff=VL(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,25):this.Ff=VL(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,26):this.Ff=VL(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};FL(pA,nA);var fA=function(){pA.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(GL(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=UL(this.Ff,14):this.Ff=VL(this.Ff,14)}}),this.password=!0};FL(fA,pA);var dA={CheckBox:{createAppearanceStream:function(){return{N:{On:dA.CheckBox.YesNormal},D:{On:dA.CheckBox.YesPushDown,Off:dA.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=DL(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=YL(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+AL(dA.internal.getWidth(t))+" "+AL(dA.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+AL(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=DL(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=dA.internal.getHeight(t),s=dA.internal.getWidth(t),a=YL(t,t.caption);return i.push("1 g"),i.push("0 0 "+AL(s)+" "+AL(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+AL(s-1)+" "+AL(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+AL(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=DL(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+AL(dA.internal.getWidth(t))+" "+AL(dA.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:dA.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=dA.RadioButton.Circle.YesNormal,e.D[t]=dA.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=DL(t);e.scope=t.scope;var n=[],r=dA.internal.getWidth(t)<=dA.internal.getHeight(t)?dA.internal.getWidth(t)/4:dA.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=dA.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+RL(dA.internal.getWidth(t)/2)+" "+RL(dA.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=DL(t);e.scope=t.scope;var n=[],r=dA.internal.getWidth(t)<=dA.internal.getHeight(t)?dA.internal.getWidth(t)/4:dA.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*dA.internal.Bezier_C).toFixed(5)),s=Number((r*dA.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+RL(dA.internal.getWidth(t)/2)+" "+RL(dA.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+RL(dA.internal.getWidth(t)/2)+" "+RL(dA.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=DL(t);e.scope=t.scope;var n=[],r=dA.internal.getWidth(t)<=dA.internal.getHeight(t)?dA.internal.getWidth(t)/4:dA.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*dA.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+RL(dA.internal.getWidth(t)/2)+" "+RL(dA.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:dA.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=dA.RadioButton.Cross.YesNormal,e.D[t]=dA.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=DL(t);e.scope=t.scope;var n=[],r=dA.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+AL(dA.internal.getWidth(t)-2)+" "+AL(dA.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(AL(r.x1.x)+" "+AL(r.x1.y)+" m"),n.push(AL(r.x2.x)+" "+AL(r.x2.y)+" l"),n.push(AL(r.x4.x)+" "+AL(r.x4.y)+" m"),n.push(AL(r.x3.x)+" "+AL(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=DL(t);e.scope=t.scope;var n=dA.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+AL(dA.internal.getWidth(t))+" "+AL(dA.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+AL(dA.internal.getWidth(t)-2)+" "+AL(dA.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(AL(n.x1.x)+" "+AL(n.x1.y)+" m"),r.push(AL(n.x2.x)+" "+AL(n.x2.y)+" l"),r.push(AL(n.x4.x)+" "+AL(n.x4.y)+" m"),r.push(AL(n.x3.x)+" "+AL(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=DL(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+AL(dA.internal.getWidth(t))+" "+AL(dA.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};dA.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=dA.internal.getWidth(t),n=dA.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},dA.internal.getWidth=function(t){var e=0;return"object"===M(t)&&(e=jL(t.Rect[2])),e},dA.internal.getHeight=function(t){var e=0;return"object"===M(t)&&(e=jL(t.Rect[3])),e};var gA,yA,mA=IL.addField=function(t){if(function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(nA.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(KL)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ML=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new eA,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){var e;(e=t).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r.objId=void 0,r.hasAnnotation&&ZL(r,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var r in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(r)){var i=t[r],o=[],s=i.Rect;if(i.Rect&&(i.Rect=WL(i.Rect,e)),e.internal.newObjectDeferredBegin(i.objId,!0),i.DA=dA.createDefaultAppearanceStream(i),"object"===M(i)&&"function"==typeof i.getKeyValueListForStream&&(o=i.getKeyValueListForStream()),i.Rect=s,i.hasAppearanceStream&&!i.appearanceStreamContent){var a=HL(i);o.push({key:"AP",value:"<</N "+a+">>"}),e.internal.acroformPlugin.xForms.push(a)}if(i.appearanceStreamContent){var l="";for(var u in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(u)){var c=i.appearanceStreamContent[u];if(l+="/"+u+" ",l+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var r in c)if(c.hasOwnProperty(r)){var h=c[r];"function"==typeof h&&(h=h.call(e,i)),l+="/"+r+" "+h+" ",e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=c)&&(h=h.call(e,i)),l+="/"+r+" "+h,e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}e.internal.putStream({additionalKeyValues:o,objectId:i.objId}),e.internal.out("endobj")}n&&function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),"object"===M(i)&&"function"==typeof i.putStream&&i.putStream(),delete t[r]}}(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}}(this,t),!(t instanceof nA))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};function vA(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}IL.AcroFormChoiceField=rA,IL.AcroFormListBox=iA,IL.AcroFormComboBox=oA,IL.AcroFormEditBox=sA,IL.AcroFormButton=aA,IL.AcroFormPushButton=lA,IL.AcroFormRadioButton=uA,IL.AcroFormCheckBox=hA,IL.AcroFormTextField=pA,IL.AcroFormPasswordField=fA,IL.AcroFormAppearance=dA,IL.AcroForm={ChoiceField:rA,ListBox:iA,ComboBox:oA,EditBox:sA,Button:aA,PushButton:lA,RadioButton:uA,CheckBox:hA,TextField:pA,PasswordField:fA,Appearance:dA},TL.AcroForm={ChoiceField:rA,ListBox:iA,ComboBox:oA,EditBox:sA,Button:aA,PushButton:lA,RadioButton:uA,CheckBox:hA,TextField:pA,PasswordField:fA,Appearance:dA},TL.AcroForm,function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(t,r){var i,o,s,a,l,u=e;if("RGBA"===(r=r||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(x(t))for(l in n)for(s=n[l],i=0;i<s.length;i+=1){for(a=!0,o=0;o<s[i].length;o+=1)if(void 0!==s[i][o]&&s[i][o]!==t[o]){a=!1;break}if(!0===a){u=l;break}}else for(l in n)for(s=n[l],i=0;i<s.length;i+=1){for(a=!0,o=0;o<s[i].length;o+=1)if(void 0!==s[i][o]&&s[i][o]!==t.charCodeAt(o)){a=!1;break}if(!0===a){u=l;break}}return u===e&&r!==e&&(u=r),u},i=function t(e){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.width}),o.push({key:"Height",value:e.height}),e.colorSpace===y.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===y.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var s="",a=0,l=e.transparency.length;a<l;a++)s+=e.transparency[a]+" "+e.transparency[a]+" ";o.push({key:"Mask",value:"["+s+"]"})}void 0!==e.sMask&&o.push({key:"SMask",value:e.objectId+1+" 0 R"});var u=void 0!==e.filter?["/"+e.filter]:void 0;if(r({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:u,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var c="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:c,data:e.sMask};"filter"in e&&(h.filter=e.filter),t.call(this,h)}if(e.colorSpace===y.INDEXED){var p=this.internal.newObject();r({data:E(new Uint8Array(e.palette)),objectId:p}),n("endobj")}},o=function(){var t=this.internal.collections.addImage_images;for(var e in t)i.call(this,t[e])},s=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var r in e)n("/I"+(t=e[r]).index,t.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var t=this.internal.collections.addImage_images;return a.call(this),t},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(e){return"function"==typeof t["process"+e.toUpperCase()]},h=function(t){return"object"===M(t)&&1===t.nodeType},p=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(0===r.indexOf("data:image/"))return nL(unescape(r).split("base64,").pop());var i=t.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return nL(e.toDataURL(o,1).split("base64,").pop())}},f=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},d=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},g=function(t,e,n,r,i,o){var s=d.call(this,n,r,i),a=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,c=l.call(this);if(n=s[0],r=s[1],c[i.index]=i,o){o*=Math.PI/180;var h=Math.cos(o),p=Math.sin(o),f=function(t){return t.toFixed(4)},g=[f(h),f(p),f(-1*p),f(h),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,a(t),u(e+r),"cm"].join(" ")),this.internal.write(g.join(" ")),this.internal.write([a(n),"0","0",a(r),"0","0","cm"].join(" "))):this.internal.write([a(n),"0","0",a(r),a(t),u(e+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},y=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(t){var e,n,r=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;else if(x(t))for(n=t.byteLength/2,e=0;e<n;e++)r=(r<<5)-r+t[e],r|=0;return r},_=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},b=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:e[1]})}return n},w=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return w()&&t instanceof ArrayBuffer};var x=t.__addimage__.isArrayBufferView=function(t){return w()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},S=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},E=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=x(t)?t:new Uint8Array(t),r=0;r<n.length;r+=8192)e+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return e};t.addImage=function(){var t,n,r,i,o,s,l,u,c;if("number"==typeof arguments[1]?(n=e,r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[4],l=arguments[5],u=arguments[6],c=arguments[7]):(n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],s=arguments[5],l=arguments[6],u=arguments[7],c=arguments[8]),"object"===M(t=arguments[0])&&!h(t)&&"imageData"in t){var p=t;t=p.imageData,n=p.format||n||e,r=p.x||r||0,i=p.y||i||0,o=p.w||p.width||o,s=p.h||p.height||s,l=p.alias||l,u=p.compression||u,c=p.rotation||p.angle||c}var f=this.internal.getFilters();if(void 0===u&&-1!==f.indexOf("FlateEncode")&&(u="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var d=C.call(this,t,n,l,u);return g.call(this,r,i,o,s,d,c),this};var C=function(n,i,o,s){var a,l,d;if("string"==typeof n&&r(n)===e){n=unescape(n);var g=N(n,!1);(""!==g||void 0!==(g=t.loadFile(n,!0)))&&(n=g)}if(h(n)&&(n=p(n,i)),i=r(n,i),!c(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(d=o)||0===d.length)&&(o=function(t){return"string"==typeof t||x(t)?v(t):x(t.data)?v(t.data):null}(n)),(a=f.call(this,o))||(w()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=S(n))),a=this["process"+i.toUpperCase()](n,u.call(this),o,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:m.NONE}(s),l)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},N=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var r,i="";if("string"==typeof t){r=null!==(n=b(t))?n.data:t;try{i=nL(r)}catch(t){if(e)throw _(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};t.getImageProperties=function(n){var i,o,s="";if(h(n)&&(n=p(n)),"string"==typeof n&&r(n)===e&&(""===(s=N(n,!1))&&(s=t.loadFile(n)||""),n=s),o=r(n),!c(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!w()||n instanceof Uint8Array||(n=S(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(TL.API),gA=TL.API,yA=function(t){if(void 0!==t&&""!=t)return!0},TL.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),gA.events.push(["putPage",function(t){for(var e,n,r,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(t.objId),a=t.pageContext.annotations,l=!1,u=0;u<a.length&&!l;u++)switch((e=a[u]).type){case"link":(yA(e.options.url)||yA(e.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var c=0;c<a.length;c++){e=a[c];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),d=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),y=e.title||"Note";r="<</Type /Annot /Subtype /Text "+(n="/Rect ["+i(e.bounds.x)+" "+o(e.bounds.y+e.bounds.h)+" "+i(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y)+"] ")+"/Contents ("+h(g(e.contents))+")",r+=" /Popup "+d.objId+" 0 R",r+=" /P "+s.objId+" 0 R",r+=" /T ("+h(g(y))+") >>",f.content=r;var m=f.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+i(e.bounds.x+30)+" "+o(e.bounds.y+e.bounds.h)+" "+i(e.bounds.x+e.bounds.w+30)+" "+o(e.bounds.y)+"] ")+" /Parent "+m,e.open&&(r+=" /Open true"),r+=" >>",d.content=r,this.internal.write(f.objId,"0 R",d.objId,"0 R");break;case"freetext":n="/Rect ["+i(e.bounds.x)+" "+o(e.bounds.y)+" "+i(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y+e.bounds.h)+"] ";var v=e.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+h(p(e.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(e.options.name){var _=this.annotations._nameMap[e.options.name];e.options.pageNumber=_.page,e.options.top=_.y}else e.options.top||(e.options.top=0);if(n="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",r="",e.options.url)r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(e.options.url))+") >>";else if(e.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,r+=" /FitV "+e.options.left+"]";break;default:var b=o(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),r+=" /XYZ "+e.options.left+" "+b+" "+e.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),gA.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},gA.link=function(t,e,n,r,i){var o=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:s(t),y:a(e),w:s(t+n),h:a(e+r)},options:i,type:"link"})},gA.textWithLink=function(t,e,n,r){var i,o,s=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){o=r.maxWidth;var l=this.splitTextToSize(t,o).length;i=Math.ceil(a*l)}else o=s,i=a;return this.text(t,e,n,r),n+=.2*a,"center"===r.align&&(e-=s/2),"right"===r.align&&(e-=s),this.link(e,n-a,o,i,r),s},gA.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},s=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return s(t)&&i.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return s(t)&&o(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,r=n,i="",o=0;for(e=0;e<t.length;e+=1)void 0!==r[t.charCodeAt(e)]?(o++,"number"==typeof(r=r[t.charCodeAt(e)])&&(i+=String.fromCharCode(r),r=n,o=0),e===t.length-1&&(r=n,i+=t.charAt(e-(o-1)),e-=o-1,o=0)):(r=n,i+=t.charAt(e-o),e-=o,o=0);return i};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==r[t.charCodeAt(0)]};var p=t.__arabicParser__.getCorrectForm=function(t,e,n){return s(t)?!1===o(t)?-1:!u(t)||!s(e)&&!s(n)||!s(n)&&a(e)||a(t)&&!s(e)||a(t)&&l(e)||a(t)&&a(e)?0:c(t)&&s(e)&&!a(e)&&s(n)&&u(n)?3:a(t)||!s(n)?1:2:-1},f=function(t){var n=0,r=0,i=0,o="",a="",l="",u=(t=t||"").split("\\s+"),c=[];for(n=0;n<u.length;n+=1){for(c.push(""),r=0;r<u[n].length;r+=1)o=u[n][r],a=u[n][r-1],l=u[n][r+1],s(o)?(i=p(o,a,l),c[n]+=-1!==i?String.fromCharCode(e[o.charCodeAt(0)][i]):o):c[n]+=o;c[n]=h(c[n])}return c.join(" ")},d=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var r=0;for(n=[],r=0;r<e.length;r+=1)Array.isArray(e[r])?n.push([f(e[r][0]),e[r][1],e[r][2]]):n.push([f(e[r])]);t=n}else t=f(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",d])}(TL.API),TL.API.autoPrint=function(t){var e;return"javascript"===((t=t||{}).variant=t.variant||"non-conform",t.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))),this},function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(t){r=t}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(TL.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(t){s=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){r.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),i=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,s=0,a=0,l=0,u=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var c=e.maxWidth;c>0?"string"==typeof t?t=this.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(u.splitTextToSize(e,c))}),[])):t=Array.isArray(t)?t:[t];for(var h=0;h<t.length;h++)s<(l=this.getStringUnitWidth(t[h],{font:i})*n)&&(s=l);return 0!==s&&(a=t.length),{w:s/=o,h:Math.max((a*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,a=this.internal.__cell__.margins||e,l=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===t.lineNumber?(t.x=(i.x||0)+(i.width||0),t.y=i.y||0):i.y+i.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,u&&l&&(this.printHeaderRow(t.lineNumber,!0),t.y+=l[0].height)):t.y=i.y+i.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-s,t.y+s,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+s,{align:"center",baseline:"top",maxWidth:t.width-s-s}):this.text(t.text,t.x+s,t.y+s,{align:"left",baseline:"top",maxWidth:t.width-s-s})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,l,u,c){if(r.call(this),!l)throw new Error("No data for PDF table.");var h,p,f,d,g=[],y=[],m=[],v={},_={},b=[],w=[],x=(c=c||{}).autoSize||!1,S=!1!==c.printHeaders,E=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,C=c.margins||Object.assign({width:this.getPageWidth()},e),N="number"==typeof c.padding?c.padding:3,P=c.headerBackgroundColor||"#c8c8c8",O=c.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=O,this.setFontSize(E),null==u)y=g=Object.keys(l[0]),m=g.map((function(){return"left"}));else if(Array.isArray(u)&&"object"===M(u[0]))for(g=u.map((function(t){return t.name})),y=u.map((function(t){return t.prompt||t.name||""})),m=u.map((function(t){return t.align||"left"})),h=0;h<u.length;h+=1)_[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(y=g=u,m=g.map((function(){return"left"})));if(x||Array.isArray(u)&&"string"==typeof u[0])for(h=0;h<g.length;h+=1){for(v[d=g[h]]=l.map((function(t){return t[d]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=v[d],this.setFont(void 0,"normal"),f=0;f<p.length;f+=1)b.push(this.getTextDimensions(p[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[d]=Math.max.apply(null,b)+N+N,b=[]}if(S){var T={};for(h=0;h<g.length;h+=1)T[g[h]]={},T[g[h]].text=y[h],T[g[h]].align=m[h];var I=a.call(this,T,_);w=g.map((function(e){return new o(t,n,_[e],I,T[e].text,void 0,T[e].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var k=u.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(h=0;h<l.length;h+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:h,data:l[h]},this);var L=a.call(this,l[h],_);for(f=0;f<g.length;f+=1){var A=l[h][g[f]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:h,col:f,data:A},this),s.call(this,new o(t,n,_[g[f]],L,A,h+2,k[g[f]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var a=function(t,e){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(t).map((function(r){var i=t[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,e[r]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*r/i+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){r.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){i=this.internal.__cell__.tableHeaderRow[u].clone(),e&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=t;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,i),this.setTextColor(c)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(TL.API);var _A={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},bA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],wA=vA(bA),xA=[100,200,300,400,500,600,700,800,900],SA=vA(xA);function EA(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(t){return _A[t=t||"normal"]?t:"normal"}(t.style),r=function(t){return t?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400}(t.weight),i=function(t){return"number"==typeof wA[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function CA(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var NA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},PA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function OA(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function TA(t){return t.trimLeft()}function IA(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function MA(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var kA,LA,AA,RA=["times"];!function(t){var e,n,r,i,o,s,a,l,u,c=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new l,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new s,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new s,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(t){r=Boolean(t)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(t){isNaN(t)||(i=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),u.margin=e}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(t){s=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(t){t instanceof c&&(u=t)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(t){u.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=p(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=p(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var f=null;function d(t,e){if(null===f){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var r=null;switch(t){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:t},e.push(r))}))})),e}(t.getFontList());f=function(t){for(var e={},n=0;n<t.length;++n){var r=EA(t[n]),i=r.family,o=r.stretch,s=r.style,a=r.weight;e[i]=e[i]||{},e[i][o]=e[i][o]||{},e[i][o][s]=e[i][o][s]||{},e[i][o][s][a]=r}return e}(n.concat(e))}return f}var g=null;Object.defineProperty(this,"fontFaces",{get:function(){return g},set:function(t){f=null,g=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],r=(e[2],e[3]),i=e[4],o=(e[5],e[6]),s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===s?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var a=function(t){var e,n,r=[],i=t.trim();if(""===i)return RA;if(i in PA)return[PA[i]];for(;""!==i;){switch(n=null,e=(i=TA(i)).charAt(0)){case'"':case"'":n=IA(i.substring(1),e);break;default:n=MA(i)}if(null===n)return RA;if(r.push(n[0]),""!==(i=TA(n[1]))&&","!==i.charAt(0))return RA;i=i.replace(/^,/,"")}return r}(o);if(this.fontFaces){var l=function(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},NA,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=EA(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[r]))throw new Error("Could not find a font-family for the rule '"+OA(o)+"' and default family '"+r+"'.");if(s=function(t,e){if(e[t])return e[t];var n=wA[t],r=n<=wA.normal?-1:1,i=CA(e,bA,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+t);return i}(o.stretch,s),s=function(t,e){if(e[t])return e[t];for(var n=_A[t],r=0;r<n.length;++r)if(e[n[r]])return e[n[r]];throw new Error("Could not find a matching font-style for "+t)}(o.style,s),!(s=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=SA[t],r=CA(e,xA,n,t<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+t);return r}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+OA(o)+"'.");return s}(d(this.pdf,this.fontFaces),a.map((function(t){return{family:t,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var u="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(u="bold"),"italic"===n&&(u+="italic"),0===u.length&&(u="normal");for(var c="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},p=0;p<a.length;p++){if(void 0!==this.pdf.internal.getFont(a[p],u,{noFallback:!0,disableWarning:!0})){c=a[p];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(a[p],"bold",{noFallback:!0,disableWarning:!0}))c=a[p],u="bold";else if(void 0!==this.pdf.internal.getFont(a[p],"normal",{noFallback:!0,disableWarning:!0})){c=a[p],u="normal";break}}if(""===c)for(var f=0;f<a.length;f++)if(h[a[f]]){c=h[a[f]];break}c=""===c?"Times":c,this.pdf.setFont(c,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,D.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,D.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};h.prototype.setLineDash=function(t){this.lineDash=t},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw Jk.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new s(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(t,e)},h.prototype.closePath=function(){var t=new s(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===M(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new s(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(t.x,t.y)},h.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw Jk.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new s(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(t,e,n,r){if(isNaN(n)||isNaN(r)||isNaN(t)||isNaN(e))throw Jk.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new s(n,r)),o=this.ctx.transform.applyToPoint(new s(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new s(i.x,i.y)},h.prototype.bezierCurveTo=function(t,e,n,r,i,o){if(isNaN(i)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw Jk.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new s(i,o)),l=this.ctx.transform.applyToPoint(new s(t,e)),u=this.ctx.transform.applyToPoint(new s(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:u.x,y2:u.y,x:a.x,y:a.y}),this.ctx.lastPoint=new s(a.x,a.y)},h.prototype.arc=function(t,e,n,r,i,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i))throw Jk.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new s(t,e));t=a.x,e=a.y;var l=this.ctx.transform.applyToPoint(new s(0,n)),u=this.ctx.transform.applyToPoint(new s(0,0));n=Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,counterclockwise:o})},h.prototype.arcTo=function(t,e,n,r,i){throw new Error("arcTo not implemented.")},h.prototype.rect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw Jk.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},h.prototype.fillRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw Jk.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},h.prototype.strokeRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw Jk.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(t,e,n,r),this.stroke())},h.prototype.clearRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw Jk.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,r))},h.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(t){var e,n,r,i;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,r=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof t&&"#"!==t.charAt(0)){var s=new oL(t);t=s.ok?s.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:e,g:n,b:r,a:i,style:t}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},d=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw Jk.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!f.call(this)){var i=R(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;O.call(this,{text:t,x:e,y:n,scale:o,angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw Jk.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){r=isNaN(r)?void 0:r;var i=R(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;O.call(this,{text:t,x:e,y:n,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(t){if("string"!=typeof t)throw Jk.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,r=e.internal.getFontSize(),i=e.getStringUnitWidth(t)*r/e.internal.scaleFactor,o=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new o({width:i*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw Jk.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(t){if(isNaN(t))throw Jk.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new l(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},h.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw Jk.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(t,e,n,r,i,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o))throw Jk.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new l(t,e,n,r,i,o);this.ctx.transform=this.ctx.transform.multiply(s)},h.prototype.setTransform=function(t,e,n,r,i,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new l(t,e,n,r,i,o)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(t,e,n,r,i,o,s,u,c){var h=this.pdf.getImageProperties(t),p=1,f=1,d=1,m=1;void 0!==r&&void 0!==u&&(d=u/r,m=c/i,p=h.width/r*u/r,f=h.height/i*c/i),void 0===o&&(o=e,s=n,e=0,n=0),void 0!==r&&void 0===u&&(u=r,c=i),void 0===r&&void 0===u&&(u=h.width,c=h.height);for(var b,x=this.ctx.transform.decompose(),S=R(x.rotate.shx),E=new l,C=(E=(E=(E=E.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new a(o-e*d,s-n*m,r*p,i*f)),N=y.call(this,C),P=[],O=0;O<N.length;O+=1)-1===P.indexOf(N[O])&&P.push(N[O]);if(_(P),this.autoPaging)for(var T=P[0],I=P[P.length-1],M=T;M<I+1;M++){this.pdf.setPage(M);var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],L=1===M?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],j=1===M?0:A+(M-2)*F;if(0!==this.ctx.clip_path.length){var D=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-j+L+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=D}var z=JSON.parse(JSON.stringify(C));z=v([z],this.posX+this.margin[3],-j+L+this.ctx.prevPageLastElemOffset)[0];var q=(M>T||M<I)&&g.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,F,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",z.x,z.y,z.w,z.h,null,null,S),q&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",C.x,C.y,C.w,C.h,null,null,S)};var y=function(t,e,n){var r=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":r.push(Math.floor((t.y+i)/n)+1);break;case"arc":r.push(Math.floor((t.y+i-t.radius)/n)+1),r.push(Math.floor((t.y+i+t.radius)/n)+1);break;case"qct":var o=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"bct":var s=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);r.push(Math.floor((s.y+i)/n)+1),r.push(Math.floor((s.y+s.h+i)/n)+1);break;case"rect":r.push(Math.floor((t.y+i)/n)+1),r.push(Math.floor((t.y+t.h+i)/n)+1)}for(var a=0;a<r.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<r[a];)m.call(this);return r},m=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=o},v=function(t,e,n){for(var r=0;r<t.length;r++)switch(t[r].type){case"bct":t[r].x2+=e,t[r].y2+=n;case"qct":t[r].x1+=e,t[r].y1+=n;default:t[r].x+=e,t[r].y+=n}return t},_=function(t){return t.sort((function(t,e){return t-e}))},b=function(t,e){for(var n,r,i=this.fillStyle,o=this.strokeStyle,s=this.lineCap,a=this.lineWidth,l=Math.abs(a*this.ctx.transform.scaleX),u=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),p=[],f=0;f<h.length;f++)if(void 0!==h[f].x)for(var d=y.call(this,h[f]),b=0;b<d.length;b+=1)-1===p.indexOf(d[b])&&p.push(d[b]);for(var x=0;x<p.length;x++)for(;this.pdf.internal.getNumberOfPages()<p[x];)m.call(this);if(_(p),this.autoPaging)for(var S=p[0],E=p[p.length-1],C=S;C<E+1;C++){this.pdf.setPage(C),this.fillStyle=i,this.strokeStyle=o,this.lineCap=s,this.lineWidth=l,this.lineJoin=u;var N=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],P=1===C?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],I=1===C?0:O+(C-2)*T;if(0!==this.ctx.clip_path.length){var M=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-I+P+this.ctx.prevPageLastElemOffset),w.call(this,t,!0),this.path=M}if(r=JSON.parse(JSON.stringify(c)),this.path=v(r,this.posX+this.margin[3],-I+P+this.ctx.prevPageLastElemOffset),!1===e||0===C){var k=(C>S||C<E)&&g.call(this);k&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],N,T,null).clip().discardPath()),w.call(this,t,e),k&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=l,w.call(this,t,e),this.lineWidth=a;this.path=c},w=function(t,e){if(("stroke"!==t||e||!d.call(this))&&("stroke"===t||e||!f.call(this))){for(var n,r,i=[],o=this.path,s=0;s<o.length;s++){var a=o[s];switch(a.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:a,deltas:[],abs:[]});break;case"lt":var l=i.length;if(o[s-1]&&!isNaN(o[s-1].x)&&(n=[a.x-o[s-1].x,a.y-o[s-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(a);break}break;case"bct":n=[a.x1-o[s-1].x,a.y1-o[s-1].y,a.x2-o[s-1].x,a.y2-o[s-1].y,a.x-o[s-1].x,a.y-o[s-1].y],i[i.length-1].deltas.push(n);break;case"qct":var u=o[s-1].x+2/3*(a.x1-o[s-1].x),c=o[s-1].y+2/3*(a.y1-o[s-1].y),h=a.x+2/3*(a.x1-a.x),p=a.y+2/3*(a.y1-a.y),g=a.x,y=a.y;n=[u-o[s-1].x,c-o[s-1].y,h-o[s-1].x,p-o[s-1].y,g-o[s-1].x,y-o[s-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(a)}}r=e?null:"stroke"===t?"stroke":"fill";for(var m=!1,v=0;v<i.length;v++)if(i[v].arc)for(var _=i[v].abs,b=0;b<_.length;b++){var w=_[b];"arc"===w.type?E.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,e,!m):T.call(this,w.x,w.y),m=!0}else if(!0===i[v].close)this.pdf.internal.out("h"),m=!1;else if(!0!==i[v].begin){var x=i[v].start.x,S=i[v].start.y;I.call(this,i[v].deltas,x,S),m=!0}r&&C.call(this,r),e&&N.call(this)}},x=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;default:return t}},S=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(t,e,n,r,i,o,s,a,l){for(var u=L.call(this,n,r,i,o),c=0;c<u.length;c++){var h=u[c];0===c&&(l?P.call(this,h.x1+t,h.y1+e):T.call(this,h.x1+t,h.y1+e)),k.call(this,t,e,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}a?N.call(this):C.call(this,s)},C=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},N=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(t,e){this.pdf.internal.out(n(t)+" "+r(e)+" m")},O=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;default:e="left"}var n=this.pdf.getTextDimensions(t.text),r=x.call(this,t.y),i=S.call(this,r)-n.h,o=this.ctx.transform.applyToPoint(new s(t.x,r)),u=this.ctx.transform.decompose(),c=new l;c=(c=(c=c.multiply(u.translate)).multiply(u.skew)).multiply(u.scale);for(var h,p,f,d=this.ctx.transform.applyToRectangle(new a(t.x,r,n.w,n.h)),m=c.applyToRectangle(new a(t.x,i,n.w,n.h)),b=y.call(this,m),E=[],C=0;C<b.length;C+=1)-1===E.indexOf(b[C])&&E.push(b[C]);if(_(E),this.autoPaging)for(var N=E[0],P=E[E.length-1],O=N;O<P+1;O++){this.pdf.setPage(O);var T=1===O?this.posY+this.margin[0]:this.margin[0],I=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[2],k=M-this.margin[0],L=this.pdf.internal.pageSize.width-this.margin[1],A=L-this.margin[3],R=1===O?0:I+(O-2)*k;if(0!==this.ctx.clip_path.length){var F=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(h,this.posX+this.margin[3],-1*R+T),w.call(this,"fill",!0),this.path=F}var j=v([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-R+T+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(p=this.pdf.internal.getFontSize(),this.pdf.setFontSize(p*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale);var D="text"!==this.autoPaging;if(D||j.y+j.h<=M){if(D||j.y>=T&&j.x<=L){var z=D?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||L-j.x)[0],q=v([JSON.parse(JSON.stringify(d))],this.posX+this.margin[3],-R+T+this.ctx.prevPageLastElemOffset)[0],B=D&&(O>N||O<P)&&g.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],A,k,null).clip().discardPath()),this.pdf.text(z,q.x,q.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),B&&this.pdf.restoreGraphicsState()}}else j.y<M&&(this.ctx.prevPageLastElemOffset+=M-j.y);t.scale>=.01&&(this.pdf.setFontSize(p),this.lineWidth=f)}else t.scale>=.01&&(p=this.pdf.internal.getFontSize(),this.pdf.setFontSize(p*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale),this.pdf.text(t.text,o.x+this.posX,o.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(p),this.lineWidth=f)},T=function(t,e,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(t+i)+" "+r(e+o)+" l")},I=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},k=function(t,n,r,s,a,l,u,c){this.pdf.internal.out([e(i(r+t)),e(o(s+n)),e(i(a+t)),e(o(l+n)),e(i(u+t)),e(o(c+n)),"c"].join(" "))},L=function(t,e,n,r){for(var i=2*Math.PI,o=Math.PI/2;e>n;)e-=i;var s=Math.abs(n-e);s<i&&r&&(s=i-s);for(var a=[],l=r?-1:1,u=e;s>1e-5;){var c=u+l*Math.min(s,o);a.push(A.call(this,t,u,c)),s-=Math.abs(c-u),u=c}return a},A=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),o=t*Math.sin(r),s=i,a=-o,l=s*s+a*a,u=l+s*i+a*o,c=4/3*(Math.sqrt(2*l*u)-u)/(s*o-a*i),h=s-c*a,p=a+c*s,f=h,d=-p,g=r+e,y=Math.cos(g),m=Math.sin(g);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*y-p*m,y2:h*m+p*y,x3:f*y-d*m,y3:f*m+d*y,x4:t*Math.cos(n),y4:t*Math.sin(n)}},R=function(t){return 180*t/Math.PI},F=function(t,e,n,r,i,o){var s=t+.5*(n-t),l=e+.5*(r-e),u=i+.5*(n-i),c=o+.5*(r-o),h=Math.min(t,i,s,u),p=Math.max(t,i,s,u),f=Math.min(e,o,l,c),d=Math.max(e,o,l,c);return new a(h,f,p-h,d-f)},j=function(t,e,n,r,i,o,s,l){var u,c,h,p,f,d,g,y,m,v,_,b,w,x,S=n-t,E=r-e,C=i-n,N=o-r,P=s-i,O=l-o;for(c=0;c<41;c++)m=(g=(h=t+(u=c/40)*S)+u*((f=n+u*C)-h))+u*(f+u*(i+u*P-f)-g),v=(y=(p=e+u*E)+u*((d=r+u*N)-p))+u*(d+u*(o+u*O-d)-y),0==c?(_=m,b=v,w=m,x=v):(_=Math.min(_,m),b=Math.min(b,v),w=Math.max(w,m),x=Math.max(x,v));return new a(Math.round(_),Math.round(b),Math.round(w-_),Math.round(x-b))},D=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(TL.API),function(t){var e=function(t){var e,n,r,i,o,s,a,l,u,c;for(/[^\x00-\xFF]/.test(t),n=[],r=0,i=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;i>r;r+=4)0!==(o=(t.charCodeAt(r)<<24)+(t.charCodeAt(r+1)<<16)+(t.charCodeAt(r+2)<<8)+t.charCodeAt(r+3))?(s=(o=((o=((o=((o=(o-(c=o%85))/85)-(u=o%85))/85)-(l=o%85))/85)-(a=o%85))/85)%85,n.push(s+33,a+33,l+33,u+33,c+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,r,i,o,s=String,a="length",l=255,u="charCodeAt",c="slice",h="replace";for(t[c](-2),t=t[c](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,o=(t+=e="uuuuu"[c](t[a]%5||5))[a];o>i;i+=5)n=52200625*(t[u](i)-33)+614125*(t[u](i+1)-33)+7225*(t[u](i+2)-33)+85*(t[u](i+3)-33)+(t[u](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(r,e[a]),s.fromCharCode.apply(s,r)},r=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",r=0;r<t.length;r+=2)n+=String.fromCharCode("0x"+(t[r]+t[r+1]));return n},i=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=Xk(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,o){var s=0,a=t||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":a=n(a),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=r(a),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=a.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=i(a),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:a,reverseChain:l.reverse().join(" ")}}}(TL.API),function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(t,e,n){var r=new XMLHttpRequest,i=0,o=function(t){var e=t.length,n=[],r=String.fromCharCode;for(i=0;i<e;i+=1)n.push(r(255&t.charCodeAt(i)));return n.join("")};if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){200===r.status?n(o(this.responseText)):n(void 0)}),r.send(null),e&&200===r.status)return o(r.responseText)}(t,e,n)}catch(t){}return r}(t,e,n)},t.loadImageFile=t.loadFile}(TL.API),function(t){function e(){return(Zk.html2canvas?Promise.resolve(Zk.html2canvas):__webpack_require__.e(120).then(__webpack_require__.t.bind(__webpack_require__,1120,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function n(){return(Zk.DOMPurify?Promise.resolve(Zk.DOMPurify):__webpack_require__.e(856).then(__webpack_require__.t.bind(__webpack_require__,7856,23))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var r=function(t){var e=M(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},i=function(t,e){var n=document.createElement(t);for(var r in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[r]=e.style[r];return n},o=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),n);return(r=r.setProgress(1,t,1,[t])).set(e)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(t,e){return t.__proto__=e||o.prototype,t},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(r(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(n).then((function(e){return this.set({src:i("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var r=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(t(i,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(r.value=e.value),r.addEventListener("load",(function(){r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var s=n[o],a=s.src.find((function(t){return"truetype"===t.format}));a&&e.addFont(a.url,s.ref.name,s.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,e.context2d.save(!0),t(this.prop.container,i)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},o.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},o.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},o.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(t){if("object"!==r(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in o.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},o.prototype.get=function(t,e){return this.then((function(){var n=t in o.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},o.prototype.setMargin=function(t){return this.then((function(){switch(r(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},o.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||TL.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},o.prototype.setProgress=function(t,e,n,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(t,e,n,r){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},o.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),i=n.call(r,t,e);return o.convert(i,this.__proto__)},o.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},o.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},o.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return o.convert(e,this)},o.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},o.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,TL.getPageSize=function(t,e,n){if("object"===M(t)){var r=t;t=r.orientation,e=r.unit||e,n=r.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var i,o=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+e}var a,l=0,u=0;if(s.hasOwnProperty(o))l=s[o][1]/i,u=s[o][0]/i;else try{l=n[1],u=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",u>l&&(a=u,u=l,l=a);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",l>u&&(a=u,u=l,l=a)}return{width:u,height:l,unit:e,k:i,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(EA):null;var n=new o(e);return e.worker?n:n.from(t).doCallback()}}(TL.API),TL.API.addJS=function(t){return AA=t,this.internal.events.subscribe("postPutResources",(function(){kA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kA+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),LA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+AA+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==kA&&void 0!==LA&&this.internal.out("/Names <</JavaScript "+kA+" 0 R>>")})),this},function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],s=n.exec(o);if(null!=s){var a=s[1];t.internal.newObjectDeferredBegin(a,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(i=0;i<l;i++){var c=t.internal.newObject();u.push(c);var h=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<u.length;i++)t.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<e.children.length;r++){var i=e.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(e)),r>0&&this.line("/Prev "+this.makeRef(e.children[r-1])),r<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var s=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(TL.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,r,i,o,s){var a,l=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var n,r=256*t.charCodeAt(4)+t.charCodeAt(5),i=t.length,o={width:0,height:0,numcomponents:1},s=4;s<i;s+=2){if(s+=r,-1!==e.indexOf(t.charCodeAt(s+1))){n=256*t.charCodeAt(s+5)+t.charCodeAt(s+6),o={width:256*t.charCodeAt(s+7)+t.charCodeAt(s+8),height:n,numcomponents:t.charCodeAt(s+9)};break}r=256*t.charCodeAt(s+2)+t.charCodeAt(s+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:t,width:a.width,height:a.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:r}}return u}}(TL.API);var FA,jA,DA,zA,qA,BA=function(){var t,e,n;function r(t){var e,n,r,i,o,s,a,l,u,c,h,p,f,d;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(e=this.readUInt32(),u=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,s.delay=1e3*o/i,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=s?s.data:void 0)||this.imgData,p=0;0<=e?p<e:p>e;0<=e?++p:--p)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((c=r-this.transparency.indexed.length)>0)for(f=0;0<=c?f<c:f>c;0<=c?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(h=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,a)),this.text[l]=String.fromCharCode.apply(String,h.slice(a+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),r=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,s,a,l){var u,c,h,p,f,d,g,y,m,v,_,b,w,x,S,E,C,N,P,O,T,I=Math.ceil((i.width-o)/a),M=Math.ceil((i.height-s)/l),k=i.width==I&&i.height==M;for(x=e*I,b=k?n:new Uint8Array(x*M),d=t.length,w=0,c=0;w<M&&r<d;){switch(t[r++]){case 0:for(p=C=0;C<x;p=C+=1)b[c++]=t[r++];break;case 1:for(p=N=0;N<x;p=N+=1)u=t[r++],f=p<e?0:b[c-e],b[c++]=(u+f)%256;break;case 2:for(p=P=0;P<x;p=P+=1)u=t[r++],h=(p-p%e)/e,S=w&&b[(w-1)*x+h*e+p%e],b[c++]=(S+u)%256;break;case 3:for(p=O=0;O<x;p=O+=1)u=t[r++],h=(p-p%e)/e,f=p<e?0:b[c-e],S=w&&b[(w-1)*x+h*e+p%e],b[c++]=(u+Math.floor((f+S)/2))%256;break;case 4:for(p=T=0;T<x;p=T+=1)u=t[r++],h=(p-p%e)/e,f=p<e?0:b[c-e],0===w?S=E=0:(S=b[(w-1)*x+h*e+p%e],E=h&&b[(w-1)*x+(h-1)*e+p%e]),g=f+S-E,y=Math.abs(g-f),v=Math.abs(g-S),_=Math.abs(g-E),m=y<=v&&y<=_?f:v<=_?S:E,b[c++]=(u+m)%256;break;default:throw new Error("Invalid filter algorithm: "+t[r-1])}if(!k){var L=((s+w*l)*i.width+o)*e,A=w*x;for(p=0;p<I;p+=1){for(var R=0;R<e;R+=1)n[L++]=b[A++];L+=(a-1)*e}}w++}}return t=Kk(t),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},r.prototype.decodePalette=function(){var t,e,n,r,i,o,s,a,l;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,t=0,e=s=0,a=n.length;s<a;e=s+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(l=o[t++])?l:255;return i},r.prototype.copyToImageData=function(t,e){var n,r,i,o,s,a,l,u,c,h,p;if(r=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(p=this._decodedPalette)?p:this._decodedPalette=this.decodePalette(),r=4,n=!0),u=(i=t.data||t).length,s=c||e,o=a=0,1===r)for(;o<u;)l=c?4*e[o/4]:a,h=s[l++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?s[l++]:255,a=l;else for(;o<u;)l=c?4*e[o/4]:a,i[o++]=s[l++],i[o++]=s[l++],i[o++]=s[l++],i[o++]=n?s[l++]:255,a=l},r.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var i=function(){if("[object Window]"===Object.prototype.toString.call(Zk)){try{e=Zk.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return i(),t=function(t){var r;if(!0===i())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(r=new Image).src=e.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(e){var n,r,i,o,s,a,l,u;if(this.animation){for(u=[],r=s=0,a=(l=this.animation.frames).length;s<a;r=++s)n=l[r],i=e.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,o),n.imageData=i,u.push(n.image=t(i));return u}},r.prototype.renderFrame=function(t,e){var n,r,i;return n=(r=this.animation.frames)[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(t){var e,n,r,i,o,s,a=this;return n=0,s=this.animation,i=s.numFrames,r=s.frames,o=s.numPlays,(e=function(){var s,l;if(s=n++%i,l=r[s],a.renderFrame(t,s),i>1&&n/i<o)return a.animation._timeout=setTimeout(e,l.delay)})()},r.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},r.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},r}();function GA(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var u=!0,c=[],h=0,p=null,f=0,d=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,d=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(0===P)break;e+=P}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var g=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],0==(1&g)&&(p=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(0===P)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,b=t[e++],w=b>>6&1,x=1<<1+(7&b),S=a,E=l,C=!1;b>>7&&(C=!0,S=e,E=x,e+=3*x);var N=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(0===P)break;e+=P}c.push({x:y,y:m,width:v,height:_,has_local_palette:C,palette_offset:S,palette_size:E,data_offset:N,data_length:e-N,transparent_index:p,interlaced:!!w,delay:h,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return d},this.frameInfo=function(t){if(t<0||t>=c.length)throw new Error("Frame index out of range.");return c[t]},this.decodeAndBlitFrameBGRA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,s=new Uint8Array(o);UA(t,i.data_offset,s,o);var a=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=n-u,h=u,p=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),d=p,g=4*c;!0===i.interlaced&&(g+=4*n*7);for(var y=8,m=0,v=s.length;m<v;++m){var _=s[m];if(0===h&&(h=u,(d+=g)>=f&&(g=4*c+4*n*(y-1),d=p+(u+c)*(y<<1),y>>=1)),_===l)d+=4;else{var b=t[a+3*_],w=t[a+3*_+1],x=t[a+3*_+2];r[d++]=x,r[d++]=w,r[d++]=b,r[d++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,s=new Uint8Array(o);UA(t,i.data_offset,s,o);var a=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=n-u,h=u,p=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),d=p,g=4*c;!0===i.interlaced&&(g+=4*n*7);for(var y=8,m=0,v=s.length;m<v;++m){var _=s[m];if(0===h&&(h=u,(d+=g)>=f&&(g=4*c+4*n*(y-1),d=p+(u+c)*(y<<1),y>>=1)),_===l)d+=4;else{var b=t[a+3*_],w=t[a+3*_+1],x=t[a+3*_+2];r[d++]=b,r[d++]=w,r[d++]=x,r[d++]=255}--h}}}function UA(t,e,n,r){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,l=i+1,u=(1<<l)-1,c=0,h=0,p=0,f=t[e++],d=new Int32Array(4096),g=null;;){for(;c<16&&0!==f;)h|=t[e++]<<c,c+=8,1===f?f=t[e++]:--f;if(c<l)break;var y=h&u;if(h>>=l,c-=l,y!==o){if(y===s)break;for(var m=y<a?y:g,v=0,_=m;_>o;)_=d[_]>>8,++v;var b=_;if(p+v+(m!==y?1:0)>r)return void Jk.log("Warning, gif stream longer than expected.");n[p++]=b;var w=p+=v;for(m!==y&&(n[p++]=b),_=m;v--;)_=d[_],n[--w]=255&_,_>>=8;null!==g&&a<4096&&(d[a++]=g<<8|b,a>=u+1&&l<12&&(++l,u=u<<1|1)),g=y}else a=s+1,u=(1<<(l=i+1))-1,g=null}return p!==r&&Jk.log("Warning, gif stream shorter than expected."),n}function VA(t){var e,n,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),p=new Array(65535),f=new Array(64),d=new Array(64),g=[],y=0,m=7,v=new Array(64),_=new Array(64),b=new Array(64),w=new Array(256),x=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function k(t,e){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var s=1;s<=t[o];s++)i[e[r]]=[],i[e[r]][0]=n,i[e[r]][1]=o,r++,n++;n*=2}return i}function L(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(y|=1<<m),n--,--m<0&&(255==y?(A(255),A(0)):A(y),m=7,y=0)}function A(t){g.push(t)}function R(t){A(t>>8&255),A(255&t)}function F(t,e,n,r,i){for(var o,s=i[0],a=i[240],l=function(t,e){var n,r,i,o,s,a,l,u,c,h,p=0;for(c=0;c<8;++c){n=t[p],r=t[p+1],i=t[p+2],o=t[p+3],s=t[p+4],a=t[p+5],l=t[p+6];var d=n+(u=t[p+7]),g=n-u,y=r+l,m=r-l,v=i+a,_=i-a,b=o+s,w=o-s,x=d+b,S=d-b,E=y+v,C=y-v;t[p]=x+E,t[p+4]=x-E;var N=.707106781*(C+S);t[p+2]=S+N,t[p+6]=S-N;var P=.382683433*((x=w+_)-(C=m+g)),O=.5411961*x+P,T=1.306562965*C+P,I=.707106781*(E=_+m),M=g+I,k=g-I;t[p+5]=k+O,t[p+3]=k-O,t[p+1]=M+T,t[p+7]=M-T,p+=8}for(p=0,c=0;c<8;++c){n=t[p],r=t[p+8],i=t[p+16],o=t[p+24],s=t[p+32],a=t[p+40],l=t[p+48];var L=n+(u=t[p+56]),A=n-u,R=r+l,F=r-l,j=i+a,D=i-a,z=o+s,q=o-s,B=L+z,G=L-z,U=R+j,V=R-j;t[p]=B+U,t[p+32]=B-U;var W=.707106781*(V+G);t[p+16]=G+W,t[p+48]=G-W;var H=.382683433*((B=q+D)-(V=F+A)),Y=.5411961*B+H,X=1.306562965*V+H,K=.707106781*(U=D+F),Z=A+K,$=A-K;t[p+40]=$+Y,t[p+24]=$-Y,t[p+8]=Z+X,t[p+56]=Z-X,p++}for(c=0;c<64;++c)h=t[c]*e[c],f[c]=h>0?h+.5|0:h-.5|0;return f}(t,e),u=0;u<64;++u)d[S[u]]=l[u];var c=d[0]-n;n=d[0],0==c?L(r[0]):(L(r[p[o=32767+c]]),L(h[o]));for(var g=63;g>0&&0==d[g];)g--;if(0==g)return L(s),n;for(var y,m=1;m<=g;){for(var v=m;0==d[m]&&m<=g;)++m;var _=m-v;if(_>=16){y=_>>4;for(var b=1;b<=y;++b)L(a);_&=15}o=32767+d[m],L(i[(_<<4)+p[o]]),L(h[o]),m++}return 63!=g&&L(s),n}function j(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=s((e[n]*t+50)/100);r=Math.min(Math.max(r,1),255),a[S[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=s((i[o]*t+50)/100);h=Math.min(Math.max(h,1),255),l[S[o]]=h}for(var p=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,d=0;d<8;d++)for(var g=0;g<8;g++)u[f]=1/(a[S[f]]*p[d]*p[g]*8),c[f]=1/(l[S[f]]*p[d]*p[g]*8),f++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){o&&j(o),g=new Array,y=0,m=7,R(65496),R(65504),R(16),A(74),A(70),A(73),A(70),A(0),A(1),A(1),A(0),R(1),R(1),A(0),A(0),function(){R(65499),R(132),A(0);for(var t=0;t<64;t++)A(a[t]);A(1);for(var e=0;e<64;e++)A(l[e])}(),function(t,e){R(65472),R(17),A(8),R(e),R(t),A(3),A(1),A(17),A(0),A(2),A(17),A(1),A(3),A(17),A(1)}(t.width,t.height),function(){R(65476),R(418),A(0);for(var t=0;t<16;t++)A(E[t+1]);for(var e=0;e<=11;e++)A(C[e]);A(16);for(var n=0;n<16;n++)A(N[n+1]);for(var r=0;r<=161;r++)A(P[r]);A(1);for(var i=0;i<16;i++)A(O[i+1]);for(var o=0;o<=11;o++)A(T[o]);A(17);for(var s=0;s<16;s++)A(I[s+1]);for(var a=0;a<=161;a++)A(M[a])}(),R(65498),R(12),A(3),A(1),A(0),A(2),A(17),A(3),A(17),A(0),A(63),A(0);var s=0,h=0,p=0;y=0,m=7,this.encode.displayName="_encode_";for(var f,d,w,S,k,D,z,q,B,G=t.data,U=t.width,V=t.height,W=4*U,H=0;H<V;){for(f=0;f<W;){for(k=W*H+f,z=-1,q=0,B=0;B<64;B++)D=k+(q=B>>3)*W+(z=4*(7&B)),H+q>=V&&(D-=W*(H+1+q-V)),f+z>=W&&(D-=f+z-W+4),d=G[D++],w=G[D++],S=G[D++],v[B]=(x[d]+x[w+256>>0]+x[S+512>>0]>>16)-128,_[B]=(x[d+768>>0]+x[w+1024>>0]+x[S+1280>>0]>>16)-128,b[B]=(x[d+1280>>0]+x[w+1536>>0]+x[S+1792>>0]>>16)-128;s=F(v,u,s,e,r),h=F(_,c,h,n,i),p=F(b,c,p,n,i),f+=32}H+=8}if(m>=0){var Y=[];Y[1]=m+1,Y[0]=(1<<m+1)-1,L(Y)}return R(65497),new Uint8Array(g)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)w[e]=t(e)}(),e=k(E,C),n=k(O,T),r=k(N,P),i=k(I,M),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)p[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(e-1);i<=-t;i++)p[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256>>0]=38470*t,x[t+512>>0]=7471*t+32768,x[t+768>>0]=-11059*t,x[t+1024>>0]=-21709*t,x[t+1280>>0]=32768*t+8421375,x[t+1536>>0]=-27439*t,x[t+1792>>0]=-5329*t}(),j(t)}function WA(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function HA(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var r=0;4>r;r++)if(t[e+r]!=n.charCodeAt(r))return!0;return!1}function r(t,e,n,r,i){for(var o=0;o<i;o++)t[e+o]=n[r+o]}function i(t,e,n,r){for(var i=0;i<r;i++)t[e+i]=n}function o(t){return new Int32Array(t)}function s(t,e){for(var n=[],r=0;r<t;r++)n.push(new e);return n}function a(t,e){var n=[];return function t(n,r,i){for(var o=i[r],s=0;s<o&&(n.push(i.length>r+1?[]:new e),!(i.length<r+1));s++)t(n[s],r+1,i)}(n,0,t),n}var l=function(){var t=this;function l(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function u(t,n,r,i,o){e(!(i%r));do{t[n+(i-=r)]=o}while(0<i)}function c(t,n,r,i,s){if(e(2328>=s),512>=s)var a=o(512);else if(null==(a=o(s)))return 0;return function(t,n,r,i,s,a){var c,p,f=n,d=1<<r,g=o(16),y=o(16);for(e(0!=s),e(null!=i),e(null!=t),e(0<r),p=0;p<s;++p){if(15<i[p])return 0;++g[i[p]]}if(g[0]==s)return 0;for(y[1]=0,c=1;15>c;++c){if(g[c]>1<<c)return 0;y[c+1]=y[c]+g[c]}for(p=0;p<s;++p)c=i[p],0<i[p]&&(a[y[c]++]=p);if(1==y[15])return(i=new h).g=0,i.value=a[0],u(t,f,1,d,i),d;var m,v=-1,_=d-1,b=0,w=1,x=1,S=1<<r;for(p=0,c=1,s=2;c<=r;++c,s<<=1){if(w+=x<<=1,0>(x-=g[c]))return 0;for(;0<g[c];--g[c])(i=new h).g=c,i.value=a[p++],u(t,f+b,s,S,i),b=l(b,c)}for(c=r+1,s=2;15>=c;++c,s<<=1){if(w+=x<<=1,0>(x-=g[c]))return 0;for(;0<g[c];--g[c]){if(i=new h,(b&_)!=v){for(f+=S,m=1<<(v=c)-r;15>v&&!(0>=(m-=g[v]));)++v,m<<=1;d+=S=1<<(m=v-r),t[n+(v=b&_)].g=m+r,t[n+v].value=f-n-v}i.g=c-r,i.value=a[p++],u(t,f+(b>>r),s,S,i),b=l(b,c)}}return w!=2*y[15]-1?0:d}(t,n,r,i,s,a)}function h(){this.value=this.g=0}function p(){this.value=this.g=0}function f(){this.G=s(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(zn,p)}function d(t,n,r,i){e(null!=t),e(null!=n),e(2147483648>i),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=r,t.Jd=n,t.Yc=r+i,t.Zc=4<=i?r+i-4+1:r,N(t)}function g(t,e){for(var n=0;0<e--;)n|=O(t,128)<<e;return n}function y(t,e){var n=g(t,e);return P(t)?-n:n}function m(t,n,r,i){var o,s=0;for(e(null!=t),e(null!=n),e(4294967288>i),t.Sb=i,t.Ra=0,t.u=0,t.h=0,4<i&&(i=4),o=0;o<i;++o)s+=n[r+o]<<8*o;t.Ra=s,t.bb=i,t.oa=n,t.pa=r}function v(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Gn-8>>>0,++t.bb,t.u-=8;S(t)&&(t.h=1,t.u=0)}function _(t,n){if(e(0<=n),!t.h&&n<=Bn){var r=x(t)&qn[n];return t.u+=n,v(t),r}return t.h=1,t.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(t){return t.Ra>>>(t.u&Gn-1)>>>0}function S(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Gn}function E(t,e){t.u=e,t.h=S(t)}function C(t){t.u>=Un&&(e(t.u>=Un),v(t))}function N(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function P(t){return g(t,1)}function O(t,e){var n=t.Ca;0>t.b&&N(t);var r=t.b,i=n*e>>>8,o=(t.I>>>r>i)+0;for(o?(n-=i,t.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Vn[r],t.b-=r,t.Ca=(n<<r)-1,o}function T(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function I(t,e){return t[e+0]<<0|t[e+1]<<8}function M(t,e){return I(t,e)|t[e+2]<<16}function k(t,e){return I(t,e)|I(t,e+2)<<16}function L(t,n){var r=1<<n;return e(null!=t),e(0<n),t.X=o(r),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function A(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),r(n.X,0,t.X,0,1<<n.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function F(t,n,r,i){e(null!=r),e(null!=i);var o=r[0],s=i[0];return 0==o&&(o=(t*s+n/2)/n),0==s&&(s=(n*o+t/2)/t),0>=o||0>=s?0:(r[0]=o,i[0]=s,1)}function j(t,e){return t+(1<<e)-1>>>e}function D(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function z(e,n){t[n]=function(n,r,i,o,s,a,l){var u;for(u=0;u<s;++u){var c=t[e](a[l+u-1],i,o+u);a[l+u]=D(n[r+u],c)}}}function q(){this.ud=this.hd=this.jd=0}function B(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function G(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function U(t,e){return G(t+(t-e+.5>>1))}function V(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function W(t,e,n,r,i,o,s){for(r=o[s-1],n=0;n<i;++n)o[s+n]=r=D(t[e+n],r)}function H(t,e,n,r,i){var o;for(o=0;o<n;++o){var s=t[e+o],a=s>>8&255,l=16711935&(l=(l=16711935&s)+((a<<16)+a));r[i+o]=(4278255360&s)+l>>>0}}function Y(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function X(t,e,n,r,i,o){var s;for(s=0;s<r;++s){var a=e[n+s],l=a>>>8,u=a,c=255&(c=(c=a>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));u=255&(u=(u+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(c<<24>>24)>>>5)),i[o+s]=(4278255360&a)+(c<<16)+u}}function K(e,n,r,i,o){t[n]=function(t,e,n,r,s,a,l,u,c){for(r=l;r<u;++r)for(l=0;l<c;++l)s[a++]=o(n[i(t[e++])])},t[e]=function(e,n,s,a,l,u,c){var h=8>>e.b,p=e.Ea,f=e.K[0],d=e.w;if(8>h)for(e=(1<<e.b)-1,d=(1<<h)-1;n<s;++n){var g,y=0;for(g=0;g<p;++g)g&e||(y=i(a[l++])),u[c++]=o(f[y&d]),y>>=h}else t["VP8LMapColor"+r](a,l,f,d,u,c,n,s,p)}}function Z(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255}}function $(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255,r[i++]=o>>24&255}}function J(t,e,n,r,i){for(n=e+n;e<n;){var o=(s=t[e++])>>16&240|s>>12&15,s=s>>0&240|s>>28&15;r[i++]=o,r[i++]=s}}function Q(t,e,n,r,i){for(n=e+n;e<n;){var o=(s=t[e++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;r[i++]=o,r[i++]=s}}function tt(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>0&255,r[i++]=o>>8&255,r[i++]=o>>16&255}}function et(t,e,n,i,o,s){if(0==s)for(n=e+n;e<n;)T(i,((s=t[e++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),o+=32;else r(i,o,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function rt(t){return t==Ur||t==Vr||t==Wr||t==Hr}function it(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function st(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new ot,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ct(t,e){var n=t.T,i=e.ba.f.RGBA,o=i.eb,s=i.fb+t.ka*i.A,a=mi[e.ba.S],l=t.y,u=t.O,c=t.f,h=t.N,p=t.ea,f=t.W,d=e.cc,g=e.dc,y=e.Mc,m=e.Nc,v=t.ka,_=t.ka+t.T,b=t.U,w=b+1>>1;for(0==v?a(l,u,null,null,c,h,p,f,c,h,p,f,o,s,null,null,b):(a(e.ec,e.fc,l,u,d,g,y,m,c,h,p,f,o,s-i.A,o,s,b),++n);v+2<_;v+=2)d=c,g=h,y=p,m=f,h+=t.Rc,f+=t.Rc,s+=2*i.A,a(l,(u+=2*t.fa)-t.fa,l,u,d,g,y,m,c,h,p,f,o,s-i.A,o,s,b);return u+=t.fa,t.j+_<t.o?(r(e.ec,e.fc,l,u,b),r(e.cc,e.dc,c,h,w),r(e.Mc,e.Nc,p,f,w),n--):1&_||a(l,u,null,null,c,h,p,f,c,h,p,f,o,s+i.A,null,null,b),n}function ht(t,n,r){var i=t.F,o=[t.J];if(null!=i){var s=t.U,a=n.ba.S,l=a==qr||a==Wr;n=n.ba.f.RGBA;var u=[0],c=t.ka;u[0]=t.T,t.Kb&&(0==c?--u[0]:(--c,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(u[0]=t.o-t.j-c));var h=n.eb;c=n.fb+c*n.A,t=Cr(i,o[0],t.width,s,u,h,c+(l?0:3),n.A),e(r==u),t&&rt(a)&&Sr(h,c,l,s,u,n.A)}return 0}function pt(t){var e=t.ma,n=e.ba.S,r=11>n,i=n==jr||n==zr||n==qr||n==Br||12==n||rt(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Fn(e.Oa,t,i?11:12))return 0;if(i&&rt(n)&&_n(),t.da)alert("todo:use_scaling");else{if(r){if(e.Ib=ut,t.Kb){if(n=t.U+1>>1,e.memory=o(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ct,_n()}}else alert("todo:EmitYUV");i&&(e.Jb=ht,r&&mn())}if(r&&!Mi){for(t=0;256>t;++t)ki[t]=89858*(t-128)+Ni>>Ci,Ri[t]=-22014*(t-128)+Ni,Ai[t]=-45773*(t-128),Li[t]=113618*(t-128)+Ni>>Ci;for(t=Pi;t<Oi;++t)e=76283*(t-16)+Ni>>Ci,Fi[t-Pi]=Wt(e,255),ji[t-Pi]=Wt(e+8>>4,15);Mi=1}return 1}function ft(t){var n=t.ma,r=t.U,i=t.T;return e(!(1&t.ka)),0>=r||0>=i?0:(r=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,r),n.Dc+=r,1)}function dt(t){t.ma.memory=null}function gt(t,e,n,r){return 47!=_(t,8)?0:(e[0]=_(t,14)+1,n[0]=_(t,14)+1,r[0]=_(t,1),0!=_(t,3)?0:!t.h)}function yt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+_(e,n)+1}function mt(t,e){return 120<e?e-120:1<=(n=((n=Jr[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function vt(t,e,n){var r=x(n),i=t[e+=255&r].g-8;return 0<i&&(E(n,n.u+8),r=x(n),e+=t[e].value,e+=r&(1<<i)-1),E(n,n.u+t[e].g),t[e].value}function _t(t,n,r){return r.g+=t.g,r.value+=t.value<<n>>>0,e(8>=r.g),t.g}function bt(t,n,r){var i=t.xc;return e((n=0==i?0:t.vc[t.md*(r>>i)+(n>>i)])<t.Wb),t.Ya[n]}function wt(t,n,i,o){var s=t.ab,a=t.c*n,l=t.C;n=l+n;var u=i,c=o;for(o=t.Ta,i=t.Ua;0<s--;){var h=t.gc[s],p=l,f=n,d=u,g=c,y=(c=o,u=i,h.Ea);switch(e(p<f),e(f<=h.nc),h.hc){case 2:Yn(d,g,(f-p)*y,c,u);break;case 0:var m=p,v=f,_=c,b=u,w=(N=h).Ea;0==m&&(Wn(d,g,null,null,1,_,b),W(d,g+1,0,0,w-1,_,b+1),g+=w,b+=w,++m);for(var x=1<<N.b,S=x-1,E=j(w,N.b),C=N.K,N=N.w+(m>>N.b)*E;m<v;){var P=C,O=N,T=1;for(Hn(d,g,_,b-w,1,_,b);T<w;){var I=(T&~S)+x;I>w&&(I=w),(0,Jn[P[O++]>>8&15])(d,g+ +T,_,b+T-w,I-T,_,b+T),T=I}g+=w,b+=w,++m&S||(N+=E)}f!=h.nc&&r(c,u-y,c,u+(f-p-1)*y,y);break;case 1:for(y=d,v=g,w=(d=h.Ea)-(b=d&~(_=(g=1<<h.b)-1)),m=j(d,h.b),x=h.K,h=h.w+(p>>h.b)*m;p<f;){for(S=x,E=h,C=new q,N=v+b,P=v+d;v<N;)Y(S[E++],C),Qn(C,y,v,g,c,u),v+=g,u+=g;v<P&&(Y(S[E++],C),Qn(C,y,v,w,c,u),v+=w,u+=w),++p&_||(h+=m)}break;case 3:if(d==c&&g==u&&0<h.b){for(v=c,d=y=u+(f-p)*y-(b=(f-p)*j(h.Ea,h.b)),g=c,_=u,m=[],b=(w=b)-1;0<=b;--b)m[b]=g[_+b];for(b=w-1;0<=b;--b)v[d+b]=m[b];Xn(h,p,f,c,y,c,u)}else Xn(h,p,f,d,g,c,u)}u=o,c=i}c!=i&&r(o,i,u,c,a)}function xt(t,n){var r=t.V,i=t.Ba+t.c*t.C,o=n-t.C;if(e(n<=t.l.o),e(16>=o),0<o){var s=t.l,a=t.Ta,l=t.Ua,u=s.width;if(wt(t,o,r,i),o=l=[l],e((r=t.C)<(i=n)),e(s.v<s.va),i>s.o&&(i=s.o),r<s.j){var c=s.j-r;r=s.j,o[0]+=c*u}if(r>=i?r=0:(o[0]+=4*s.v,s.ka=r-s.j,s.U=s.va-s.v,s.T=i-r,r=1),r){if(l=l[0],11>(r=t.ca).S){var h=r.f.RGBA,p=(i=r.S,o=s.U,s=s.T,c=h.eb,h.A),f=s;for(h=h.fb+t.Ma*h.A;0<f--;){var d=a,g=l,y=o,m=c,v=h;switch(i){case Fr:tr(d,g,y,m,v);break;case jr:er(d,g,y,m,v);break;case Ur:er(d,g,y,m,v),Sr(m,v,0,y,1,0);break;case Dr:ir(d,g,y,m,v);break;case zr:et(d,g,y,m,v,1);break;case Vr:et(d,g,y,m,v,1),Sr(m,v,0,y,1,0);break;case qr:et(d,g,y,m,v,0);break;case Wr:et(d,g,y,m,v,0),Sr(m,v,1,y,1,0);break;case Br:nr(d,g,y,m,v);break;case Hr:nr(d,g,y,m,v),Er(m,v,y,1,0);break;case Gr:rr(d,g,y,m,v);break;default:e(0)}l+=u,h+=p}t.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=r.height)}}t.C=n,e(t.C<=t.i)}function St(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,r=t.Ya[e].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Et(t,n,r,i,o,s){if(0!=t.Z){var a=t.qd,l=t.rd;for(e(null!=yi[t.Z]);n<r;++n)yi[t.Z](a,l,i,o,i,o,s),a=i,l=o,o+=s;t.qd=a,t.rd=l}}function Ct(t,n){var r=t.l.ma,i=0==r.Z||1==r.Z?t.l.j:t.C;if(i=t.C<i?i:t.C,e(n<=t.l.o),n>i){var o=t.l.width,s=r.ca,a=r.tb+o*i,l=t.V,u=t.Ba+t.c*i,c=t.gc;e(1==t.ab),e(3==c[0].hc),Zn(c[0],i,n,l,u,s,a),Et(r,i,n,s,a,o)}t.C=t.Ma=n}function Nt(t,n,r,i,o,s,a){var l=t.$/i,u=t.$%i,c=t.m,h=t.s,p=r+t.$,f=p;o=r+i*o;var d=r+i*s,g=280+h.ua,y=t.Pb?l:16777216,m=0<h.ua?h.Wa:null,v=h.wc,_=p<d?bt(h,u,l):null;e(t.C<s),e(d<=o);var b=!1;t:for(;;){for(;b||p<d;){var w=0;if(l>=y){var N=p-r;e((y=t).Pb),y.wd=y.m,y.xd=N,0<y.s.ua&&A(y.s.Wa,y.s.vb),y=l+ti}if(u&v||(_=bt(h,u,l)),e(null!=_),_.Qb&&(n[p]=_.qb,b=!0),!b)if(C(c),_.jc){w=c,N=n;var P=p,O=_.pd[x(w)&zn-1];e(_.jc),256>O.g?(E(w,w.u+O.g),N[P]=O.value,w=0):(E(w,w.u+O.g-256),e(256<=O.value),w=O.value),0==w&&(b=!0)}else w=vt(_.G[0],_.H[0],c);if(c.h)break;if(b||256>w){if(!b)if(_.nd)n[p]=(_.qb|w<<8)>>>0;else{if(C(c),b=vt(_.G[1],_.H[1],c),C(c),N=vt(_.G[2],_.H[2],c),P=vt(_.G[3],_.H[3],c),c.h)break;n[p]=(P<<24|b<<16|w<<8|N)>>>0}if(b=!1,++p,++u>=i&&(u=0,++l,null!=a&&l<=s&&!(l%16)&&a(t,l),null!=m))for(;f<p;)w=n[f++],m.X[(506832829*w&4294967295)>>>m.Mb]=w}else if(280>w){if(w=yt(w-256,c),N=vt(_.G[4],_.H[4],c),C(c),N=mt(i,N=yt(N,c)),c.h)break;if(p-r<N||o-p<w)break t;for(P=0;P<w;++P)n[p+P]=n[p+P-N];for(p+=w,u+=w;u>=i;)u-=i,++l,null!=a&&l<=s&&!(l%16)&&a(t,l);if(e(p<=o),u&v&&(_=bt(h,u,l)),null!=m)for(;f<p;)w=n[f++],m.X[(506832829*w&4294967295)>>>m.Mb]=w}else{if(!(w<g))break t;for(b=w-280,e(null!=m);f<p;)w=n[f++],m.X[(506832829*w&4294967295)>>>m.Mb]=w;w=p,e(!(b>>>(N=m).Xa)),n[w]=N.X[b],b=!0}b||e(c.h==S(c))}if(t.Pb&&c.h&&p<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&A(t.s.vb,t.s.Wa);else{if(c.h)break t;null!=a&&a(t,l>s?s:l),t.a=0,t.$=p-r}return 1}return t.a=3,0}function Pt(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function Ot(){var e=new an;return null==e?null:(e.a=0,e.xb=gi,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Yn=H,Qn=X,tr=Z,er=$,nr=J,rr=Q,ir=tt,t.VP8LMapColor32b=Kn,t.VP8LMapColor8b=$n,e)}function Tt(t,n,r,a,l){var u=1,p=[t],d=[n],g=a.m,y=a.s,m=null,v=0;t:for(;;){if(r)for(;u&&_(g,1);){var b=p,w=d,S=a,N=1,P=S.m,O=S.gc[S.ab],T=_(P,2);if(S.Oc&1<<T)u=0;else{switch(S.Oc|=1<<T,O.hc=T,O.Ea=b[0],O.nc=w[0],O.K=[null],++S.ab,e(4>=S.ab),T){case 0:case 1:O.b=_(P,3)+2,N=Tt(j(O.Ea,O.b),j(O.nc,O.b),0,S,O.K),O.K=O.K[0];break;case 3:var I,M=_(P,8)+1,k=16<M?0:4<M?1:2<M?2:3;if(b[0]=j(O.Ea,k),O.b=k,I=N=Tt(M,1,0,S,O.K)){var A,R=M,F=O,z=1<<(8>>F.b),q=o(z);if(null==q)I=0;else{var B=F.K[0],G=F.w;for(q[0]=F.K[0][0],A=1;A<1*R;++A)q[A]=D(B[G+A],q[A-1]);for(;A<4*z;++A)q[A]=0;F.K[0]=null,F.K[0]=q,I=1}}N=I;break;case 2:break;default:e(0)}u=N}}if(p=p[0],d=d[0],u&&_(g,1)&&!(u=1<=(v=_(g,4))&&11>=v)){a.a=3;break t}var U;if(U=u)e:{var V,W,H,Y=a,X=p,K=d,Z=v,$=r,J=Y.m,Q=Y.s,tt=[null],et=1,nt=0,rt=Qr[Z];n:for(;;){if($&&_(J,1)){var it=_(J,3)+2,ot=j(X,it),st=j(K,it),at=ot*st;if(!Tt(ot,st,0,Y,tt))break n;for(tt=tt[0],Q.xc=it,V=0;V<at;++V){var lt=tt[V]>>8&65535;tt[V]=lt,lt>=et&&(et=lt+1)}}if(J.h)break n;for(W=0;5>W;++W){var ut=Kr[W];!W&&0<Z&&(ut+=1<<Z),nt<ut&&(nt=ut)}var ct=s(et*rt,h),ht=et,pt=s(ht,f);if(null==pt)var ft=null;else e(65536>=ht),ft=pt;var dt=o(nt);if(null==ft||null==dt||null==ct){Y.a=1;break n}var gt=ct;for(V=H=0;V<et;++V){var yt=ft[V],mt=yt.G,vt=yt.H,bt=0,wt=1,xt=0;for(W=0;5>W;++W){ut=Kr[W],mt[W]=gt,vt[W]=H,!W&&0<Z&&(ut+=1<<Z);r:{var St,Et=ut,Ct=Y,Ot=dt,It=gt,Mt=H,kt=0,Lt=Ct.m,At=_(Lt,1);if(i(Ot,0,0,Et),At){var Rt=_(Lt,1)+1,Ft=_(Lt,1),jt=_(Lt,0==Ft?1:8);Ot[jt]=1,2==Rt&&(Ot[jt=_(Lt,8)]=1);var Dt=1}else{var zt=o(19),qt=_(Lt,4)+4;if(19<qt){Ct.a=3;var Bt=0;break r}for(St=0;St<qt;++St)zt[$r[St]]=_(Lt,3);var Gt=void 0,Ut=void 0,Vt=Ct,Wt=zt,Ht=Et,Yt=Ot,Xt=0,Kt=Vt.m,Zt=8,$t=s(128,h);i:for(;c($t,0,7,Wt,19);){if(_(Kt,1)){var Jt=2+2*_(Kt,3);if((Gt=2+_(Kt,Jt))>Ht)break i}else Gt=Ht;for(Ut=0;Ut<Ht&&Gt--;){C(Kt);var Qt=$t[0+(127&x(Kt))];E(Kt,Kt.u+Qt.g);var te=Qt.value;if(16>te)Yt[Ut++]=te,0!=te&&(Zt=te);else{var ee=16==te,ne=te-16,re=Xr[ne],ie=_(Kt,Yr[ne])+re;if(Ut+ie>Ht)break i;for(var oe=ee?Zt:0;0<ie--;)Yt[Ut++]=oe}}Xt=1;break i}Xt||(Vt.a=3),Dt=Xt}(Dt=Dt&&!Lt.h)&&(kt=c(It,Mt,8,Ot,Et)),Dt&&0!=kt?Bt=kt:(Ct.a=3,Bt=0)}if(0==Bt)break n;if(wt&&1==Zr[W]&&(wt=0==gt[H].g),bt+=gt[H].g,H+=Bt,3>=W){var se,ae=dt[0];for(se=1;se<ut;++se)dt[se]>ae&&(ae=dt[se]);xt+=ae}}if(yt.nd=wt,yt.Qb=0,wt&&(yt.qb=(mt[3][vt[3]+0].value<<24|mt[1][vt[1]+0].value<<16|mt[2][vt[2]+0].value)>>>0,0==bt&&256>mt[0][vt[0]+0].value&&(yt.Qb=1,yt.qb+=mt[0][vt[0]+0].value<<8)),yt.jc=!yt.Qb&&6>xt,yt.jc){var le,ue=yt;for(le=0;le<zn;++le){var ce=le,he=ue.pd[ce],pe=ue.G[0][ue.H[0]+ce];256<=pe.value?(he.g=pe.g+256,he.value=pe.value):(he.g=0,he.value=0,ce>>=_t(pe,8,he),ce>>=_t(ue.G[1][ue.H[1]+ce],16,he),ce>>=_t(ue.G[2][ue.H[2]+ce],0,he),_t(ue.G[3][ue.H[3]+ce],24,he))}}}Q.vc=tt,Q.Wb=et,Q.Ya=ft,Q.yc=ct,U=1;break e}U=0}if(!(u=U)){a.a=3;break t}if(0<v){if(y.ua=1<<v,!L(y.Wa,v)){a.a=1,u=0;break t}}else y.ua=0;var fe=a,de=p,ge=d,ye=fe.s,me=ye.xc;if(fe.c=de,fe.i=ge,ye.md=j(de,me),ye.wc=0==me?-1:(1<<me)-1,r){a.xb=di;break t}if(null==(m=o(p*d))){a.a=1,u=0;break t}u=(u=Nt(a,m,0,p,d,d,null))&&!g.h;break t}return u?(null!=l?l[0]=m:(e(null==m),e(r)),a.$=0,r||Pt(y)):Pt(y),u}function It(t,n){var r=t.c*t.i,i=r+n+16*n;return e(t.c<=n),t.V=o(i),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+r+n,1)}function Mt(t,n){var r=t.C,i=n-r,o=t.V,s=t.Ba+t.c*r;for(e(n<=t.l.o);0<i;){var a=16<i?16:i,l=t.l.ma,u=t.l.width,c=u*a,h=l.ca,p=l.tb+u*r,f=t.Ta,d=t.Ua;wt(t,a,o,s),Nr(f,d,h,p,c),Et(l,r,r+a,h,p,u),i-=a,o+=a*t.c,r+=a}e(r==n),t.C=t.Ma=n}function kt(){this.ub=this.yd=this.td=this.Rb=0}function Lt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function At(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Rt(){this.Yb=function(){var t=[];return function t(e,n,r){for(var i=r[n],o=0;o<i&&(e.push(r.length>n+1?[]:0),!(r.length<n+1));o++)t(e[o],n+1,r)}(t,0,[3,11]),t}()}function Ft(){this.jb=o(3),this.Wc=a([4,8],Rt),this.Xc=a([4,17],Rt)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Dt(){this.ld=this.La=this.dd=this.tc=0}function zt(){this.Na=this.la=0}function qt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Bt(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dt),this.Y=0,this.ya=Array(new Bt),this.aa=0,this.l=new Ht}function Ut(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Vt(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new kt,this.Kc=new Lt,this.ed=new jt,this.Qa=new At,this.Ic=this.$c=this.Aa=0,this.D=new Gt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,b),this.ia=0,this.pb=s(4,qt),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ut),this.Hd=0,this.rb=Array(new zt),this.sb=0,this.wa=Array(new Dt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Bt),this.L=this.aa=0,this.gd=a([4,2],Dt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wt(t,e){return 0>t?0:t>e?e:t}function Ht(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yt(){var t=new Vt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ri||(ri=$t)),t}function Xt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Kt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Zt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Xt(t,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,o=n.w,s=n.ha;if(4>s)return Xt(t,7,"Truncated header.");var a=r[o+0]|r[o+1]<<8|r[o+2]<<16,l=t.Od;if(l.Rb=!(1&a),l.td=a>>1&7,l.yd=a>>4&1,l.ub=a>>5,3<l.td)return Xt(t,3,"Incorrect keyframe parameters.");if(!l.yd)return Xt(t,4,"Frame not displayable.");o+=3,s-=3;var u=t.Kc;if(l.Rb){if(7>s)return Xt(t,7,"cannot parse picture header");if(!Kt(r,o,s))return Xt(t,3,"Bad code word");u.c=16383&(r[o+4]<<8|r[o+3]),u.Td=r[o+4]>>6,u.i=16383&(r[o+6]<<8|r[o+5]),u.Ud=r[o+6]>>6,o+=7,s-=7,t.za=u.c+15>>4,t.Ub=u.i+15>>4,n.width=u.c,n.height=u.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,i(a.Zb,0,0,a.Zb.length),i(a.Lb,0,0,a.Lb)}if(l.ub>s)return Xt(t,7,"bad partition length");d(a=t.m,r,o,l.ub),o+=l.ub,s-=l.ub,l.Rb&&(u.Ld=P(a),u.Kd=P(a)),u=t.Qa;var c,h=t.Pa;if(e(null!=a),e(null!=u),u.Cb=P(a),u.Cb){if(u.Bb=P(a),P(a)){for(u.Fb=P(a),c=0;4>c;++c)u.Zb[c]=P(a)?y(a,7):0;for(c=0;4>c;++c)u.Lb[c]=P(a)?y(a,6):0}if(u.Bb)for(c=0;3>c;++c)h.jb[c]=P(a)?g(a,8):255}else u.Bb=0;if(a.Ka)return Xt(t,3,"cannot parse segment header");if((u=t.ed).zd=P(a),u.Tb=g(a,6),u.wb=g(a,3),u.Pc=P(a),u.Pc&&P(a)){for(h=0;4>h;++h)P(a)&&(u.vd[h]=y(a,6));for(h=0;4>h;++h)P(a)&&(u.od[h]=y(a,6))}if(t.L=0==u.Tb?0:u.zd?1:2,a.Ka)return Xt(t,3,"cannot parse filter header");var p=s;if(s=c=o,o=c+p,u=p,t.Xb=(1<<g(t.m,2))-1,p<3*(h=t.Xb))r=7;else{for(c+=3*h,u-=3*h,p=0;p<h;++p){var f=r[s+0]|r[s+1]<<8|r[s+2]<<16;f>u&&(f=u),d(t.Jc[+p],r,c,f),c+=f,u-=f,s+=3}d(t.Jc[+h],r,c,u),r=c<o?0:5}if(0!=r)return Xt(t,r,"cannot parse partitions");for(r=g(c=t.m,7),s=P(c)?y(c,4):0,o=P(c)?y(c,4):0,u=P(c)?y(c,4):0,h=P(c)?y(c,4):0,c=P(c)?y(c,4):0,p=t.Qa,f=0;4>f;++f){if(p.Cb){var m=p.Zb[f];p.Fb||(m+=r)}else{if(0<f){t.pb[f]=t.pb[0];continue}m=r}var v=t.pb[f];v.Sc[0]=ei[Wt(m+s,127)],v.Sc[1]=ni[Wt(m+0,127)],v.Eb[0]=2*ei[Wt(m+o,127)],v.Eb[1]=101581*ni[Wt(m+u,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ei[Wt(m+h,117)],v.Qc[1]=ni[Wt(m+c,127)],v.lc=m+c}if(!l.Rb)return Xt(t,4,"Not a key frame.");for(P(a),l=t.Pa,r=0;4>r;++r){for(s=0;8>s;++s)for(o=0;3>o;++o)for(u=0;11>u;++u)h=O(a,ui[r][s][o][u])?g(a,8):ai[r][s][o][u],l.Wc[r][s].Yb[o][u]=h;for(s=0;17>s;++s)l.Xc[r][s]=l.Wc[r][ci[s]]}return t.kc=P(a),t.kc&&(t.Bd=g(a,8)),t.cb=1}function $t(t,e,n,r,i,o,s){var a=e[i].Yb[n];for(n=0;16>i;++i){if(!O(t,a[n+0]))return i;for(;!O(t,a[n+1]);)if(a=e[++i].Yb[0],n=0,16==i)return 16;var l=e[i+1].Yb;if(O(t,a[n+2])){var u=t,c=0;if(O(u,(p=a)[(h=n)+3]))if(O(u,p[h+6])){for(a=0,h=2*(c=O(u,p[h+8]))+(p=O(u,p[h+9+c])),c=0,p=ii[h];p[a];++a)c+=c+O(u,p[a]);c+=3+(8<<h)}else O(u,p[h+7])?(c=7+2*O(u,165),c+=O(u,145)):c=5+O(u,159);else c=O(u,p[h+4])?3+O(u,p[h+5]):2;a=l[2]}else c=1,a=l[1];l=s+oi[i],0>(u=t).b&&N(u);var h,p=u.b,f=(h=u.Ca>>1)-(u.I>>p)>>31;--u.b,u.Ca+=f,u.Ca|=1,u.I-=(h+1&f)<<p,o[l]=((c^f)-f)*r[(0<i)+0]}return 16}function Jt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,i(t.zc,0,0,t.zc.length),t.ja=0}function Qt(t,n){if(null==t)return 0;if(null==n)return Xt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Zt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var a=zi[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-a>>4,t.zb=n.j-a>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+a>>4,t.Hb=n.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l=t.ed;for(a=0;4>a;++a){var u;if(t.Qa.Cb){var c=t.Qa.Lb[a];t.Qa.Fb||(c+=l.Tb)}else c=l.Tb;for(u=0;1>=u;++u){var h=t.gd[a][u],p=c;if(l.Pc&&(p+=l.vd[0],u&&(p+=l.od[0])),0<(p=0>p?0:63<p?63:p)){var f=p;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),h.dd=f,h.tc=2*p+f,h.ld=40<=p?2:15<=p?1:0}else h.tc=0;h.La=u}}}a=0}else Xt(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){t.$c=0,0<t.Aa||(t.Ic=Bi);t:{a=t.Ic,l=4*(f=t.za);var d=32*f,g=f+1,y=0<t.L?f*(0<t.Aa?2:1):0,m=(2==t.Aa?2:1)*f;if((h=l+832+(u=3*(16*a+zi[t.L])/2*d)+(c=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)a=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=o(h),t.Fc=0,null==t.Ec){a=Xt(t,1,"no memory during frame initialization.");break t}t.Vb=h}h=t.Ec,p=t.Fc,t.Ac=h,t.Bc=p,p+=l,t.Gd=s(d,Ut),t.Hd=0,t.rb=s(g+1,zt),t.sb=1,t.wa=y?s(y,Dt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=f),e(!0),t.oc=h,t.pc=p,p+=832,t.ya=s(m,Bt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=f),t.R=16*f,t.B=8*f,f=(d=zi[t.L])*t.R,d=d/2*t.B,t.sa=h,t.ta=p+f,t.qa=t.sa,t.ra=t.ta+16*a*t.R+d,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+d,t.$c=0,p+=u,t.mb=c?h:null,t.nb=c?p:null,e(p+c<=t.Fc+t.Vb),Jt(t),i(t.Ac,t.Bc,0,l),a=1}}if(a){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Mr){for(a=-255;255>=a;++a)Pr[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)Or[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)Tr[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Ir[255+a]=0>a?0:255<a?255:a;Mr=1}or=ue,sr=oe,lr=se,ur=ae,cr=le,ar=ie,hr=Xe,pr=Ke,fr=Je,dr=Qe,gr=Ze,yr=$e,mr=tn,vr=en,_r=Ge,br=Ue,wr=Ve,xr=We,pi[0]=Ee,pi[1]=he,pi[2]=xe,pi[3]=Se,pi[4]=Ce,pi[5]=Pe,pi[6]=Ne,pi[7]=Oe,pi[8]=Ie,pi[9]=Te,hi[0]=me,hi[1]=fe,hi[2]=de,hi[3]=ge,hi[4]=ve,hi[5]=_e,hi[6]=be,fi[0]=Ae,fi[1]=pe,fi[2]=Me,fi[3]=ke,fi[4]=Fe,fi[5]=Re,fi[6]=je,a=1}else a=0}a&&(a=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var s,a=t.Jc[t.M&t.Xb],l=t.m,u=t;for(s=0;s<u.za;++s){var c=l,h=u,p=h.Ac,f=h.Bc+4*s,d=h.zc,g=h.ya[h.aa+s];if(h.Qa.Bb?g.$b=O(c,h.Pa.jb[0])?2+O(c,h.Pa.jb[2]):O(c,h.Pa.jb[1]):g.$b=0,h.kc&&(g.Ad=O(c,h.Bd)),g.Za=!O(c,145)+0,g.Za){var y=g.Ob,m=0;for(h=0;4>h;++h){var v,_=d[0+h];for(v=0;4>v;++v){_=li[p[f+v]][_];for(var b=si[O(c,_[0])];0<b;)b=si[2*b+O(c,_[b])];_=-b,p[f+v]=_}r(y,m,p,f,4),m+=4,d[0+h]=_}}else _=O(c,156)?O(c,128)?1:3:O(c,163)?2:0,g.Ob[0]=_,i(p,f,_,4),i(d,0,_,4);g.Dd=O(c,142)?O(c,114)?O(c,183)?1:3:2:0}if(u.m.Ka)return Xt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(u=a,c=(l=t).rb[l.sb-1],p=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],f=l.kc?s.Ad:0)c.la=p.la=0,s.Za||(c.Na=p.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var w,x;if(c=p,p=u,f=l.Pa.Xc,d=l.ya[l.aa+l.ja],g=l.pb[d.$b],h=d.ad,y=0,m=l.rb[l.sb-1],_=v=0,i(h,y,0,384),d.Za)var S=0,E=f[3];else{b=o(16);var C=c.Na+m.Na;if(C=ri(p,f[1],C,g.Eb,0,b,0),c.Na=m.Na=(0<C)+0,1<C)or(b,0,h,y);else{var N=b[0]+3>>3;for(b=0;256>b;b+=16)h[y+b]=N}S=1,E=f[0]}var P=15&c.la,T=15&m.la;for(b=0;4>b;++b){var I=1&T;for(N=x=0;4>N;++N)P=P>>1|(I=(C=ri(p,E,C=I+(1&P),g.Sc,S,h,y))>S)<<7,x=x<<2|(3<C?3:1<C?2:0!=h[y+0]),y+=16;P>>=4,T=T>>1|I<<7,v=(v<<8|x)>>>0}for(E=P,S=T>>4,w=0;4>w;w+=2){for(x=0,P=c.la>>4+w,T=m.la>>4+w,b=0;2>b;++b){for(I=1&T,N=0;2>N;++N)C=I+(1&P),P=P>>1|(I=0<(C=ri(p,f[2],C,g.Qc,0,h,y)))<<3,x=x<<2|(3<C?3:1<C?2:0!=h[y+0]),y+=16;P>>=2,T=T>>1|I<<5}_|=x<<4*w,E|=P<<4<<w,S|=(240&T)<<w}c.la=E,m.la=S,d.Hc=v,d.Gc=_,d.ia=43690&_?0:g.ia,f=!(v|_)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!f),u.Ka)return Xt(t,7,"Premature end-of-file encountered.")}if(Jt(t),l=n,u=1,s=(a=t).D,c=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(s.M=a.M,s.uc=c,An(a,s),u=1,s=(x=a.D).Nb,c=(_=zi[a.L])*a.R,p=_/2*a.B,b=16*s*a.R,N=8*s*a.B,f=a.sa,d=a.ta-c+b,g=a.qa,h=a.ra-p+N,y=a.Ha,m=a.Ia-p+N,T=0==(P=x.M),v=P>=a.Va-1,2==a.Aa&&An(a,x),x.uc)for(I=(C=a).D.M,e(C.D.uc),x=C.yb;x<C.Hb;++x){S=x,E=I;var M=(k=(B=C).D).Nb;w=B.R;var k=k.wa[k.Y+S],L=B.sa,A=B.ta+16*M*w+16*S,R=k.dd,F=k.tc;if(0!=F)if(e(3<=F),1==B.L)0<S&&br(L,A,w,F+4),k.La&&xr(L,A,w,F),0<E&&_r(L,A,w,F+4),k.La&&wr(L,A,w,F);else{var j=B.B,D=B.qa,z=B.ra+8*M*j+8*S,q=B.Ha,B=B.Ia+8*M*j+8*S;M=k.ld,0<S&&(pr(L,A,w,F+4,R,M),dr(D,z,q,B,j,F+4,R,M)),k.La&&(yr(L,A,w,F,R,M),vr(D,z,q,B,j,F,R,M)),0<E&&(hr(L,A,w,F+4,R,M),fr(D,z,q,B,j,F+4,R,M)),k.La&&(gr(L,A,w,F,R,M),mr(D,z,q,B,j,F,R,M))}}if(a.ia&&alert("todo:DitherRow"),null!=l.put){if(x=16*P,P=16*(P+1),T?(l.y=a.sa,l.O=a.ta+b,l.f=a.qa,l.N=a.ra+N,l.ea=a.Ha,l.W=a.Ia+N):(x-=_,l.y=f,l.O=d,l.f=g,l.N=h,l.ea=y,l.W=m),v||(P-=_),P>l.o&&(P=l.o),l.F=null,l.J=null,null!=a.Fa&&0<a.Fa.length&&x<P&&(l.J=pn(a,l,x,P-x),l.F=a.mb,null==l.F&&0==l.F.length)){u=Xt(a,3,"Could not decode alpha data.");break t}x<l.j&&(_=l.j-x,x=l.j,e(!(1&_)),l.O+=a.R*_,l.N+=a.B*(_>>1),l.W+=a.B*(_>>1),null!=l.F&&(l.J+=l.width*_)),x<P&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=x-l.j,l.U=l.va-l.v,l.T=P-x,u=l.put(l))}s+1!=a.Ic||v||(r(a.sa,a.ta-c,f,d+16*a.R,c),r(a.qa,a.ra-p,g,h+8*a.B,p),r(a.Ha,a.Ia-p,y,m+8*a.B,p))}if(!u)return Xt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),a&=1}return a?(t.cb=0,a):0}function te(t,e,n,r,i){i=t[e+n+32*r]+(i>>3),t[e+n+32*r]=-256&i?0>i?0:255:i}function ee(t,e,n,r,i,o){te(t,e,0,n,r+i),te(t,e,1,n,r+o),te(t,e,2,n,r-o),te(t,e,3,n,r-i)}function ne(t){return(20091*t>>16)+t}function re(t,e,n,r){var i,s=0,a=o(16);for(i=0;4>i;++i){var l=t[e+0]+t[e+8],u=t[e+0]-t[e+8],c=(35468*t[e+4]>>16)-ne(t[e+12]),h=ne(t[e+4])+(35468*t[e+12]>>16);a[s+0]=l+h,a[s+1]=u+c,a[s+2]=u-c,a[s+3]=l-h,s+=4,e++}for(i=s=0;4>i;++i)l=(t=a[s+0]+4)+a[s+8],u=t-a[s+8],c=(35468*a[s+4]>>16)-ne(a[s+12]),te(n,r,0,0,l+(h=ne(a[s+4])+(35468*a[s+12]>>16))),te(n,r,1,0,u+c),te(n,r,2,0,u-c),te(n,r,3,0,l-h),s++,r+=32}function ie(t,e,n,r){var i=t[e+0]+4,o=35468*t[e+4]>>16,s=ne(t[e+4]),a=35468*t[e+1]>>16;ee(n,r,0,i+s,t=ne(t[e+1]),a),ee(n,r,1,i+o,t,a),ee(n,r,2,i-o,t,a),ee(n,r,3,i-s,t,a)}function oe(t,e,n,r,i){re(t,e,n,r),i&&re(t,e+16,n,r+4)}function se(t,e,n,r){sr(t,e+0,n,r,1),sr(t,e+32,n,r+128,1)}function ae(t,e,n,r){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)te(n,r,e,i,t)}function le(t,e,n,r){t[e+0]&&ur(t,e+0,n,r),t[e+16]&&ur(t,e+16,n,r+4),t[e+32]&&ur(t,e+32,n,r+128),t[e+48]&&ur(t,e+48,n,r+128+4)}function ue(t,e,n,r){var i,s=o(16);for(i=0;4>i;++i){var a=t[e+0+i]+t[e+12+i],l=t[e+4+i]+t[e+8+i],u=t[e+4+i]-t[e+8+i],c=t[e+0+i]-t[e+12+i];s[0+i]=a+l,s[8+i]=a-l,s[4+i]=c+u,s[12+i]=c-u}for(i=0;4>i;++i)a=(t=s[0+4*i]+3)+s[3+4*i],l=s[1+4*i]+s[2+4*i],u=s[1+4*i]-s[2+4*i],c=t-s[3+4*i],n[r+0]=a+l>>3,n[r+16]=c+u>>3,n[r+32]=a-l>>3,n[r+48]=c-u>>3,r+=64}function ce(t,e,n){var r,i=e-32,o=Ar,s=255-t[i-1];for(r=0;r<n;++r){var a,l=o,u=s+t[e-1];for(a=0;a<n;++a)t[e+a]=l[u+t[i+a]];e+=32}}function he(t,e){ce(t,e,4)}function pe(t,e){ce(t,e,8)}function fe(t,e){ce(t,e,16)}function de(t,e){var n;for(n=0;16>n;++n)r(t,e+32*n,t,e-32,16)}function ge(t,e){var n;for(n=16;0<n;--n)i(t,e,t[e-1],16),e+=32}function ye(t,e,n){var r;for(r=0;16>r;++r)i(e,n+32*r,t,16)}function me(t,e){var n,r=16;for(n=0;16>n;++n)r+=t[e-1+32*n]+t[e+n-32];ye(r>>5,t,e)}function ve(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e-1+32*n];ye(r>>4,t,e)}function _e(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e+n-32];ye(r>>4,t,e)}function be(t,e){ye(128,t,e)}function we(t,e,n){return t+2*e+n+2>>2}function xe(t,e){var n,i=e-32;for(i=new Uint8Array([we(t[i-1],t[i+0],t[i+1]),we(t[i+0],t[i+1],t[i+2]),we(t[i+1],t[i+2],t[i+3]),we(t[i+2],t[i+3],t[i+4])]),n=0;4>n;++n)r(t,e+32*n,i,0,i.length)}function Se(t,e){var n=t[e-1],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96];T(t,e+0,16843009*we(t[e-1-32],n,r)),T(t,e+32,16843009*we(n,r,i)),T(t,e+64,16843009*we(r,i,o)),T(t,e+96,16843009*we(i,o,o))}function Ee(t,e){var n,r=4;for(n=0;4>n;++n)r+=t[e+n-32]+t[e-1+32*n];for(r>>=3,n=0;4>n;++n)i(t,e+32*n,r,4)}function Ce(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1-32],s=t[e+0-32],a=t[e+1-32],l=t[e+2-32],u=t[e+3-32];t[e+0+96]=we(r,i,t[e-1+96]),t[e+1+96]=t[e+0+64]=we(n,r,i),t[e+2+96]=t[e+1+64]=t[e+0+32]=we(o,n,r),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=we(s,o,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=we(a,s,o),t[e+3+32]=t[e+2+0]=we(l,a,s),t[e+3+0]=we(u,l,a)}function Ne(t,e){var n=t[e+1-32],r=t[e+2-32],i=t[e+3-32],o=t[e+4-32],s=t[e+5-32],a=t[e+6-32],l=t[e+7-32];t[e+0+0]=we(t[e+0-32],n,r),t[e+1+0]=t[e+0+32]=we(n,r,i),t[e+2+0]=t[e+1+32]=t[e+0+64]=we(r,i,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=we(i,o,s),t[e+3+32]=t[e+2+64]=t[e+1+96]=we(o,s,a),t[e+3+64]=t[e+2+96]=we(s,a,l),t[e+3+96]=we(a,l,l)}function Pe(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1-32],s=t[e+0-32],a=t[e+1-32],l=t[e+2-32],u=t[e+3-32];t[e+0+0]=t[e+1+64]=o+s+1>>1,t[e+1+0]=t[e+2+64]=s+a+1>>1,t[e+2+0]=t[e+3+64]=a+l+1>>1,t[e+3+0]=l+u+1>>1,t[e+0+96]=we(i,r,n),t[e+0+64]=we(r,n,o),t[e+0+32]=t[e+1+96]=we(n,o,s),t[e+1+32]=t[e+2+96]=we(o,s,a),t[e+2+32]=t[e+3+96]=we(s,a,l),t[e+3+32]=we(a,l,u)}function Oe(t,e){var n=t[e+0-32],r=t[e+1-32],i=t[e+2-32],o=t[e+3-32],s=t[e+4-32],a=t[e+5-32],l=t[e+6-32],u=t[e+7-32];t[e+0+0]=n+r+1>>1,t[e+1+0]=t[e+0+64]=r+i+1>>1,t[e+2+0]=t[e+1+64]=i+o+1>>1,t[e+3+0]=t[e+2+64]=o+s+1>>1,t[e+0+32]=we(n,r,i),t[e+1+32]=t[e+0+96]=we(r,i,o),t[e+2+32]=t[e+1+96]=we(i,o,s),t[e+3+32]=t[e+2+96]=we(o,s,a),t[e+3+64]=we(s,a,l),t[e+3+96]=we(a,l,u)}function Te(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96];t[e+0+0]=n+r+1>>1,t[e+2+0]=t[e+0+32]=r+i+1>>1,t[e+2+32]=t[e+0+64]=i+o+1>>1,t[e+1+0]=we(n,r,i),t[e+3+0]=t[e+1+32]=we(r,i,o),t[e+3+32]=t[e+1+64]=we(i,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function Ie(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96],s=t[e-1-32],a=t[e+0-32],l=t[e+1-32],u=t[e+2-32];t[e+0+0]=t[e+2+32]=n+s+1>>1,t[e+0+32]=t[e+2+64]=r+n+1>>1,t[e+0+64]=t[e+2+96]=i+r+1>>1,t[e+0+96]=o+i+1>>1,t[e+3+0]=we(a,l,u),t[e+2+0]=we(s,a,l),t[e+1+0]=t[e+3+32]=we(n,s,a),t[e+1+32]=t[e+3+64]=we(r,n,s),t[e+1+64]=t[e+3+96]=we(i,r,n),t[e+1+96]=we(o,i,r)}function Me(t,e){var n;for(n=0;8>n;++n)r(t,e+32*n,t,e-32,8)}function ke(t,e){var n;for(n=0;8>n;++n)i(t,e,t[e-1],8),e+=32}function Le(t,e,n){var r;for(r=0;8>r;++r)i(e,n+32*r,t,8)}function Ae(t,e){var n,r=8;for(n=0;8>n;++n)r+=t[e+n-32]+t[e-1+32*n];Le(r>>4,t,e)}function Re(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e+n-32];Le(r>>3,t,e)}function Fe(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e-1+32*n];Le(r>>3,t,e)}function je(t,e){Le(128,t,e)}function De(t,e,n){var r=t[e-n],i=t[e+0],o=3*(i-r)+kr[1020+t[e-2*n]-t[e+n]],s=Lr[112+(o+4>>3)];t[e-n]=Ar[255+r+Lr[112+(o+3>>3)]],t[e+0]=Ar[255+i-s]}function ze(t,e,n,r){var i=t[e+0],o=t[e+n];return Rr[255+t[e-2*n]-t[e-n]]>r||Rr[255+o-i]>r}function qe(t,e,n,r){return 4*Rr[255+t[e-n]-t[e+0]]+Rr[255+t[e-2*n]-t[e+n]]<=r}function Be(t,e,n,r,i){var o=t[e-3*n],s=t[e-2*n],a=t[e-n],l=t[e+0],u=t[e+n],c=t[e+2*n],h=t[e+3*n];return 4*Rr[255+a-l]+Rr[255+s-u]>r?0:Rr[255+t[e-4*n]-o]<=i&&Rr[255+o-s]<=i&&Rr[255+s-a]<=i&&Rr[255+h-c]<=i&&Rr[255+c-u]<=i&&Rr[255+u-l]<=i}function Ge(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)qe(t,e+r,n,i)&&De(t,e+r,n)}function Ue(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)qe(t,e+r*n,1,i)&&De(t,e+r*n,1)}function Ve(t,e,n,r){var i;for(i=3;0<i;--i)Ge(t,e+=4*n,n,r)}function We(t,e,n,r){var i;for(i=3;0<i;--i)Ue(t,e+=4,n,r)}function He(t,e,n,r,i,o,s,a){for(o=2*o+1;0<i--;){if(Be(t,e,n,o,s))if(ze(t,e,n,a))De(t,e,n);else{var l=t,u=e,c=n,h=l[u-2*c],p=l[u-c],f=l[u+0],d=l[u+c],g=l[u+2*c],y=27*(v=kr[1020+3*(f-p)+kr[1020+h-d]])+63>>7,m=18*v+63>>7,v=9*v+63>>7;l[u-3*c]=Ar[255+l[u-3*c]+v],l[u-2*c]=Ar[255+h+m],l[u-c]=Ar[255+p+y],l[u+0]=Ar[255+f-y],l[u+c]=Ar[255+d-m],l[u+2*c]=Ar[255+g-v]}e+=r}}function Ye(t,e,n,r,i,o,s,a){for(o=2*o+1;0<i--;){if(Be(t,e,n,o,s))if(ze(t,e,n,a))De(t,e,n);else{var l=t,u=e,c=n,h=l[u-c],p=l[u+0],f=l[u+c],d=Lr[112+(4+(g=3*(p-h))>>3)],g=Lr[112+(g+3>>3)],y=d+1>>1;l[u-2*c]=Ar[255+l[u-2*c]+y],l[u-c]=Ar[255+h+g],l[u+0]=Ar[255+p-d],l[u+c]=Ar[255+f-y]}e+=r}}function Xe(t,e,n,r,i,o){He(t,e,n,1,16,r,i,o)}function Ke(t,e,n,r,i,o){He(t,e,1,n,16,r,i,o)}function Ze(t,e,n,r,i,o){var s;for(s=3;0<s;--s)Ye(t,e+=4*n,n,1,16,r,i,o)}function $e(t,e,n,r,i,o){var s;for(s=3;0<s;--s)Ye(t,e+=4,1,n,16,r,i,o)}function Je(t,e,n,r,i,o,s,a){He(t,e,i,1,8,o,s,a),He(n,r,i,1,8,o,s,a)}function Qe(t,e,n,r,i,o,s,a){He(t,e,1,i,8,o,s,a),He(n,r,1,i,8,o,s,a)}function tn(t,e,n,r,i,o,s,a){Ye(t,e+4*i,i,1,8,o,s,a),Ye(n,r+4*i,i,1,8,o,s,a)}function en(t,e,n,r,i,o,s,a){Ye(t,e+4,1,i,8,o,s,a),Ye(n,r+4,1,i,8,o,s,a)}function nn(){this.ba=new st,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new h}function an(){this.xb=this.a=0,this.l=new Ht,this.ca=new st,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=s(4,on),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ht,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function un(t,e,n,r,i,o,s){for(t=null==t?0:t[e+0],e=0;e<s;++e)i[o+e]=t+n[r+e]&255,t=i[o+e]}function cn(t,e,n,r,i,o,s){var a;if(null==t)un(null,null,n,r,i,o,s);else for(a=0;a<s;++a)i[o+a]=t[e+a]+n[r+a]&255}function hn(t,e,n,r,i,o,s){if(null==t)un(null,null,n,r,i,o,s);else{var a,l=t[e+0],u=l,c=l;for(a=0;a<s;++a)u=c+(l=t[e+a])-u,c=n[r+a]+(-256&u?0>u?0:255:u)&255,u=l,i[o+a]=c}}function pn(t,n,i,s){var a=n.width,l=n.o;if(e(null!=t&&null!=n),0>i||0>=s||i+s>l)return null;if(!t.Cc){if(null==t.ga){var u;if(t.ga=new ln,(u=null==t.ga)||(u=n.width*n.o,e(0==t.Gb.length),t.Gb=o(u),t.Uc=0,null==t.Gb?u=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,u=1),u=!u),!u){u=t.ga;var c=t.Fa,h=t.P,p=t.qc,f=t.mb,d=t.nb,g=h+1,y=p-1,v=u.l;if(e(null!=c&&null!=f&&null!=n),yi[0]=null,yi[1]=un,yi[2]=cn,yi[3]=hn,u.ca=f,u.tb=d,u.c=n.width,u.i=n.height,e(0<u.c&&0<u.i),1>=p)n=0;else if(u.$a=c[h+0]>>0&3,u.Z=c[h+0]>>2&3,u.Lc=c[h+0]>>4&3,h=c[h+0]>>6&3,0>u.$a||1<u.$a||4<=u.Z||1<u.Lc||h)n=0;else if(v.put=ft,v.ac=pt,v.bc=dt,v.ma=u,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,u.$a)t:{e(1==u.$a),n=Ot();e:for(;;){if(null==n){n=0;break t}if(e(null!=u),u.mc=n,n.c=u.c,n.i=u.i,n.l=u.l,n.l.ma=u,n.l.width=u.c,n.l.height=u.i,n.a=0,m(n.m,c,g,y),!Tt(u.c,u.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&St(n.s)?(u.ic=1,c=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(c),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(u.ic=0,n=It(n,u.c)),!n)break e;n=1;break t}u.mc=null,n=0}else n=y>=u.c*u.i;u=!n}if(u)return null;1!=t.ga.Lc?t.Ga=0:s=l-i}e(null!=t.ga),e(i+s<=l);t:{if(n=(c=t.ga).c,l=c.l.o,0==c.$a){if(g=t.rc,y=t.Vc,v=t.Fa,h=t.P+1+i*n,p=t.mb,f=t.nb+i*n,e(h<=t.P+t.qc),0!=c.Z)for(e(null!=yi[c.Z]),u=0;u<s;++u)yi[c.Z](g,y,v,h,p,f,n),g=p,y=f,f+=n,h+=n;else for(u=0;u<s;++u)r(p,f,v,h,n),g=p,y=f,f+=n,h+=n;t.rc=g,t.Vc=y}else{if(e(null!=c.mc),n=i+s,e(null!=(u=c.mc)),e(n<=u.i),u.C>=n)n=1;else if(c.ic||mn(),c.ic){c=u.V,g=u.Ba,y=u.c;var _=u.i,b=(v=1,h=u.$/y,p=u.$%y,f=u.m,d=u.s,u.$),w=y*_,x=y*n,E=d.wc,N=b<x?bt(d,p,h):null;e(b<=w),e(n<=_),e(St(d));e:for(;;){for(;!f.h&&b<x;){if(p&E||(N=bt(d,p,h)),e(null!=N),C(f),256>(_=vt(N.G[0],N.H[0],f)))c[g+b]=_,++b,++p>=y&&(p=0,++h<=n&&!(h%16)&&Ct(u,h));else{if(!(280>_)){v=0;break e}_=yt(_-256,f);var P,O=vt(N.G[4],N.H[4],f);if(C(f),!(b>=(O=mt(y,O=yt(O,f)))&&w-b>=_)){v=0;break e}for(P=0;P<_;++P)c[g+b+P]=c[g+b+P-O];for(b+=_,p+=_;p>=y;)p-=y,++h<=n&&!(h%16)&&Ct(u,h);b<x&&p&E&&(N=bt(d,p,h))}e(f.h==S(f))}Ct(u,h>n?n:h);break e}!v||f.h&&b<w?(v=0,u.a=f.h?5:3):u.$=b,n=v}else n=Nt(u,u.V,u.Ba,u.c,u.i,n,Mt);if(!n){s=0;break t}}i+s>=l&&(t.Cc=1),s=1}if(!s)return null;if(t.Cc&&(null!=(s=t.ga)&&(s.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+i*a}function fn(t,e,n,r,i,o){for(;0<i--;){var s,a=t,l=e+(n?1:0),u=t,c=e+(n?0:3);for(s=0;s<r;++s){var h=u[c+4*s];255!=h&&(h*=32897,a[l+4*s+0]=a[l+4*s+0]*h>>23,a[l+4*s+1]=a[l+4*s+1]*h>>23,a[l+4*s+2]=a[l+4*s+2]*h>>23)}e+=o}}function dn(t,e,n,r,i){for(;0<r--;){var o;for(o=0;o<n;++o){var s=t[e+2*o+0],a=15&(u=t[e+2*o+1]),l=4369*a,u=(240&u|u>>4)*l>>16;t[e+2*o+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,t[e+2*o+1]=240&u|a}e+=i}}function gn(t,e,n,r,i,o,s,a){var l,u,c=255;for(u=0;u<i;++u){for(l=0;l<r;++l){var h=t[e+l];o[s+4*l]=h,c&=h}e+=n,s+=a}return 255!=c}function yn(t,e,n,r,i){var o;for(o=0;o<i;++o)n[r+o]=t[e+o]>>8}function mn(){Sr=fn,Er=dn,Cr=gn,Nr=yn}function vn(n,r,i){t[n]=function(t,n,o,s,a,l,u,c,h,p,f,d,g,y,m,v,_){var b,w=_-1>>1,x=a[l+0]|u[c+0]<<16,S=h[p+0]|f[d+0]<<16;e(null!=t);var E=3*x+S+131074>>2;for(r(t[n+0],255&E,E>>16,g,y),null!=o&&(E=3*S+x+131074>>2,r(o[s+0],255&E,E>>16,m,v)),b=1;b<=w;++b){var C=a[l+b]|u[c+b]<<16,N=h[p+b]|f[d+b]<<16,P=x+C+S+N+524296,O=P+2*(C+S)>>3;E=O+x>>1,x=(P=P+2*(x+N)>>3)+C>>1,r(t[n+2*b-1],255&E,E>>16,g,y+(2*b-1)*i),r(t[n+2*b-0],255&x,x>>16,g,y+(2*b-0)*i),null!=o&&(E=P+S>>1,x=O+N>>1,r(o[s+2*b-1],255&E,E>>16,m,v+(2*b-1)*i),r(o[s+2*b+0],255&x,x>>16,m,v+(2*b+0)*i)),x=C,S=N}1&_||(E=3*x+S+131074>>2,r(t[n+_-1],255&E,E>>16,g,y+(_-1)*i),null!=o&&(E=3*S+x+131074>>2,r(o[s+_-1],255&E,E>>16,m,v+(_-1)*i)))}}function _n(){mi[Fr]=vi,mi[jr]=bi,mi[Dr]=_i,mi[zr]=wi,mi[qr]=xi,mi[Br]=Si,mi[Gr]=Ei,mi[Ur]=bi,mi[Vr]=wi,mi[Wr]=xi,mi[Hr]=Si}function bn(t){return t&~Ii?0>t?0:255:t>>Ti}function wn(t,e){return bn((19077*t>>8)+(26149*e>>8)-14234)}function xn(t,e,n){return bn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function Sn(t,e){return bn((19077*t>>8)+(33050*e>>8)-17685)}function En(t,e,n,r,i){r[i+0]=wn(t,n),r[i+1]=xn(t,e,n),r[i+2]=Sn(t,e)}function Cn(t,e,n,r,i){r[i+0]=Sn(t,e),r[i+1]=xn(t,e,n),r[i+2]=wn(t,n)}function Nn(t,e,n,r,i){var o=xn(t,e,n);e=o<<3&224|Sn(t,e)>>3,r[i+0]=248&wn(t,n)|o>>5,r[i+1]=e}function Pn(t,e,n,r,i){var o=240&Sn(t,e)|15;r[i+0]=240&wn(t,n)|xn(t,e,n)>>4,r[i+1]=o}function On(t,e,n,r,i){r[i+0]=255,En(t,e,n,r,i+1)}function Tn(t,e,n,r,i){Cn(t,e,n,r,i),r[i+3]=255}function In(t,e,n,r,i){En(t,e,n,r,i),r[i+3]=255}function Wt(t,e){return 0>t?0:t>e?e:t}function Mn(e,n,r){t[e]=function(t,e,i,o,s,a,l,u,c){for(var h=u+(-2&c)*r;u!=h;)n(t[e+0],i[o+0],s[a+0],l,u),n(t[e+1],i[o+0],s[a+0],l,u+r),e+=2,++o,++a,u+=2*r;1&c&&n(t[e+0],i[o+0],s[a+0],l,u)}}function kn(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function Ln(t,e,n,r,i){switch(t>>>30){case 3:sr(e,n,r,i,0);break;case 2:ar(e,n,r,i);break;case 1:ur(e,n,r,i)}}function An(t,e){var n,o,s=e.M,a=e.Nb,l=t.oc,u=t.pc+40,c=t.oc,h=t.pc+584,p=t.oc,f=t.pc+600;for(n=0;16>n;++n)l[u+32*n-1]=129;for(n=0;8>n;++n)c[h+32*n-1]=129,p[f+32*n-1]=129;for(0<s?l[u-1-32]=c[h-1-32]=p[f-1-32]=129:(i(l,u-32-1,127,21),i(c,h-32-1,127,9),i(p,f-32-1,127,9)),o=0;o<t.za;++o){var d=e.ya[e.aa+o];if(0<o){for(n=-1;16>n;++n)r(l,u+32*n-4,l,u+32*n+12,4);for(n=-1;8>n;++n)r(c,h+32*n-4,c,h+32*n+4,4),r(p,f+32*n-4,p,f+32*n+4,4)}var g=t.Gd,y=t.Hd+o,m=d.ad,v=d.Hc;if(0<s&&(r(l,u-32,g[y].y,0,16),r(c,h-32,g[y].f,0,8),r(p,f-32,g[y].ea,0,8)),d.Za){var _=l,b=u-32+16;for(0<s&&(o>=t.za-1?i(_,b,g[y].y[15],4):r(_,b,g[y+1].y,0,4)),n=0;4>n;n++)_[b+128+n]=_[b+256+n]=_[b+384+n]=_[b+0+n];for(n=0;16>n;++n,v<<=2)_=l,b=u+Di[n],pi[d.Ob[n]](_,b),Ln(v,m,16*+n,_,b)}else if(_=kn(o,s,d.Ob[0]),hi[_](l,u),0!=v)for(n=0;16>n;++n,v<<=2)Ln(v,m,16*+n,l,u+Di[n]);for(n=d.Gc,_=kn(o,s,d.Dd),fi[_](c,h),fi[_](p,f),v=m,_=c,b=h,255&(d=n>>0)&&(170&d?lr(v,256,_,b):cr(v,256,_,b)),d=p,v=f,255&(n>>=8)&&(170&n?lr(m,320,d,v):cr(m,320,d,v)),s<t.Ub-1&&(r(g[y].y,0,l,u+480,16),r(g[y].f,0,c,h+224,8),r(g[y].ea,0,p,f+224,8)),n=8*a*t.B,g=t.sa,y=t.ta+16*o+16*a*t.R,m=t.qa,d=t.ra+8*o+n,v=t.Ha,_=t.Ia+8*o+n,n=0;16>n;++n)r(g,y+n*t.R,l,u+32*n,16);for(n=0;8>n;++n)r(m,d+n*t.B,c,h+32*n,8),r(v,_+n*t.B,p,f+32*n,8)}}function Rn(t,r,i,o,s,a,l,u,c){var h=[0],p=[0],f=0,d=null!=c?c.kd:0,g=null!=c?c:new rn;if(null==t||12>i)return 7;g.data=t,g.w=r,g.ha=i,r=[r],i=[i],g.gb=[g.gb];t:{var y=r,v=i,_=g.gb;if(e(null!=t),e(null!=v),e(null!=_),_[0]=0,12<=v[0]&&!n(t,y[0],"RIFF")){if(n(t,y[0]+8,"WEBP")){_=3;break t}var b=k(t,y[0]+4);if(12>b||4294967286<b){_=3;break t}if(d&&b>v[0]-8){_=7;break t}_[0]=b,y[0]+=12,v[0]-=12}_=0}if(0!=_)return _;for(b=0<g.gb[0],i=i[0];;){t:{var x=t;v=r,_=i;var S=h,E=p,C=y=[0];if((O=f=[f])[0]=0,8>_[0])_=7;else{if(!n(x,v[0],"VP8X")){if(10!=k(x,v[0]+4)){_=3;break t}if(18>_[0]){_=7;break t}var N=k(x,v[0]+8),P=1+M(x,v[0]+12);if(2147483648<=P*(x=1+M(x,v[0]+15))){_=3;break t}null!=C&&(C[0]=N),null!=S&&(S[0]=P),null!=E&&(E[0]=x),v[0]+=18,_[0]-=18,O[0]=1}_=0}}if(f=f[0],y=y[0],0!=_)return _;if(v=!!(2&y),!b&&f)return 3;if(null!=a&&(a[0]=!!(16&y)),null!=l&&(l[0]=v),null!=u&&(u[0]=0),l=h[0],y=p[0],f&&v&&null==c){_=0;break}if(4>i){_=7;break}if(b&&f||!b&&!f&&!n(t,r[0],"ALPH")){i=[i],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];t:{N=t,_=r,b=i;var O=g.gb;S=g.na,E=g.P,C=g.Sa,P=22,e(null!=N),e(null!=b),x=_[0];var T=b[0];for(e(null!=S),e(null!=C),S[0]=null,E[0]=null,C[0]=0;;){if(_[0]=x,b[0]=T,8>T){_=7;break t}var I=k(N,x+4);if(4294967286<I){_=3;break t}var L=8+I+1&-2;if(P+=L,0<O&&P>O){_=3;break t}if(!n(N,x,"VP8 ")||!n(N,x,"VP8L")){_=0;break t}if(T[0]<L){_=7;break t}n(N,x,"ALPH")||(S[0]=N,E[0]=x+8,C[0]=I),x+=L,T-=L}}if(i=i[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=_)break}i=[i],g.Ja=[g.Ja],g.xa=[g.xa];t:if(O=t,_=r,b=i,S=g.gb[0],E=g.Ja,C=g.xa,N=_[0],x=!n(O,N,"VP8 "),P=!n(O,N,"VP8L"),e(null!=O),e(null!=b),e(null!=E),e(null!=C),8>b[0])_=7;else{if(x||P){if(O=k(O,N+4),12<=S&&O>S-12){_=3;break t}if(d&&O>b[0]-8){_=7;break t}E[0]=O,_[0]+=8,b[0]-=8,C[0]=P}else C[0]=5<=b[0]&&47==O[N+0]&&!(O[N+4]>>5),E[0]=b[0];_=0}if(i=i[0],g.Ja=g.Ja[0],g.xa=g.xa[0],r=r[0],0!=_)break;if(4294967286<g.Ja)return 3;if(null==u||v||(u[0]=g.xa?2:1),l=[l],y=[y],g.xa){if(5>i){_=7;break}u=l,d=y,v=a,null==t||5>i?t=0:5<=i&&47==t[r+0]&&!(t[r+4]>>5)?(b=[0],O=[0],S=[0],m(E=new w,t,r,i),gt(E,b,O,S)?(null!=u&&(u[0]=b[0]),null!=d&&(d[0]=O[0]),null!=v&&(v[0]=S[0]),t=1):t=0):t=0}else{if(10>i){_=7;break}u=y,null==t||10>i||!Kt(t,r+3,i-3)?t=0:(d=t[r+0]|t[r+1]<<8|t[r+2]<<16,v=16383&(t[r+7]<<8|t[r+6]),t=16383&(t[r+9]<<8|t[r+8]),1&d||3<(d>>1&7)||!(d>>4&1)||d>>5>=g.Ja||!v||!t?t=0:(l&&(l[0]=v),u&&(u[0]=t),t=1))}if(!t)return 3;if(l=l[0],y=y[0],f&&(h[0]!=l||p[0]!=y))return 3;null!=c&&(c[0]=g,c.offset=r-c.w,e(4294967286>r-c.w),e(c.offset==c.ha-i));break}return 0==_||7==_&&f&&null==c?(null!=a&&(a[0]|=null!=g.na&&0<g.na.length),null!=o&&(o[0]=l),null!=s&&(s[0]=y),0):_}function Fn(t,e,n){var r=e.width,i=e.height,o=0,s=0,a=r,l=i;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,l=t.bd,o=t.v,s=t.j,11>n||(o&=-2,s&=-2),0>o||0>s||0>=a||0>=l||o+a>r||s+l>i))return 0;if(e.v=o,e.j=s,e.va=o+a,e.o=s+l,e.U=a,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!F(a,l,n=[t.ib],o=[t.hb]))return 0;e.ib=n[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*r/4&&e.hb<3*i/4,e.Kb=0),1}function jn(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Dn(t,e,n,r){if(null==r||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var i=n.cd,s=n.bd,a=-2&n.v,l=-2&n.j;if(0>a||0>l||0>=i||0>=s||a+i>t||l+s>e)return 2;t=i,e=s}if(n.da){if(!F(t,e,i=[n.ib],s=[n.hb]))return 2;t=i[0],e=s[0]}}r.width=t,r.height=e;t:{var u=r.width,c=r.height;if(t=r.S,0>=u||0>=c||!(t>=Fr&&13>t))t=2;else{if(0>=r.Rd&&null==r.sd){a=s=i=e=0;var h=(l=u*Gi[t])*c;if(11>t||(s=(c+1)/2*(e=(u+1)/2),12==t&&(a=(i=u)*c)),null==(c=o(h+2*s+a))){t=1;break t}r.sd=c,11>t?((u=r.f.RGBA).eb=c,u.fb=0,u.A=l,u.size=h):((u=r.f.kb).y=c,u.O=0,u.fa=l,u.Fd=h,u.f=c,u.N=0+h,u.Ab=e,u.Cd=s,u.ea=c,u.W=0+h+s,u.Db=e,u.Ed=s,12==t&&(u.F=c,u.J=0+h+2*s),u.Tc=a,u.lb=i)}if(e=1,i=r.S,s=r.width,a=r.height,i>=Fr&&13>i)if(11>i)t=r.f.RGBA,e&=(l=Math.abs(t.A))*(a-1)+s<=t.size,e&=l>=s*Gi[i],e&=null!=t.eb;else{t=r.f.kb,l=(s+1)/2,h=(a+1)/2,u=Math.abs(t.fa),c=Math.abs(t.Ab);var p=Math.abs(t.Db),f=Math.abs(t.lb),d=f*(a-1)+s;e&=u*(a-1)+s<=t.Fd,e&=c*(h-1)+l<=t.Cd,e=(e&=p*(h-1)+l<=t.Ed)&u>=s&c>=l&p>=l,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==i&&(e&=f>=s,e&=d<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=jn(r)),t}var zn=64,qn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bn=24,Gn=32,Un=8,Vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];z("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return B(B(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return B(t,e[n-1])},t.Predictor7=function(t,e,n){return B(t,e[n+0])},t.Predictor8=function(t,e,n){return B(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return B(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return B(B(t,e[n-1]),B(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var r=e[n+0];return 0>=V(r>>24&255,t>>24&255,(e=e[n-1])>>24&255)+V(r>>16&255,t>>16&255,e>>16&255)+V(r>>8&255,t>>8&255,e>>8&255)+V(255&r,255&t,255&e)?r:t},t.Predictor12=function(t,e,n){var r=e[n+0];return(G((t>>24&255)+(r>>24&255)-((e=e[n-1])>>24&255))<<24|G((t>>16&255)+(r>>16&255)-(e>>16&255))<<16|G((t>>8&255)+(r>>8&255)-(e>>8&255))<<8|G((255&t)+(255&r)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var r=e[n-1];return(U((t=B(t,e[n+0]))>>24&255,r>>24&255)<<24|U(t>>16&255,r>>16&255)<<16|U(t>>8&255,r>>8&255)<<8|U(t>>0&255,r>>0&255))>>>0};var Wn=t.PredictorAdd0;t.PredictorAdd1=W,z("Predictor2","PredictorAdd2"),z("Predictor3","PredictorAdd3"),z("Predictor4","PredictorAdd4"),z("Predictor5","PredictorAdd5"),z("Predictor6","PredictorAdd6"),z("Predictor7","PredictorAdd7"),z("Predictor8","PredictorAdd8"),z("Predictor9","PredictorAdd9"),z("Predictor10","PredictorAdd10"),z("Predictor11","PredictorAdd11"),z("Predictor12","PredictorAdd12"),z("Predictor13","PredictorAdd13");var Hn=t.PredictorAdd2;K("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),K("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Yn,Xn=t.ColorIndexInverseTransform,Kn=t.MapARGB,Zn=t.VP8LColorIndexInverseTransformAlpha,$n=t.MapAlpha,Jn=t.VP8LPredictorsAdd=[];Jn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qn,tr,er,nr,rr,ir,or,sr,ar,lr,ur,cr,hr,pr,fr,dr,gr,yr,mr,vr,_r,br,wr,xr,Sr,Er,Cr,Nr,Pr=o(511),Or=o(2041),Tr=o(225),Ir=o(767),Mr=0,kr=Or,Lr=Tr,Ar=Ir,Rr=Pr,Fr=0,jr=1,Dr=2,zr=3,qr=4,Br=5,Gr=6,Ur=7,Vr=8,Wr=9,Hr=10,Yr=[2,3,7],Xr=[3,3,11],Kr=[280,256,256,256,40],Zr=[0,1,1,1,0],$r=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ti=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],si=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ai=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ui=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hi=[],pi=[],fi=[],di=1,gi=2,yi=[],mi=[];vn("UpsampleRgbLinePair",En,3),vn("UpsampleBgrLinePair",Cn,3),vn("UpsampleRgbaLinePair",In,4),vn("UpsampleBgraLinePair",Tn,4),vn("UpsampleArgbLinePair",On,4),vn("UpsampleRgba4444LinePair",Pn,2),vn("UpsampleRgb565LinePair",Nn,2);var vi=t.UpsampleRgbLinePair,_i=t.UpsampleBgrLinePair,bi=t.UpsampleRgbaLinePair,wi=t.UpsampleBgraLinePair,xi=t.UpsampleArgbLinePair,Si=t.UpsampleRgba4444LinePair,Ei=t.UpsampleRgb565LinePair,Ci=16,Ni=1<<Ci-1,Pi=-227,Oi=482,Ti=6,Ii=(256<<Ti)-1,Mi=0,ki=o(256),Li=o(256),Ai=o(256),Ri=o(256),Fi=o(Oi-Pi),ji=o(Oi-Pi);Mn("YuvToRgbRow",En,3),Mn("YuvToBgrRow",Cn,3),Mn("YuvToRgbaRow",In,4),Mn("YuvToBgraRow",Tn,4),Mn("YuvToArgbRow",On,4),Mn("YuvToRgba4444Row",Pn,2),Mn("YuvToRgb565Row",Nn,2);var Di=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zi=[0,2,8],qi=[8,7,6,4,4,2,2,2,1,1,1,1],Bi=1;this.WebPDecodeRGBA=function(t,n,r,i,o){var s=jr,a=new nn,l=new st;a.ba=l,l.S=s,l.width=[l.width],l.height=[l.height];var u=l.width,c=l.height,h=new at;if(null==h||null==t)var p=2;else e(null!=h),p=Rn(t,n,r,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=p?u=0:(null!=u&&(u[0]=h.width[0]),null!=c&&(c[0]=h.height[0]),u=1),u){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=o&&(o[0]=l.height);t:{if(i=new Ht,(o=new rn).data=t,o.w=n,o.ha=r,o.kd=1,n=[0],e(null!=o),(0==(t=Rn(o.data,o.w,o.ha,null,null,null,n,null,o))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=a),i.data=o.data,i.w=o.w+o.offset,i.ha=o.ha-o.offset,i.put=ft,i.ac=pt,i.bc=dt,i.ma=a,o.xa){if(null==(t=Ot())){a=1;break t}if(function(t,n){var r=[0],i=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,m(t.m,n.data,n.w,n.ha),!gt(t.m,r,i,o)){t.a=3;break e}if(t.xb=gi,n.width=r[0],n.height=i[0],!Tt(r[0],i[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,i)){if(i=0==(n=Dn(i.width,i.height,a.Oa,a.ba))){e:{i=t;n:for(;;){if(null==i){i=0;break e}if(e(null!=i.s.yc),e(null!=i.s.Ya),e(0<i.s.Wb),e(null!=(r=i.l)),e(null!=(o=r.ma)),0!=i.xb){if(i.ca=o.ba,i.tb=o.tb,e(null!=i.ca),!Fn(o.Oa,r,zr)){i.a=2;break n}if(!It(i,r.width))break n;if(r.da)break n;if((r.da||rt(i.ca.S))&&mn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&mn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!L(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!Nt(i,i.V,i.Ba,i.c,i.i,r.o,xt))break n;o.Dc=i.Ma,i=1;break e}e(0!=i.a),i=0}i=!i}i&&(n=t.a)}else n=t.a}else{if(null==(t=new Yt)){a=1;break t}if(t.Fa=o.na,t.P=o.P,t.qc=o.Sa,Zt(t,i)){if(0==(n=Dn(i.width,i.height,a.Oa,a.ba))){if(t.Aa=0,r=a.Oa,e(null!=(o=t)),null!=r){if(0<(u=0>(u=r.Md)?0:100<u?255:255*u/100)){for(c=h=0;4>c;++c)12>(p=o.pb[c]).lc&&(p.ia=u*qi[0>p.lc?0:p.lc]>>3),h|=p.ia;h&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=r.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}Qt(t,i)||(n=t.a)}}else n=t.a}0==n&&null!=a.Oa&&a.Oa.fd&&(n=jn(a.ba))}a=n}s=0!=a?null:11>s?l.f.RGBA.eb:l.f.kb.y}else s=null;return s};var Gi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(t,e){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(t[e++]);return n}function c(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var p=[0],f=[0],d=[],g=new l,y=t,m=function(t,e){var n={},r=0,i=!1,o=0,s=0;if(n.frames=[],!function(t,e,n,r){for(var i=0;i<4;i++)if(t[e+i]!="RIFF".charCodeAt(i))return!0;return!1}(t,e)){var a,l;for(h(t,e+=4),e+=8;e<t.length;){var p=u(t,e),f=h(t,e+=4);e+=4;var d=f+(1&f);switch(p){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(m=n.frames[r]).src_off=i?s:e-8,m.src_size=o+f+8,r++,i&&(i=!1,o=0,s=0);break;case"VP8X":(m=n.header={}).feature_flags=t[e];var g=e+4;m.canvas_width=1+c(t,g),g+=3,m.canvas_height=1+c(t,g),g+=3;break;case"ALPH":i=!0,o=d+8,s=e-8;break;case"ANIM":(m=n.header).bgcolor=h(t,e),g=e+4,m.loop_count=(a=t)[(l=g)+0]<<0|a[l+1]<<8,g+=2;break;case"ANMF":var y,m;(m=n.frames[r]={}).offset_x=2*c(t,e),e+=3,m.offset_y=2*c(t,e),e+=3,m.width=1+c(t,e),e+=3,m.height=1+c(t,e),e+=3,m.duration=c(t,e),e+=3,y=t[e++],m.dispose=1&y,m.blend=y>>1&1}"ANMF"!=p&&(e+=d)}return n}}(y,0);m.response=y,m.rgbaoutput=!0,m.dataurl=!1;var v=m.header?m.header:null,_=m.frames?m.frames:null;if(v){v.loop_counter=v.loop_count,p=[v.canvas_height],f=[v.canvas_width];for(var b=0;b<_.length&&0!=_[b].blend;b++);}var w=_[0],x=g.WebPDecodeRGBA(y,w.src_off,w.src_size,f,p);w.rgba=x,w.imgwidth=f[0],w.imgheight=p[0];for(var S=0;S<f[0]*p[0]*4;S++)d[S]=x[S];return this.width=f,this.height=p,this.data=d,this}!function(t){var e=function(e,r,l,u){var c=4,h=o;switch(u){case t.image_compression.FAST:c=1,h=i;break;case t.image_compression.MEDIUM:c=6,h=s;break;case t.image_compression.SLOW:c=9,h=a}var p=Xk(e=n(e,r,l,h),{level:c});return t.__addimage__.arrayBufferToBinaryString(p)},n=function(t,e,n,r){for(var i,o,s,a=t.length/e,l=new Uint8Array(t.length+a),h=u(),p=0;p<a;p+=1){if(s=p*e,i=t.subarray(s,s+e),r)l.set(r(i,n,o),s+p);else{for(var f,d=h.length,g=[];f<d;f+=1)g[f]=h[f](i,n,o);var y=c(g.concat());l.set(g[y],s+p)}o=i}return l},r=function(t){var e=Array.apply([],t);return e.unshift(0),e},i=function(t,e){var n,r=[],i=t.length;r[0]=1;for(var o=0;o<i;o+=1)n=t[o-e]||0,r[o+1]=t[o]-n+256&255;return r},o=function(t,e,n){var r,i=[],o=t.length;i[0]=2;for(var s=0;s<o;s+=1)r=n&&n[s]||0,i[s+1]=t[s]-r+256&255;return i},s=function(t,e,n){var r,i,o=[],s=t.length;o[0]=3;for(var a=0;a<s;a+=1)r=t[a-e]||0,i=n&&n[a]||0,o[a+1]=t[a]+256-(r+i>>>1)&255;return o},a=function(t,e,n){var r,i,o,s,a=[],u=t.length;a[0]=4;for(var c=0;c<u;c+=1)r=t[c-e]||0,i=n&&n[c]||0,o=n&&n[c-e]||0,s=l(r,i,o),a[c+1]=t[c]-s+256&255;return a},l=function(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),o=Math.abs(t+e-n-n);return r<=i&&r<=o?t:i<=o?e:n},u=function(){return[r,i,o,s,a]},c=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(n,r,i,o){var s,a,l,u,c,h,p,f,d,g,y,m,v,_,b,w=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new BA(n)).imgData,a=l.bits,s=l.colorSpace,c=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){d=(f=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,y=new Uint8Array(d*l.colors),g=new Uint8Array(d);var S,E=l.pixelBitlength-l.bits;for(_=0,b=0;_<d;_++){for(v=f[_],S=0;S<E;)y[b++]=v>>>S&255,S+=l.bits;g[_]=v>>>S&255}}if(16===l.bits){d=(f=new Uint32Array(l.decodePixels().buffer)).length,y=new Uint8Array(d*(32/l.pixelBitlength)*l.colors),g=new Uint8Array(d*(32/l.pixelBitlength)),m=l.colors>1,_=0,b=0;for(var C=0;_<d;)v=f[_++],y[b++]=v>>>0&255,m&&(y[b++]=v>>>16&255,v=f[_++],y[b++]=v>>>0&255),g[C++]=v>>>16&255;a=8}o!==t.image_compression.NONE?(n=e(y,l.width*l.colors,l.colors,o),p=e(g,l.width,1,o)):(n=y,p=g,w=void 0)}if(3===l.colorType&&(s=this.color_spaces.INDEXED,h=l.palette,l.transparency.indexed)){var N=l.transparency.indexed,P=0;for(_=0,d=N.length;_<d;++_)P+=N[_];if((P/=255)==d-1&&-1!==N.indexOf(0))u=[N.indexOf(0)];else if(P!==d){for(f=l.decodePixels(),g=new Uint8Array(f.length),_=0,d=f.length;_<d;_++)g[_]=N[f[_]];p=e(g,l.width,1)}}var O=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return w===this.decode.FLATE_DECODE&&(x="/Predictor "+O+" "),x+="/Colors "+c+" /BitsPerComponent "+a+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:i,data:n,index:r,filter:w,decodeParameters:x,transparency:u,palette:h,sMask:p,predictor:O,width:l.width,height:l.height,bitsPerComponent:a,colorSpace:s}}}}(TL.API),function(t){t.processGIF89A=function(e,n,r,i){var o=new GA(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:a},c=new VA(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(TL.API),WA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},WA.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){Jk.log("bit decode error:"+t)}},WA.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}0!==n&&(this.pos+=4-n)}},WA.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,u=this.palette[a];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}0!==e&&(this.pos+=4-e)}},WA.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==t&&(this.pos+=4-t)}},WA.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,u=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}this.pos+=t}},WA.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,u=(s>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},WA.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},WA.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},WA.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var o=new WA(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new VA(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(TL.API),HA.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var o=new HA(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new VA(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(TL.API),TL.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],p=r[u+2],f=r[u+3];o[a++]=c,o[a++]=h,o[a++]=p,s[l++]=f}var d=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:d,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},TL.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},FA=TL.API,jA=FA.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=!1!==e.doKerning,p=0,f=t.length,d=0,g=a[0]||l,y=[];for(n=0;n<f;n++)r=t.charCodeAt(n),"function"==typeof i.metadata.widthOfString?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(p=h&&"object"===M(u[r])&&!isNaN(parseInt(u[r][d],10))?u[r][d]/c:0,y.push((a[r]||g)/l+p)),d=r;return y},DA=FA.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return FA.processArabic&&(t=FA.processArabic(t)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(t,n,i)/n:jA.apply(this,arguments).reduce((function(t,e){return t+e}),0)},zA=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},qA=function(t,e,n){n||(n={});var r,i,o,s,a,l,u,c=[],h=[c],p=n.textIndent||0,f=0,d=0,g=t.split(" "),y=jA.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?g[0].length+2:n.lineIndent||0){var m=Array(l).join(" "),v=[];g.map((function(t){(t=t.split(/\s*\n/)).length>1?v=v.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):v.push(t[0])})),g=v,l=DA.apply(this,[m,n])}for(o=0,s=g.length;o<s;o++){var _=0;if(r=g[o],l&&"\n"==r[0]&&(r=r.substr(1),_=1),p+f+(d=(i=jA.apply(this,[r,n])).reduce((function(t,e){return t+e}),0))>e||_){if(d>e){for(a=zA.apply(this,[r,i,e-(p+f),e]),c.push(a.shift()),c=[a.pop()];a.length;)h.push([a.shift()]);d=i.slice(r.length-(c[0]?c[0].length:0)).reduce((function(t,e){return t+e}),0)}else c=[r];h.push(c),p=d+l,f=y}else c.push(r),p+=f+d,f=y}return u=l?function(t,e){return(e?m:"")+t.join(" ")}:function(t){return t.join(" ")},h.map(u)},FA.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(qA.apply(this,[r[a],s,o]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(t){return"0x"+parseInt(t,10).toString(16)},s=t.__fontmetrics__.compress=function(t){var e,n,i,a,l=["{"];for(var u in t){if(e=t[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=o(u).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof e)e<0?(i=o(e).slice(3),a="-"):(i=o(e).slice(2),a=""),i=a+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==M(e))throw new Error("Don't know what to do with value type "+M(e)+".");i=s(e)}l.push(n+i)}return l.push("}"),l.join("")},a=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,r,i,o,s={},a=1,l=s,u=[],c="",h="",p=t.length-1,f=1;f<p;f+=1)"'"==(o=t[f])?e?(i=e.join(""),e=void 0):e=[]:e?e.push(o):"{"==o?(u.push([l,i]),l={},i=void 0):"}"==o?((r=u.pop())[0][r[1]]=l,i=void 0,l=r[0]):"-"==o?a=-1:void 0===i?n.hasOwnProperty(o)?(c+=n[o],i=parseInt(c,16)*a,a=1,c=""):c+=o:n.hasOwnProperty(o)?(h+=n[o],l[i]=parseInt(h,16)*a,a=1,i=void 0,h=""):h+=o;return s},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=c.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[e.postScriptName];r&&(e.metadata.Unicode.encoding=r,e.encoding=r.codePages[0])}])}(TL.API),function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===o.existsFileInVFS(i.postScriptName)?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?e(r):e(nL(r)),n.metadata=t.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(TL),function(t){function e(){return(Zk.canvg?Promise.resolve(Zk.canvg):__webpack_require__.e(894).then(__webpack_require__.bind(__webpack_require__,3894))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}TL.API.addSvgAsImage=function(t,n,r,i,o,s,a,l){if(isNaN(n)||isNaN(r))throw Jk.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Jk.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then((function(e){return e.fromString(c,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){p.addImage(u.toDataURL("image/jpeg",1),n,r,i,o,a,l)}))}}(),TL.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},TL.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],u=0,c=0,h=0;function p(t,e){var n,r=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var f=a.length;for(h=0;h<f;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if("object"===M(t))for(i in t)if(o=t[i],p(a,i)&&void 0!==o){if("boolean"===n[i].type&&"boolean"==typeof o)n[i].value=o;else if("name"===n[i].type&&p(n[i].valueSet,o))n[i].value=o;else if("integer"===n[i].type&&Number.isInteger(o))n[i].value=o;else if("array"===n[i].type){for(u=0;u<o.length;u+=1)if(r=!0,1===o[u].length&&"number"==typeof o[u][0])l.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)"number"!=typeof o[u][c]&&(r=!1);!0===r&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+r.length+i.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(e+n+r+i+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(TL.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,r=e.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],s=0,a=t.length;s<a;++s){if(n=e.metadata.characterToGlyph(t.charCodeAt(s)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(s),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(i[4-n.length],n)}return o.join("")},r=function(t){var e,n,r,i,o,s,a;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],s=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;s<a;s++)e=n[s],r.length>=100&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(i=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),r.push("<"+e+"><"+i+">"));return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,o=e.newObject,s=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var a=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),u="",c=0;c<l.length;c++)u+=String.fromCharCode(l[c]);var h=o();s({data:u,addLength1:!0,objectId:h}),i("endobj");var p=o();s({data:r(n.metadata.toUnicode),addLength1:!0,objectId:p}),i("endobj");var f=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+SL(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var d=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+SL(n.fontName)),i("/FontDescriptor "+f+" 0 R"),i("/W "+t.API.PDFObject.convert(a)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+p+" 0 R"),i("/BaseFont /"+SL(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+d+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,o=e.newObject,s=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var a=n.metadata.rawData,l="",u=0;u<a.length;u++)l+=String.fromCharCode(a[u]);var c=o();s({data:l,addLength1:!0,objectId:c}),i("endobj");var h=o();s({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var p=o();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+c+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+SL(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=o();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+SL(n.fontName)+"/FontDescriptor "+p+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]);var i=function(t){var e,r=t.text||"",i=t.x,o=t.y,s=t.options||{},a=t.mutex||{},l=a.pdfEscape,u=a.activeFontKey,c=a.fonts,h=u,p="",f=0,d="",g=c[h].encoding;if("Identity-H"!==c[h].encoding)return{text:r,x:i,y:o,options:s,mutex:a};for(d=r,h=u,Array.isArray(r)&&(d=r[0]),f=0;f<d.length;f+=1)c[h].metadata.hasOwnProperty("cmap")&&(e=c[h].metadata.cmap.unicode.codeMap[d[f].charCodeAt(0)]),e||d[f].charCodeAt(0)<256&&c[h].metadata.hasOwnProperty("Unicode")?p+=d[f]:p+="";var y="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===g?y=l(p,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===g&&(y=n(p,c[h])),a.isHex=!0,{text:y,x:i,y:o,options:s,mutex:a}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],r={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?n.push([i(Object.assign({},r,{text:e[o][0]})).text,e[o][1],e[o][2]]):n.push(i(Object.assign({},r,{text:e[o]})).text);t.text=n}else t.text=i(Object.assign({},r,{text:e})).text}])}(TL),function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(TL.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,r,i,o,s,a,l,u=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},d=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,m=0;this.__bidiEngine__={};var v=function(t){var e=t.charCodeAt(),n=e>>8,r=f[n];return void 0!==r?u[256*r+(255&e)]:252===n||253===n?"AL":g.test(n)?"L":8===n?"R":"N"},_=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=v(t.charAt(n))))return!1;if("R"===e)return!0}return!1},b=function(t,e,s,a){var l,u,c,h,p=e[a];switch(p){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(p="AN");break;case"AL":y=!0,p="R";break;case"WS":case"BN":p="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(l=s[a-1])&&"AN"!==l||"EN"!==(u=e[a+1])&&"AN"!==u?p="N":y&&(u="AN"),p=u===l?u:"N";break;case"ES":p="EN"===(l=a>0?s[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===s[a-1]){p="EN";break}if(y){p="N";break}for(c=a+1,h=e.length;c<h&&"ET"===e[c];)c++;p=c<h&&"EN"===e[c]?"EN":"N";break;case"NSM":if(i&&!o){for(h=e.length,c=a+1;c<h&&"NSM"===e[c];)c++;if(c<h){var f=t[a],d=f>=1425&&f<=2303||64286===f;if(l=e[c],d&&("R"===l||"AL"===l)){p="R";break}}}p=a<1||"B"===(l=e[a-1])?"N":s[a-1];break;case"B":y=!1,n=!0,p=m;break;case"S":r=!0,p="N"}return p},w=function(t,e,n){var r=t.split("");return n&&x(r,n,{hiLevel:m}),r.reverse(),e&&e.reverse(),r.join("")},x=function(t,e,i){var o,s,a,l,u,f=-1,d=t.length,g=0,_=[],w=m?h:c,x=[];for(y=!1,n=!1,r=!1,s=0;s<d;s++)x[s]=v(t[s]);for(a=0;a<d;a++){if(u=g,_[a]=b(t,x,_,a),o=240&(g=w[u][p[_[a]]]),g&=15,e[a]=l=w[g][5],o>0)if(16===o){for(s=f;s<a;s++)e[s]=1;f=-1}else f=-1;if(w[g][6])-1===f&&(f=a);else if(f>-1){for(s=f;s<a;s++)e[s]=l;f=-1}"B"===x[a]&&(e[a]=0),i.hiLevel|=l}r&&function(t,e,n){for(var r=0;r<n;r++)if("S"===t[r]){e[r]=m;for(var i=r-1;i>=0&&"WS"===t[i];i--)e[i]=m}}(x,e,d)},S=function(t,e,r,i,o){if(!(o.hiLevel<t)){if(1===t&&1===m&&!n)return e.reverse(),void(r&&r.reverse());for(var s,a,l,u,c=e.length,h=0;h<c;){if(i[h]>=t){for(l=h+1;l<c&&i[l]>=t;)l++;for(u=h,a=l-1;u<a;u++,a--)s=e[u],e[u]=e[a],e[a]=s,r&&(s=r[u],r[u]=r[a],r[a]=s);h=l}h++}}},E=function(t,e,n){var r=t.split(""),i={hiLevel:m};return n||(n=[]),x(r,n,i),function(t,e,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<t.length;i++)1===e[i]&&(r=d.indexOf(t[i]))>=0&&(t[i]=d[r+1])}(r,n,i),S(2,r,e,n,i),S(1,r,e,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===o&&(o=_(t)),void 0===a&&(a=_(t))}(t,e),i||!s||a)if(i&&s&&o^a)m=o?1:0,t=w(t,e,n);else if(!i&&s&&a)m=o?1:0,t=E(t,e,n),t=w(t,e);else if(!i||o||s||a){if(i&&!s&&o^a)t=w(t,e),o?(m=0,t=E(t,e,n)):(m=1,t=E(t,e,n),t=w(t,e));else if(i&&o&&!s&&a)m=1,t=E(t,e,n),t=w(t,e);else if(!i&&!s&&o^a){var r=l;o?(m=1,t=E(t,e,n),m=0,l=!1,t=E(t,e,n),l=r):(m=0,t=E(t,e,n),t=w(t,e),m=1,l=!1,t=E(t,e,n),l=r,t=w(t,e))}}else m=0,t=E(t,e,n);else m=o?1:0,t=E(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(i=t.isInputVisual,s=t.isOutputVisual,o=t.isInputRtl,a=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,r=(t.x,t.y,t.options||{}),i=(t.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(i=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?i.push([n.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):i.push([n.doBidiReorder(e[o])]);t.text=i}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(TL),TL.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new XA(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new fR(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new KA(this.contents),this.head=new JA(this),this.name=new oR(this),this.cmap=new tR(this),this.toUnicode={},this.hhea=new eR(this),this.maxp=new sR(this),this.hmtx=new aR(this),this.post=new rR(this),this.os2=new nR(this),this.loca=new pR(this),this.glyf=new uR(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,r,i;for(i=[],e=0,n=(r=this.bbox).length;e<n;e++)t=r[e],i.push(Math.round(t*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(e=r>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var r,i,o,s;for(o=0,i=0,s=(t=""+t).length;0<=s?i<s:i>s;i=0<=s?++i:--i)r=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/e)||0;return o*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var YA,XA=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,r;for(r=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,r,i,o,s,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^s)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*r+16777216*i+65536*o+256*s+a},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(this.writeByte(e));return i},t}(),KA=function(){var t;function e(t){var e,n,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,r,i,o,s,a,l,u,c,h,p,f,d;for(d in p=Object.keys(e).length,a=Math.log(2),c=16*Math.floor(Math.log(p)/a),o=Math.floor(c/a),u=16*p-c,(r=new XA).writeInt(this.scalarType),r.writeShort(p),r.writeShort(c),r.writeShort(o),r.writeShort(u),i=16*p,l=r.pos+i,s=null,f=[],e)for(h=e[d],r.writeString(d),r.writeInt(t(h)),r.writeInt(l),r.writeInt(h.length),f=f.concat(h),"head"===d&&(s=l),l+=h.length;l%4;)f.push(0),l++;return r.write(f),n=2981146554-t(r.data),r.pos=s+8,r.writeUInt32(n),r.data},t=function(t){var e,n,r,i;for(t=lR.call(t);t.length%4;)t.push(0);for(r=new XA(t),n=0,e=0,i=t.length;e<i;e=e+=4)n+=r.readUInt32();return 4294967295&n},e}(),ZA={}.hasOwnProperty,$A=function(t,e){for(var n in e)ZA.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};YA=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var JA=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new XA).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),QA=function(){function t(t,e){var n,r,i,o,s,a,l,u,c,h,p,f,d,g,y,m,v;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,i=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,d=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),u=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),r=(this.length-t.pos+this.offset)/2,s=function(){var e,n;for(n=[],a=e=0;0<=r?e<r:e>r;a=0<=r?++e:--e)n.push(t.readUInt16());return n}(),a=y=0,v=i.length;y<v;a=++y)for(g=i[a],n=m=f=d[a];f<=g?m<=g:m>=g;n=f<=g?++m:--m)0===u[a]?o=n+l[a]:0!==(o=s[u[a]/2+(n-f)-(h-a)]||0)&&(o+=l[a]),this.codeMap[n]=65535&o}t.pos=c}return t.encode=function(t,e){var n,r,i,o,s,a,l,u,c,h,p,f,d,g,y,m,v,_,b,w,x,S,E,C,N,P,O,T,I,M,k,L,A,R,F,j,D,z,q,B,G,U,V,W,H,Y;switch(T=new XA,o=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(d=0,g=function(){var t=[];for(f=0;f<256;++f)t.push(0);return t}(),m={0:0},i={},I=0,A=o.length;I<A;I++)null==m[V=t[r=o[I]]]&&(m[V]=++d),i[r]={old:t[r],new:m[t[r]]},g[r]=m[t[r]];return T.writeUInt16(1),T.writeUInt16(0),T.writeUInt32(12),T.writeUInt16(0),T.writeUInt16(262),T.writeUInt16(0),T.write(g),{charMap:i,subtable:T.data,maxGlyphID:d+1};case"unicode":for(P=[],c=[],v=0,m={},n={},y=l=null,M=0,R=o.length;M<R;M++)null==m[b=t[r=o[M]]]&&(m[b]=++v),n[r]={old:b,new:m[b]},s=m[b]-r,null!=y&&s===l||(y&&c.push(y),P.push(r),l=s),y=r;for(y&&c.push(y),c.push(65535),P.push(65535),C=2*(E=P.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,x=2*E-S,a=[],w=[],p=[],f=k=0,F=P.length;k<F;f=++k){if(N=P[f],u=c[f],65535===N){a.push(0),w.push(0);break}if(N-(O=n[N].new)>=32768)for(a.push(0),w.push(2*(p.length+E-f)),r=L=N;N<=u?L<=u:L>=u;r=N<=u?++L:--L)p.push(n[r].new);else a.push(O-N),w.push(0)}for(T.writeUInt16(3),T.writeUInt16(1),T.writeUInt32(12),T.writeUInt16(4),T.writeUInt16(16+8*E+2*p.length),T.writeUInt16(0),T.writeUInt16(C),T.writeUInt16(S),T.writeUInt16(h),T.writeUInt16(x),G=0,j=c.length;G<j;G++)r=c[G],T.writeUInt16(r);for(T.writeUInt16(0),U=0,D=P.length;U<D;U++)r=P[U],T.writeUInt16(r);for(W=0,z=a.length;W<z;W++)s=a[W],T.writeUInt16(s);for(H=0,q=w.length;H<q;H++)_=w[H],T.writeUInt16(_);for(Y=0,B=p.length;Y<B;Y++)d=p[Y],T.writeUInt16(d);return{charMap:n,subtable:T.data,maxGlyphID:v+1}}},t}(),tR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)e=new QA(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,r;return null==e&&(e="macroman"),n=QA.encode(t,e),(r=new XA).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),eR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),nR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),rR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var e,n,r;for(r=[],i=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;i=0<=n?++e:--e)r.push(t.readUInt32());return r}.call(this)}},e}(),iR=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},oR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,r,i,o,s,a,l,u,c,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),s=t.readShort(),n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(a={},i=u=0,c=n.length;u<c;i=++u)r=n[i],t.pos=r.offset,l=t.readString(r.length),o=new iR(l,r),null==a[h=r.nameID]&&(a[h]=[]),a[r.nameID].push(o);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),sR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),aR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,r,i,o,s,a;for(t.pos=this.offset,this.metrics=[],e=0,s=this.file.hhea.numberOfMetrics;0<=s?e<s:e>s;e=0<=s?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],e=n=0;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(t.readInt16());return i}(),this.widths=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.metrics).length;t<e;t++)i=n[t],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],a=[],e=o=0;0<=r?o<r:o>r;e=0<=r?++o:--o)a.push(this.widths.push(n));return a},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),lR=[].slice,uR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,r,i,o,s,a,l,u,c;return t in this.cache?this.cache[t]:(i=this.file.loca,e=this.file.contents,n=i.indexOf(t),0===(r=i.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,o=(s=new XA(e.read(r))).readShort(),l=s.readShort(),c=s.readShort(),a=s.readShort(),u=s.readShort(),this.cache[t]=-1===o?new hR(s,l,c,a,u):new cR(s,o,l,c,a,u),this.cache[t]))},e.prototype.encode=function(t,e,n){var r,i,o,s,a;for(o=[],i=[],s=0,a=e.length;s<a;s++)r=t[e[s]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),cR=function(){function t(t,e,n,r,i,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),hR=function(){function t(t,e,n,r,i){var o,s;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new XA(lR.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),pR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $A(e,YA),e.prototype.tag="loca",e.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=2)r.push(2*t.readUInt16());return r}.call(this):function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=4)r.push(t.readUInt32());return r}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<e.length&&e[i]==o){++i,n[o]=r;var s=this.offsets[o],a=this.offsets[o+1]-s;a>0&&(r+=a)}for(var l=new Array(4*n.length),u=0;u<n.length;++u)l[4*u+3]=255&n[u],l[4*u+2]=(65280&n[u])>>8,l[4*u+1]=(16711680&n[u])>>16,l[4*u]=(4278190080&n[u])>>24;return l},e}(),fR=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,r,i;for(e in r=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[e],t[e]=r[n];return t},t.prototype.glyphsFor=function(t){var e,n,r,i,o,s,a;for(r={},o=0,s=t.length;o<s;o++)r[i=t[o]]=this.font.glyf.glyphFor(i);for(i in e=[],r)(null!=(n=r[i])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(i in a=this.glyphsFor(e))n=a[i],r[i]=n;return r},t.prototype.encode=function(t,e){var n,r,i,o,s,a,l,u,c,h,p,f,d,g,y;for(r in n=tR.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=n.charMap)p[(a=y[r]).old]=a.new;for(f in h=n.maxGlyphID,o)f in p||(p[f]=h++);return u=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(p),c=Object.keys(u).sort((function(t,e){return t-e})),d=function(){var t,e,n;for(n=[],t=0,e=c.length;t<e;t++)s=c[t],n.push(u[s]);return n}(),i=this.font.glyf.encode(o,d,p),l=this.font.loca.encode(i.offsets,d),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();TL.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+function(){var t,i,o;for(o=[],t=0,i=n.length;t<i;t++)r=n[t],o.push(e.convert(r));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join("\n")}return""+n},e}();const dR=TL,gR=t=>{const[e,n]=(0,En.useState)(""),r=(0,En.useRef)(),i={display:"inline-block",width:t.width+"px",height:t.height+"px"},o=t.mapView.center,s=t.mapView.resolution;return(0,En.useEffect)((()=>{n("")}),[t.width,t.height,o,s]),(0,En.useEffect)((()=>{t.printImage(e)}),[e]),Cn().createElement("div",{style:i,ref:r},Cn().createElement(iM,{store:t.store,center:o,resolution:s,printOnly:!0,mapRenderedCallback:()=>{r.current&&n(((t,e)=>{const n=document.createElement("canvas");n.width=e[0],n.height=e[1];const r=n.getContext("2d");if(t){const e=t.getElementsByTagName("canvas");for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n.width>0){const t=n.parentNode.style.opacity;r.globalAlpha=""===t?1:Number(t);const e=n.style.transform.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number);CanvasRenderingContext2D.prototype.setTransform.apply(r,e),r.drawImage(n,0,0)}}}return n.toDataURL("image/png")})(r.current,[t.width,t.height]))}}))};gR.defaultProps={width:600,height:400};const yR=ar((t=>({mapView:t.map})),{printImage:function(t){return{type:Bh,data:t}}})(gR),mR=({printData:t,previewSize:e})=>t&&"err"===t.substring(0,3)?Cn().createElement("div",{className:"error-message"},"There was an error generating the print image.",Cn().createElement("br",null),"This is likely due to a cross-origin/CORS error with a map-source which is being served from an external server. Check:",Cn().createElement("ol",null,Cn().createElement("li",null,"The server supports cross-origin requests."),Cn().createElement("li",null,"That the cross-origin param is set in the mapbook."),Cn().createElement("li",null,"If the server does not support cross-origin requests, set the map-source's printable attribute to false."))):Cn().createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},t&&Cn().createElement("img",{style:{border:"solid 1px #333",maxWidth:e+"px",maxHeight:e+"px"},alt:"map preview",src:t}));mR.defaultProps={previewSize:180};const vR=mR,_R=()=>Cn().createElement("div",{className:"linear-progress"},Cn().createElement("div",{className:"bar"})),bR=[{label:"letter-landscape-legend",orientation:"landscape",page:"letter",units:"in",elements:[{type:"text",size:18,fontStyle:"bold",x:.5,y:.7,text:"{{title}}"},{type:"map",x:.5,y:.75,width:7,height:7},{type:"rect",x:.5,y:.75,width:7,height:7,strokeWidth:.01},{type:"text",x:.5,y:8,text:"Printed on {{month}} / {{day}} / {{year}}"},{type:"text",x:7.6,y:.9,text:"Legend"},{type:"legend",x:7.61,y:1},{type:"rect",x:7.6,y:.75,width:2.4,height:7,strokeWidth:.01}]},{label:"letter-landscape",orientation:"landscape",page:"letter",units:"in",elements:[{type:"text",size:18,fontStyle:"bold",x:.5,y:.7,text:"{{title}}"},{type:"map",x:.5,y:.75,width:10,height:7},{type:"rect",x:.5,y:.75,width:10,height:7,strokeWidth:.01},{type:"text",x:.5,y:8,text:"Printed on {{month}} / {{day}} / {{year}}"}]},{label:"letter-portrait",orientation:"portrait",page:"letter",units:"in",elements:[{type:"text",size:18,fontStyle:"bold",x:.5,y:.7,text:"{{title}}"},{type:"map",x:.5,y:.75,width:7.5,height:9.5},{type:"rect",x:.5,y:.75,width:7.5,height:9.5,strokeWidth:.01},{type:"text",x:.5,y:10.5,text:"Printed on {{month}} / {{day}} / {{year}}"}]},{label:"tabloid-landscape",orientation:"landscape",page:"tabloid",units:"in",elements:[{type:"text",size:18,fontStyle:"bold",x:.5,y:.7,text:"{{title}}"},{type:"map",x:.5,y:.75,width:16,height:9.5},{type:"rect",x:.5,y:.75,width:16,height:9.5,strokeWidth:.01},{type:"text",x:.5,y:10.5,text:"Printed on {{month}} / {{day}} / {{year}}"}]},{label:"a4-landscape-legend",orientation:"landscape",page:"a4",units:"mm",elements:[{type:"text",size:18,fontStyle:"bold",x:12,y:18,text:"{{title}}"},{type:"map",x:12,y:19,width:209,height:179},{type:"rect",x:12,y:19,width:209,height:179,strokeWidth:.25},{type:"text",x:12,y:203,text:"Printed on {{month}} / {{day}} / {{year}}"},{type:"text",x:224,y:23,text:"Legend"},{type:"legend",x:225,y:25},{type:"rect",x:224,y:19,width:61,height:179,strokeWidth:.25}]}],wR="degrees",xR=[1,2,5],SR={minWidth:64,multiplier:1},ER=ar((t=>({mapSources:t.mapSources,open:"print"===t.ui.modal,mapView:t.map,printData:t.print.printData,catalog:t.catalog})),{hideModal:function(){return{type:zh,payload:""}}})(class extends Sy{constructor(t){super(t),this.BodyProps={style:{maxHeight:"500px"}},this.state={mapTitle:"",layout:0,resolution:1,layouts:t.layouts?t.layouts:bR}}close(t){if("print"===t){const t=parseInt(this.state.layout,10);this.makePDF(this.state.layouts[t]),this.props.store.dispatch({type:qh})}this.props.hideModal()}getTitle(){return"Print"}addText(t,e,n={}){const r=new Date,i={title:this.state.mapTitle,year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()},o=Object.assign({},{size:13,color:[0,0,0],font:"NotoSans",fontStyle:"regular"},e);t.setFontSize(o.size),t.setTextColor(o.color[0],o.color[1],o.color[2]),t.setFont(o.font,o.fontStyle),t.text(o.x,o.y,Ny().up(o.text,i),n)}addImage(t,e){e.width&&e.height?t.addImage(e.image_data,e.x,e.y,e.width,e.height):t.addImage(e.image_data,e.x,e.y)}addLegends(t,e){const n=function(t){const e={};for(const n in t)if(Array.isArray(t[n].src)){const r=t[n].src;for(let i=0,o=r.length;i<o;i++){const o=r[i];e[o.mapSourceName]||(e[o.mapSourceName]={}),e[o.mapSourceName][o.layerName]=!!e[o.mapSourceName][o.layerName]||t[n].legend}}return e}(this.props.catalog),r=this.props.mapView.resolution,i=t=>{let e=!0;return void 0!==t.minresolution&&r<t.minresolution&&(e=!1),void 0!==t.maxresolution&&r>t.maxresolution&&(e=!1),e};let o=[];for(const t in this.props.mapSources){const e=this.props.mapSources[t];if(i(e)){const r=e.layers.filter((t=>t.on)).filter((e=>!!n[t]&&!!n[t][e.name])).map((t=>oM(e,this.props.mapView,t.name))).filter((t=>"img"===t.type)).map((t=>t.images));for(let t=0,e=r.length;t<e;t++)o=o.concat(r[t])}}const s=[];return o.forEach((t=>{const e=new Promise(((e,n)=>{const r=new Image;r.onload=()=>{e(r)},r.onerror=()=>{n()},r.src=t}));s.push(e)})),Promise.all(s).then((n=>{let r=0;n.forEach((n=>{this.addImage(t,{x:e.x,y:e.y+r,image_data:n}),r+=(n.height+5)/72}))}))}addMapImage(t,e,n){const r=this.props.store.getState();this.addImage(t,Object.assign({},e,{image_data:r.print.printData}));const i=r.map,o=new tC({center:i.center,resolution:i.resolution,projection:"EPSG:3857"}),s=n.units,a=parseFloat(this.state.resolution),l=o.calculateExtent([this.toPoints(e.width,s)*a,this.toPoints(e.height,s)*a]),u=[e.x,e.y,e.x+e.width,e.y+e.height];for(let t=0;t<u.length;t++)u[t]=this.toPoints(u[t],s);const c=r.config.map.scaleLine;if(c&&c.enabled){const r=function(t,e,n={}){const r=Object.assign({},SR,n),i=t.getCenter(),o=t.getProjection(),s=e===wR?It.DEGREES:It.METERS;if(!o)return{label:"",width:0,error:"no-projection"};let a=en(o,t.getResolution()*r.multiplier,i,s);o.getUnits()!==It.DEGREES&&o.getMetersPerUnit()&&s===It.METERS&&(a*=o.getMetersPerUnit());let l=r.minWidth*a,u="";if(e===wR){const t=Tt[It.DEGREES];o.getUnits()===It.DEGREES?l*=t:a/=t,l<t/60?(u="",a*=3600):l<t?(u="",a*=60):u=""}else if("imperial"===e)l<.9144?(u="in",a/=.0254):l<1609.344?(u="ft",a/=.3048):(u="mi",a/=1609.344);else if("nautical"===e)a/=1852,u="nm";else if("metric"===e)l<.001?(u="m",a*=1e6):l<1?(u="mm",a*=1e3):l<1e3?u="m":(u="km",a/=1e3);else{if("us"!==e)return{label:"",width:0,error:"bad-units"};l<.9144?(u="in",a*=39.37):l<1609.344?(u="ft",a/=.30480061):(u="mi",a/=1609.3472)}let c,h,p=3*Math.floor(Math.log(r.minWidth*a)/Math.log(10));for(;;){if(c=xR[(p%3+3)%3]*Math.pow(10,Math.floor(p/3)),h=Math.round(c/a),isNaN(h))return{label:"",width:0,error:"width-is-nan"};if(h>=r.minWidth)break;++p}return{label:`${c} ${u}`,width:h}}(o,c.units||"us",{multiplier:a}),i=1/this.toPoints(1,n.units),s=12*i,l=12*i;this.addDrawing(t,{type:"rect",filled:!0,x:e.x+s,y:e.y+e.height-s-l,width:r.width*i,height:l,strokeWidth:0,fill:[178,196,219]}),this.addText(t,{x:e.x+s+2*i,y:e.y+e.height-s-l/2,text:r.label,size:12,color:[238,238,238]},{baseline:"middle"})}t.setGeoArea(u,l)}addDrawing(t,e){let n="S";if(e.filled){n="DF";const r=e.fill?e.fill:[255,255,255];t.setFillColor(r[0],r[1],r[2])}const r=void 0!==e.strokeWidth?e.strokeWidth:this.toPoints(1,"px");if(r>0){const n=e.stroke?e.stroke:[0,0,0];t.setLineWidth(r),t.setDrawColor(n[0],n[1],n[2])}else n="F",t.setLineWidth(0);"rect"===e.type?t.rect(e.x,e.y,e.width,e.height,n):"ellipse"===e.type&&t.ellipse(e.x,e.y,e.rx,e.ry,n)}toPoints(t,e){let n=1;switch(e){case"pt":n=1;break;case"mm":n=72/25.4;break;case"cm":n=72/2.54;break;case"in":n=72;break;case"px":n=96/72;break;case"pc":case"em":n=12;break;case"ex":n=6;break;default:throw new Error("Invalid unit: "+e)}return t*n}makePDF(t){dR.API.setGeoArea||function(t){const e=function(t,e){const n=t.join(" "),r=e[0],i=e[2],o=e[1],s=e[3],a=[s,r,o,r,o,i,s,i].join(" "),l=this.internal.newAdditionalObject(),u=this.internal.newAdditionalObject(),c=this.internal.newAdditionalObject();return c.content='<< /EPSG 3857 /Type /PROJCS /WKT (PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]) >>',u.content="<< /Bounds [ 0 1 0 0 1 0 1 1 ] /GCS "+c.objId+" 0 R /GPTS [ "+a+" ] /LPTS [ 0 1 0 0 1 0 1 1 ] /Subtype /GEO /Type /Measure >>",l.content="<< /BBox [ "+n+" ] /Measure "+u.objId+" 0 R /Name (Layer) /Type /Viewport >>",this.internal.newAdditionalObject().content="<< /Name (User Generated Map) /Type /OCG >>",l.objId};t.setGeoArea=function(t,n){this.internal.events.subscribe("putPage",(function(){const r=e.call(this,t,n);this.internal.write("/VP [ "+r+" 0 R ]")}))}}(dR.API);const e=new dR(t.orientation,t.units,t.page);(function(t){if(!t)return __webpack_require__.e(61).then(__webpack_require__.bind(__webpack_require__,4617));fetch(t,{crossOrigin:"anonymous"}).then((t=>t.json()))})(this.props.fontIndexUrl).then((n=>{for(const t in n.FONTS){e.addFileToVFS(t,n.FONTS[t]);const r=t.replace(".ttf","").split("-");e.addFont(t,r[0],r[1].toLowerCase())}this.paintPDF(e,t)}))}paintPDF(t,e){let n=[];for(const r of e.elements)switch(r.type){case"text":this.addText(t,r);break;case"map":this.addMapImage(t,r,e);break;case"image":this.addImage(t,r);break;case"rect":case"ellipse":this.addDrawing(t,r);break;case"legend":n=n.concat(this.addLegends(t,r))}Promise.all(n).then((()=>{t.save("print_"+(new Date).getTime()+".pdf")}))}renderFooter(){const t=[this.renderOption({value:"dismiss",label:"Cancel"}),this.renderOption({value:"print",label:"Print"})];return Cn().createElement("div",{className:this.getFooterClass(2)},t)}getMapSize(){const t=this.state.layouts[this.state.layout],e=this.state.resolution;let n=null;for(const e of t.elements)if("map"===e.type){n=e;break}return{width:this.toPoints(n.width,t.units)*e,height:this.toPoints(n.height,t.units)*e}}renderLayoutSelect(t){return Cn().createElement("select",{onChange:t=>{this.setState({layout:t.target.value})},value:this.state.layout},this.state.layouts.map(((e,n)=>Cn().createElement("option",{key:e.label,value:n},t(`page-${e.label}`)))))}renderResolutionSelect(t){return Cn().createElement("select",{onChange:t=>{this.setState({resolution:t.target.value})},value:this.state.resolution},Cn().createElement("option",{value:"1"},t("resolution-normal")),Cn().createElement("option",{value:"1.5"},t("resolution-higher")),Cn().createElement("option",{value:"2"},t("resolution-highest")))}renderBody(){const t=ig(this.props.store).length;let e=!1;ig(this.props.store,!0).length<t&&(e=Cn().createElement("div",{className:"info-box"},"Some of the map layers cannot be printed. The map image in the resulting PDF may differ from what is seen in the map viewer."));const n=this.getMapSize();return Cn().createElement("div",null,e,Cn().createElement(Yy,null,(t=>Cn().createElement("div",null,Cn().createElement("p",null,Cn().createElement("label",null,`${t("map-title")}:`),Cn().createElement("input",{placeholder:t("map-title"),value:this.state.mapTitle,onChange:t=>{this.setState({mapTitle:t.target.value})}})),Cn().createElement("p",null,Cn().createElement("label",null,`${t("page-layout")}:`),this.renderLayoutSelect(t)),Cn().createElement("p",null,Cn().createElement("label",null,`${t("resolution")}:`),this.renderResolutionSelect(t))))),!this.props.printData&&Cn().createElement(_R,null),Cn().createElement("div",null,Cn().createElement(vR,{printData:this.props.printData})),Cn().createElement("div",{style:{visibility:"hidden",zIndex:-1,position:"absolute",top:0,left:0}},Cn().createElement(yR,{width:n.width,height:n.height,store:this.props.store})))}}),CR=({locations:t,onZoomTo:e})=>{const{t:n}=_y(),r=t.map((function(t,e){return Cn().createElement("option",{key:e,value:e},t.label)}));return Cn().createElement("select",{value:"default",onChange:n=>{e(t[n.target.value].extent)}},Cn().createElement("option",{disabled:!0,key:"default",value:"default"},n("zoomto-extent")),r)};CR.defaultProps={locations:[],onZoomTo:t=>{}};const NR=ar(void 0,(function(t){return{onZoomTo:e=>{t($h(e))}}}))(CR);class PR extends Sy{renderBody(){return Cn().createElement("div",null,Cn().createElement("label",null,"This url can be copied and pasted to make a bookmark:"),Cn().createElement("a",{href:""+document.location,target:"_blank",rel:"noopener noreferrer"}," Map Link"),Cn().createElement("textarea",{style:{width:"100%",height:"200px",fontFamily:"mono"},defaultValue:""+document.location}))}}PR.defaultProps={title:"Bookmark",options:[{value:"close",label:"Close"}]};const OR=ar((t=>({open:"bookmark"===t.ui.modal})),(t=>({onClose:()=>{t(xg(""))}})))(PR),TR=";",IR=t=>{if(t&&t.options){const e=t.options["always-on"];return!0===e||mc(e)}return!1};Lc(Ey.default);var MR={Catalog:_M,Map:iM,Toolbar:CM,ServiceManager:KM,Favorites:$M,VisibleLayers:JM,Grid:sk,Version:ak,CoordinateDisplay:lk,MeasureTool:LM,PrintModal:ER,JumpToExtent:NR,BookmarkModal:OR},kR={LocalStorageTracker:class{constructor(t){this.tracking=!1,this.store=t,t.subscribe((()=>{this.track()}))}startTracking(){this.tracking=!0}stopTracking(){this.tracking=!1}restoreFavorites(){let t=localStorage.getItem("favorites");if(t&&(t=t.split(";"),t&&t.length))for(const e of t){const t=wc(e),n=xc(e);this.store.dispatch(Jd(t,n,!0))}}restore(){this.restoreFavorites()}trackFavorites(){const t=this.store.getState();let e="",n="";for(const r in t.mapSources)for(const i of t.mapSources[r].layers)i.favorite&&(e+=n+r+"/"+i.name,n=";");this.lastFavorites!==e&&(localStorage.setItem("favorites",e),this.lastFavorites=e)}track(){return this.tracking&&this.trackFavorites(),!1}},HashTracker:class{constructor(t,e={}){this.tracking=!1,this.store=t,this.trackWindowChanges=this.trackWindowChanges.bind(this),t.subscribe((()=>{this.track()})),this.lastHash="",this.config={locationFormat:"zxy",...e},this.lastState={}}startTracking(){this.tracking=!0,window.addEventListener("hashchange",this.trackWindowChanges,!1)}stopTracking(){this.tracking=!1}restoreLayers(t){const e=t.split(TR),n=this.store.getState().mapSources,r=lg(n),i=[];for(let t=0,n=e.length;t<n;t++)r.indexOf(e[t])<0&&i.push(e[t]);for(let t=0,i=r.length;t<i;t++){const i=r[t],o=wc(i);!IR(n[o])&&e.indexOf(r[t])<0&&this.store.dispatch(dg(wc(i),xc(i),!1))}i.forEach((t=>this.store.dispatch(dg(wc(t),xc(t),!0))))}restoreLocation(t){const e=(t=>{if(t.indexOf(TR)>0){const e=t.split(TR);let n=[];try{n=e.map(parseFloat)}catch(t){return null}if(3===n.length)return{zoom:null,resolution:n[0],center:[n[1],n[2]]};if(4===n.length)return{bbox:n}}else if(t.indexOf("/")>0){const e=t.split("/");let n=[];try{n=e.map(parseFloat)}catch(t){return null}if(3===n.length){const t=sn([n[1],n[2]]);return{zoom:n[0],center:t}}}return null})(t);e&&(e.bbox?this.store.dispatch($h(e.bbox,"EPSG:4326")):this.store.dispatch(ep(e)))}restore(){const t=gc();t.query&&(t.query.loc&&this.restoreLocation(t.query.loc),t.query.on&&this.restoreLayers(t.query.on))}trackWindowChanges(){window.location.hash!=="#"+this.lastHash&&this.restore()}track(){if(this.tracking){let t="";const e=this.store.getState(),n=e.map,r=e.mapSources;n===this.lastState.map&&r===this.lastState.mapSources||(this.lastState={map:n,mapSources:r},t+="on="+(t=>{const e=lg(t),n=[];for(const r of e){const e=wc(r);IR(t[e])||n.push(r)}return n})(r).join(TR),t+="&loc="+((t,e,n)=>{if("zxy"===n&&t.resolution&&t.center)return[t.resolution.toFixed(4),t.center[0].toFixed(2),t.center[1].toFixed(2)].join(TR);if("bbox"===n&&t.resolution&&t.center)return pn(new tC({center:t.center,resolution:t.resolution}).calculateExtent([e.width,e.height]),"EPSG:3857","EPSG:4326").map((t=>t.toFixed(5))).join(TR);if("lonlat"===n&&(t.zoom||t.resolution)&&t.center){const e=an(t.center);let n=t.zoom;return n||(n=(new tC).getZoomForResolution(t.resolution)),[n.toFixed(2),e[0].toFixed(6),e[1].toFixed(6)].join("/")}})(n,e.cursor.size,this.config.locationFormat),this.lastHash!==t&&(this.lastHash=t,window.location.hash=t))}}}};!function(){for(var t=document.getElementsByTagName("script"),e="/",n=0;n<t.length;n++){var r=t[n].getAttribute("src");r&&(r.indexOf("geomoose.js")>=0||r.indexOf("geomoose.min.js")>=0)&&(e=r.split("/").slice(0,-1).join("/"))}"/"!==e.slice(-1)&&(e+="/"),__webpack_require__.p=e}()})(),__webpack_exports__})()}));